function t(t,e){const n=Object.create(null),i=t.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const e=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function n(t){return!!t||""===t}function i(t){if(b(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],o=T(r)?s(r):i(r);if(o)for(const t in o)e[t]=o[t]}return e}return T(t)||k(t)?t:void 0}const r=/;(?![^(]*\))/g,o=/:(.+)/;function s(t){const e={};return t.split(r).forEach((t=>{if(t){const n=t.split(o);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function a(t){let e="";if(T(t))e=t;else if(b(t))for(let n=0;n<t.length;n++){const i=a(t[n]);i&&(e+=i+" ")}else if(k(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const l=t=>null==t?"":b(t)||k(t)&&(t.toString===D||!C(t.toString))?JSON.stringify(t,u,2):String(t),u=(t,e)=>e&&e.__v_isRef?u(t,e.value):x(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:S(e)?{[`Set(${e.size})`]:[...e.values()]}:!k(e)||b(e)||A(e)?e:String(e),c={},h=[],d=()=>{},p=()=>!1,f=/^on[^a-z]/,g=t=>f.test(t),m=t=>t.startsWith("onUpdate:"),y=Object.assign,v=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},_=Object.prototype.hasOwnProperty,w=(t,e)=>_.call(t,e),b=Array.isArray,x=t=>"[object Map]"===P(t),S=t=>"[object Set]"===P(t),C=t=>"function"==typeof t,T=t=>"string"==typeof t,I=t=>"symbol"==typeof t,k=t=>null!==t&&"object"==typeof t,M=t=>k(t)&&C(t.then)&&C(t.catch),D=Object.prototype.toString,P=t=>D.call(t),A=t=>"[object Object]"===P(t),E=t=>T(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,O=t(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),R=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},N=/-(\w)/g,L=R((t=>t.replace(N,((t,e)=>e?e.toUpperCase():"")))),F=/\B([A-Z])/g,z=R((t=>t.replace(F,"-$1").toLowerCase())),B=R((t=>t.charAt(0).toUpperCase()+t.slice(1))),U=R((t=>t?`on${B(t)}`:"")),V=(t,e)=>!Object.is(t,e),H=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},W=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},j=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let q;const G=[];class Y{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&q&&(this.parent=q,this.index=(q.scopes||(q.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(G.push(this),q=this)}off(){this.active&&(G.pop(),q=G[G.length-1])}stop(t){if(this.active){if(this.effects.forEach((t=>t.stop())),this.cleanups.forEach((t=>t())),this.scopes&&this.scopes.forEach((t=>t.stop(!0))),this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}const $=t=>{const e=new Set(t);return e.w=0,e.n=0,e},X=t=>(t.w&Q)>0,K=t=>(t.n&Q)>0,Z=new WeakMap;let J=0,Q=1;const tt=[];let et;const nt=Symbol(""),it=Symbol("");class rt{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],function(t,e){(e=e||q)&&e.active&&e.effects.push(t)}(this,n)}run(){if(!this.active)return this.fn();if(!tt.includes(this))try{return tt.push(et=this),at.push(st),st=!0,Q=1<<++J,J<=30?(({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Q})(this):ot(this),this.fn()}finally{J<=30&&(t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const r=e[i];X(r)&&!K(r)?r.delete(t):e[n++]=r,r.w&=~Q,r.n&=~Q}e.length=n}})(this),Q=1<<--J,ut(),tt.pop();const t=tt.length;et=t>0?tt[t-1]:void 0}}stop(){this.active&&(ot(this),this.onStop&&this.onStop(),this.active=!1)}}function ot(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let st=!0;const at=[];function lt(){at.push(st),st=!1}function ut(){const t=at.pop();st=void 0===t||t}function ct(t,e,n){if(!ht())return;let i=Z.get(t);i||Z.set(t,i=new Map);let r=i.get(n);r||i.set(n,r=$()),dt(r)}function ht(){return st&&void 0!==et}function dt(t,e){let n=!1;J<=30?K(t)||(t.n|=Q,n=!X(t)):n=!t.has(et),n&&(t.add(et),et.deps.push(t))}function pt(t,e,n,i,r,o){const s=Z.get(t);if(!s)return;let a=[];if("clear"===e)a=[...s.values()];else if("length"===n&&b(t))s.forEach(((t,e)=>{("length"===e||e>=i)&&a.push(t)}));else switch(void 0!==n&&a.push(s.get(n)),e){case"add":b(t)?E(n)&&a.push(s.get("length")):(a.push(s.get(nt)),x(t)&&a.push(s.get(it)));break;case"delete":b(t)||(a.push(s.get(nt)),x(t)&&a.push(s.get(it)));break;case"set":x(t)&&a.push(s.get(nt))}if(1===a.length)a[0]&&ft(a[0]);else{const t=[];for(const e of a)e&&t.push(...e);ft($(t))}}function ft(t,e){for(const n of b(t)?t:[...t])(n!==et||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const gt=t("__proto__,__v_isRef,__isVue"),mt=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(I)),yt=xt(),vt=xt(!1,!0),_t=xt(!0),wt=bt();function bt(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=ae(this);for(let e=0,r=this.length;e<r;e++)ct(n,0,e+"");const i=n[e](...t);return-1===i||!1===i?n[e](...t.map(ae)):i}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){lt();const n=ae(this)[e].apply(this,t);return ut(),n}})),t}function xt(t=!1,e=!1){return function(n,i,r){if("__v_isReactive"===i)return!t;if("__v_isReadonly"===i)return t;if("__v_raw"===i&&r===(t?e?Qt:Jt:e?Zt:Kt).get(n))return n;const o=b(n);if(!t&&o&&w(wt,i))return Reflect.get(wt,i,r);const s=Reflect.get(n,i,r);if(I(i)?mt.has(i):gt(i))return s;if(t||ct(n,0,i),e)return s;if(de(s)){return!o||!E(i)?s.value:s}return k(s)?t?ne(s):ee(s):s}}function St(t=!1){return function(e,n,i,r){let o=e[n];if(!t&&(i=ae(i),o=ae(o),!b(e)&&de(o)&&!de(i)))return o.value=i,!0;const s=b(e)&&E(n)?Number(n)<e.length:w(e,n),a=Reflect.set(e,n,i,r);return e===ae(r)&&(s?V(i,o)&&pt(e,"set",n,i):pt(e,"add",n,i)),a}}const Ct={get:yt,set:St(),deleteProperty:function(t,e){const n=w(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&pt(t,"delete",e,void 0),i},has:function(t,e){const n=Reflect.has(t,e);return I(e)&&mt.has(e)||ct(t,0,e),n},ownKeys:function(t){return ct(t,0,b(t)?"length":nt),Reflect.ownKeys(t)}},Tt={get:_t,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},It=y({},Ct,{get:vt,set:St(!0)}),kt=t=>k(t)?ee(t):t,Mt=t=>k(t)?ne(t):t,Dt=t=>t,Pt=t=>Reflect.getPrototypeOf(t);function At(t,e,n=!1,i=!1){const r=ae(t=t.__v_raw),o=ae(e);e!==o&&!n&&ct(r,0,e),!n&&ct(r,0,o);const{has:s}=Pt(r),a=i?Dt:n?Mt:kt;return s.call(r,e)?a(t.get(e)):s.call(r,o)?a(t.get(o)):void(t!==r&&t.get(e))}function Et(t,e=!1){const n=this.__v_raw,i=ae(n),r=ae(t);return t!==r&&!e&&ct(i,0,t),!e&&ct(i,0,r),t===r?n.has(t):n.has(t)||n.has(r)}function Ot(t,e=!1){return t=t.__v_raw,!e&&ct(ae(t),0,nt),Reflect.get(t,"size",t)}function Rt(t){t=ae(t);const e=ae(this);return Pt(e).has.call(e,t)||(e.add(t),pt(e,"add",t,t)),this}function Nt(t,e){e=ae(e);const n=ae(this),{has:i,get:r}=Pt(n);let o=i.call(n,t);o||(t=ae(t),o=i.call(n,t));const s=r.call(n,t);return n.set(t,e),o?V(e,s)&&pt(n,"set",t,e):pt(n,"add",t,e),this}function Lt(t){const e=ae(this),{has:n,get:i}=Pt(e);let r=n.call(e,t);r||(t=ae(t),r=n.call(e,t)),i&&i.call(e,t);const o=e.delete(t);return r&&pt(e,"delete",t,void 0),o}function Ft(){const t=ae(this),e=0!==t.size,n=t.clear();return e&&pt(t,"clear",void 0,void 0),n}function zt(t,e){return function(n,i){const r=this,o=r.__v_raw,s=ae(o),a=e?Dt:t?Mt:kt;return!t&&ct(s,0,nt),o.forEach(((t,e)=>n.call(i,a(t),a(e),r)))}}function Bt(t,e,n){return function(...i){const r=this.__v_raw,o=ae(r),s=x(o),a="entries"===t||t===Symbol.iterator&&s,l="keys"===t&&s,u=r[t](...i),c=n?Dt:e?Mt:kt;return!e&&ct(o,0,l?it:nt),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:a?[c(t[0]),c(t[1])]:c(t),done:e}},[Symbol.iterator](){return this}}}}function Ut(t){return function(...e){return"delete"!==t&&this}}function Vt(){const t={get(t){return At(this,t)},get size(){return Ot(this)},has:Et,add:Rt,set:Nt,delete:Lt,clear:Ft,forEach:zt(!1,!1)},e={get(t){return At(this,t,!1,!0)},get size(){return Ot(this)},has:Et,add:Rt,set:Nt,delete:Lt,clear:Ft,forEach:zt(!1,!0)},n={get(t){return At(this,t,!0)},get size(){return Ot(this,!0)},has(t){return Et.call(this,t,!0)},add:Ut("add"),set:Ut("set"),delete:Ut("delete"),clear:Ut("clear"),forEach:zt(!0,!1)},i={get(t){return At(this,t,!0,!0)},get size(){return Ot(this,!0)},has(t){return Et.call(this,t,!0)},add:Ut("add"),set:Ut("set"),delete:Ut("delete"),clear:Ut("clear"),forEach:zt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((r=>{t[r]=Bt(r,!1,!1),n[r]=Bt(r,!0,!1),e[r]=Bt(r,!1,!0),i[r]=Bt(r,!0,!0)})),[t,n,e,i]}const[Ht,Wt,jt,qt]=Vt();function Gt(t,e){const n=e?t?qt:jt:t?Wt:Ht;return(e,i,r)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get(w(n,i)&&i in e?n:e,i,r)}const Yt={get:Gt(!1,!1)},$t={get:Gt(!1,!0)},Xt={get:Gt(!0,!1)},Kt=new WeakMap,Zt=new WeakMap,Jt=new WeakMap,Qt=new WeakMap;function te(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>P(t).slice(8,-1))(t))}function ee(t){return t&&t.__v_isReadonly?t:ie(t,!1,Ct,Yt,Kt)}function ne(t){return ie(t,!0,Tt,Xt,Jt)}function ie(t,e,n,i,r){if(!k(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=r.get(t);if(o)return o;const s=te(t);if(0===s)return t;const a=new Proxy(t,2===s?i:n);return r.set(t,a),a}function re(t){return oe(t)?re(t.__v_raw):!(!t||!t.__v_isReactive)}function oe(t){return!(!t||!t.__v_isReadonly)}function se(t){return re(t)||oe(t)}function ae(t){const e=t&&t.__v_raw;return e?ae(e):t}function le(t){return W(t,"__v_skip",!0),t}function ue(t){ht()&&((t=ae(t)).dep||(t.dep=$()),dt(t.dep))}function ce(t,e){(t=ae(t)).dep&&ft(t.dep)}const he=t=>k(t)?ee(t):t;function de(t){return Boolean(t&&!0===t.__v_isRef)}function pe(t){return me(t,!1)}function fe(t){return me(t,!0)}class ge{constructor(t,e){this._shallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:ae(t),this._value=e?t:he(t)}get value(){return ue(this),this._value}set value(t){t=this._shallow?t:ae(t),V(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:he(t),ce(this))}}function me(t,e){return de(t)?t:new ge(t,e)}function ye(t){return de(t)?t.value:t}const ve={get:(t,e,n)=>ye(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const r=t[e];return de(r)&&!de(n)?(r.value=n,!0):Reflect.set(t,e,n,i)}};function _e(t){return re(t)?t:new Proxy(t,ve)}class we{constructor(t,e){this._object=t,this._key=e,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}function be(t,e){const n=t[e];return de(n)?n:new we(t,e)}class xe{constructor(t,e,n){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new rt(t,(()=>{this._dirty||(this._dirty=!0,ce(this))})),this.__v_isReadonly=n}get value(){const t=ae(this);return ue(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Se(t,e){let n,i;C(t)?(n=t,i=d):(n=t.get,i=t.set);return new xe(n,i,C(t)||!t.set)}Promise.resolve();function Ce(t,e,...n){const i=t.vnode.props||c;let r=n;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in i){const t=`${"modelValue"===s?"model":s}Modifiers`,{number:e,trim:o}=i[t]||c;o?r=n.map((t=>t.trim())):e&&(r=n.map(j))}let a,l=i[a=U(e)]||i[a=U(L(e))];!l&&o&&(l=i[a=U(z(e))]),l&&Mi(l,t,6,r);const u=i[a+"Once"];if(u){if(t.emitted){if(t.emitted[a])return}else t.emitted={};t.emitted[a]=!0,Mi(u,t,6,r)}}function Te(t,e,n=!1){const i=e.emitsCache,r=i.get(t);if(void 0!==r)return r;const o=t.emits;let s={},a=!1;if(!C(t)){const i=t=>{const n=Te(t,e,!0);n&&(a=!0,y(s,n))};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}return o||a?(b(o)?o.forEach((t=>s[t]=null)):y(s,o),i.set(t,s),s):(i.set(t,null),null)}function Ie(t,e){return!(!t||!g(e))&&(e=e.slice(2).replace(/Once$/,""),w(t,e[0].toLowerCase()+e.slice(1))||w(t,z(e))||w(t,e))}let ke=null,Me=null;function De(t){const e=ke;return ke=t,Me=t&&t.type.__scopeId||null,e}function Pe(t,e=ke,n){if(!e)return t;if(t._n)return t;const i=(...n)=>{i._d&&$n(-1);const r=De(e),o=t(...n);return De(r),i._d&&$n(1),o};return i._n=!0,i._c=!0,i._d=!0,i}function Ae(t){const{type:e,vnode:n,proxy:i,withProxy:r,props:o,propsOptions:[s],slots:a,attrs:l,emit:u,render:c,renderCache:h,data:d,setupState:p,ctx:f,inheritAttrs:g}=t;let y;const v=De(t);try{let t;if(4&n.shapeFlag){const e=r||i;y=ui(c.call(e,e,h,o,p,d,f)),t=l}else{const n=e;0,y=ui(n.length>1?n(o,{attrs:l,slots:a,emit:u}):n(o,null)),t=e.props?l:Ee(l)}let v=y;if(t&&!1!==g){const e=Object.keys(t),{shapeFlag:n}=v;e.length&&7&n&&(s&&e.some(m)&&(t=Oe(t,s)),v=oi(v,t))}0,n.dirs&&(v.dirs=v.dirs?v.dirs.concat(n.dirs):n.dirs),n.transition&&(v.transition=n.transition),y=v}catch(_){jn.length=0,Di(_,t,1),y=ri(Hn)}return De(v),y}const Ee=t=>{let e;for(const n in t)("class"===n||"style"===n||g(n))&&((e||(e={}))[n]=t[n]);return e},Oe=(t,e)=>{const n={};for(const i in t)m(i)&&i.slice(9)in e||(n[i]=t[i]);return n};function Re(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let r=0;r<i.length;r++){const o=i[r];if(e[o]!==t[o]&&!Ie(n,o))return!0}return!1}function Ne(t,e){if(vi){let n=vi.provides;const i=vi.parent&&vi.parent.provides;i===n&&(n=vi.provides=Object.create(i)),n[t]=e}else;}function Le(t,e,n=!1){const i=vi||ke;if(i){const r=null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&C(e)?e.call(i.proxy):e}}function Fe(t){return C(t)?{setup:t,name:t.name}:t}const ze=t=>!!t.type.__asyncLoader,Be=t=>t.type.__isKeepAlive;function Ue(t,e){He(t,"a",e)}function Ve(t,e){He(t,"da",e)}function He(t,e,n=vi){const i=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(je(e,i,n),n){let t=n.parent;for(;t&&t.parent;)Be(t.parent.vnode)&&We(i,e,n,t),t=t.parent}}function We(t,e,n,i){const r=je(e,t,i,!0);Ze((()=>{v(i[e],r)}),n)}function je(t,e,n=vi,i=!1){if(n){const r=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...i)=>{if(n.isUnmounted)return;lt(),_i(n);const r=Mi(e,n,t,i);return wi(),ut(),r});return i?r.unshift(o):r.push(o),o}}const qe=t=>(e,n=vi)=>(!xi||"sp"===t)&&je(t,e,n),Ge=qe("bm"),Ye=qe("m"),$e=qe("bu"),Xe=qe("u"),Ke=qe("bum"),Ze=qe("um"),Je=qe("sp"),Qe=qe("rtg"),tn=qe("rtc");function en(t,e=vi){je("ec",t,e)}let nn=!0;function rn(t){const e=an(t),n=t.proxy,i=t.ctx;nn=!1,e.beforeCreate&&on(e.beforeCreate,t,"bc");const{data:r,computed:o,methods:s,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:p,beforeUpdate:f,updated:g,activated:m,deactivated:y,beforeDestroy:v,beforeUnmount:_,destroyed:w,unmounted:x,render:S,renderTracked:T,renderTriggered:I,errorCaptured:M,serverPrefetch:D,expose:P,inheritAttrs:A,components:E,directives:O,filters:R}=e;if(u&&function(t,e,n=d,i=!1){b(t)&&(t=hn(t));for(const r in t){const n=t[r];let o;o=k(n)?"default"in n?Le(n.from||r,n.default,!0):Le(n.from||r):Le(n),de(o)&&i?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[r]=o}}(u,i,null,t.appContext.config.unwrapInjectedRef),s)for(const d in s){const t=s[d];C(t)&&(i[d]=t.bind(n))}if(r){const e=r.call(n,n);k(e)&&(t.data=ee(e))}if(nn=!0,o)for(const b in o){const t=o[b],e=Se({get:C(t)?t.bind(n,n):C(t.get)?t.get.bind(n,n):d,set:!C(t)&&C(t.set)?t.set.bind(n):d});Object.defineProperty(i,b,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}if(a)for(const d in a)sn(a[d],i,n,d);if(l){const t=C(l)?l.call(n):l;Reflect.ownKeys(t).forEach((e=>{Ne(e,t[e])}))}function N(t,e){b(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(c&&on(c,t,"c"),N(Ge,h),N(Ye,p),N($e,f),N(Xe,g),N(Ue,m),N(Ve,y),N(en,M),N(tn,T),N(Qe,I),N(Ke,_),N(Ze,x),N(Je,D),b(P))if(P.length){const e=t.exposed||(t.exposed={});P.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});S&&t.render===d&&(t.render=S),null!=A&&(t.inheritAttrs=A),E&&(t.components=E),O&&(t.directives=O)}function on(t,e,n){Mi(b(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function sn(t,e,n,i){const r=i.includes(".")?nr(n,i):()=>n[i];if(T(t)){const n=e[t];C(n)&&Qi(r,n)}else if(C(t))Qi(r,t.bind(n));else if(k(t))if(b(t))t.forEach((t=>sn(t,e,n,i)));else{const i=C(t.handler)?t.handler.bind(n):e[t.handler];C(i)&&Qi(r,i,t)}}function an(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:r,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,a=o.get(e);let l;return a?l=a:r.length||n||i?(l={},r.length&&r.forEach((t=>ln(l,t,s,!0))),ln(l,e,s)):l=e,o.set(e,l),l}function ln(t,e,n,i=!1){const{mixins:r,extends:o}=e;o&&ln(t,o,n,!0),r&&r.forEach((e=>ln(t,e,n,!0)));for(const s in e)if(i&&"expose"===s);else{const i=un[s]||n&&n[s];t[s]=i?i(t[s],e[s]):e[s]}return t}const un={data:cn,props:pn,emits:pn,methods:pn,computed:pn,beforeCreate:dn,created:dn,beforeMount:dn,mounted:dn,beforeUpdate:dn,updated:dn,beforeDestroy:dn,beforeUnmount:dn,destroyed:dn,unmounted:dn,activated:dn,deactivated:dn,errorCaptured:dn,serverPrefetch:dn,components:pn,directives:pn,watch:function(t,e){if(!t)return e;if(!e)return t;const n=y(Object.create(null),t);for(const i in e)n[i]=dn(t[i],e[i]);return n},provide:cn,inject:function(t,e){return pn(hn(t),hn(e))}};function cn(t,e){return e?t?function(){return y(C(t)?t.call(this,this):t,C(e)?e.call(this,this):e)}:e:t}function hn(t){if(b(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function dn(t,e){return t?[...new Set([].concat(t,e))]:e}function pn(t,e){return t?y(y(Object.create(null),t),e):e}function fn(t,e,n,i=!1){const r={},o={};W(o,ti,1),t.propsDefaults=Object.create(null),gn(t,e,r,o);for(const s in t.propsOptions[0])s in r||(r[s]=void 0);n?t.props=i?r:ie(r,!1,It,$t,Zt):t.type.props?t.props=r:t.props=o,t.attrs=o}function gn(t,e,n,i){const[r,o]=t.propsOptions;let s,a=!1;if(e)for(let l in e){if(O(l))continue;const u=e[l];let c;r&&w(r,c=L(l))?o&&o.includes(c)?(s||(s={}))[c]=u:n[c]=u:Ie(t.emitsOptions,l)||u!==i[l]&&(i[l]=u,a=!0)}if(o){const e=ae(n),i=s||c;for(let s=0;s<o.length;s++){const a=o[s];n[a]=mn(r,e,a,i[a],t,!w(i,a))}}return a}function mn(t,e,n,i,r,o){const s=t[n];if(null!=s){const t=w(s,"default");if(t&&void 0===i){const t=s.default;if(s.type!==Function&&C(t)){const{propsDefaults:o}=r;n in o?i=o[n]:(_i(r),i=o[n]=t.call(null,e),wi())}else i=t}s[0]&&(o&&!t?i=!1:!s[1]||""!==i&&i!==z(n)||(i=!0))}return i}function yn(t,e,n=!1){const i=e.propsCache,r=i.get(t);if(r)return r;const o=t.props,s={},a=[];let l=!1;if(!C(t)){const i=t=>{l=!0;const[n,i]=yn(t,e,!0);y(s,n),i&&a.push(...i)};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}if(!o&&!l)return i.set(t,h),h;if(b(o))for(let h=0;h<o.length;h++){const t=L(o[h]);vn(t)&&(s[t]=c)}else if(o)for(const c in o){const t=L(c);if(vn(t)){const e=o[c],n=s[t]=b(e)||C(e)?{type:e}:e;if(n){const e=bn(Boolean,n.type),i=bn(String,n.type);n[0]=e>-1,n[1]=i<0||e<i,(e>-1||w(n,"default"))&&a.push(t)}}}const u=[s,a];return i.set(t,u),u}function vn(t){return"$"!==t[0]}function _n(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:null===t?"null":""}function wn(t,e){return _n(t)===_n(e)}function bn(t,e){return b(e)?e.findIndex((e=>wn(e,t))):C(e)&&wn(e,t)?0:-1}const xn=t=>"_"===t[0]||"$stable"===t,Sn=t=>b(t)?t.map(ui):[ui(t)],Cn=(t,e,n)=>{const i=Pe(((...t)=>Sn(e(...t))),n);return i._c=!1,i},Tn=(t,e,n)=>{const i=t._ctx;for(const r in t){if(xn(r))continue;const n=t[r];if(C(n))e[r]=Cn(0,n,i);else if(null!=n){const t=Sn(n);e[r]=()=>t}}},In=(t,e)=>{const n=Sn(e);t.slots.default=()=>n};function kn(t,e){if(null===ke)return t;const n=ke.proxy,i=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[t,o,s,a=c]=e[r];C(t)&&(t={mounted:t,updated:t}),t.deep&&ir(o),i.push({dir:t,instance:n,value:o,oldValue:void 0,arg:s,modifiers:a})}return t}function Mn(t,e,n,i){const r=t.dirs,o=e&&e.dirs;for(let s=0;s<r.length;s++){const a=r[s];o&&(a.oldValue=o[s].value);let l=a.dir[i];l&&(lt(),Mi(l,n,8,[t.el,a,t,e]),ut())}}function Dn(){return{app:null,config:{isNativeTag:p,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Pn=0;function An(t,e){return function(n,i=null){null==i||k(i)||(i=null);const r=Dn(),o=new Set;let s=!1;const a=r.app={_uid:Pn++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:or,get config(){return r.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&C(t.install)?(o.add(t),t.install(a,...e)):C(t)&&(o.add(t),t(a,...e))),a),mixin:t=>(r.mixins.includes(t)||r.mixins.push(t),a),component:(t,e)=>e?(r.components[t]=e,a):r.components[t],directive:(t,e)=>e?(r.directives[t]=e,a):r.directives[t],mount(o,l,u){if(!s){const c=ri(n,i);return c.appContext=r,l&&e?e(c,o):t(c,o,u),s=!0,a._container=o,o.__vue_app__=a,c.component.proxy}},unmount(){s&&(t(null,a._container),delete a._container.__vue_app__)},provide:(t,e)=>(r.provides[t]=e,a)};return a}}const En=function(t,e){e&&e.pendingBranch?b(t)?e.effects.push(...t):e.effects.push(t):Gi(t,zi,Fi,Bi)};function On(t){return function(t,e){const{insert:n,remove:i,patchProp:r,createElement:o,createText:s,createComment:a,setText:l,setElementText:u,parentNode:p,nextSibling:f,setScopeId:g=d,cloneNode:m,insertStaticContent:v}=t,_=(t,e,n,i=null,r=null,o=null,s=!1,a=null,l=!!e.dynamicChildren)=>{if(t===e)return;t&&!Qn(t,e)&&(i=et(t),K(t,r,o,!0),t=null),-2===e.patchFlag&&(l=!1,e.dynamicChildren=null);const{type:u,ref:c,shapeFlag:h}=e;switch(u){case Vn:b(t,e,n,i);break;case Hn:x(t,e,n,i);break;case Wn:null==t&&S(e,n,i,s);break;case Un:N(t,e,n,i,r,o,s,a,l);break;default:1&h?I(t,e,n,i,r,o,s,a,l):6&h?F(t,e,n,i,r,o,s,a,l):(64&h||128&h)&&u.process(t,e,n,i,r,o,s,a,l,it)}null!=c&&r&&Rn(c,t&&t.ref,o,e||t,!e)},b=(t,e,i,r)=>{if(null==t)n(e.el=s(e.children),i,r);else{const n=e.el=t.el;e.children!==t.children&&l(n,e.children)}},x=(t,e,i,r)=>{null==t?n(e.el=a(e.children||""),i,r):e.el=t.el},S=(t,e,n,i)=>{[t.el,t.anchor]=v(t.children,e,n,i)},C=({el:t,anchor:e},i,r)=>{let o;for(;t&&t!==e;)o=f(t),n(t,i,r),t=o;n(e,i,r)},T=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=f(t),i(t),t=n;i(e)},I=(t,e,n,i,r,o,s,a,l)=>{s=s||"svg"===e.type,null==t?k(e,n,i,r,o,s,a,l):A(t,e,r,o,s,a,l)},k=(t,e,i,s,a,l,c,h)=>{let d,p;const{type:f,props:g,shapeFlag:y,transition:v,patchFlag:_,dirs:w}=t;if(t.el&&void 0!==m&&-1===_)d=t.el=m(t.el);else{if(d=t.el=o(t.type,l,g&&g.is,g),8&y?u(d,t.children):16&y&&P(t.children,d,null,s,a,l&&"foreignObject"!==f,c,h),w&&Mn(t,null,s,"created"),g){for(const e in g)"value"===e||O(e)||r(d,e,null,g[e],l,t.children,s,a,tt);"value"in g&&r(d,"value",null,g.value),(p=g.onVnodeBeforeMount)&&Nn(p,s,t)}D(d,t,t.scopeId,c,s)}w&&Mn(t,null,s,"beforeMount");const b=(!a||a&&!a.pendingBranch)&&v&&!v.persisted;b&&v.beforeEnter(d),n(d,e,i),((p=g&&g.onVnodeMounted)||b||w)&&En((()=>{p&&Nn(p,s,t),b&&v.enter(d),w&&Mn(t,null,s,"mounted")}),a)},D=(t,e,n,i,r)=>{if(n&&g(t,n),i)for(let o=0;o<i.length;o++)g(t,i[o]);if(r){if(e===r.subTree){const e=r.vnode;D(t,e,e.scopeId,e.slotScopeIds,r.parent)}}},P=(t,e,n,i,r,o,s,a,l=0)=>{for(let u=l;u<t.length;u++){const l=t[u]=a?ci(t[u]):ui(t[u]);_(null,l,e,n,i,r,o,s,a)}},A=(t,e,n,i,o,s,a)=>{const l=e.el=t.el;let{patchFlag:h,dynamicChildren:d,dirs:p}=e;h|=16&t.patchFlag;const f=t.props||c,g=e.props||c;let m;(m=g.onVnodeBeforeUpdate)&&Nn(m,n,e,t),p&&Mn(e,t,n,"beforeUpdate");const y=o&&"foreignObject"!==e.type;if(d?E(t.dynamicChildren,d,l,n,i,y,s):a||q(t,e,l,null,n,i,y,s,!1),h>0){if(16&h)R(l,e,f,g,n,i,o);else if(2&h&&f.class!==g.class&&r(l,"class",null,g.class,o),4&h&&r(l,"style",f.style,g.style,o),8&h){const s=e.dynamicProps;for(let e=0;e<s.length;e++){const a=s[e],u=f[a],c=g[a];c===u&&"value"!==a||r(l,a,u,c,o,t.children,n,i,tt)}}1&h&&t.children!==e.children&&u(l,e.children)}else a||null!=d||R(l,e,f,g,n,i,o);((m=g.onVnodeUpdated)||p)&&En((()=>{m&&Nn(m,n,e,t),p&&Mn(e,t,n,"updated")}),i)},E=(t,e,n,i,r,o,s)=>{for(let a=0;a<e.length;a++){const l=t[a],u=e[a],c=l.el&&(l.type===Un||!Qn(l,u)||70&l.shapeFlag)?p(l.el):n;_(l,u,c,null,i,r,o,s,!0)}},R=(t,e,n,i,o,s,a)=>{if(n!==i){for(const l in i){if(O(l))continue;const u=i[l],c=n[l];u!==c&&"value"!==l&&r(t,l,c,u,a,e.children,o,s,tt)}if(n!==c)for(const l in n)O(l)||l in i||r(t,l,n[l],null,a,e.children,o,s,tt);"value"in i&&r(t,"value",n.value,i.value)}},N=(t,e,i,r,o,a,l,u,c)=>{const h=e.el=t?t.el:s(""),d=e.anchor=t?t.anchor:s("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:g}=e;g&&(u=u?u.concat(g):g),null==t?(n(h,i,r),n(d,i,r),P(e.children,i,d,o,a,l,u,c)):p>0&&64&p&&f&&t.dynamicChildren?(E(t.dynamicChildren,f,i,o,a,l,u),(null!=e.key||o&&e===o.subTree)&&Ln(t,e,!0)):q(t,e,i,d,o,a,l,u,c)},F=(t,e,n,i,r,o,s,a,l)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?r.ctx.activate(e,n,i,s,l):B(e,n,i,r,o,s,l):U(t,e,l)},B=(t,e,n,i,r,o,s)=>{const a=t.component=function(t,e,n){const i=t.type,r=(e?e.appContext:t.appContext)||mi,o={uid:yi++,vnode:t,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,update:null,scope:new Y(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:yn(i,r),emitsOptions:Te(i,r),emit:null,emitted:null,propsDefaults:c,inheritAttrs:i.inheritAttrs,ctx:c,data:c,props:c,attrs:c,slots:c,refs:c,setupState:c,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};o.ctx={_:o},o.root=e?e.root:o,o.emit=Ce.bind(null,o),t.ce&&t.ce(o);return o}(t,i,r);if(Be(t)&&(a.ctx.renderer=it),function(t,e=!1){xi=e;const{props:n,children:i}=t.vnode,r=bi(t);fn(t,n,r,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=ae(e),W(e,"_",n)):Tn(e,t.slots={})}else t.slots={},e&&In(t,e);W(t.slots,ti,1)})(t,i);const o=r?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=le(new Proxy(t.ctx,gi));const{setup:i}=n;if(i){const n=t.setupContext=i.length>1?function(t){const e=e=>{t.exposed=e||{}};let n;return{get attrs(){return n||(n=function(t){return new Proxy(t.attrs,{get:(e,n)=>(ct(t,0,"$attrs"),e[n])})}(t))},slots:t.slots,emit:t.emit,expose:e}}(t):null;_i(t),lt();const r=ki(i,t,0,[t.props,n]);if(ut(),wi(),M(r)){if(r.then(wi,wi),e)return r.then((e=>{Si(t,e)})).catch((e=>{Di(e,t,0)}));t.asyncDep=r}else Si(t,r)}else Ci(t)}(t,e):void 0;xi=!1}(a),a.asyncDep){if(r&&r.registerDep(a,V),!t.el){const t=a.subTree=ri(Hn);x(null,t,e,n)}}else V(a,t,e,n,r,o,s)},U=(t,e,n)=>{const i=e.component=t.component;if(function(t,e,n){const{props:i,children:r,component:o}=t,{props:s,children:a,patchFlag:l}=e,u=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&l>=0))return!(!r&&!a||a&&a.$stable)||i!==s&&(i?!s||Re(i,s,u):!!s);if(1024&l)return!0;if(16&l)return i?Re(i,s,u):!!s;if(8&l){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==i[n]&&!Ie(u,n))return!0}}return!1}(t,e,n)){if(i.asyncDep&&!i.asyncResolved)return void j(i,e,n);i.next=e,function(t){const e=Ei.indexOf(t);e>Oi&&Ei.splice(e,1)}(i.update),i.update()}else e.component=t.component,e.el=t.el,i.vnode=e},V=(t,e,n,i,r,o,s)=>{const a=new rt((()=>{if(t.isMounted){let e,{next:n,bu:i,u:l,parent:u,vnode:c}=t,h=n;a.allowRecurse=!1,n?(n.el=c.el,j(t,n,s)):n=c,i&&H(i),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Nn(e,u,n,c),a.allowRecurse=!0;const d=Ae(t),f=t.subTree;t.subTree=d,_(f,d,p(f.el),et(f),t,r,o),n.el=d.el,null===h&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,d.el),l&&En(l,r),(e=n.props&&n.props.onVnodeUpdated)&&En((()=>Nn(e,u,n,c)),r)}else{let s;const{el:l,props:u}=e,{bm:c,m:h,parent:d}=t,p=ze(e);if(a.allowRecurse=!1,c&&H(c),!p&&(s=u&&u.onVnodeBeforeMount)&&Nn(s,d,e),a.allowRecurse=!0,l&&st){const n=()=>{t.subTree=Ae(t),st(l,t.subTree,t,r,null)};p?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{const s=t.subTree=Ae(t);_(null,s,n,i,t,r,o),e.el=s.el}if(h&&En(h,r),!p&&(s=u&&u.onVnodeMounted)){const t=e;En((()=>Nn(s,d,t)),r)}256&e.shapeFlag&&t.a&&En(t.a,r),t.isMounted=!0,e=n=i=null}}),(()=>ji(t.update)),t.scope),l=t.update=a.run.bind(a);l.id=t.uid,a.allowRecurse=l.allowRecurse=!0,l()},j=(t,e,n)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,i){const{props:r,attrs:o,vnode:{patchFlag:s}}=t,a=ae(r),[l]=t.propsOptions;let u=!1;if(!(i||s>0)||16&s){let i;gn(t,e,r,o)&&(u=!0);for(const o in a)e&&(w(e,o)||(i=z(o))!==o&&w(e,i))||(l?!n||void 0===n[o]&&void 0===n[i]||(r[o]=mn(l,a,o,void 0,t,!0)):delete r[o]);if(o!==a)for(const t in o)e&&w(e,t)||(delete o[t],u=!0)}else if(8&s){const n=t.vnode.dynamicProps;for(let i=0;i<n.length;i++){let s=n[i];const c=e[s];if(l)if(w(o,s))c!==o[s]&&(o[s]=c,u=!0);else{const e=L(s);r[e]=mn(l,a,e,c,t,!1)}else c!==o[s]&&(o[s]=c,u=!0)}}u&&pt(t,"set","$attrs")}(t,e.props,i,n),((t,e,n)=>{const{vnode:i,slots:r}=t;let o=!0,s=c;if(32&i.shapeFlag){const t=e._;t?n&&1===t?o=!1:(y(r,e),n||1!==t||delete r._):(o=!e.$stable,Tn(e,r)),s=e}else e&&(In(t,e),s={default:1});if(o)for(const a in r)xn(a)||a in s||delete r[a]})(t,e.children,n),lt(),Yi(void 0,t.update),ut()},q=(t,e,n,i,r,o,s,a,l=!1)=>{const c=t&&t.children,h=t?t.shapeFlag:0,d=e.children,{patchFlag:p,shapeFlag:f}=e;if(p>0){if(128&p)return void $(c,d,n,i,r,o,s,a,l);if(256&p)return void G(c,d,n,i,r,o,s,a,l)}8&f?(16&h&&tt(c,r,o),d!==c&&u(n,d)):16&h?16&f?$(c,d,n,i,r,o,s,a,l):tt(c,r,o,!0):(8&h&&u(n,""),16&f&&P(d,n,i,r,o,s,a,l))},G=(t,e,n,i,r,o,s,a,l)=>{e=e||h;const u=(t=t||h).length,c=e.length,d=Math.min(u,c);let p;for(p=0;p<d;p++){const i=e[p]=l?ci(e[p]):ui(e[p]);_(t[p],i,n,null,r,o,s,a,l)}u>c?tt(t,r,o,!0,!1,d):P(e,n,i,r,o,s,a,l,d)},$=(t,e,n,i,r,o,s,a,l)=>{let u=0;const c=e.length;let d=t.length-1,p=c-1;for(;u<=d&&u<=p;){const i=t[u],c=e[u]=l?ci(e[u]):ui(e[u]);if(!Qn(i,c))break;_(i,c,n,null,r,o,s,a,l),u++}for(;u<=d&&u<=p;){const i=t[d],u=e[p]=l?ci(e[p]):ui(e[p]);if(!Qn(i,u))break;_(i,u,n,null,r,o,s,a,l),d--,p--}if(u>d){if(u<=p){const t=p+1,h=t<c?e[t].el:i;for(;u<=p;)_(null,e[u]=l?ci(e[u]):ui(e[u]),n,h,r,o,s,a,l),u++}}else if(u>p)for(;u<=d;)K(t[u],r,o,!0),u++;else{const f=u,g=u,m=new Map;for(u=g;u<=p;u++){const t=e[u]=l?ci(e[u]):ui(e[u]);null!=t.key&&m.set(t.key,u)}let y,v=0;const w=p-g+1;let b=!1,x=0;const S=new Array(w);for(u=0;u<w;u++)S[u]=0;for(u=f;u<=d;u++){const i=t[u];if(v>=w){K(i,r,o,!0);continue}let c;if(null!=i.key)c=m.get(i.key);else for(y=g;y<=p;y++)if(0===S[y-g]&&Qn(i,e[y])){c=y;break}void 0===c?K(i,r,o,!0):(S[c-g]=u+1,c>=x?x=c:b=!0,_(i,e[c],n,null,r,o,s,a,l),v++)}const C=b?function(t){const e=t.slice(),n=[0];let i,r,o,s,a;const l=t.length;for(i=0;i<l;i++){const l=t[i];if(0!==l){if(r=n[n.length-1],t[r]<l){e[i]=r,n.push(i);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,t[n[a]]<l?o=a+1:s=a;l<t[n[o]]&&(o>0&&(e[i]=n[o-1]),n[o]=i)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=e[s];return n}(S):h;for(y=C.length-1,u=w-1;u>=0;u--){const t=g+u,h=e[t],d=t+1<c?e[t+1].el:i;0===S[u]?_(null,h,n,d,r,o,s,a,l):b&&(y<0||u!==C[y]?X(h,n,d,2):y--)}}},X=(t,e,i,r,o=null)=>{const{el:s,type:a,transition:l,children:u,shapeFlag:c}=t;if(6&c)return void X(t.component.subTree,e,i,r);if(128&c)return void t.suspense.move(e,i,r);if(64&c)return void a.move(t,e,i,it);if(a===Un){n(s,e,i);for(let t=0;t<u.length;t++)X(u[t],e,i,r);return void n(t.anchor,e,i)}if(a===Wn)return void C(t,e,i);if(2!==r&&1&c&&l)if(0===r)l.beforeEnter(s),n(s,e,i),En((()=>l.enter(s)),o);else{const{leave:t,delayLeave:r,afterLeave:o}=l,a=()=>n(s,e,i),u=()=>{t(s,(()=>{a(),o&&o()}))};r?r(s,a,u):u()}else n(s,e,i)},K=(t,e,n,i=!1,r=!1)=>{const{type:o,props:s,ref:a,children:l,dynamicChildren:u,shapeFlag:c,patchFlag:h,dirs:d}=t;if(null!=a&&Rn(a,null,n,t,!0),256&c)return void e.ctx.deactivate(t);const p=1&c&&d,f=!ze(t);let g;if(f&&(g=s&&s.onVnodeBeforeUnmount)&&Nn(g,e,t),6&c)Q(t.component,n,i);else{if(128&c)return void t.suspense.unmount(n,i);p&&Mn(t,null,e,"beforeUnmount"),64&c?t.type.remove(t,e,n,r,it,i):u&&(o!==Un||h>0&&64&h)?tt(u,e,n,!1,!0):(o===Un&&384&h||!r&&16&c)&&tt(l,e,n),i&&Z(t)}(f&&(g=s&&s.onVnodeUnmounted)||p)&&En((()=>{g&&Nn(g,e,t),p&&Mn(t,null,e,"unmounted")}),n)},Z=t=>{const{type:e,el:n,anchor:r,transition:o}=t;if(e===Un)return void J(n,r);if(e===Wn)return void T(t);const s=()=>{i(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:i}=o,r=()=>e(n,s);i?i(t.el,s,r):r()}else s()},J=(t,e)=>{let n;for(;t!==e;)n=f(t),i(t),t=n;i(e)},Q=(t,e,n)=>{const{bum:i,scope:r,update:o,subTree:s,um:a}=t;i&&H(i),r.stop(),o&&(o.active=!1,K(s,t,e,n)),a&&En(a,e),En((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},tt=(t,e,n,i=!1,r=!1,o=0)=>{for(let s=o;s<t.length;s++)K(t[s],e,n,i,r)},et=t=>6&t.shapeFlag?et(t.component.subTree):128&t.shapeFlag?t.suspense.next():f(t.anchor||t.el),nt=(t,e,n)=>{null==t?e._vnode&&K(e._vnode,null,null,!0):_(e._vnode||null,t,e,null,null,null,n),$i(),e._vnode=t},it={p:_,um:K,m:X,r:Z,mt:B,mc:P,pc:q,pbc:E,n:et,o:t};let ot,st;e&&([ot,st]=e(it));return{render:nt,hydrate:ot,createApp:An(nt,ot)}}(t)}function Rn(t,e,n,i,r=!1){if(b(t))return void t.forEach(((t,o)=>Rn(t,e&&(b(e)?e[o]:e),n,i,r)));if(ze(i)&&!r)return;const o=4&i.shapeFlag?Ti(i.component)||i.component.proxy:i.el,s=r?null:o,{i:a,r:l}=t,u=e&&e.r,h=a.refs===c?a.refs={}:a.refs,d=a.setupState;if(null!=u&&u!==l&&(T(u)?(h[u]=null,w(d,u)&&(d[u]=null)):de(u)&&(u.value=null)),T(l)){const t=()=>{h[l]=s,w(d,l)&&(d[l]=s)};s?(t.id=-1,En(t,n)):t()}else if(de(l)){const t=()=>{l.value=s};s?(t.id=-1,En(t,n)):t()}else C(l)&&ki(l,a,12,[s,h])}function Nn(t,e,n,i=null){Mi(t,e,7,[n,i])}function Ln(t,e,n=!1){const i=t.children,r=e.children;if(b(i)&&b(r))for(let o=0;o<i.length;o++){const t=i[o];let e=r[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=r[o]=ci(r[o]),e.el=t.el),n||Ln(t,e))}}function Fn(t,e){return function(t,e,n=!0,i=!1){const r=ke||vi;if(r){const n=r.type;if("components"===t){const t=Ii(n);if(t&&(t===e||t===L(e)||t===B(L(e))))return n}const o=Bn(r[t]||n[t],e)||Bn(r.appContext[t],e);return!o&&i?n:o}}("components",t,!0,e)||t}const zn=Symbol();function Bn(t,e){return t&&(t[e]||t[L(e)]||t[B(L(e))])}const Un=Symbol(void 0),Vn=Symbol(void 0),Hn=Symbol(void 0),Wn=Symbol(void 0),jn=[];let qn=null;function Gn(t=!1){jn.push(qn=t?null:[])}let Yn=1;function $n(t){Yn+=t}function Xn(t){return t.dynamicChildren=Yn>0?qn||h:null,jn.pop(),qn=jn[jn.length-1]||null,Yn>0&&qn&&qn.push(t),t}function Kn(t,e,n,i,r,o){return Xn(ii(t,e,n,i,r,o,!0))}function Zn(t,e,n,i,r){return Xn(ri(t,e,n,i,r,!0))}function Jn(t){return!!t&&!0===t.__v_isVNode}function Qn(t,e){return t.type===e.type&&t.key===e.key}const ti="__vInternal",ei=({key:t})=>null!=t?t:null,ni=({ref:t})=>null!=t?T(t)||de(t)||C(t)?{i:ke,r:t}:t:null;function ii(t,e=null,n=null,i=0,r=null,o=(t===Un?0:1),s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ei(e),ref:e&&ni(e),scopeId:Me,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(hi(l,n),128&o&&t.normalize(l)):n&&(l.shapeFlag|=T(n)?8:16),Yn>0&&!s&&qn&&(l.patchFlag>0||6&o)&&32!==l.patchFlag&&qn.push(l),l}const ri=function(t,e=null,n=null,r=0,o=null,s=!1){t&&t!==zn||(t=Hn);if(Jn(t)){const i=oi(t,e,!0);return n&&hi(i,n),i}l=t,C(l)&&"__vccOpts"in l&&(t=t.__vccOpts);var l;if(e){e=function(t){return t?se(t)||ti in t?y({},t):t:null}(e);let{class:t,style:n}=e;t&&!T(t)&&(e.class=a(t)),k(n)&&(se(n)&&!b(n)&&(n=y({},n)),e.style=i(n))}const u=T(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:k(t)?4:C(t)?2:0;return ii(t,e,n,r,o,u,s,!0)};function oi(t,e,n=!1){const{props:r,ref:o,patchFlag:s,children:l}=t,u=e?function(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)if("class"===t)e.class!==r.class&&(e.class=a([e.class,r.class]));else if("style"===t)e.style=i([e.style,r.style]);else if(g(t)){const n=e[t],i=r[t];n!==i&&(e[t]=n?[].concat(n,i):i)}else""!==t&&(e[t]=r[t])}return e}(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&ei(u),ref:e&&e.ref?n&&o?b(o)?o.concat(ni(e)):[o,ni(e)]:ni(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Un?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&oi(t.ssContent),ssFallback:t.ssFallback&&oi(t.ssFallback),el:t.el,anchor:t.anchor}}function si(t=" ",e=0){return ri(Vn,null,t,e)}function ai(t,e){const n=ri(Wn,null,t);return n.staticCount=e,n}function li(t="",e=!1){return e?(Gn(),Zn(Hn,null,t)):ri(Hn,null,t)}function ui(t){return null==t||"boolean"==typeof t?ri(Hn):b(t)?ri(Un,null,t.slice()):"object"==typeof t?ci(t):ri(Vn,null,String(t))}function ci(t){return null===t.el||t.memo?t:oi(t)}function hi(t,e){let n=0;const{shapeFlag:i}=t;if(null==e)e=null;else if(b(e))n=16;else if("object"==typeof e){if(65&i){const n=e.default;return void(n&&(n._c&&(n._d=!1),hi(t,n()),n._c&&(n._d=!0)))}{n=32;const i=e._;i||ti in e?3===i&&ke&&(1===ke.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=ke}}else C(e)?(e={default:e,_ctx:ke},n=32):(e=String(e),64&i?(n=16,e=[si(e)]):n=8);t.children=e,t.shapeFlag|=n}function di(t,e,n,i){let r;const o=n&&n[i];if(b(t)||T(t)){r=new Array(t.length);for(let n=0,i=t.length;n<i;n++)r[n]=e(t[n],n,void 0,o&&o[n])}else if("number"==typeof t){r=new Array(t);for(let n=0;n<t;n++)r[n]=e(n+1,n,void 0,o&&o[n])}else if(k(t))if(t[Symbol.iterator])r=Array.from(t,((t,n)=>e(t,n,void 0,o&&o[n])));else{const n=Object.keys(t);r=new Array(n.length);for(let i=0,s=n.length;i<s;i++){const s=n[i];r[i]=e(t[s],s,i,o&&o[i])}}else r=[];return n&&(n[i]=r),r}const pi=t=>t?bi(t)?Ti(t)||t.proxy:pi(t.parent):null,fi=y(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>pi(t.parent),$root:t=>pi(t.root),$emit:t=>t.emit,$options:t=>an(t),$forceUpdate:t=>()=>ji(t.update),$nextTick:t=>Wi.bind(t.proxy),$watch:t=>er.bind(t)}),gi={get({_:t},e){const{ctx:n,setupState:i,data:r,props:o,accessCache:s,type:a,appContext:l}=t;let u;if("$"!==e[0]){const a=s[e];if(void 0!==a)switch(a){case 0:return i[e];case 1:return r[e];case 3:return n[e];case 2:return o[e]}else{if(i!==c&&w(i,e))return s[e]=0,i[e];if(r!==c&&w(r,e))return s[e]=1,r[e];if((u=t.propsOptions[0])&&w(u,e))return s[e]=2,o[e];if(n!==c&&w(n,e))return s[e]=3,n[e];nn&&(s[e]=4)}}const h=fi[e];let d,p;return h?("$attrs"===e&&ct(t,0,e),h(t)):(d=a.__cssModules)&&(d=d[e])?d:n!==c&&w(n,e)?(s[e]=3,n[e]):(p=l.config.globalProperties,w(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:i,setupState:r,ctx:o}=t;if(r!==c&&w(r,e))r[e]=n;else if(i!==c&&w(i,e))i[e]=n;else if(w(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:r,propsOptions:o}},s){let a;return void 0!==n[s]||t!==c&&w(t,s)||e!==c&&w(e,s)||(a=o[0])&&w(a,s)||w(i,s)||w(fi,s)||w(r.config.globalProperties,s)}},mi=Dn();let yi=0;let vi=null;const _i=t=>{vi=t,t.scope.on()},wi=()=>{vi&&vi.scope.off(),vi=null};function bi(t){return 4&t.vnode.shapeFlag}let xi=!1;function Si(t,e,n){C(e)?t.render=e:k(e)&&(t.setupState=_e(e)),Ci(t)}function Ci(t,e,n){const i=t.type;t.render||(t.render=i.render||d),_i(t),lt(),rn(t),ut(),wi()}function Ti(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(_e(le(t.exposed)),{get:(e,n)=>n in e?e[n]:n in fi?fi[n](t):void 0}))}function Ii(t){return C(t)&&t.displayName||t.name}function ki(t,e,n,i){let r;try{r=i?t(...i):t()}catch(o){Di(o,e,n)}return r}function Mi(t,e,n,i){if(C(t)){const r=ki(t,e,n,i);return r&&M(r)&&r.catch((t=>{Di(t,e,n)})),r}const r=[];for(let o=0;o<t.length;o++)r.push(Mi(t[o],e,n,i));return r}function Di(t,e,n,i=!0){e&&e.vnode;if(e){let i=e.parent;const r=e.proxy,o=n;for(;i;){const e=i.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,r,o))return;i=i.parent}const s=e.appContext.config.errorHandler;if(s)return void ki(s,null,10,[t,r,o])}!function(t,e,n,i=!0){console.error(t)}(t,0,0,i)}let Pi=!1,Ai=!1;const Ei=[];let Oi=0;const Ri=[];let Ni=null,Li=0;const Fi=[];let zi=null,Bi=0;const Ui=Promise.resolve();let Vi=null,Hi=null;function Wi(t){const e=Vi||Ui;return t?e.then(this?t.bind(this):t):e}function ji(t){Ei.length&&Ei.includes(t,Pi&&t.allowRecurse?Oi+1:Oi)||t===Hi||(null==t.id?Ei.push(t):Ei.splice(function(t){let e=Oi+1,n=Ei.length;for(;e<n;){const i=e+n>>>1;Xi(Ei[i])<t?e=i+1:n=i}return e}(t.id),0,t),qi())}function qi(){Pi||Ai||(Ai=!0,Vi=Ui.then(Ki))}function Gi(t,e,n,i){b(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?i+1:i)||n.push(t),qi()}function Yi(t,e=null){if(Ri.length){for(Hi=e,Ni=[...new Set(Ri)],Ri.length=0,Li=0;Li<Ni.length;Li++)Ni[Li]();Ni=null,Li=0,Hi=null,Yi(t,e)}}function $i(t){if(Fi.length){const t=[...new Set(Fi)];if(Fi.length=0,zi)return void zi.push(...t);for(zi=t,zi.sort(((t,e)=>Xi(t)-Xi(e))),Bi=0;Bi<zi.length;Bi++)zi[Bi]();zi=null,Bi=0}}const Xi=t=>null==t.id?1/0:t.id;function Ki(t){Ai=!1,Pi=!0,Yi(t),Ei.sort(((t,e)=>Xi(t)-Xi(e)));try{for(Oi=0;Oi<Ei.length;Oi++){const t=Ei[Oi];t&&!1!==t.active&&ki(t,null,14)}}finally{Oi=0,Ei.length=0,$i(),Pi=!1,Vi=null,(Ei.length||Ri.length||Fi.length)&&Ki(t)}}function Zi(t,e){return tr(t,null,e)}const Ji={};function Qi(t,e,n){return tr(t,e,n)}function tr(t,e,{immediate:n,deep:i,flush:r,onTrack:o,onTrigger:s}=c){const a=vi;let l,u,h=!1,p=!1;if(de(t)?(l=()=>t.value,h=!!t._shallow):re(t)?(l=()=>t,i=!0):b(t)?(p=!0,h=t.some(re),l=()=>t.map((t=>de(t)?t.value:re(t)?ir(t):C(t)?ki(t,a,2):void 0))):l=C(t)?e?()=>ki(t,a,2):()=>{if(!a||!a.isUnmounted)return u&&u(),Mi(t,a,3,[f])}:d,e&&i){const t=l;l=()=>ir(t())}let f=t=>{u=_.onStop=()=>{ki(t,a,4)}},g=p?[]:Ji;const m=()=>{if(_.active)if(e){const t=_.run();(i||h||(p?t.some(((t,e)=>V(t,g[e]))):V(t,g)))&&(u&&u(),Mi(e,a,3,[t,g===Ji?void 0:g,f]),g=t)}else _.run()};let y;m.allowRecurse=!!e,y="sync"===r?m:"post"===r?()=>En(m,a&&a.suspense):()=>{!a||a.isMounted?function(t){Gi(t,Ni,Ri,Li)}(m):m()};const _=new rt(l,y);return e?n?m():g=_.run():"post"===r?En(_.run.bind(_),a&&a.suspense):_.run(),()=>{_.stop(),a&&a.scope&&v(a.scope.effects,_)}}function er(t,e,n){const i=this.proxy,r=T(t)?t.includes(".")?nr(i,t):()=>i[t]:t.bind(i,i);let o;C(e)?o=e:(o=e.handler,n=e);const s=vi;_i(this);const a=tr(r,o.bind(i),n);return s?_i(s):wi(),a}function nr(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function ir(t,e=new Set){if(!k(t)||t.__v_skip)return t;if((e=e||new Set).has(t))return t;if(e.add(t),de(t))ir(t.value,e);else if(b(t))for(let n=0;n<t.length;n++)ir(t[n],e);else if(S(t)||x(t))t.forEach((t=>{ir(t,e)}));else if(A(t))for(const n in t)ir(t[n],e);return t}function rr(t,e,n){const i=arguments.length;return 2===i?k(e)&&!b(e)?Jn(e)?ri(t,null,[e]):ri(t,e):ri(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&Jn(n)&&(n=[n]),ri(t,e,n))}const or="3.2.11",sr="undefined"!=typeof document?document:null,ar=new Map,lr={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const r=e?sr.createElementNS("http://www.w3.org/2000/svg",t):sr.createElement(t,n?{is:n}:void 0);return"select"===t&&i&&null!=i.multiple&&r.setAttribute("multiple",i.multiple),r},createText:t=>sr.createTextNode(t),createComment:t=>sr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>sr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,i){const r=n?n.previousSibling:e.lastChild;let o=ar.get(t);if(!o){const e=sr.createElement("template");if(e.innerHTML=i?`<svg>${t}</svg>`:t,o=e.content,i){const t=o.firstChild;for(;t.firstChild;)o.appendChild(t.firstChild);o.removeChild(t)}ar.set(t,o)}return e.insertBefore(o.cloneNode(!0),n),[r?r.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};const ur=/\s*!important$/;function cr(t,e,n){if(b(n))n.forEach((n=>cr(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const i=function(t,e){const n=dr[e];if(n)return n;let i=L(e);if("filter"!==i&&i in t)return dr[e]=i;i=B(i);for(let r=0;r<hr.length;r++){const n=hr[r]+i;if(n in t)return dr[e]=n}return e}(t,e);ur.test(n)?t.setProperty(z(i),n.replace(ur,""),"important"):t[i]=n}}const hr=["Webkit","Moz","ms"],dr={};const pr="http://www.w3.org/1999/xlink";let fr=Date.now,gr=!1;if("undefined"!=typeof window){fr()>document.createEvent("Event").timeStamp&&(fr=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);gr=!!(t&&Number(t[1])<=53)}let mr=0;const yr=Promise.resolve(),vr=()=>{mr=0};function _r(t,e,n,i){t.addEventListener(e,n,i)}function wr(t,e,n,i,r=null){const o=t._vei||(t._vei={}),s=o[e];if(i&&s)s.value=i;else{const[n,a]=function(t){let e;if(br.test(t)){let n;for(e={};n=t.match(br);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[z(t.slice(2)),e]}(e);if(i){_r(t,n,o[e]=function(t,e){const n=t=>{const i=t.timeStamp||fr();(gr||i>=n.attached-1)&&Mi(function(t,e){if(b(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>mr||(yr.then(vr),mr=fr()))(),n}(i,r),a)}else s&&(!function(t,e,n,i){t.removeEventListener(e,n,i)}(t,n,s,a),o[e]=void 0)}}const br=/(?:Once|Passive|Capture)$/;const xr=/^on[a-z]/;const Sr=t=>{const e=t.props["onUpdate:modelValue"];return b(e)?t=>H(e,t):e};function Cr(t){t.target.composing=!0}function Tr(t){const e=t.target;e.composing&&(e.composing=!1,function(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}(e,"input"))}const Ir={created(t,{modifiers:{lazy:e,trim:n,number:i}},r){t._assign=Sr(r);const o=i||r.props&&"number"===r.props.type;_r(t,e?"change":"input",(e=>{if(e.target.composing)return;let i=t.value;n?i=i.trim():o&&(i=j(i)),t._assign(i)})),n&&_r(t,"change",(()=>{t.value=t.value.trim()})),e||(_r(t,"compositionstart",Cr),_r(t,"compositionend",Tr),_r(t,"change",Tr))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:r}},o){if(t._assign=Sr(o),t.composing)return;if(document.activeElement===t){if(n)return;if(i&&t.value.trim()===e)return;if((r||"number"===t.type)&&j(t.value)===e)return}const s=null==e?"":e;t.value!==s&&(t.value=s)}},kr={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Mr=(t,e)=>n=>{if(!("key"in n))return;const i=z(n.key);return e.some((t=>t===i||kr[t]===i))?t(n):void 0},Dr=y({patchProp:(t,i,r,o,s=!1,a,l,u,c)=>{"class"===i?function(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}(t,o,s):"style"===i?function(t,e,n){const i=t.style,r=i.display;if(n)if(T(n))e!==n&&(i.cssText=n);else{for(const t in n)cr(i,t,n[t]);if(e&&!T(e))for(const t in e)null==n[t]&&cr(i,t,"")}else t.removeAttribute("style");"_vod"in t&&(i.display=r)}(t,r,o):g(i)?m(i)||wr(t,i,0,o,l):("."===i[0]?(i=i.slice(1),1):"^"===i[0]?(i=i.slice(1),0):function(t,e,n,i){if(i)return"innerHTML"===e||"textContent"===e||!!(e in t&&xr.test(e)&&C(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if(xr.test(e)&&T(n))return!1;return e in t}(t,i,o,s))?function(t,e,i,r,o,s,a){if("innerHTML"===e||"textContent"===e)return r&&a(r,o,s),void(t[e]=null==i?"":i);if("value"===e&&"PROGRESS"!==t.tagName){t._value=i;const n=null==i?"":i;return t.value!==n&&(t.value=n),void(null==i&&t.removeAttribute(e))}if(""===i||null==i){const r=typeof t[e];if("boolean"===r)return void(t[e]=n(i));if(null==i&&"string"===r)return t[e]="",void t.removeAttribute(e);if("number"===r){try{t[e]=0}catch(l){}return void t.removeAttribute(e)}}try{t[e]=i}catch(u){}}(t,i,o,a,l,u,c):("true-value"===i?t._trueValue=o:"false-value"===i&&(t._falseValue=o),function(t,i,r,o,s){if(o&&i.startsWith("xlink:"))null==r?t.removeAttributeNS(pr,i.slice(6,i.length)):t.setAttributeNS(pr,i,r);else{const o=e(i);null==r||o&&!n(r)?t.removeAttribute(i):t.setAttribute(i,o?"":r)}}(t,i,o,s))}},lr);let Pr;const Ar=(...t)=>{const e=(Pr||(Pr=On(Dr))).createApp(...t),{mount:n}=e;return e.mount=t=>{const i=function(t){if(T(t)){return document.querySelector(t)}return t}
/*!
  * vue-router v4.0.11
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */(t);if(!i)return;const r=e._component;C(r)||r.render||r.template||(r.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};const Er="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Or=t=>Er?Symbol(t):"_vr_"+t,Rr=Or("rvlm"),Nr=Or("rvd"),Lr=Or("r"),Fr=Or("rl"),zr=Or("rvl"),Br="undefined"!=typeof window;const Ur=Object.assign;function Vr(t,e){const n={};for(const i in e){const r=e[i];n[i]=Array.isArray(r)?r.map(t):t(r)}return n}const Hr=()=>{},Wr=/\/$/;function jr(t,e,n="/"){let i,r={},o="",s="";const a=e.indexOf("?"),l=e.indexOf("#",a>-1?a:0);return a>-1&&(i=e.slice(0,a),o=e.slice(a+1,l>-1?l:e.length),r=t(o)),l>-1&&(i=i||e.slice(0,l),s=e.slice(l,e.length)),i=function(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/");let r,o,s=n.length-1;for(r=0;r<i.length;r++)if(o=i[r],1!==s&&"."!==o){if(".."!==o)break;s--}return n.slice(0,s).join("/")+"/"+i.slice(r-(r===i.length?1:0)).join("/")}(null!=i?i:e,n),{fullPath:i+(o&&"?")+o+s,path:i,query:r,hash:s}}function qr(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function Gr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Yr(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!$r(t[n],e[n]))return!1;return!0}function $r(t,e){return Array.isArray(t)?Xr(t,e):Array.isArray(e)?Xr(e,t):t===e}function Xr(t,e){return Array.isArray(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}var Kr,Zr,Jr,Qr;function to(t){if(!t)if(Br){const e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),t.replace(Wr,"")}(Zr=Kr||(Kr={})).pop="pop",Zr.push="push",(Qr=Jr||(Jr={})).back="back",Qr.forward="forward",Qr.unknown="";const eo=/^[^#]+#/;function no(t,e){return t.replace(eo,"#")+e}const io=()=>({left:window.pageXOffset,top:window.pageYOffset});function ro(t){let e;if("el"in t){const n=t.el,i="string"==typeof n&&n.startsWith("#"),r="string"==typeof n?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=function(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function oo(t,e){return(history.state?history.state.position-e:-1)+t}const so=new Map;function ao(t,e){const{pathname:n,search:i,hash:r}=e,o=t.indexOf("#");if(o>-1){let e=r.includes(t.slice(o))?t.slice(o).length:1,n=r.slice(e);return"/"!==n[0]&&(n="/"+n),qr(n,"")}return qr(n,t)+i+r}function lo(t,e,n,i=!1,r=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:r?io():null}}function uo(t){const{history:e,location:n}=window,i={value:ao(t,n)},r={value:e.state};function o(i,o,s){const a=t.indexOf("#"),l=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+i:location.protocol+"//"+location.host+t+i;try{e[s?"replaceState":"pushState"](o,"",l),r.value=o}catch(u){console.error(u),n[s?"replace":"assign"](l)}}return r.value||o(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:i,state:r,push:function(t,n){const s=Ur({},r.value,e.state,{forward:t,scroll:io()});o(s.current,s,!0),o(t,Ur({},lo(i.value,t,null),{position:s.position+1},n),!1),i.value=t},replace:function(t,n){o(t,Ur({},e.state,lo(r.value.back,t,r.value.forward,!0),n,{position:r.value.position}),!0),i.value=t}}}function co(t){const e=uo(t=to(t)),n=function(t,e,n,i){let r=[],o=[],s=null;const a=({state:o})=>{const a=ao(t,location),l=n.value,u=e.value;let c=0;if(o){if(n.value=a,e.value=o,s&&s===l)return void(s=null);c=u?o.position-u.position:0}else i(a);r.forEach((t=>{t(n.value,l,{delta:c,type:Kr.pop,direction:c?c>0?Jr.forward:Jr.back:Jr.unknown})}))};function l(){const{history:t}=window;t.state&&t.replaceState(Ur({},t.state,{scroll:io()}),"")}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",l),{pauseListeners:function(){s=n.value},listen:function(t){r.push(t);const e=()=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)};return o.push(e),e},destroy:function(){for(const t of o)t();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",l)}}}(t,e.state,e.location,e.replace);const i=Ur({location:"",base:t,go:function(t,e=!0){e||n.pauseListeners(),history.go(t)},createHref:no.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function ho(t){return"string"==typeof t||"symbol"==typeof t}const po={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},fo=Or("nf");var go,mo;function yo(t,e){return Ur(new Error,{type:t,[fo]:!0},e)}function vo(t,e){return t instanceof Error&&fo in t&&(null==e||!!(t.type&e))}(mo=go||(go={}))[mo.aborted=4]="aborted",mo[mo.cancelled=8]="cancelled",mo[mo.duplicated=16]="duplicated";const _o={sensitive:!1,strict:!1,start:!0,end:!0},wo=/[.+*?^${}()[\]/\\]/g;function bo(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function xo(t,e){let n=0;const i=t.score,r=e.score;for(;n<i.length&&n<r.length;){const t=bo(i[n],r[n]);if(t)return t;n++}return r.length-i.length}const So={type:0,value:""},Co=/[a-zA-Z0-9_]/;function To(t,e,n){const i=function(t,e){const n=Ur({},_o,e),i=[];let r=n.start?"^":"";const o=[];for(const l of t){const t=l.length?[]:[90];n.strict&&!l.length&&(r+="/");for(let e=0;e<l.length;e++){const i=l[e];let s=40+(n.sensitive?.25:0);if(0===i.type)e||(r+="/"),r+=i.value.replace(wo,"\\$&"),s+=40;else if(1===i.type){const{value:t,repeatable:n,optional:u,regexp:c}=i;o.push({name:t,repeatable:n,optional:u});const h=c||"[^/]+?";if("[^/]+?"!==h){s+=10;try{new RegExp(`(${h})`)}catch(a){throw new Error(`Invalid custom RegExp for param "${t}" (${h}): `+a.message)}}let d=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;e||(d=u&&l.length<2?`(?:/${d})`:"/"+d),u&&(d+="?"),r+=d,s+=20,u&&(s+=-8),n&&(s+=-20),".*"===h&&(s+=-50)}t.push(s)}i.push(t)}if(n.strict&&n.end){const t=i.length-1;i[t][i[t].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const s=new RegExp(r,n.sensitive?"":"i");return{re:s,score:i,keys:o,parse:function(t){const e=t.match(s),n={};if(!e)return null;for(let i=1;i<e.length;i++){const t=e[i]||"",r=o[i-1];n[r.name]=t&&r.repeatable?t.split("/"):t}return n},stringify:function(e){let n="",i=!1;for(const r of t){i&&n.endsWith("/")||(n+="/"),i=!1;for(const t of r)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:s,optional:a}=t,l=o in e?e[o]:"";if(Array.isArray(l)&&!s)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const u=Array.isArray(l)?l.join("/"):l;if(!u){if(!a)throw new Error(`Missing required param "${o}"`);r.length<2&&(n.endsWith("/")?n=n.slice(0,-1):i=!0)}n+=u}}return n}}}(function(t){if(!t)return[[]];if("/"===t)return[[So]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${u}": ${t}`)}let n=0,i=n;const r=[];let o;function s(){o&&r.push(o),o=[]}let a,l=0,u="",c="";function h(){u&&(0===n?o.push({type:0,value:u}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),u="")}function d(){u+=a}for(;l<t.length;)if(a=t[l++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(u&&h(),s()):":"===a?(h(),n=1):d();break;case 4:d(),n=i;break;case 1:"("===a?n=2:Co.test(a)?d():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--);break;case 2:")"===a?"\\"==c[c.length-1]?c=c.slice(0,-1)+a:n=3:c+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--,c="";break;default:e("Unknown state")}else i=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${u}"`),h(),s(),r}(t.path),n),r=Ur(i,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Io(t,e){const n=[],i=new Map;function r(t,n,i){const a=!i,l=function(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:ko(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}(t);l.aliasOf=i&&i.record;const u=Po(e,t),c=[l];if("alias"in t){const e="string"==typeof t.alias?[t.alias]:t.alias;for(const t of e)c.push(Ur({},l,{components:i?i.record.components:l.components,path:t,aliasOf:i?i.record:l}))}let h,d;for(const e of c){const{path:c}=e;if(n&&"/"!==c[0]){const t=n.record.path,i="/"===t[t.length-1]?"":"/";e.path=n.record.path+(c&&i+c)}if(h=To(e,n,u),i?i.alias.push(h):(d=d||h,d!==h&&d.alias.push(h),a&&t.name&&!Mo(h)&&o(t.name)),"children"in l){const t=l.children;for(let e=0;e<t.length;e++)r(t[e],h,i&&i.children[e])}i=i||h,s(h)}return d?()=>{o(d)}:Hr}function o(t){if(ho(t)){const e=i.get(t);e&&(i.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&i.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function s(t){let e=0;for(;e<n.length&&xo(t,n[e])>=0;)e++;n.splice(e,0,t),t.record.name&&!Mo(t)&&i.set(t.record.name,t)}return e=Po({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>r(t))),{addRoute:r,resolve:function(t,e){let r,o,s,a={};if("name"in t&&t.name){if(r=i.get(t.name),!r)throw yo(1,{location:t});s=r.record.name,a=Ur(function(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}(e.params,r.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params),o=r.stringify(a)}else if("path"in t)o=t.path,r=n.find((t=>t.re.test(o))),r&&(a=r.parse(o),s=r.record.name);else{if(r=e.name?i.get(e.name):n.find((t=>t.re.test(e.path))),!r)throw yo(1,{location:t,currentLocation:e});s=r.record.name,a=Ur({},e.params,t.params),o=r.stringify(a)}const l=[];let u=r;for(;u;)l.unshift(u.record),u=u.parent;return{name:s,path:o,params:a,matched:l,meta:Do(l)}},removeRoute:o,getRoutes:function(){return n},getRecordMatcher:function(t){return i.get(t)}}}function ko(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]="boolean"==typeof n?n:n[i];return e}function Mo(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Do(t){return t.reduce(((t,e)=>Ur(t,e.meta)),{})}function Po(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}const Ao=/#/g,Eo=/&/g,Oo=/\//g,Ro=/=/g,No=/\?/g,Lo=/\+/g,Fo=/%5B/g,zo=/%5D/g,Bo=/%5E/g,Uo=/%60/g,Vo=/%7B/g,Ho=/%7C/g,Wo=/%7D/g,jo=/%20/g;function qo(t){return encodeURI(""+t).replace(Ho,"|").replace(Fo,"[").replace(zo,"]")}function Go(t){return qo(t).replace(Lo,"%2B").replace(jo,"+").replace(Ao,"%23").replace(Eo,"%26").replace(Uo,"`").replace(Vo,"{").replace(Wo,"}").replace(Bo,"^")}function Yo(t){return null==t?"":function(t){return qo(t).replace(Ao,"%23").replace(No,"%3F")}(t).replace(Oo,"%2F")}function $o(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function Xo(t){const e={};if(""===t||"?"===t)return e;const n=("?"===t[0]?t.slice(1):t).split("&");for(let i=0;i<n.length;++i){const t=n[i].replace(Lo," "),r=t.indexOf("="),o=$o(r<0?t:t.slice(0,r)),s=r<0?null:$o(t.slice(r+1));if(o in e){let t=e[o];Array.isArray(t)||(t=e[o]=[t]),t.push(s)}else e[o]=s}return e}function Ko(t){let e="";for(let n in t){const i=t[n];if(n=Go(n).replace(Ro,"%3D"),null==i){void 0!==i&&(e+=(e.length?"&":"")+n);continue}(Array.isArray(i)?i.map((t=>t&&Go(t))):[i&&Go(i)]).forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function Zo(t){const e={};for(const n in t){const i=t[n];void 0!==i&&(e[n]=Array.isArray(i)?i.map((t=>null==t?null:""+t)):null==i?i:""+i)}return e}function Jo(){let t=[];return{add:function(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}},list:()=>t,reset:function(){t=[]}}}function Qo(t,e,n,i,r){const o=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise(((s,a)=>{const l=t=>{var l;!1===t?a(yo(4,{from:n,to:e})):t instanceof Error?a(t):"string"==typeof(l=t)||l&&"object"==typeof l?a(yo(2,{from:e,to:t})):(o&&i.enterCallbacks[r]===o&&"function"==typeof t&&o.push(t),s())},u=t.call(i&&i.instances[r],e,n,l);let c=Promise.resolve(u);t.length<3&&(c=c.then(l)),c.catch((t=>a(t)))}))}function ts(t,e,n,i){const r=[];for(const s of t)for(const t in s.components){let a=s.components[t];if("beforeRouteEnter"===e||s.instances[t])if("object"==typeof(o=a)||"displayName"in o||"props"in o||"__vccOpts"in o){const o=(a.__vccOpts||a)[e];o&&r.push(Qo(o,n,i,s,t))}else{let o=a();r.push((()=>o.then((r=>{if(!r)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${s.path}"`));const o=(a=r).__esModule||Er&&"Module"===a[Symbol.toStringTag]?r.default:r;var a;s.components[t]=o;const l=(o.__vccOpts||o)[e];return l&&Qo(l,n,i,s,t)()}))))}}var o;return r}function es(t){const e=Le(Lr),n=Le(Fr),i=Se((()=>e.resolve(ye(t.to)))),r=Se((()=>{const{matched:t}=i.value,{length:e}=t,r=t[e-1],o=n.matched;if(!r||!o.length)return-1;const s=o.findIndex(Gr.bind(null,r));if(s>-1)return s;const a=is(t[e-2]);return e>1&&is(r)===a&&o[o.length-1].path!==a?o.findIndex(Gr.bind(null,t[e-2])):s})),o=Se((()=>r.value>-1&&function(t,e){for(const n in e){const i=e[n],r=t[n];if("string"==typeof i){if(i!==r)return!1}else if(!Array.isArray(r)||r.length!==i.length||i.some(((t,e)=>t!==r[e])))return!1}return!0}(n.params,i.value.params))),s=Se((()=>r.value>-1&&r.value===n.matched.length-1&&Yr(n.params,i.value.params)));return{route:i,href:Se((()=>i.value.href)),isActive:o,isExactActive:s,navigate:function(n={}){return function(t){if(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)return;if(t.defaultPrevented)return;if(void 0!==t.button&&0!==t.button)return;if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}t.preventDefault&&t.preventDefault();return!0}(n)?e[ye(t.replace)?"replace":"push"](ye(t.to)).catch(Hr):Promise.resolve()}}}const ns=Fe({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:es,setup(t,{slots:e}){const n=ee(es(t)),{options:i}=Le(Lr),r=Se((()=>({[rs(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[rs(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const i=e.default&&e.default(n);return t.custom?i:rr("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}});function is(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const rs=(t,e,n)=>null!=t?t:null!=e?e:n;function os(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const ss=Fe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const i=Le(zr),r=Se((()=>t.route||i.value)),o=Le(Nr,0),s=Se((()=>r.value.matched[o]));Ne(Nr,o+1),Ne(Rr,s),Ne(zr,r);const a=pe();return Qi((()=>[a.value,s.value,t.name]),(([t,e,n],[i,r,o])=>{e&&(e.instances[n]=t,r&&r!==e&&t&&t===i&&(e.leaveGuards.size||(e.leaveGuards=r.leaveGuards),e.updateGuards.size||(e.updateGuards=r.updateGuards))),!t||!e||r&&Gr(e,r)&&i||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const i=r.value,o=s.value,l=o&&o.components[t.name],u=t.name;if(!l)return os(n.default,{Component:l,route:i});const c=o.props[t.name],h=c?!0===c?i.params:"function"==typeof c?c(i):c:null,d=rr(l,Ur({},h,e,{onVnodeUnmounted:t=>{t.component.isUnmounted&&(o.instances[u]=null)},ref:a}));return os(n.default,{Component:d,route:i})||d}}});function as(t){const e=Io(t.routes,t),n=t.parseQuery||Xo,i=t.stringifyQuery||Ko,r=t.history,o=Jo(),s=Jo(),a=Jo(),l=fe(po);let u=po;Br&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Vr.bind(null,(t=>""+t)),h=Vr.bind(null,Yo),d=Vr.bind(null,$o);function p(t,o){if(o=Ur({},o||l.value),"string"==typeof t){const i=jr(n,t,o.path),s=e.resolve({path:i.path},o),a=r.createHref(i.fullPath);return Ur(i,s,{params:d(s.params),hash:$o(i.hash),redirectedFrom:void 0,href:a})}let s;if("path"in t)s=Ur({},t,{path:jr(n,t.path,o.path).path});else{const e=Ur({},t.params);for(const t in e)null==e[t]&&delete e[t];s=Ur({},t,{params:h(t.params)}),o.params=h(o.params)}const a=e.resolve(s,o),u=t.hash||"";a.params=c(d(a.params));const p=function(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}(i,Ur({},t,{hash:(f=u,qo(f).replace(Vo,"{").replace(Wo,"}").replace(Bo,"^")),path:a.path}));var f;const g=r.createHref(p);return Ur({fullPath:p,hash:u,query:i===Ko?Zo(t.query):t.query||{}},a,{redirectedFrom:void 0,href:g})}function f(t){return"string"==typeof t?jr(n,t,l.value.path):Ur({},t)}function g(t,e){if(u!==t)return yo(8,{from:e,to:t})}function m(t){return v(t)}function y(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let i="function"==typeof n?n(t):n;return"string"==typeof i&&(i=i.includes("?")||i.includes("#")?i=f(i):{path:i},i.params={}),Ur({query:t.query,hash:t.hash,params:t.params},i)}}function v(t,e){const n=u=p(t),r=l.value,o=t.state,s=t.force,a=!0===t.replace,c=y(n);if(c)return v(Ur(f(c),{state:o,force:s,replace:a}),e||n);const h=n;let d;return h.redirectedFrom=e,!s&&function(t,e,n){const i=e.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&Gr(e.matched[i],n.matched[r])&&Yr(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}(i,r,n)&&(d=yo(16,{to:h,from:r}),P(r,r,!0,!1)),(d?Promise.resolve(d):w(h,r)).catch((t=>vo(t)?t:M(t,h,r))).then((t=>{if(t){if(vo(t,2))return v(Ur(f(t.to),{state:o,force:s,replace:a}),e||h)}else t=x(h,r,!0,a,o);return b(h,r,t),t}))}function _(t,e){const n=g(t,e);return n?Promise.reject(n):Promise.resolve()}function w(t,e){let n;const[i,r,a]=function(t,e){const n=[],i=[],r=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const o=e.matched[s];o&&(t.matched.find((t=>Gr(t,o)))?i.push(o):n.push(o));const a=t.matched[s];a&&(e.matched.find((t=>Gr(t,a)))||r.push(a))}return[n,i,r]}(t,e);n=ts(i.reverse(),"beforeRouteLeave",t,e);for(const o of i)o.leaveGuards.forEach((i=>{n.push(Qo(i,t,e))}));const l=_.bind(null,t,e);return n.push(l),ls(n).then((()=>{n=[];for(const i of o.list())n.push(Qo(i,t,e));return n.push(l),ls(n)})).then((()=>{n=ts(r,"beforeRouteUpdate",t,e);for(const i of r)i.updateGuards.forEach((i=>{n.push(Qo(i,t,e))}));return n.push(l),ls(n)})).then((()=>{n=[];for(const i of t.matched)if(i.beforeEnter&&!e.matched.includes(i))if(Array.isArray(i.beforeEnter))for(const r of i.beforeEnter)n.push(Qo(r,t,e));else n.push(Qo(i.beforeEnter,t,e));return n.push(l),ls(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=ts(a,"beforeRouteEnter",t,e),n.push(l),ls(n)))).then((()=>{n=[];for(const i of s.list())n.push(Qo(i,t,e));return n.push(l),ls(n)})).catch((t=>vo(t,8)?t:Promise.reject(t)))}function b(t,e,n){for(const i of a.list())i(t,e,n)}function x(t,e,n,i,o){const s=g(t,e);if(s)return s;const a=e===po,u=Br?history.state:{};n&&(i||a?r.replace(t.fullPath,Ur({scroll:a&&u&&u.scroll},o)):r.push(t.fullPath,o)),l.value=t,P(t,e,n,a),D()}let S;function C(){S=r.listen(((t,e,n)=>{const i=p(t),o=y(i);if(o)return void v(Ur(o,{replace:!0}),i).catch(Hr);u=i;const s=l.value;var a,c;Br&&(a=oo(s.fullPath,n.delta),c=io(),so.set(a,c)),w(i,s).catch((t=>vo(t,12)?t:vo(t,2)?(v(t.to,i).then((t=>{vo(t,20)&&!n.delta&&n.type===Kr.pop&&r.go(-1,!1)})).catch(Hr),Promise.reject()):(n.delta&&r.go(-n.delta,!1),M(t,i,s)))).then((t=>{(t=t||x(i,s,!1))&&(n.delta?r.go(-n.delta,!1):n.type===Kr.pop&&vo(t,20)&&r.go(-1,!1)),b(i,s,t)})).catch(Hr)}))}let T,I=Jo(),k=Jo();function M(t,e,n){D(t);const i=k.list();return i.length?i.forEach((i=>i(t,e,n))):console.error(t),Promise.reject(t)}function D(t){T||(T=!0,C(),I.list().forEach((([e,n])=>t?n(t):e())),I.reset())}function P(e,n,i,r){const{scrollBehavior:o}=t;if(!Br||!o)return Promise.resolve();const s=!i&&function(t){const e=so.get(t);return so.delete(t),e}(oo(e.fullPath,0))||(r||!i)&&history.state&&history.state.scroll||null;return Wi().then((()=>o(e,n,s))).then((t=>t&&ro(t))).catch((t=>M(t,e,n)))}const A=t=>r.go(t);let E;const O=new Set;return{currentRoute:l,addRoute:function(t,n){let i,r;return ho(t)?(i=e.getRecordMatcher(t),r=n):r=t,e.addRoute(r,i)},removeRoute:function(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)},hasRoute:function(t){return!!e.getRecordMatcher(t)},getRoutes:function(){return e.getRoutes().map((t=>t.record))},resolve:p,options:t,push:m,replace:function(t){return m(Ur(f(t),{replace:!0}))},go:A,back:()=>A(-1),forward:()=>A(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:k.add,isReady:function(){return T&&l.value!==po?Promise.resolve():new Promise(((t,e)=>{I.add([t,e])}))},install(t){t.component("RouterLink",ns),t.component("RouterView",ss),t.config.globalProperties.$router=this,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>ye(l)}),Br&&!E&&l.value===po&&(E=!0,m(r.location).catch((t=>{})));const e={};for(const i in po)e[i]=Se((()=>l.value[i]));t.provide(Lr,this),t.provide(Fr,ee(e)),t.provide(zr,l);const n=t.unmount;O.add(t),t.unmount=function(){O.delete(t),O.size<1&&(u=po,S&&S(),l.value=po,E=!1,T=!1),n()}}}}function ls(t){return t.reduce(((t,e)=>t.then((()=>e()))),Promise.resolve())}function us(){return Le(Lr)}function cs(){return Le(Fr)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hs=function(t,e){return(hs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ds(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function ps(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(e){o(e)}}function a(t){try{l(i.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))}function fs(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function gs(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ms(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function ys(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vs=!1,_s="${JSCORE_VERSION}",ws=function(t,e){if(!t)throw bs(e)},bs=function(t){return new Error("Firebase Database ("+_s+") INTERNAL ASSERT FAILED: "+t)},xs=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},Ss={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],r=0;r<t.length;r+=3){var o=t[r],s=r+1<t.length,a=s?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,c=o>>2,h=(3&o)<<4|a>>4,d=(15&a)<<2|u>>6,p=63&u;l||(p=64,s||(d=64)),i.push(n[c],n[h],n[d],n[p])}return i.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xs(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,i=0;n<t.length;){var r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){var o=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){var s=((7&r)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],r=0;r<t.length;){var o=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0,a=++r<t.length?n[t.charAt(r)]:64,l=++r<t.length?n[t.charAt(r)]:64;if(++r,null==o||null==s||null==a||null==l)throw Error();var u=o<<2|s>>4;if(i.push(u),64!==a){var c=s<<4&240|a>>2;if(i.push(c),64!==l){var h=a<<6&192|l;i.push(h)}}}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Cs=function(t){try{return Ss.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ts(t){return Is(void 0,t)}function Is(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Is(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ks=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,i){n?e.reject(n):e.resolve(i),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,i))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ds(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ms())}function Ps(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function As(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Es(){return!0===vs}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Os=function(t){function e(n,i,r){var o=t.call(this,i)||this;return o.code=n,o.customData=r,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Rs.prototype.create),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}hs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),Rs=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=e[0]||{},r=this.service+"/"+t,o=this.errors[t],s=o?Ns(o,i):"Error",a=this.serviceName+": "+s+" ("+r+").",l=new Os(r,a,i);return l},t}();function Ns(t,e){return t.replace(Ls,(function(t,n){var i=e[n];return null!=i?String(i):"<"+n+"?>"}))}var Ls=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t){return JSON.parse(t)}function zs(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bs=function(t){var e={},n={},i={},r="";try{var o=t.split(".");e=Fs(Cs(o[0])||""),n=Fs(Cs(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:i,signature:r}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Us(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Vs(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function Hs(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ws(t,e,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function js(t,e){if(t===e)return!0;for(var n=Object.keys(t),i=Object.keys(e),r=0,o=n;r<o.length;r++){var s=o[r];if(!i.includes(s))return!1;var a=t[s],l=e[s];if(qs(a)&&qs(l)){if(!js(a,l))return!1}else if(a!==l)return!1}for(var u=0,c=i;u<c.length;u++){s=c[u];if(!n.includes(s))return!1}return!0}function qs(t){return null!==t&&"object"==typeof t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},i=0,r=Object.entries(t);i<r.length;i++){var o=r[i];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ys=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var o,s,a=this.chain_[0],l=this.chain_[1],u=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(o=c^l&(u^c),s=1518500249):(o=l^u^c,s=1859775393):i<60?(o=l&u|c&(l|u),s=2400959708):(o=l^u^c,s=3395469782);r=(a<<5|a>>>27)+o+h+s+n[i]&4294967295;h=c,c=u,u=4294967295&(l<<30|l>>>2),l=a,a=r}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=0,r=this.buf_,o=this.inbuf_;i<e;){if(0===o)for(;i<=n;)this.compress_(t,i),i+=this.blockSize;if("string"==typeof t){for(;i<e;)if(r[o]=t.charCodeAt(i),++i,++o===this.blockSize){this.compress_(r),o=0;break}}else for(;i<e;)if(r[o]=t[i],++i,++o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var i=0;for(n=0;n<5;n++)for(var r=24;r>=0;r-=8)t[i]=this.chain_[n]>>r&255,++i;return t},t}();var $s=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var i,r=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,i=e;n<i.length;n++){var r=i[n];if(r in t&&"function"==typeof t[r])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(i.next=Xs),void 0===i.error&&(i.error=Xs),void 0===i.complete&&(i.complete=Xs);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{r.finalError?i.error(r.finalError):i.complete()}catch(t){}})),this.observers.push(i),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(i){"undefined"!=typeof console&&console.error&&console.error(i)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Xs(){}function Ks(t,e){return t+" failed: "+e+" argument "}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zs=function(t){for(var e=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};function Js(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var i=e*Math.pow(n,t),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t){return t&&t._delegate?t._delegate:t}var ta=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),ea=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new ks;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:e});i&&n.resolve(i)}catch(r){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(c){}try{for(var i=gs(this.instancesDeferred.entries()),r=i.next();!r.done;r=i.next()){var o=ms(r.value,2),s=o[0],a=o[1],l=this.normalizeInstanceIdentifier(s);try{var u=this.getOrInitializeService({instanceIdentifier:l});a.resolve(u)}catch(c){}}}catch(h){e={error:h}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return ps(this,void 0,void 0,(function(){var t;return fs(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(ys(ys([],ms(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),ms(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t="[DEFAULT]"),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,r=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:r});try{for(var a=gs(this.instancesDeferred.entries()),l=a.next();!l.done;l=a.next()){var u=ms(l.value,2),c=u[0],h=u[1];o===this.normalizeInstanceIdentifier(c)&&h.resolve(s)}}catch(d){e={error:d}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);var o=this.instances.get(i);return o&&t(o,i),function(){r.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,r=this.onInitCallbacks.get(e);if(r)try{for(var o=gs(r),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(l){}}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,i=t.options,r=void 0===i?{}:i,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:r}),this.instances.set(n,o),this.instancesOptions.set(n,r),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t="[DEFAULT]"),this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var na,ia,ra,oa=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ea(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function sa(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(ra=ia||(ia={}))[ra.DEBUG=0]="DEBUG",ra[ra.VERBOSE=1]="VERBOSE",ra[ra.INFO=2]="INFO",ra[ra.WARN=3]="WARN",ra[ra.ERROR=4]="ERROR",ra[ra.SILENT=5]="SILENT";var aa={debug:ia.DEBUG,verbose:ia.VERBOSE,info:ia.INFO,warn:ia.WARN,error:ia.ERROR,silent:ia.SILENT},la=ia.INFO,ua=((na={})[ia.DEBUG]="log",na[ia.VERBOSE]="log",na[ia.INFO]="info",na[ia.WARN]="warn",na[ia.ERROR]="error",na),ca=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var r=(new Date).toISOString(),o=ua[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,sa(["["+r+"]  "+t.name+":"],n))}},ha=function(){function t(t){this.name=t,this._logLevel=la,this._logHandler=ca,this._userLogHandler=null}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ia))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?aa[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,sa([this,ia.DEBUG],t)),this._logHandler.apply(this,sa([this,ia.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,sa([this,ia.VERBOSE],t)),this._logHandler.apply(this,sa([this,ia.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,sa([this,ia.INFO],t)),this._logHandler.apply(this,sa([this,ia.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,sa([this,ia.WARN],t)),this._logHandler.apply(this,sa([this,ia.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,sa([this,ia.ERROR],t)),this._logHandler.apply(this,sa([this,ia.ERROR],t))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class da{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const pa=new ha("@firebase/app"),fa={"@firebase/app":"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ga=new Map,ma=new Map;function ya(t,e){try{t.container.addComponent(e)}catch(n){pa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function va(t){const e=t.name;if(ma.has(e))return pa.debug(`There were multiple attempts to register component ${e}.`),!1;ma.set(e,t);for(const n of ga.values())ya(n,t);return!0}function _a(t,e){return t.container.getProvider(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=new Rs("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ba{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ta("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw wa.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t,e={}){if("object"!=typeof e){e={name:e}}const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},e),i=n.name;if("string"!=typeof i||!i)throw wa.create("bad-app-name",{appName:String(i)});const r=ga.get(i);if(r){if(js(t,r.options)&&js(n,r.config))return r;throw wa.create("duplicate-app",{appName:i})}const o=new oa(i);for(const a of ma.values())o.addComponent(a);const s=new ba(t,n,o);return ga.set(i,s),s}function Sa(t="[DEFAULT]"){const e=ga.get(t);if(!e)throw wa.create("no-app",{appName:t});return e}function Ca(t,e,n){var i;let r=null!==(i=fa[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const t=[`Unable to register library "${r}" with version "${e}":`];return o&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&s&&t.push("and"),s&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void pa.warn(t.join(" "))}va(new ta(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ta;function Ia(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}va(new ta("platform-logger",(t=>new da(t)),"PRIVATE")),Ca("@firebase/app","0.7.0",Ta),Ca("fire-js","");const ka=Ia,Ma=new Rs("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Da=new ha("@firebase/auth");function Pa(t,...e){Da.logLevel<=ia.ERROR&&Da.error(`Auth (9.0.0): ${t}`,...e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t,...e){throw Ra(t,...e)}function Ea(t,...e){return Ra(t,...e)}function Oa(t,e,n){const i=Object.assign(Object.assign({},ka()),{[e]:n});return new Rs("auth","Firebase",i).create(e,{appName:t.name})}function Ra(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Ma.create(t,...e)}function Na(t,e,...n){if(!t)throw Ra(e,...n)}function La(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pa(e),new Error(e)}function Fa(t,e){t||La(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=new Map;function Ba(t){Fa(t instanceof Function,"Expected a class definition");let e=za.get(t);return e?(Fa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,za.set(t,e),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ua(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function Va(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==Va()&&"https:"!==Va()&&!Ps()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Wa{constructor(t,e){this.shortDelay=t,this.longDelay=e,Fa(e>t,"Short delay should be less than long delay!"),this.isMobile=Ds()||As()}get(){return Ha()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(t,e){Fa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void La("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void La("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void La("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ya=new Wa(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(t,e,n,i,r={}){return Xa(t,r,(()=>{let r={},o={};i&&("GET"===e?o=i:r={body:JSON.stringify(i)});const s=Gs(Object.assign({key:t.config.apiKey},o)).slice(1),a=new(qa.headers());return a.set("Content-Type","application/json"),a.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&a.set("X-Firebase-Locale",t.languageCode),qa.fetch()(Ka(t,t.config.apiHost,n,s),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},r))}))}async function Xa(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Ga),e);try{const e=new Za(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Ja(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const e=r.ok?o.errorMessage:o.error.message,[n,s]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ja(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Ja(t,"email-already-in-use",o);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Oa(t,a,s);Aa(t,a)}}catch(r){if(r instanceof Os)throw r;Aa(t,"network-request-failed")}}function Ka(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?ja(t.config,r):`${t.config.apiScheme}://${r}`}class Za{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(Ea(this.auth,"timeout"))),Ya.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ja(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ea(t,e,i);return r.customData._tokenResponse=n,r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Qa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function tl(t){return 1e3*Number(t)}function el(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return Pa("JWT malformed, contained fewer than 3 sections"),null;try{const t=Cs(n);return t?JSON.parse(t):(Pa("Failed to decode base64 JWT payload"),null)}catch(r){return Pa("Caught error parsing JWT payload as JSON",r),null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function nl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Os&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}class il{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qa(this.lastLoginAt),this.creationTime=Qa(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(t){var e;const n=t.auth,i=await t.getIdToken(),r=await nl(t,async function(t,e){return $a(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));Na(null==r?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const s=(null===(e=o.providerUserInfo)||void 0===e?void 0:e.length)?o.providerUserInfo.map((t=>{var{providerId:e}=t,n=ds(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=t.providerData,u=s,[...l.filter((t=>!u.some((e=>e.providerId===t.providerId)))),...u]);var l,u;const c=t.isAnonymous,h=!(t.email&&o.passwordHash||(null==a?void 0:a.length)),d=!!c&&h,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new rl(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,p)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Na(t.idToken,"internal-error"),Na(void 0!==t.idToken,"internal-error"),Na(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=el(t);return Na(e,"internal-error"),Na(void 0!==e.exp,"internal-error"),Na(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return Na(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(t,e){const n=await Xa(t,{},(()=>{const n=Gs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,o=Ka(t,i,"/v1/token",`key=${r}`);return qa.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,o=new sl;return n&&(Na("string"==typeof n,"internal-error",{appName:t}),o.refreshToken=n),i&&(Na("string"==typeof i,"internal-error",{appName:t}),o.accessToken=i),r&&(Na("number"==typeof r,"internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new sl,this.toJSON())}_performRefresh(){return La("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t,e){Na("string"==typeof t||void 0===t,"internal-error",{appName:e})}class ll{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=ds(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new il(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.metadata=new rl(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await nl(this,this.stsTokenManager.getToken(this.auth,t));return Na(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=Qs(t),i=await n.getIdToken(e),r=el(i);Na(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o="object"==typeof r.firebase?r.firebase:void 0,s=null==o?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Qa(tl(r.auth_time)),issuedAtTime:Qa(tl(r.iat)),expirationTime:Qa(tl(r.exp)),signInProvider:s||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=Qs(t);await ol(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(Na(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new ll(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){Na(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await ol(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await nl(this,async function(t,e){return $a(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,o,s,a,l,u;const c=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,p=null!==(o=e.photoURL)&&void 0!==o?o:void 0,f=null!==(s=e.tenantId)&&void 0!==s?s:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=e.createdAt)&&void 0!==l?l:void 0,y=null!==(u=e.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:x}=e;Na(v&&x,t,"internal-error");const S=sl.fromJSON(this.name,x);Na("string"==typeof v,t,"internal-error"),al(c,t.name),al(h,t.name),Na("boolean"==typeof _,t,"internal-error"),Na("boolean"==typeof w,t,"internal-error"),al(d,t.name),al(p,t.name),al(f,t.name),al(g,t.name),al(m,t.name),al(y,t.name);const C=new ll({uid:v,auth:t,email:h,emailVerified:_,displayName:c,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:S,createdAt:m,lastLoginAt:y});return b&&Array.isArray(b)&&(C.providerData=b.map((t=>Object.assign({},t)))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,e,n=!1){const i=new sl;i.updateFromServerResponse(e);const r=new ll({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await ol(r),r}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}ul.type="NONE";const cl=ul;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t,e,n){return`firebase:${t}:${e}:${n}`}class dl{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=hl(this.userKey,i.apiKey,r),this.fullPersistenceKey=hl("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?ll._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new dl(Ba(cl),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||Ba(cl);const o=hl(n,t.config.apiKey,t.name);let s=null;for(const u of e)try{const e=await u._get(o);if(e){const n=ll._fromJSON(t,e);u!==r&&(s=n),r=u;break}}catch(l){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],s&&await r._set(o,s.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(o)}catch(l){}}))),new dl(r,t,n)):new dl(r,t,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yl(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fl(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_l(e))return"Blackberry";if(wl(e))return"Webos";if(gl(e))return"Safari";if((e.includes("chrome/")||ml(e))&&!e.includes("edge/"))return"Chrome";if(vl(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function fl(t=Ms()){return/firefox\//i.test(t)}function gl(t=Ms()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ml(t=Ms()){return/crios\//i.test(t)}function yl(t=Ms()){return/iemobile/i.test(t)}function vl(t=Ms()){return/android/i.test(t)}function _l(t=Ms()){return/blackberry/i.test(t)}function wl(t=Ms()){return/webos/i.test(t)}function bl(t=Ms()){return/iphone|ipad|ipod/i.test(t)}function xl(){return((t=Ms()).indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0)&&10===document.documentMode;var t}function Sl(t=Ms()){return bl(t)||vl(t)||wl(t)||_l(t)||/windows phone/i.test(t)||yl(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Cl(t,e=[]){let n;switch(t){case"Browser":n=pl(Ms());break;case"Worker":n=`${pl(Ms())}-${t}`;break;default:n=t}return`${n}/JsCore/9.0.0/${e.length?e.join(","):"FirebaseCore-web"}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t,e){this.app=t,this.config=e,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kl(this),this.idTokenSubscription=new kl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ma,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=e.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ba(e)),this._initializationPromise=this.queue((async()=>{var n;this._deleted||(this.persistenceManager=await dl.create(this,t),this._deleted||((null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(e),this._deleted||(this._isInitialized=!0)))})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(t)):void 0}async initializeCurrentUser(t){var e;let n=await this.assertedPersistence.getCurrentUser();if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,r=null==n?void 0:n._redirectEventId,o=await this.tryRedirectSignIn(t);i&&i!==r||!(null==o?void 0:o.user)||(n=o.user)}return n?n._redirectEventId?(Na(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(n){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await ol(t)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?Qs(t):null;return e&&Na(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){if(!this._deleted)return t&&Na(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Ba(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Rs("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ba(t)||this._popupRedirectResolver;Na(e,this,"argument-error"),this.redirectPersistenceManager=await dl.create(this,[Ba(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"==typeof e?e:e.next.bind(e),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Na(o,this,"internal-error"),o.then((()=>r(this.currentUser))),"function"==typeof e?t.addObserver(e,n,i):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Na(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Cl(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Il(t){return Qs(t)}class kl{constructor(t){var e,n;this.auth=t,this.observer=null,this.addObserver=(n=new $s((t=>this.observer=t),e)).subscribe.bind(n)}get next(){return Na(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return La("not implemented")}_getIdTokenResponse(t){return La("not implemented")}_linkToIdToken(t,e){return La("not implemented")}_getReauthenticationResolver(t){return La("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(t,e){return async function(t,e,n,i,r={}){const o=await $a(t,e,n,i,r);return"mfaPendingCredential"in o&&Aa(t,"multi-factor-auth-required",{serverResponse:o}),o}(t,"POST","/v1/accounts:signInWithIdp",function(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends Ml{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Pl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Aa("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=ds(e,["providerId","signInMethod"]);if(!n||!i)return null;const o=new Pl(n,i);return Object.assign(o,r),o}_getIdTokenResponse(t){return Dl(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Dl(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Dl(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Gs(e)}return t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Al{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends El{constructor(){super("facebook.com")}static credential(t){return Pl._fromParams({providerId:Ol.PROVIDER_ID,signInMethod:Ol.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ol.credentialFromTaggedObject(t)}static credentialFromError(t){return Ol.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ol.credential(t.oauthAccessToken)}catch(e){return null}}}Ol.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ol.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Rl extends El{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Pl._fromParams({providerId:Rl.PROVIDER_ID,signInMethod:Rl.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Rl.credentialFromTaggedObject(t)}static credentialFromError(t){return Rl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return Rl.credential(e,n)}catch(i){return null}}}Rl.GOOGLE_SIGN_IN_METHOD="google.com",Rl.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Nl extends El{constructor(){super("github.com")}static credential(t){return Pl._fromParams({providerId:Nl.PROVIDER_ID,signInMethod:Nl.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Nl.credentialFromTaggedObject(t)}static credentialFromError(t){return Nl.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Nl.credential(t.oauthAccessToken)}catch(e){return null}}}Nl.GITHUB_SIGN_IN_METHOD="github.com",Nl.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ll extends El{constructor(){super("twitter.com")}static credential(t,e){return Pl._fromParams({providerId:Ll.PROVIDER_ID,signInMethod:Ll.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Ll.credentialFromTaggedObject(t)}static credentialFromError(t){return Ll.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return Ll.credential(e,n)}catch(i){return null}}}Ll.TWITTER_SIGN_IN_METHOD="twitter.com",Ll.PROVIDER_ID="twitter.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Fl{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await ll._fromIdTokenResponse(t,n,i),o=zl(n);return new Fl({user:r,providerId:o,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=zl(n);return new Fl({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function zl(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends Os{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,this.name="FirebaseError",Object.setPrototypeOf(this,Bl.prototype),this.appName=t.name,this.code=e.code,this.tenantId=null!==(r=t.tenantId)&&void 0!==r?r:void 0,this.serverResponse=e.customData.serverResponse}static _fromErrorAndOperation(t,e,n,i){return new Bl(t,e,n,i)}}function Ul(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Bl._fromErrorAndOperation(t,n,e,i);throw n}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Vl(t,e){return Qs(t).setPersistence(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Hl{constructor(t,e){this.storage=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends Hl{constructor(){super(window.localStorage,"LOCAL"),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=Ms();return gl(t)||bl(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=Sl(),this._shouldAllowMigration=!0,this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);xl()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,10):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Wl.type="LOCAL";const jl=Wl;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends Hl{constructor(){super(window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}ql.type="SESSION";const Gl=ql;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Yl{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new Yl(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,o=this.handlersMap[i];if(!(null==o?void 0:o.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const s=Array.from(o).map((async t=>t(e.origin,r))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}})))}(s);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function $l(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(10*Math.random());return t+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yl.receivers=[];class Xl{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise(((s,a)=>{const l=$l("",20);i.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(u),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),s(e.data.response);break;default:clearTimeout(u),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:e},[i.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Zl(){return void 0!==Kl().WorkerGlobalScope&&"function"==typeof Kl().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Jl="firebaseLocalStorageDb";class Ql{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function tu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function eu(){const t=indexedDB.open(Jl,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(i){n(i)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains("firebaseLocalStorage")?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(Jl);return new Ql(t).toPromise()}(),e(await eu()))}))}))}async function nu(t,e,n){const i=tu(t,!0).put({fbase_key:e,value:n});return new Ql(i).toPromise()}function iu(t,e){const n=tu(t,!0).delete(e);return new Ql(n).toPromise()}class ru{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await eu()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(n){if(e++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zl()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yl._getInstance(Zl()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Xl(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await eu();return await nu(t,"__sak","1"),await iu(t,"__sak"),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>nu(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=tu(t,!1).get(e),i=await new Ql(n).toPromise();return void 0===i?null:i.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>iu(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=tu(t,!1).getAll();return new Ql(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ru.type="LOCAL";const ou=ru;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t){return new Promise(((e,n)=>{const i=document.createElement("script");var r,o;i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=Ea("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",(null!==(o=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==o?o:document).appendChild(i)}))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function au(t,e){return e?Ba(e):(Na(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Wa(3e4,6e4);class lu extends Ml{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Dl(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Dl(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Dl(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function uu(t){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(t,e,n=!1){const i="signIn",r=await Ul(t,i,e),o=await Fl._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}(t.auth,new lu(t),t.bypassAuthState)}function cu(t){const{auth:e,user:n}=t;return Na(n,e,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const o=await nl(t,Ul(i,r,e,t),n);Na(o.idToken,i,"internal-error");const s=el(o.idToken);Na(s,i,"internal-error");const{sub:a}=s;return Na(t.uid===a,i,"user-mismatch"),Fl._forOperation(t,r,o)}catch(o){throw"auth/user-not-found"===(null==o?void 0:o.code)&&Aa(i,"user-mismatch"),o}}(n,new lu(t),t.bypassAuthState)}async function hu(t){const{auth:e,user:n}=t;return Na(n,e,"internal-error"),async function(t,e,n=!1){const i=await nl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fl._forOperation(t,"link",i)}(n,new lu(t),t.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:o,type:s}=t;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return uu;case"linkViaPopup":case"linkViaRedirect":return hu;case"reauthViaPopup":case"reauthViaRedirect":return cu;default:Aa(this.auth,"internal-error")}}resolve(t){Fa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Fa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=new Wa(2e3,1e4);class fu extends du{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,fu.currentPopupAction&&fu.currentPopupAction.cancel(),fu.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Na(t,this.auth,"internal-error"),t}async onExecution(){Fa(1===this.filter.length,"Popup operations only handle one event");const t=$l();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(Ea(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Ea(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fu.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ea(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,pu.get())};t()}}fu.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const gu=new Map;class mu extends du{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=gu.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=vu(e),i="true"===await yu(t)._get(n);return await yu(t)._remove(n),i}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(e){t=()=>Promise.reject(e)}gu.set(this.auth._key(),t)}return t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function yu(t){return Ba(t._redirectPersistence)}function vu(t){return hl("pendingRedirect",t.config.apiKey,t.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t,e,n){return async function(t,e,n){const i=Il(t);!function(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&Aa(t,"argument-error"),Oa(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(t,e,Al);const r=au(i,n);return await async function(t,e){return yu(t)._set(vu(e),"true")}(r,i),r._openRedirect(i,e,"signInViaRedirect")}(t,e,n)}async function wu(t,e,n=!1){const i=Il(t),r=au(i,e),o=new mu(i,r,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await i._persistUserIfCurrent(s.user),await i._setRedirectUser(null,e)),s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Su(t);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Su(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(Ea(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xu(t))}saveEventToCache(t){this.cachedEventUids.add(xu(t)),this.lastProcessedEventTime=Date.now()}}function xu(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function Su({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Cu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tu=/^https?/;async function Iu(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return $a(t,"GET","/v1/projects",e)}(t);for(const i of e)try{if(ku(i))return}catch(n){}Aa(t,"unauthorized-domain")}function ku(t){const e=Ua(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Tu.test(n))return!1;if(Cu.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=new Wa(3e4,6e4);function Du(){const t=Kl().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function Pu(t){return new Promise(((e,n)=>{var i,r,o;function s(){Du(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Du(),n(Ea(t,"network-request-failed"))},timeout:Mu.get()})}if(null===(r=null===(i=Kl().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(o=Kl().gapi)||void 0===o?void 0:o.load)){const e=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return Kl()[e]=()=>{gapi.load?s():n(Ea(t,"network-request-failed"))},su(`https://apis.google.com/js/api.js?onload=${e}`)}s()}})).catch((t=>{throw Au=null,t}))}let Au=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Eu=new Wa(5e3,15e3),Ou={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Ru=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nu(t){const e=t.config;Na(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ja(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,i={apiKey:e.apiKey,appName:t.name,v:"9.0.0"},r=Ru.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Gs(i).slice(1)}`}async function Lu(t){const e=await function(t){return Au=Au||Pu(t),Au}(t),n=Kl().gapi;return Na(n,t,"internal-error"),e.open({where:document.body,url:Nu(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ou,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=Ea(t,"network-request-failed"),o=Kl().setTimeout((()=>{i(r)}),Eu.get());function s(){Kl().clearTimeout(o),n(e)}e.ping(s).then(s,(()=>{i(r)}))}))))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zu{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function Bu(t,e,n,i=500,r=600){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Fu),{width:i.toString(),height:r.toString(),top:o,left:s}),u=Ms().toLowerCase();n&&(a=ml(u)?"_blank":n),fl(u)&&(e=e||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=Ms()){var e;return bl(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e||"",a),new zu(null);const h=window.open(e||"",a,c);Na(h,t,"popup-blocked");try{h.focus()}catch(d){}return new zu(h)}function Uu(t,e,n,i,r,o){Na(t.config.authDomain,t,"auth-domain-config-required"),Na(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:"9.0.0",eventId:r};if(e instanceof Al){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Hs(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(o||{}))s[t]=e}if(e instanceof El){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(s.scopes=t.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];return`${function({config:t}){if(!t.emulator)return`https://${t.authDomain}/__/auth/handler`;return ja(t,"emulator/auth/handler")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)}?${Gs(a).slice(1)}`}const Vu=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gl,this._completeRedirectFn=wu}async _openPopup(t,e,n,i){var r;Fa(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Bu(t,Uu(t,e,n,Ua(),i),$l())}async _openRedirect(t,e,n,i){var r;return await this._originValidation(t),r=Uu(t,e,n,Ua(),i),Kl().location.href=r,new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(Fa(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n}async initAndGetManager(t){const e=await Lu(t),n=new bu(t);return e.register("authEvent",(e=>{Na(null==e?void 0:e.authEvent,t,"invalid-auth-event");return{status:n.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send("webStorageSupport",{type:"webStorageSupport"},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.webStorageSupport;void 0!==r&&e(!!r),Aa(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Iu(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Sl()||gl()||bl()}};var Hu;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Wu{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(t)}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Na(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ju(t=Sa()){const e=_a(t,"auth");return e.isInitialized()?e.getImmediate():function(t,e){const n=_a(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(js(n.getOptions(),null!=e?e:{}))return t;Aa(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:Vu,persistence:[ou,jl,Gl]})}Hu="Browser",va(new ta("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),{apiKey:i,authDomain:r}=n.options;return(t=>{Na(i&&!i.includes(":"),"invalid-api-key",{appName:t.name}),Na(!(null==r?void 0:r.includes(":")),"argument-error",{appName:t.name});const n={apiKey:i,authDomain:r,clientPlatform:Hu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cl(Hu)},o=new Tl(t,n);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ba);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(o,e),o})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),va(new ta("auth-internal",(t=>{const e=Il(t.getProvider("auth").getImmediate());return new Wu(e)}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ca("@firebase/auth","0.17.2",function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Hu));function qu(t){return Array.prototype.slice.call(t)}function Gu(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function Yu(t,e,n){var i,r=new Promise((function(r,o){Gu(i=t[e].apply(t,n)).then(r,o)}));return r.request=i,r}function $u(t,e,n){var i=Yu(t,e,n);return i.then((function(t){if(t)return new tc(t,i.request)}))}function Xu(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function Ku(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return Yu(this[e],i,arguments)})}))}function Zu(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return this[e][i].apply(this[e],arguments)})}))}function Ju(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return $u(this[e],i,arguments)})}))}function Qu(t){this._index=t}function tc(t,e){this._cursor=t,this._request=e}function ec(t){this._store=t}function nc(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function ic(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new nc(n)}function rc(t){this._db=t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Ca("firebase","9.0.2","app"),Xu(Qu,"_index",["name","keyPath","multiEntry","unique"]),Ku(Qu,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),Ju(Qu,"_index",IDBIndex,["openCursor","openKeyCursor"]),Xu(tc,"_cursor",["direction","key","primaryKey","value"]),Ku(tc,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(tc.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,n),Gu(e._request).then((function(t){if(t)return new tc(t,e._request)}))}))})})),ec.prototype.createIndex=function(){return new Qu(this._store.createIndex.apply(this._store,arguments))},ec.prototype.index=function(){return new Qu(this._store.index.apply(this._store,arguments))},Xu(ec,"_store",["name","keyPath","indexNames","autoIncrement"]),Ku(ec,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),Ju(ec,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Zu(ec,"_store",IDBObjectStore,["deleteIndex"]),nc.prototype.objectStore=function(){return new ec(this._tx.objectStore.apply(this._tx,arguments))},Xu(nc,"_tx",["objectStoreNames","mode"]),Zu(nc,"_tx",IDBTransaction,["abort"]),ic.prototype.createObjectStore=function(){return new ec(this._db.createObjectStore.apply(this._db,arguments))},Xu(ic,"_db",["name","version","objectStoreNames"]),Zu(ic,"_db",IDBDatabase,["deleteObjectStore","close"]),rc.prototype.transaction=function(){return new nc(this._db.transaction.apply(this._db,arguments))},Xu(rc,"_db",["name","version","objectStoreNames"]),Zu(rc,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[ec,Qu].forEach((function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var e=qu(arguments),n=e[e.length-1],i=this._store||this._index,r=i[t].apply(i,e.slice(0,-1));r.onsuccess=function(){n(r.result)}})}))})),[Qu,ec].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,i=[];return new Promise((function(r){n.iterateCursor(t,(function(t){t?(i.push(t.value),void 0===e||i.length!=e?t.continue():r(i)):r(i)}))}))})}));const oc=new Rs("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function sc(t){return t instanceof Os&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function lc(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function uc(t,e){const n=(await e.json()).error;return oc.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function cc({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function hc(t,{refreshToken:e}){const n=cc(t);return n.append("Authorization",function(t){return`FIS_v2 ${t}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)),n}async function dc(t){const e=await t();return e.status>=500&&e.status<600?t():e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function pc(t){return new Promise((e=>{setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const fc=/^[cdef][\w-]{21}$/;function gc(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return fc.test(e)?e:""}catch(t){return""}}function mc(t){return`${t.appName}!${t.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new Map;function vc(t,e){const n=mc(t);_c(n,e),function(t,e){const n=function(){!wc&&"BroadcastChannel"in self&&(wc=new BroadcastChannel("[Firebase] FID Change"),wc.onmessage=t=>{_c(t.data.key,t.data.fid)});return wc}();n&&n.postMessage({key:t,fid:e});0===yc.size&&wc&&(wc.close(),wc=null)}(n,e)}function _c(t,e){const n=yc.get(t);if(n)for(const i of n)i(e)}let wc=null;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const bc="firebase-installations-store";let xc=null;function Sc(){var t,e,n;return xc||(t=t=>{switch(t.oldVersion){case 0:t.createObjectStore(bc)}},e=Yu(indexedDB,"open",["firebase-installations-database",1]),(n=e.request)&&(n.onupgradeneeded=function(e){t&&t(new ic(n.result,e.oldVersion,n.transaction))}),xc=e.then((function(t){return new rc(t)}))),xc}async function Cc(t,e){const n=mc(t),i=(await Sc()).transaction(bc,"readwrite"),r=i.objectStore(bc),o=await r.get(n);return await r.put(e,n),await i.complete,o&&o.fid===e.fid||vc(t,e.fid),e}async function Tc(t){const e=mc(t),n=(await Sc()).transaction(bc,"readwrite");await n.objectStore(bc).delete(e),await n.complete}async function Ic(t,e){const n=mc(t),i=(await Sc()).transaction(bc,"readwrite"),r=i.objectStore(bc),o=await r.get(n),s=e(o);return void 0===s?await r.delete(n):await r.put(s,n),await i.complete,!s||o&&o.fid===s.fid||vc(t,s.fid),s}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(t){let e;const n=await Ic(t,(n=>{const i=function(t){return Pc(t||{fid:gc(),registrationStatus:0})}(n),r=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){return{installationEntry:e,registrationPromise:Promise.reject(oc.create("app-offline"))}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:async function(t,e){try{return Cc(t,await async function(t,{fid:e}){const n=ac(t),i=cc(t),r={fid:e,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.5.0"},o={method:"POST",headers:i,body:JSON.stringify(r)},s=await dc((()=>fetch(n,o)));if(s.ok){const t=await s.json();return{fid:t.fid||e,registrationStatus:2,refreshToken:t.refreshToken,authToken:lc(t.authToken)}}throw await uc("Create Installation",s)}(t,e))}catch(n){throw sc(n)&&409===n.customData.serverCode?await Tc(t):await Cc(t,{fid:e.fid,registrationStatus:0}),n}}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Mc(t)}:{installationEntry:e}}(t,i);return e=r.registrationPromise,r.installationEntry}));return""===n.fid?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function Mc(t){let e=await Dc(t);for(;1===e.registrationStatus;)await pc(100),e=await Dc(t);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await kc(t);return n||e}return e}function Dc(t){return Ic(t,(t=>{if(!t)throw oc.create("installation-not-found");return Pc(t)}))}function Pc(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}async function Ac({appConfig:t,platformLoggerProvider:e},n){const i=function(t,{fid:e}){return`${ac(t)}/${e}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,n),r=hc(t,n),o=e.getImmediate({optional:!0});o&&r.append("x-firebase-client",o.getPlatformInfoString());const s={installation:{sdkVersion:"w:0.5.0"}},a={method:"POST",headers:r,body:JSON.stringify(s)},l=await dc((()=>fetch(i,a)));if(l.ok){return lc(await l.json())}throw await uc("Generate Auth Token",l)}async function Ec(t,e=!1){let n;const i=await Ic(t.appConfig,(i=>{if(!Rc(i))throw oc.create("not-registered");const r=i.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}(r))return i;if(1===r.requestStatus)return n=async function(t,e){let n=await Oc(t.appConfig);for(;1===n.authToken.requestStatus;)await pc(100),n=await Oc(t.appConfig);const i=n.authToken;return 0===i.requestStatus?Ec(t,e):i}(t,e),i;{if(!navigator.onLine)throw oc.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(i);return n=async function(t,e){try{const n=await Ac(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Cc(t.appConfig,i),n}catch(n){if(!sc(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Cc(t.appConfig,n)}else await Tc(t.appConfig);throw n}}(t,e),e}}));return n?await n:i.authToken}function Oc(t){return Ic(t,(t=>{if(!Rc(t))throw oc.create("not-registered");const e=t.authToken;return 1===(n=e).requestStatus&&n.requestTime+1e4<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}function Rc(t){return void 0!==t&&2===t.registrationStatus}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Nc(t,e=!1){const n=t;await async function(t){const{registrationPromise:e}=await kc(t);e&&await e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n.appConfig);return(await Ec(n,e)).token}function Lc(t){return oc.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=t=>{const e=_a(t.getProvider("app").getImmediate(),"installations").getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:i}=await kc(e.appConfig);return i?i.catch(console.error):Ec(e).catch(console.error),n.fid}(e),getToken:t=>Nc(e,t)}};va(new ta("installations",(t=>{const e=t.getProvider("app").getImmediate();return{app:e,appConfig:function(t){if(!t||!t.options)throw Lc("App Configuration");if(!t.name)throw Lc("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Lc(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:_a(e,"platform-logger"),_delete:()=>Promise.resolve()}}),"PUBLIC")),va(new ta("installations-internal",Fc,"PRIVATE")),Ca("@firebase/installations","0.5.0");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const zc="https://www.googletagmanager.com/gtag/js",Bc=new ha("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Uc(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}function Vc(t,e,n,i){return async function(r,o,s){try{"event"===r?await async function(t,e,n,i,r){try{let o=[];if(r&&r.send_to){let t=r.send_to;Array.isArray(t)||(t=[t]);const i=await Uc(n);for(const n of t){const t=i.find((t=>t.measurementId===n)),r=t&&e[t.appId];if(!r){o=[];break}o.push(r)}}0===o.length&&(o=Object.values(e)),await Promise.all(o),t("event",i,r||{})}catch(o){Bc.error(o)}}(t,e,n,o,s):"config"===r?await async function(t,e,n,i,r,o){const s=i[r];try{if(s)await e[s];else{const t=(await Uc(n)).find((t=>t.measurementId===r));t&&await e[t.appId]}}catch(a){Bc.error(a)}t("config",r,o)}(t,e,n,i,o,s):t("set",o)}catch(a){Bc.error(a)}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Hc=new Rs("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'});const Wc=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function jc(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function qc(t,e=Wc,n){const{appId:i,apiKey:r,measurementId:o}=t.options;if(!i)throw Hc.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw Hc.create("no-api-key")}const s=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Yc;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),Gc({appId:i,apiKey:r,measurementId:o},s,a,e)}async function Gc(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=Wc){const{appId:o,measurementId:s}=t;try{await function(t,e){return new Promise(((n,i)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener((()=>{clearTimeout(o),i(Hc.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(i,e)}catch(a){if(s)return Bc.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${a.message}]`),{appId:o,measurementId:s};throw a}try{const e=await async function(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:jc(i)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),s=await fetch(o,r);if(200!==s.status&&304!==s.status){let t="";try{const n=await s.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(a){}throw Hc.create("config-fetch-failed",{httpStatus:s.status,responseMessage:t})}return s.json()}(t);return r.deleteThrottleMetadata(o),e}catch(a){if(!function(t){if(!(t instanceof Os&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(a)){if(r.deleteThrottleMetadata(o),s)return Bc.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${a.message}]`),{appId:o,measurementId:s};throw a}const e=503===Number(a.customData.httpStatus)?Js(n,r.intervalMillis,30):Js(n,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+e,backoffCount:n+1};return r.setThrottleMetadata(o,l),Bc.debug(`Calling attemptFetch again in ${e} millis`),Gc(t,l,i,r)}}class Yc{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(){if(!("indexedDB"in self)||null==indexedDB)return Bc.warn(Hc.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await new Promise((function(t,e){try{var n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=function(){r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=function(){n=!1},r.onerror=function(){var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}catch(t){return Bc.warn(Hc.create("indexeddb-unavailable",{errorInfo:t}).message),!1}return!0}async function Xc(t,e,n,i,r,o,s){var a;const l=qc(t);l.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Bc.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>Bc.error(t))),e.push(l);const u=$c().then((t=>t?i.getId():void 0)),[c,h]=await Promise.all([l,u]);(function(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(zc))return e;return null})()||function(t,e){const n=document.createElement("script");n.src=`${zc}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),r("js",new Date);const d=null!==(a=null==s?void 0:s.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),r("config",c.measurementId,d),c.measurementId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(t){this.app=t}_delete(){return delete Zc[this.app.options.appId],Promise.resolve()}}let Zc={},Jc=[];const Qc={};let th,eh,nh=!1;function ih(){const t=[];if(Ps()&&t.push("This is a browser extension environment."),navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=Hc.create("invalid-analytics-context",{errorInfo:e});Bc.warn(n.message)}}function rh(t,e,n){ih();const i=t.options.appId;if(!i)throw Hc.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Hc.create("no-api-key");Bc.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zc[i])throw Hc.create("already-exists",{id:i});if(!nh){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}("dataLayer");const{wrappedGtag:t,gtagCore:e}=function(t,e,n,i,r){let o=function(...t){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(o=window[r]),window[r]=Vc(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}(Zc,Jc,Qc,"dataLayer","gtag");eh=t,th=e,nh=!0}Zc[i]=Xc(t,Jc,Qc,e,th,"dataLayer",n);return new Kc(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(t=Sa()){const e=_a(t=Qs(t),"analytics");return e.isInitialized()?e.getImmediate():function(t,e={}){const n=_a(t,"analytics");if(n.isInitialized()){const t=n.getImmediate();if(js(e,n.getOptions()))return t;throw Hc.create("already-initialized")}return n.initialize({options:e})}(t)}function sh(t,e,n,i){t=Qs(t),async function(t,e,n,i,r){if(r&&r.global)t("event",n,i);else{const r=await e;t("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(eh,Zc[t.app.options.appId],e,n,i).catch((t=>Bc.error(t)))}va(new ta("analytics",((t,{options:e})=>rh(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),va(new ta("analytics-internal",(function(t){try{const e=t.getProvider("analytics").getImmediate();return{logEvent:(t,n,i)=>sh(e,t,n,i)}}catch(e){throw Hc.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),Ca("@firebase/analytics","0.7.0");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let ah="";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class lh{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),zs(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Fs(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return Us(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new lh(e)}}catch(e){}return new uh},hh=ch("localStorage"),dh=ch("sessionStorage"),ph=new ha("@firebase/database"),fh=function(){let t=1;return function(){return t++}}(),gh=function(t){const e=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);if(r>=55296&&r<=56319){var o=r-55296;i++,ws(i<t.length,"Surrogate pair missing trail surrogate."),r=65536+(o<<10)+(t.charCodeAt(i)-56320)}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e}(t),n=new Ys;n.update(e);const i=n.digest();return Ss.encodeByteArray(i)},mh=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=mh.apply(null,i):e+="object"==typeof i?zs(i):i,e+=" "}return e};let yh=null,vh=!0;const _h=function(...t){var e,n;if(!0===vh&&(vh=!1,null===yh&&!0===dh.get("logging_enabled")&&(e=!0,ws(!n||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(ph.logLevel=ia.VERBOSE,yh=ph.log.bind(ph),n&&dh.set("logging_enabled",!0)):"function"==typeof e?yh=e:(yh=null,dh.remove("logging_enabled")))),yh){const e=mh.apply(null,t);yh(e)}},wh=function(t){return function(...e){_h(t,...e)}},bh=function(...t){const e="FIREBASE INTERNAL ERROR: "+mh(...t);ph.error(e)},xh=function(...t){const e=`FIREBASE FATAL ERROR: ${mh(...t)}`;throw ph.error(e),new Error(e)},Sh=function(...t){const e="FIREBASE WARNING: "+mh(...t);ph.warn(e)},Ch=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Th="[MIN_NAME]",Ih="[MAX_NAME]",kh=function(t,e){if(t===e)return 0;if(t===Th||e===Ih)return-1;if(e===Th||t===Ih)return 1;{const n=Nh(t),i=Nh(e);return null!==n?null!==i?n-i==0?t.length-e.length:n-i:-1:null!==i?1:t<e?-1:1}},Mh=function(t,e){return t===e?0:t<e?-1:1},Dh=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+zs(e))},Ph=function(t){if("object"!=typeof t||null===t)return zs(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)0!==i&&(n+=","),n+=zs(e[i]),n+=":",n+=Ph(t[e[i]]);return n+="}",n},Ah=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function Eh(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Oh=function(t){ws(!Ch(t),"Invalid JSON number");const e=1023;let n,i,r,o,s;0===t?(i=0,r=0,n=1/t==-1/0?1:0):(n=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(t)/Math.LN2),e),i=o+e,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(i=0,r=Math.round(t/Math.pow(2,-1074))));const a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(i%2?1:0),i=Math.floor(i/2);a.push(n?1:0),a.reverse();const l=a.join("");let u="";for(s=0;s<64;s+=8){let t=parseInt(l.substr(s,8),2).toString(16);1===t.length&&(t="0"+t),u+=t}return u.toLowerCase()};const Rh=new RegExp("^-?(0*)\\d{1,10}$"),Nh=function(t){if(Rh.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Lh=function(t){try{t()}catch(e){setTimeout((()=>{const t=e.stack||"";throw Sh("Exception was thrown by user callback.",t),e}),Math.floor(0))}},Fh=function(t,e){const n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class zh{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((t=>this.appCheck=t))}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise(((e,n)=>{setTimeout((()=>{this.appCheck?this.getToken(t).then(e,n):e(null)}),0)}))}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((e=>e.addTokenListener(t)))}notifyForInvalidToken(){Sh(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(t,e,n){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((t=>this.auth_=t))}getToken(t){return this.auth_?this.auth_.getToken(t).catch((t=>t&&"auth/token-not-initialized"===t.code?(_h("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t))):new Promise(((e,n)=>{setTimeout((()=>{this.auth_?this.getToken(t).then(e,n):e(null)}),0)}))}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((e=>e.addAuthTokenListener(t)))}removeTokenChangeListener(t){this.authProvider_.get().then((e=>e.removeAuthTokenListener(t)))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Sh(t)}}class Uh{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Uh.OWNER="owner";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Vh=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Hh{constructor(t,e,n,i,r=!1,o="",s=!1){this.secure=e,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hh.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&hh.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function Wh(t,e,n){let i;if(ws("string"==typeof e,"typeof type must == string"),ws("object"==typeof n,"typeof params must == object"),"websocket"===e)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const r=[];return Eh(n,((t,e)=>{r.push(t+"="+e)})),i+r.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(){this.counters_={}}incrementCounter(t,e=1){Us(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return Ts(this.counters_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh={},Gh={};function Yh(t){const e=t.toString();return qh[e]||(qh[e]=new jh),qh[e]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $h{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const t=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let e=0;e<t.length;++e)t[e]&&Lh((()=>{this.onMessage_(t[e])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(t,e,n,i,r,o,s){this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wh(t),this.stats_=Yh(e),this.urlFn=t=>(this.appCheckToken&&(t.ac=this.appCheckToken),Wh(e,"long_polling",t))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new $h(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Kh(((...t)=>{const[e,n,i,r,o]=t;if(this.incrementIncomingBytes_(t),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===e)this.id=n,this.password=i;else{if("close"!==e)throw new Error("Unrecognized command received: "+e);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...t)=>{const[e,n]=t;this.incrementIncomingBytes_(t),this.myPacketOrderer.handleResponse(e,n)}),(()=>{this.onClosed_()}),this.urlFn);const t={start:"t"};t.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=this.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",this.transportSessionId&&(t.s=this.transportSessionId),this.lastSessionId&&(t.ls=this.lastSessionId),this.applicationId&&(t.p=this.applicationId),this.appCheckToken&&(t.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Vh.test(location.hostname)&&(t.r="f");const e=this.urlFn(t);this.log_("Connecting via long-poll to "+e),this.scriptTagHolder.addTag(e,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Xh.forceAllow_=!0}static forceDisallow(){Xh.forceDisallow_=!0}static isAvailable(){return!!Xh.forceAllow_||!(Xh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=zs(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=(i=xs(e),Ss.encodeByteArray(i,!0));var i;const r=Ah(n,1840);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(t,e){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=zs(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class Kh{constructor(t,e,n,i){this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=fh(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=Kh.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){n='<script>document.domain="'+document.domain+'";<\/script>'}const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(r){_h("frame writing exception"),r.stack&&_h(r.stack),_h(r)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_h("No IE domain setting required")}catch(e){const n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),n="",i=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const t=this.pendingSegs.shift();n=n+"&seg"+i+"="+t.seg+"&ts"+i+"="+t.ts+"&d"+i+"="+t.d,i++}}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(t,(()=>{clearTimeout(i),n()}))}addTag(t,e){setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){const t=n.readyState;t&&"loaded"!==t&&"complete"!==t||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{_h("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh=null;"undefined"!=typeof MozWebSocket?Zh=MozWebSocket:"undefined"!=typeof WebSocket&&(Zh=WebSocket);class Jh{constructor(t,e,n,i,r,o,s){this.connId=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wh(this.connId),this.stats_=Yh(e),this.connURL=Jh.connectionURL_(e,o,s,i),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,n,i){const r={v:"5"};return"undefined"!=typeof location&&location.hostname&&Vh.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),i&&(r.ac=i),Wh(t,"websocket",r)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hh.set("previous_websocket_failure",!0);try{if(Es());else{const t={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Zh(this.connURL,[],t)}}catch(n){this.log_("Error instantiating WebSocket.");const t=n.message||n.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=t=>{this.handleIncomingFrame(t)},this.mySock.onerror=t=>{this.log_("WebSocket error.  Closing connection.");const e=t.message||t.data;e&&this.log_(e),this.onClosed_()}}start(){}static forceDisallow(){Jh.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(e);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Zh&&!Jh.forceDisallow_}static previouslyFailed(){return hh.isInMemoryStorage||!0===hh.get("previous_websocket_failure")}markConnectionHealthy(){hh.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const e=Fs(t);this.onMessage(e)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(ws(null===this.frames,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{const t=this.extractFrameCount_(e);null!==t&&this.appendFrame_(t)}}send(t){this.resetKeepAlive();const e=zs(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=Ah(e,16384);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Jh.responsesRequiredToBeHealthy=2,Jh.healthyTimeout=3e4;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Qh{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Xh,Jh]}initTransports_(t){const e=Jh&&Jh.isAvailable();let n=e&&!Jh.previouslyFailed();if(t.webSocketOnly&&(e||Sh("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Jh];else{const t=this.transports_=[];for(const e of Qh.ALL_TRANSPORTS)e&&e.isAvailable()&&t.push(e)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(t,e,n,i,r,o,s,a,l,u){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wh("c:"+this.id+":"),this.transportManager_=new Qh(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(e,n)}),Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Fh((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Dh("t",t),n=Dh("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Dh("t",t),n=Dh("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Dh("t",t);if("d"in t){const n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let t=0;t<this.pendingDataMessages.length;++t)this.onDataMessage_(this.pendingDataMessages[t]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?bh("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bh("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,n=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Sh("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),Fh((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fh((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{put(t,e,n,i){}merge(t,e,n,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,n){}onDisconnectMerge(t,e,n){}onDisconnectCancel(t,e){}reportStats(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(t){this.allowedEvents_=t,this.listeners_={},ws(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const n=[...this.listeners_[t]];for(let t=0;t<n.length;t++)n[t].callback.apply(n[t].context,e)}}on(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});const i=this.getInitialEvent(t);i&&e.apply(n,i)}off(t,e,n){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let r=0;r<i.length;r++)if(i[r].callback===e&&(!n||n===i[r].context))return void i.splice(r,1)}validateEventType_(t){ws(this.allowedEvents_.find((e=>e===t)),"Unknown event: "+t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends nd{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Ds()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new id}getInitialEvent(t){return ws("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let e=0;for(let t=0;t<this.pieces_.length;t++)this.pieces_[t].length>0&&(this.pieces_[e]=this.pieces_[t],e++);this.pieces_.length=e,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function od(){return new rd("")}function sd(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ad(t){return t.pieces_.length-t.pieceNum_}function ld(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new rd(t.pieces_,e)}function ud(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function cd(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function hd(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new rd(e,0)}function dd(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof rd)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const t=e.split("/");for(let e=0;e<t.length;e++)t[e].length>0&&n.push(t[e])}return new rd(n,0)}function pd(t){return t.pieceNum_>=t.pieces_.length}function fd(t,e){const n=sd(t),i=sd(e);if(null===n)return e;if(n===i)return fd(ld(t),ld(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function gd(t,e){if(ad(t)!==ad(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function md(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(ad(t)>ad(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class yd{constructor(t,e){this.errorPrefix_=e,this.parts_=cd(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Zs(this.parts_[n]);vd(this)}}function vd(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+_d(t))}function _d(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends nd{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,(()=>{const e=!document[t];e!==this.visible_&&(this.visible_=e,this.trigger("visible",e))}),!1)}static getInstance(){return new wd}getInitialEvent(t){return ws("visible"===t,"Unknown event type: "+t),[this.visible_]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd extends ed{constructor(t,e,n,i,r,o,s,a){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=a,this.id=bd.nextPersistentConnectionId_++,this.log_=wh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=1e3,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Es())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wd.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&id.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,n){const i=++this.requestNumber_,r={r:i,a:t,b:e};this.log_(zs(r)),ws(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(t){this.initConnection_();const e=new ks,n={p:t._path.toString(),q:t._queryObject},i={action:"g",request:n,onComplete:t=>{const i=t.d;"ok"===t.s?(this.onDataUpdate_(n.p,i,!1,null),e.resolve(i)):e.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_||setTimeout((()=>{const t=this.outstandingGets_[r];void 0!==t&&i===t&&(delete this.outstandingGets_[r],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+r+" timed out on connection"),e.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(r),e.promise}listen(t,e,n,i){this.initConnection_();const r=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),ws(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ws(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const s={onComplete:i,hashFn:e,query:t,tag:n};this.listens.get(o).set(r,s),this.connected_&&this.sendListen_(s)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,(n=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(n)}))}sendListen_(t){const e=t.query,n=e._path.toString(),i=e._queryIdentifier;this.log_("Listen on "+n+" for "+i);const r={p:n};t.tag&&(r.q=e._queryObject,r.t=t.tag),r.h=t.hashFn(),this.sendRequest("q",r,(r=>{const o=r.d,s=r.s;bd.warnOnListenWarnings_(o,e);(this.listens.get(n)&&this.listens.get(n).get(i))===t&&(this.log_("listen response",r),"ok"!==s&&this.removeListen_(n,i),t.onComplete&&t.onComplete(s,o))}))}static warnOnListenWarnings_(t,e){if(t&&"object"==typeof t&&Us(t,"w")){const n=Vs(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',n=e._path.toString();Sh(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${t} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){var e;(t&&40===t.length||"object"==typeof(e=Bs(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=function(t){var e=Bs(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")}(t)?"auth":"gauth",n={cred:t};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,(e=>{const n=e.s,i=e.d||"error";this.authToken_===t&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(t=>{const e=t.s,n=t.d||"error";"ok"===e?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,n)}))}unlisten(t,e){const n=t._path.toString(),i=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),ws(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,t._queryObject,e)}sendUnlisten_(t,e,n,i){this.log_("Unlisten on "+t+" for "+e);const r={p:t};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})}onDisconnectMerge(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,n,i){const r={p:e,d:n};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,(t=>{i&&setTimeout((()=>{i(t.s,t.d)}),Math.floor(0))}))}put(t,e,n,i){this.putInternal("p",t,e,n,i)}merge(t,e,n,i){this.putInternal("m",t,e,n,i)}putInternal(t,e,n,i,r){this.initConnection_();const o={p:e,d:n};void 0!==r&&(o.h=r),this.outstandingPuts_.push({action:t,request:o,onComplete:i}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,n=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,n,(n=>{this.log_(e+" response",n),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)}))}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,(t=>{if("ok"!==t.s){const e=t.d;this.log_("reportStats","Error sending stats: "+e)}}))}}onDataMessage_(t){if("r"in t){this.log_("from server: "+zs(t));const e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):bh("Unrecognized action received from server: "+zs(t)+"\nAre you using the latest client?")}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){ws(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+bd.nextConnectionId_++,o=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,i())},u=function(t){ws(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(t)};this.realtime_={close:l,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[t,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?_h("getToken() completed but was canceled"):(_h("getToken() completed. Creating connection."),this.authToken_=t&&t.accessToken,this.appCheckToken_=l&&l.token,a=new td(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,(t=>{Sh(t+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),o))}catch(t){this.log_("Failed to get token: "+t),s||(this.repoInfo_.nodeAdmin&&Sh(t),l())}}}interrupt(t){_h("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){_h("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Hs(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let n;n=e?e.map((t=>Ph(t))).join("$"):"default";const i=this.removeListen_(t,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(t,e){const n=new rd(t).toString();let i;if(this.listens.has(n)){const t=this.listens.get(n);i=t.get(e),t.delete(e),0===t.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(t,e){_h("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){_h("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};t["sdk.js."+ah.replace(/\./g,"-")]=1,Ds()?t["framework.cordova"]=1:As()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=id.getInstance().currentlyOnline();return Hs(this.interruptReasons_)&&t}}bd.nextPersistentConnectionId_=0,bd.nextConnectionId_=0;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class xd{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new xd(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const n=new xd(Th,t),i=new xd(Th,e);return 0!==this.compare(n,i)}minPost(){return xd.MIN}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cd;class Td extends Sd{static get __EMPTY_NODE(){return Cd}static set __EMPTY_NODE(t){Cd=t}compare(t,e){return kh(t.name,e.name)}isDefinedOn(t){throw bs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return xd.MIN}maxPost(){return new xd(Ih,Cd)}makePost(t,e){return ws("string"==typeof t,"KeyIndex indexValue must always be a string."),new xd(t,Cd)}toString(){return".key"}}const Id=new Td;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(t,e,n,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Md{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:Md.RED,this.left=null!=i?i:Dd.EMPTY_NODE,this.right=null!=r?r:Dd.EMPTY_NODE}copy(t,e,n,i,r){return new Md(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Dd.EMPTY_NODE;let t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let n,i;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Dd.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Md.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Md.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Md.RED=!0,Md.BLACK=!1;class Dd{constructor(t,e=Dd.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Dd(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Md.BLACK,null,null))}remove(t){return new Dd(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Md.BLACK,null,null))}get(t){let e,n=this.root_;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(t){let e,n=this.root_,i=null;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new kd(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new kd(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new kd(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new kd(this.root_,null,this.comparator_,!0,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pd(t,e){return kh(t.name,e.name)}function Ad(t,e){return kh(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ed;Dd.EMPTY_NODE=new class{copy(t,e,n,i,r){return this}insert(t,e,n){return new Md(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Od=function(t){return"number"==typeof t?"number:"+Oh(t):"string:"+t},Rd=function(t){if(t.isLeafNode()){const e=t.val();ws("string"==typeof e||"number"==typeof e||"object"==typeof e&&Us(e,".sv"),"Priority must be a string or number.")}else ws(t===Ed||t.isEmpty(),"priority of unexpected type.");ws(t===Ed||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Nd,Ld,Fd;class zd{constructor(t,e=zd.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,ws(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Rd(this.priorityNode_)}static set __childrenNodeConstructor(t){Nd=t}static get __childrenNodeConstructor(){return Nd}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new zd(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:zd.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return pd(t)?this:".priority"===sd(t)?this.priorityNode_:zd.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:zd.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const n=sd(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:(ws(".priority"!==n||1===ad(t),".priority must be the last token in a path"),this.updateImmediateChild(n,zd.__childrenNodeConstructor.EMPTY_NODE.updateChild(ld(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Od(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",t+="number"===e?Oh(this.value_):this.value_,this.lazyHash_=gh(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===zd.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof zd.__childrenNodeConstructor?-1:(ws(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,n=typeof this.value_,i=zd.VALUE_TYPE_ORDER.indexOf(e),r=zd.VALUE_TYPE_ORDER.indexOf(n);return ws(i>=0,"Unknown leaf type: "+e),ws(r>=0,"Unknown leaf type: "+n),i===r?"object"===n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1}}zd.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Bd=new class extends Sd{compare(t,e){const n=t.node.getPriority(),i=e.node.getPriority(),r=n.compareTo(i);return 0===r?kh(t.name,e.name):r}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return xd.MIN}maxPost(){return new xd(Ih,new zd("[PRIORITY-POST]",Fd))}makePost(t,e){const n=Ld(t);return new xd(e,new zd("[PRIORITY-POST]",n))}toString(){return".priority"}},Ud=Math.log(2);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Ud,10)),this.current_=this.count-1;const n=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=t+1&n}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Hd=function(t,e,n,i){t.sort(e);const r=function(e,i){const o=i-e;let s,a;if(0===o)return null;if(1===o)return s=t[e],a=n?n(s):s,new Md(a,s.node,Md.BLACK,null,null);{const l=parseInt(o/2,10)+e,u=r(e,l),c=r(l+1,i);return s=t[l],a=n?n(s):s,new Md(a,s.node,Md.BLACK,u,c)}},o=function(e){let i=null,o=null,s=t.length;const a=function(e,i){const o=s-e,a=s;s-=e;const u=r(o+1,a),c=t[o],h=n?n(c):c;l(new Md(h,c.node,i,null,u))},l=function(t){i?(i.left=t,i=t):(o=t,i=t)};for(let t=0;t<e.count;++t){const n=e.nextBitIsOne(),i=Math.pow(2,e.count-(t+1));n?a(i,Md.BLACK):(a(i,Md.BLACK),a(i,Md.RED))}return o}(new Vd(t.length));return new Dd(i||e,o)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wd;const jd={};class qd{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return ws(jd&&Bd,"ChildrenNode.ts has not been loaded"),Wd=Wd||new qd({".priority":jd},{".priority":Bd}),Wd}get(t){const e=Vs(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Dd?e:null}hasIndex(t){return Us(this.indexSet_,t.toString())}addIndex(t,e){ws(t!==Id,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=e.getIterator(xd.Wrap);let o,s=r.getNext();for(;s;)i=i||t.isDefinedOn(s.node),n.push(s),s=r.getNext();o=i?Hd(n,t.getCompare()):jd;const a=t.toString(),l=Object.assign({},this.indexSet_);l[a]=t;const u=Object.assign({},this.indexes_);return u[a]=o,new qd(u,l)}addToIndexes(t,e){const n=Ws(this.indexes_,((n,i)=>{const r=Vs(this.indexSet_,i);if(ws(r,"Missing index implementation for "+i),n===jd){if(r.isDefinedOn(t.node)){const n=[],i=e.getIterator(xd.Wrap);let o=i.getNext();for(;o;)o.name!==t.name&&n.push(o),o=i.getNext();return n.push(t),Hd(n,r.getCompare())}return jd}{const i=e.get(t.name);let r=n;return i&&(r=r.remove(new xd(t.name,i))),r.insert(t,t.node)}}));return new qd(n,this.indexSet_)}removeFromIndexes(t,e){const n=Ws(this.indexes_,(n=>{if(n===jd)return n;{const i=e.get(t.name);return i?n.remove(new xd(t.name,i)):n}}));return new qd(n,this.indexSet_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd;class Yd{constructor(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Rd(this.priorityNode_),this.children_.isEmpty()&&ws(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Gd||(Gd=new Yd(new Dd(Ad),null,qd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Gd}updatePriority(t){return this.children_.isEmpty()?this:new Yd(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const e=this.children_.get(t);return null===e?Gd:e}}getChild(t){const e=sd(t);return null===e?this:this.getImmediateChild(e).getChild(ld(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,e){if(ws(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);{const n=new xd(t,e);let i,r;e.isEmpty()?(i=this.children_.remove(t),r=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(t,e),r=this.indexMap_.addToIndexes(n,this.children_));const o=i.isEmpty()?Gd:this.priorityNode_;return new Yd(i,o,r)}}updateChild(t,e){const n=sd(t);if(null===n)return e;{ws(".priority"!==sd(t)||1===ad(t),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(ld(t),e);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let n=0,i=0,r=!0;if(this.forEachChild(Bd,((o,s)=>{e[o]=s.val(t),n++,r&&Yd.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):r=!1})),!t&&r&&i<2*n){const t=[];for(const n in e)t[n]=e[n];return t}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Od(this.getPriority().val())+":"),this.forEachChild(Bd,((e,n)=>{const i=n.hash();""!==i&&(t+=":"+e+":"+i)})),this.lazyHash_=""===t?"":gh(t)}return this.lazyHash_}getPredecessorChildName(t,e,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new xd(t,e));return n?n.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.minKey();return t&&t.name}return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new xd(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.maxKey();return t&&t.name}return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new xd(e,this.children_.get(e)):null}forEachChild(t,e){const n=this.resolveIndex_(t);return n?n.inorderTraversal((t=>e(t.name,t.node))):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(t=>t));{const n=this.children_.getIteratorFrom(t.name,xd.Wrap);let i=n.peek();for(;null!=i&&e.compare(i,t)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(t=>t));{const n=this.children_.getReverseIteratorFrom(t.name,xd.Wrap);let i=n.peek();for(;null!=i&&e.compare(i,t)>0;)n.getNext(),i=n.peek();return n}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===$d?-1:0}withIndex(t){if(t===Id||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new Yd(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===Id||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){const t=this.getIterator(Bd),n=e.getIterator(Bd);let i=t.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=t.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(t){return t===Id?null:this.indexMap_.get(t.toString())}}Yd.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const $d=new class extends Yd{constructor(){super(new Dd(Ad),Yd.EMPTY_NODE,qd.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Yd.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(xd,{MIN:{value:new xd(Th,Yd.EMPTY_NODE)},MAX:{value:new xd(Ih,$d)}}),Td.__EMPTY_NODE=Yd.EMPTY_NODE,zd.__childrenNodeConstructor=Yd,Ed=$d,function(t){Fd=t}($d);function Xd(t,e=null){if(null===t)return Yd.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),ws(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t){return new zd(t,Xd(e))}if(t instanceof Array){let n=Yd.EMPTY_NODE;return Eh(t,((e,i)=>{if(Us(t,e)&&"."!==e.substring(0,1)){const t=Xd(i);!t.isLeafNode()&&t.isEmpty()||(n=n.updateImmediateChild(e,t))}})),n.updatePriority(Xd(e))}{const n=[];let i=!1;if(Eh(t,((t,e)=>{if("."!==t.substring(0,1)){const r=Xd(e);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new xd(t,r)))}})),0===n.length)return Yd.EMPTY_NODE;const r=Hd(n,Pd,(t=>t.name),Ad);if(i){const t=Hd(n,Bd.getCompare());return new Yd(r,Xd(e),new qd({".priority":t},{".priority":Bd}))}return new Yd(r,Xd(e),qd.Default)}}!function(t){Ld=t}(Xd);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Kd extends Sd{constructor(t){super(),this.indexPath_=t,ws(!pd(t)&&".priority"!==sd(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const n=this.extractChild(t.node),i=this.extractChild(e.node),r=n.compareTo(i);return 0===r?kh(t.name,e.name):r}makePost(t,e){const n=Xd(t),i=Yd.EMPTY_NODE.updateChild(this.indexPath_,n);return new xd(e,i)}maxPost(){const t=Yd.EMPTY_NODE.updateChild(this.indexPath_,$d);return new xd(Ih,t)}toString(){return cd(this.indexPath_,0).join("/")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=new class extends Sd{compare(t,e){const n=t.node.compareTo(e.node);return 0===n?kh(t.name,e.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return xd.MIN}maxPost(){return xd.MAX}makePost(t,e){const n=Xd(t);return new xd(e,n)}toString(){return".value"}},Jd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Qd=function(){let t=0;const e=[];return function(n){const i=n===t;let r;t=n;const o=new Array(8);for(r=7;r>=0;r--)o[r]=Jd.charAt(n%64),n=Math.floor(n/64);ws(0===n,"Cannot push at time == 0");let s=o.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)s+=Jd.charAt(e[r]);return ws(20===s.length,"nextPushId: Length should be 20."),s}}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function tp(t){return{type:"value",snapshotNode:t}}function ep(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function np(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ip(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class rp{constructor(t){this.index_=t}updateChild(t,e,n,i,r,o){ws(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const s=t.getImmediateChild(e);return s.getChild(i).equals(n.getChild(i))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(np(e,s)):ws(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(ep(e,n)):o.trackChildChange(ip(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))}updateFullNode(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Bd,((t,i)=>{e.hasChild(t)||n.trackChildChange(np(t,i))})),e.isLeafNode()||e.forEachChild(Bd,((e,i)=>{if(t.hasChild(e)){const r=t.getImmediateChild(e);r.equals(i)||n.trackChildChange(ip(e,i,r))}else n.trackChildChange(ep(e,i))}))),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Yd.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(t){this.indexedFilter_=new rp(t.getIndex()),this.index_=t.getIndex(),this.startPost_=op.getStartPost_(t),this.endPost_=op.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,n,i,r,o){return this.matches(new xd(e,n))||(n=Yd.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,i,r,o)}updateFullNode(t,e,n){e.isLeafNode()&&(e=Yd.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(Yd.EMPTY_NODE);const r=this;return e.forEachChild(Bd,((t,e)=>{r.matches(new xd(t,e))||(i=i.updateImmediateChild(t,Yd.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,i,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(t){this.rangedFilter_=new op(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,n,i,r,o){return this.rangedFilter_.matches(new xd(e,n))||(n=Yd.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,i,r,o):this.fullLimitUpdateChild_(t,e,n,r,o)}updateFullNode(t,e,n){let i;if(e.isLeafNode()||e.isEmpty())i=Yd.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let t;i=Yd.EMPTY_NODE.withIndex(this.index_),t=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;t.hasNext()&&n<this.limit_;){const e=t.getNext();let r;if(r=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),e)<=0:this.index_.compare(e,this.rangedFilter_.getEndPost())<=0,!r)break;i=i.updateImmediateChild(e.name,e.node),n++}}else{let t,n,r,o;if(i=e.withIndex(this.index_),i=i.updatePriority(Yd.EMPTY_NODE),this.reverse_){o=i.getReverseIterator(this.index_),t=this.rangedFilter_.getEndPost(),n=this.rangedFilter_.getStartPost();const e=this.index_.getCompare();r=(t,n)=>e(n,t)}else o=i.getIterator(this.index_),t=this.rangedFilter_.getStartPost(),n=this.rangedFilter_.getEndPost(),r=this.index_.getCompare();let s=0,a=!1;for(;o.hasNext();){const e=o.getNext();!a&&r(t,e)<=0&&(a=!0);a&&s<this.limit_&&r(e,n)<=0?s++:i=i.updateImmediateChild(e.name,Yd.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,n,i,r){let o;if(this.reverse_){const t=this.index_.getCompare();o=(e,n)=>t(n,e)}else o=this.index_.getCompare();const s=t;ws(s.numChildren()===this.limit_,"");const a=new xd(e,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),u=this.rangedFilter_.matches(a);if(s.hasChild(e)){const t=s.getImmediateChild(e);let c=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=c&&(c.name===e||s.hasChild(c.name));)c=i.getChildAfterChild(this.index_,c,this.reverse_);const h=null==c?1:o(c,a);if(u&&!n.isEmpty()&&h>=0)return null!=r&&r.trackChildChange(ip(e,n,t)),s.updateImmediateChild(e,n);{null!=r&&r.trackChildChange(np(e,t));const n=s.updateImmediateChild(e,Yd.EMPTY_NODE);return null!=c&&this.rangedFilter_.matches(c)?(null!=r&&r.trackChildChange(ep(c.name,c.node)),n.updateImmediateChild(c.name,c.node)):n}}return n.isEmpty()?t:u&&o(l,a)>=0?(null!=r&&(r.trackChildChange(np(l.name,l.node)),r.trackChildChange(ep(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(l.name,Yd.EMPTY_NODE)):t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Bd}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return ws(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ws(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Th}hasEnd(){return this.endSet_}getIndexEndValue(){return ws(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ws(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ih}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return ws(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Bd}copy(){const t=new ap;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function lp(t){const e={};if(t.isDefault())return e;let n;return t.index_===Bd?n="$priority":t.index_===Zd?n="$value":t.index_===Id?n="$key":(ws(t.index_ instanceof Kd,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=zs(n),t.startSet_&&(e.startAt=zs(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+zs(t.indexStartName_))),t.endSet_&&(e.endAt=zs(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+zs(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function up(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Bd&&(e.i=t.index_.toString()),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp extends ed{constructor(t,e,n,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=wh("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:(ws(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,n,i){const r=t._path.toString();this.log_("Listen called for "+r+" "+t._queryIdentifier);const o=cp.getListenId_(t,n),s={};this.listens_[o]=s;const a=lp(t._queryParams);this.restRequest_(r+".json",a,((t,e)=>{let a=e;if(404===t&&(a=null,t=null),null===t&&this.onDataUpdate_(r,a,!1,n),Vs(this.listens_,o)===s){let e;e=t?401===t?"permission_denied":"rest_error:"+t:"ok",i(e,null)}}))}unlisten(t,e){const n=cp.getListenId_(t,e);delete this.listens_[n]}get(t){const e=lp(t._queryParams),n=t._path.toString(),i=new ks;return this.restRequest_(n+".json",e,((t,e)=>{let r=e;404===t&&(r=null,t=null),null===t?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))})),i.promise}refreshAuthToken(t){}restRequest_(t,e={},n){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([i,r])=>{i&&i.accessToken&&(e.auth=i.accessToken),r&&r.token&&(e.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Gs(e);this.log_("Sending REST request for "+o);const s=new XMLHttpRequest;s.onreadystatechange=()=>{if(n&&4===s.readyState){this.log_("REST Response for "+o+" received. status:",s.status,"response:",s.responseText);let e=null;if(s.status>=200&&s.status<300){try{e=Fs(s.responseText)}catch(t){Sh("Failed to parse JSON response for "+o+": "+s.responseText)}n(null,e)}else 401!==s.status&&404!==s.status&&Sh("Got unsuccessful REST response for "+o+" Status: "+s.status),n(s.status);n=null}},s.open("GET",o,!0),s.send()}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this.rootNode_=Yd.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(){return{value:null,children:new Map}}function pp(t,e,n){if(pd(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const i=sd(e);t.children.has(i)||t.children.set(i,dp());pp(t.children.get(i),e=ld(e),n)}}function fp(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(((t,n)=>{e(n,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,((t,i)=>{fp(i,new rd(e.toString()+"/"+t),n)}))}class gp{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Eh(this.last_,((t,n)=>{e[t]=e[t]-n})),this.last_=t,e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new gp(t);const n=1e4+2e4*Math.random();Fh(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const t=this.statsListener_.get(),e={};let n=!1;Eh(t,((t,i)=>{i>0&&Us(this.statsToReport_,t)&&(e[t]=i,n=!0)})),n&&this.server_.reportStats(e),Fh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yp,vp;function _p(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(vp=yp||(yp={}))[vp.OVERWRITE=0]="OVERWRITE",vp[vp.MERGE=1]="MERGE",vp[vp.ACK_USER_WRITE=2]="ACK_USER_WRITE",vp[vp.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";class wp{constructor(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=yp.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(pd(this.path)){if(null!=this.affectedTree.value)return ws(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new rd(t));return new wp(od(),e,this.revert)}}return ws(sd(this.path)===t,"operationForChild called for unrelated child."),new wp(ld(this.path),this.affectedTree,this.revert)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(t,e){this.source=t,this.path=e,this.type=yp.LISTEN_COMPLETE}operationForChild(t){return pd(this.path)?new bp(this.source,od()):new bp(this.source,ld(this.path))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=yp.OVERWRITE}operationForChild(t){return pd(this.path)?new xp(this.source,od(),this.snap.getImmediateChild(t)):new xp(this.source,ld(this.path),this.snap)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t,e,n){this.source=t,this.path=e,this.children=n,this.type=yp.MERGE}operationForChild(t){if(pd(this.path)){const e=this.children.subtree(new rd(t));return e.isEmpty()?null:e.value?new xp(this.source,od(),e.value):new Sp(this.source,od(),e)}return ws(sd(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Sp(this.source,ld(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(pd(t))return this.isFullyInitialized()&&!this.filtered_;const e=sd(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Ip(t,e,n,i,r,o){const s=i.filter((t=>t.type===n));s.sort(((e,n)=>function(t,e,n){if(null==e.childName||null==n.childName)throw bs("Should only compare child_ events.");const i=new xd(e.childName,e.snapshotNode),r=new xd(n.childName,n.snapshotNode);return t.index_.compare(i,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,n))),s.forEach((n=>{const i=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,o);r.forEach((r=>{r.respondsTo(n.type)&&e.push(r.createEvent(i,t.query_))}))}))}function kp(t,e){return{eventCache:t,serverCache:e}}function Mp(t,e,n,i){return kp(new Cp(e,n,i),t.serverCache)}function Dp(t,e,n,i){return kp(t.eventCache,new Cp(e,n,i))}function Pp(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ap(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ep;class Op{constructor(t,e=(()=>(Ep||(Ep=new Dd(Mh)),Ep))()){this.value=t,this.children=e}static fromObject(t){let e=new Op(null);return Eh(t,((t,n)=>{e=e.set(new rd(t),n)})),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:od(),value:this.value};if(pd(t))return null;{const n=sd(t),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(ld(t),e);if(null!=r){return{path:dd(new rd(n),r.path),value:r.value}}return null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,(()=>!0))}subtree(t){if(pd(t))return this;{const e=sd(t),n=this.children.get(e);return null!==n?n.subtree(ld(t)):new Op(null)}}set(t,e){if(pd(t))return new Op(e,this.children);{const n=sd(t),i=(this.children.get(n)||new Op(null)).set(ld(t),e),r=this.children.insert(n,i);return new Op(this.value,r)}}remove(t){if(pd(t))return this.children.isEmpty()?new Op(null):new Op(null,this.children);{const e=sd(t),n=this.children.get(e);if(n){const i=n.remove(ld(t));let r;return r=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&r.isEmpty()?new Op(null):new Op(this.value,r)}return this}}get(t){if(pd(t))return this.value;{const e=sd(t),n=this.children.get(e);return n?n.get(ld(t)):null}}setTree(t,e){if(pd(t))return e;{const n=sd(t),i=(this.children.get(n)||new Op(null)).setTree(ld(t),e);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new Op(this.value,r)}}fold(t){return this.fold_(od(),t)}fold_(t,e){const n={};return this.children.inorderTraversal(((i,r)=>{n[i]=r.fold_(dd(t,i),e)})),e(t,this.value,n)}findOnPath(t,e){return this.findOnPath_(t,od(),e)}findOnPath_(t,e,n){const i=!!this.value&&n(e,this.value);if(i)return i;if(pd(t))return null;{const i=sd(t),r=this.children.get(i);return r?r.findOnPath_(ld(t),dd(e,i),n):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,od(),e)}foreachOnPath_(t,e,n){if(pd(t))return this;{this.value&&n(e,this.value);const i=sd(t),r=this.children.get(i);return r?r.foreachOnPath_(ld(t),dd(e,i),n):new Op(null)}}foreach(t){this.foreach_(od(),t)}foreach_(t,e){this.children.inorderTraversal(((n,i)=>{i.foreach_(dd(t,n),e)})),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal(((e,n)=>{n.value&&t(e,n.value)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(t){this.writeTree_=t}static empty(){return new Rp(new Op(null))}}function Np(t,e,n){if(pd(e))return new Rp(new Op(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let o=i.value;const s=fd(r,e);return o=o.updateChild(s,n),new Rp(t.writeTree_.set(r,o))}{const i=new Op(n),r=t.writeTree_.setTree(e,i);return new Rp(r)}}}function Lp(t,e,n){let i=t;return Eh(n,((t,n)=>{i=Np(i,dd(e,t),n)})),i}function Fp(t,e){if(pd(e))return Rp.empty();{const n=t.writeTree_.setTree(e,new Op(null));return new Rp(n)}}function zp(t,e){return null!=Bp(t,e)}function Bp(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(fd(n.path,e)):null}function Up(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Bd,((t,n)=>{e.push(new xd(t,n))})):t.writeTree_.children.inorderTraversal(((t,n)=>{null!=n.value&&e.push(new xd(t,n.value))})),e}function Vp(t,e){if(pd(e))return t;{const n=Bp(t,e);return new Rp(null!=n?new Op(n):t.writeTree_.subtree(e))}}function Hp(t){return t.writeTree_.isEmpty()}function Wp(t,e){return jp(od(),t.writeTree_,e)}function jp(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal(((e,r)=>{".priority"===e?(ws(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=jp(dd(t,e),r,n)})),n.getChild(t).isEmpty()||null===i||(n=n.updateChild(dd(t,".priority"),i)),n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(t,e){return of(e,t)}function Gp(t,e){const n=t.allWrites.findIndex((t=>t.writeId===e));ws(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,s=t.allWrites.length-1;for(;r&&s>=0;){const e=t.allWrites[s];e.visible&&(s>=n&&Yp(e,i.path)?r=!1:md(i.path,e.path)&&(o=!0)),s--}if(r){if(o)return function(t){t.visibleWrites=Xp(t.allWrites,$p,od()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0;if(i.snap)t.visibleWrites=Fp(t.visibleWrites,i.path);else{Eh(i.children,(e=>{t.visibleWrites=Fp(t.visibleWrites,dd(i.path,e))}))}return!0}return!1}function Yp(t,e){if(t.snap)return md(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&md(dd(t.path,n),e))return!0;return!1}function $p(t){return t.visible}function Xp(t,e,n){let i=Rp.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const t=o.path;let e;if(o.snap)md(n,t)?(e=fd(n,t),i=Np(i,e,o.snap)):md(t,n)&&(e=fd(t,n),i=Np(i,od(),o.snap.getChild(e)));else{if(!o.children)throw bs("WriteRecord should have .snap or .children");if(md(n,t))e=fd(n,t),i=Lp(i,e,o.children);else if(md(t,n))if(e=fd(t,n),pd(e))i=Lp(i,od(),o.children);else{const t=Vs(o.children,sd(e));if(t){const n=t.getChild(ld(e));i=Np(i,od(),n)}}}}}return i}function Kp(t,e,n,i,r){if(i||r){const o=Vp(t.visibleWrites,e);if(!r&&Hp(o))return n;if(r||null!=n||zp(o,od())){const o=function(t){return(t.visible||r)&&(!i||!~i.indexOf(t.writeId))&&(md(t.path,e)||md(e,t.path))};return Wp(Xp(t.allWrites,o,e),n||Yd.EMPTY_NODE)}return null}{const i=Bp(t.visibleWrites,e);if(null!=i)return i;{const i=Vp(t.visibleWrites,e);if(Hp(i))return n;if(null!=n||zp(i,od())){return Wp(i,n||Yd.EMPTY_NODE)}return null}}}function Zp(t,e,n,i){return Kp(t.writeTree,t.treePath,e,n,i)}function Jp(t,e){return function(t,e,n){let i=Yd.EMPTY_NODE;const r=Bp(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Bd,((t,e)=>{i=i.updateImmediateChild(t,e)})),i;if(n){const r=Vp(t.visibleWrites,e);return n.forEachChild(Bd,((t,e)=>{const n=Wp(Vp(r,new rd(t)),e);i=i.updateImmediateChild(t,n)})),Up(r).forEach((t=>{i=i.updateImmediateChild(t.name,t.node)})),i}return Up(Vp(t.visibleWrites,e)).forEach((t=>{i=i.updateImmediateChild(t.name,t.node)})),i}(t.writeTree,t.treePath,e)}function Qp(t,e,n,i){return function(t,e,n,i,r){ws(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=dd(e,n);if(zp(t.visibleWrites,o))return null;{const e=Vp(t.visibleWrites,o);return Hp(e)?r.getChild(n):Wp(e,r.getChild(n))}}(t.writeTree,t.treePath,e,n,i)}function tf(t,e){return function(t,e){return Bp(t.visibleWrites,e)}(t.writeTree,dd(t.treePath,e))}function ef(t,e,n,i,r,o){return function(t,e,n,i,r,o,s){let a;const l=Vp(t.visibleWrites,e),u=Bp(l,od());if(null!=u)a=u;else{if(null==n)return[];a=Wp(l,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const t=[],e=s.getCompare(),n=o?a.getReverseIteratorFrom(i,s):a.getIteratorFrom(i,s);let l=n.getNext();for(;l&&t.length<r;)0!==e(l,i)&&t.push(l),l=n.getNext();return t}}(t.writeTree,t.treePath,e,n,i,r,o)}function nf(t,e,n){return function(t,e,n,i){const r=dd(e,n),o=Bp(t.visibleWrites,r);if(null!=o)return o;if(i.isCompleteForChild(n))return Wp(Vp(t.visibleWrites,r),i.getNode().getImmediateChild(n));return null}(t.writeTree,t.treePath,e,n)}function rf(t,e){return of(dd(t.treePath,e),t.writeTree)}function of(t,e){return{treePath:t,writeTree:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,n=t.childName;ws("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),ws(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===e&&"child_removed"===r)this.changeMap.set(n,ip(n,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===r)this.changeMap.set(n,np(n,i.oldSnap));else if("child_changed"===e&&"child_added"===r)this.changeMap.set(n,ep(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==r)throw bs("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(n,ip(n,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,n){return null}};class lf{constructor(t,e,n=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const e=null!=this.optCompleteServerCache_?new Cp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nf(this.writes_,t,e)}}getChildAfterChild(t,e,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ap(this.viewCache_),r=ef(this.writes_,i,e,1,n,t);return 0===r.length?null:r[0]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(t,e,n,i,r){const o=new sf;let s,a;if(n.type===yp.OVERWRITE){const l=n;l.source.fromUser?s=df(t,e,l.path,l.snap,i,r,o):(ws(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!pd(l.path),s=hf(t,e,l.path,l.snap,i,r,a,o))}else if(n.type===yp.MERGE){const l=n;l.source.fromUser?s=function(t,e,n,i,r,o,s){let a=e;return i.foreach(((i,l)=>{const u=dd(n,i);pf(e,sd(u))&&(a=df(t,a,u,l,r,o,s))})),i.foreach(((i,l)=>{const u=dd(n,i);pf(e,sd(u))||(a=df(t,a,u,l,r,o,s))})),a}(t,e,l.path,l.children,i,r,o):(ws(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=gf(t,e,l.path,l.children,i,r,a,o))}else if(n.type===yp.ACK_USER_WRITE){const a=n;s=a.revert?function(t,e,n,i,r,o){let s;if(null!=tf(i,n))return e;{const a=new lf(i,e,r),l=e.eventCache.getNode();let u;if(pd(n)||".priority"===sd(n)){let n;if(e.serverCache.isFullyInitialized())n=Zp(i,Ap(e));else{const t=e.serverCache.getNode();ws(t instanceof Yd,"serverChildren would be complete if leaf node"),n=Jp(i,t)}n=n,u=t.filter.updateFullNode(l,n,o)}else{const r=sd(n);let c=nf(i,r,e.serverCache);null==c&&e.serverCache.isCompleteForChild(r)&&(c=l.getImmediateChild(r)),u=null!=c?t.filter.updateChild(l,r,c,ld(n),a,o):e.eventCache.getNode().hasChild(r)?t.filter.updateChild(l,r,Yd.EMPTY_NODE,ld(n),a,o):l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Zp(i,Ap(e)),s.isLeafNode()&&(u=t.filter.updateFullNode(u,s,o)))}return s=e.serverCache.isFullyInitialized()||null!=tf(i,od()),Mp(e,u,s,t.filter.filtersNodes())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,a.path,i,r,o):function(t,e,n,i,r,o,s){if(null!=tf(r,n))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=i.value){if(pd(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return hf(t,e,n,l.getNode().getChild(n),r,o,a,s);if(pd(n)){let i=new Op(null);return l.getNode().forEachChild(Id,((t,e)=>{i=i.set(new rd(t),e)})),gf(t,e,n,i,r,o,a,s)}return e}{let u=new Op(null);return i.foreach(((t,e)=>{const i=dd(n,t);l.isCompleteForPath(i)&&(u=u.set(t,l.getNode().getChild(i)))})),gf(t,e,n,u,r,o,a,s)}}(t,e,a.path,a.affectedTree,i,r,o)}else{if(n.type!==yp.LISTEN_COMPLETE)throw bs("Unknown operation type: "+n.type);s=function(t,e,n,i,r){const o=e.serverCache,s=Dp(e,o.getNode(),o.isFullyInitialized()||pd(n),o.isFiltered());return cf(t,s,n,i,af,r)}(t,e,n.path,i,o)}const l=o.getChanges();return function(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Pp(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(tp(Pp(e)))}}(e,s,l),{viewCache:s,changes:l}}function cf(t,e,n,i,r,o){const s=e.eventCache;if(null!=tf(i,n))return e;{let a,l;if(pd(n))if(ws(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const n=Ap(e),r=Jp(i,n instanceof Yd?n:Yd.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),r,o)}else{const n=Zp(i,Ap(e));a=t.filter.updateFullNode(e.eventCache.getNode(),n,o)}else{const u=sd(n);if(".priority"===u){ws(1===ad(n),"Can't have a priority with additional path components");const r=s.getNode();l=e.serverCache.getNode();const o=Qp(i,n,r,l);a=null!=o?t.filter.updatePriority(r,o):s.getNode()}else{const c=ld(n);let h;if(s.isCompleteForChild(u)){l=e.serverCache.getNode();const t=Qp(i,n,s.getNode(),l);h=null!=t?s.getNode().getImmediateChild(u).updateChild(c,t):s.getNode().getImmediateChild(u)}else h=nf(i,u,e.serverCache);a=null!=h?t.filter.updateChild(s.getNode(),u,h,c,r,o):s.getNode()}}return Mp(e,a,s.isFullyInitialized()||pd(n),t.filter.filtersNodes())}}function hf(t,e,n,i,r,o,s,a){const l=e.serverCache;let u;const c=s?t.filter:t.filter.getIndexedFilter();if(pd(n))u=c.updateFullNode(l.getNode(),i,null);else if(c.filtersNodes()&&!l.isFiltered()){const t=l.getNode().updateChild(n,i);u=c.updateFullNode(l.getNode(),t,null)}else{const t=sd(n);if(!l.isCompleteForPath(n)&&ad(n)>1)return e;const r=ld(n),o=l.getNode().getImmediateChild(t).updateChild(r,i);u=".priority"===t?c.updatePriority(l.getNode(),o):c.updateChild(l.getNode(),t,o,r,af,null)}const h=Dp(e,u,l.isFullyInitialized()||pd(n),c.filtersNodes());return cf(t,h,n,r,new lf(r,h,o),a)}function df(t,e,n,i,r,o,s){const a=e.eventCache;let l,u;const c=new lf(r,e,o);if(pd(n))u=t.filter.updateFullNode(e.eventCache.getNode(),i,s),l=Mp(e,u,!0,t.filter.filtersNodes());else{const r=sd(n);if(".priority"===r)u=t.filter.updatePriority(e.eventCache.getNode(),i),l=Mp(e,u,a.isFullyInitialized(),a.isFiltered());else{const o=ld(n),u=a.getNode().getImmediateChild(r);let h;if(pd(o))h=i;else{const t=c.getCompleteChild(r);h=null!=t?".priority"===ud(o)&&t.getChild(hd(o)).isEmpty()?t:t.updateChild(o,i):Yd.EMPTY_NODE}if(u.equals(h))l=e;else{l=Mp(e,t.filter.updateChild(a.getNode(),r,h,o,c,s),a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function pf(t,e){return t.eventCache.isCompleteForChild(e)}function ff(t,e,n){return n.foreach(((t,n)=>{e=e.updateChild(t,n)})),e}function gf(t,e,n,i,r,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l,u=e;l=pd(n)?i:new Op(null).setTree(n,i);const c=e.serverCache.getNode();return l.children.inorderTraversal(((n,i)=>{if(c.hasChild(n)){const l=ff(0,e.serverCache.getNode().getImmediateChild(n),i);u=hf(t,u,new rd(n),l,r,o,s,a)}})),l.children.inorderTraversal(((n,i)=>{const l=!e.serverCache.isCompleteForChild(n)&&void 0===i.value;if(!c.hasChild(n)&&!l){const l=ff(0,e.serverCache.getNode().getImmediateChild(n),i);u=hf(t,u,new rd(n),l,r,o,s,a)}})),u}class mf{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new rp(n.getIndex()),r=(o=n).loadsAllData()?new rp(o.getIndex()):o.hasLimit()?new sp(o):new op(o);var o;this.processor_=function(t){return{filter:t}}(r);const s=e.serverCache,a=e.eventCache,l=i.updateFullNode(Yd.EMPTY_NODE,s.getNode(),null),u=r.updateFullNode(Yd.EMPTY_NODE,a.getNode(),null),c=new Cp(l,s.isFullyInitialized(),i.filtersNodes()),h=new Cp(u,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=kp(h,c),this.eventGenerator_=new Tp(this.query_)}get query(){return this.query_}}function yf(t,e){const n=Ap(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!pd(e)&&!n.getImmediateChild(sd(e)).isEmpty())?n.getChild(e):null}function vf(t){return 0===t.eventRegistrations_.length}function _f(t,e,n){const i=[];if(n){ws(null==e,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach((t=>{const e=t.createCancelEvent(n,r);e&&i.push(e)}))}if(e){let n=[];for(let i=0;i<t.eventRegistrations_.length;++i){const r=t.eventRegistrations_[i];if(r.matches(e)){if(e.hasAnyCallback()){n=n.concat(t.eventRegistrations_.slice(i+1));break}}else n.push(r)}t.eventRegistrations_=n}else t.eventRegistrations_=[];return i}function wf(t,e,n,i){e.type===yp.MERGE&&null!==e.source.queryId&&(ws(Ap(t.viewCache_),"We should always have a full cache before handling merges"),ws(Pp(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=uf(t.processor_,r,e,n,i);var s,a;return s=t.processor_,a=o.viewCache,ws(a.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),ws(a.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed"),ws(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,bf(t,o.changes,o.viewCache.eventCache.getNode(),null)}function bf(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return function(t,e,n,i){const r=[],o=[];return e.forEach((e=>{var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),Ip(t,r,"child_removed",e,i,n),Ip(t,r,"child_added",e,i,n),Ip(t,r,"child_moved",o,i,n),Ip(t,r,"child_changed",e,i,n),Ip(t,r,"value",e,i,n),r}(t.eventGenerator_,e,n,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xf,Sf;class Cf{constructor(){this.views=new Map}}function Tf(t,e,n,i){const r=e.source.queryId;if(null!==r){const o=t.views.get(r);return ws(null!=o,"SyncTree gave us an op for an invalid query."),wf(o,e,n,i)}{let r=[];for(const o of t.views.values())r=r.concat(wf(o,e,n,i));return r}}function If(t,e,n,i,r,o){const s=function(t,e,n,i,r){const o=e._queryIdentifier,s=t.views.get(o);if(!s){let t=Zp(n,r?i:null),o=!1;t?o=!0:i instanceof Yd?(t=Jp(n,i),o=!1):(t=Yd.EMPTY_NODE,o=!1);const s=kp(new Cp(t,o,!1),new Cp(i,r,!1));return new mf(e,s)}return s}(t,e,i,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){const n=t.viewCache_.eventCache,i=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Bd,((t,e)=>{i.push(ep(t,e))}));return n.isFullyInitialized()&&i.push(tp(n.getNode())),bf(t,i,n.getNode(),e)}(s,n)}function kf(t,e,n,i){const r=e._queryIdentifier,o=[];let s=[];const a=Ef(t);if("default"===r)for(const[l,u]of t.views.entries())s=s.concat(_f(u,n,i)),vf(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||o.push(u.query));else{const e=t.views.get(r);e&&(s=s.concat(_f(e,n,i)),vf(e)&&(t.views.delete(r),e.query._queryParams.loadsAllData()||o.push(e.query)))}return a&&!Ef(t)&&o.push(new(ws(xf,"Reference.ts has not been loaded"),xf)(e._repo,e._path)),{removed:o,events:s}}function Mf(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Df(t,e){let n=null;for(const i of t.views.values())n=n||yf(i,e);return n}function Pf(t,e){if(e._queryParams.loadsAllData())return Of(t);{const n=e._queryIdentifier;return t.views.get(n)}}function Af(t,e){return null!=Pf(t,e)}function Ef(t){return null!=Of(t)}function Of(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rf=1;class Nf{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Op(null),this.pendingWriteTree_={visibleWrites:Rp.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Lf(t,e,n,i,r){return function(t,e,n,i,r){ws(i>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Np(t.visibleWrites,e,n)),t.lastWriteId=i}(t.pendingWriteTree_,e,n,i,r),r?Hf(t,new xp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Ff(t,e,n=!1){const i=function(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}(t.pendingWriteTree_,e);if(Gp(t.pendingWriteTree_,e)){let e=new Op(null);return null!=i.snap?e=e.set(od(),!0):Eh(i.children,(t=>{e=e.set(new rd(t),!0)})),Hf(t,new wp(i.path,e,n))}return[]}function zf(t,e,n){return Hf(t,new xp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Bf(t,e,n,i){const r=e._path,o=t.syncPointTree_.get(r);let s=[];if(o&&("default"===e._queryIdentifier||Af(o,e))){const a=kf(o,e,n,i);0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(r));const l=a.removed;s=a.events;const u=-1!==l.findIndex((t=>t._queryParams.loadsAllData())),c=t.syncPointTree_.findOnPath(r,((t,e)=>Ef(e)));if(u&&!c){const e=t.syncPointTree_.subtree(r);if(!e.isEmpty()){const n=function(t){return t.fold(((t,e,n)=>{if(e&&Ef(e)){return[Of(e)]}{let t=[];return e&&(t=Mf(e)),Eh(n,((e,n)=>{t=t.concat(n)})),t}}))}(e);for(let e=0;e<n.length;++e){const i=n[e],r=i.query,o=qf(t,i);t.listenProvider_.startListening(Zf(r),Gf(t,r),o.hashFn,o.onComplete)}}}if(!c&&l.length>0&&!i)if(u){const n=null;t.listenProvider_.stopListening(Zf(e),n)}else l.forEach((e=>{const n=t.queryToTagMap.get(Yf(e));t.listenProvider_.stopListening(Zf(e),n)}));!function(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const e=Yf(i),n=t.queryToTagMap.get(e);t.queryToTagMap.delete(e),t.tagToQueryMap.delete(n)}}}(t,l)}return s}function Uf(t,e,n){const i=e._path;let r=null,o=!1;t.syncPointTree_.foreachOnPath(i,((t,e)=>{const n=fd(t,i);r=r||Df(e,n),o=o||Ef(e)}));let s,a=t.syncPointTree_.get(i);if(a?(o=o||Ef(a),r=r||Df(a,od())):(a=new Cf,t.syncPointTree_=t.syncPointTree_.set(i,a)),null!=r)s=!0;else{s=!1,r=Yd.EMPTY_NODE;t.syncPointTree_.subtree(i).foreachChild(((t,e)=>{const n=Df(e,od());n&&(r=r.updateImmediateChild(t,n))}))}const l=Af(a,e);if(!l&&!e._queryParams.loadsAllData()){const n=Yf(e);ws(!t.queryToTagMap.has(n),"View does not exist, but we have a tag");const i=Rf++;t.queryToTagMap.set(n,i),t.tagToQueryMap.set(i,n)}let u=If(a,e,n,qp(t.pendingWriteTree_,i),r,s);if(!l&&!o){const n=Pf(a,e);u=u.concat(function(t,e,n){const i=e._path,r=Gf(t,e),o=qf(t,n),s=t.listenProvider_.startListening(Zf(e),r,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(i);if(r)ws(!Ef(a.value),"If we're adding a query, it shouldn't be shadowed");else{const e=a.fold(((t,e,n)=>{if(!pd(t)&&e&&Ef(e))return[Of(e).query];{let t=[];return e&&(t=t.concat(Mf(e).map((t=>t.query)))),Eh(n,((e,n)=>{t=t.concat(n)})),t}}));for(let n=0;n<e.length;++n){const i=e[n];t.listenProvider_.stopListening(Zf(i),Gf(t,i))}}return s}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,n))}return u}function Vf(t,e,n){const i=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,((t,n)=>{const i=Df(n,fd(t,e));if(i)return i}));return Kp(i,e,r,n,!0)}function Hf(t,e){return Wf(e,t.syncPointTree_,null,qp(t.pendingWriteTree_,od()))}function Wf(t,e,n,i){if(pd(t.path))return jf(t,e,n,i);{const r=e.get(od());null==n&&null!=r&&(n=Df(r,od()));let o=[];const s=sd(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){const t=n?n.getImmediateChild(s):null,e=rf(i,s);o=o.concat(Wf(a,l,t,e))}return r&&(o=o.concat(Tf(r,t,i,n))),o}}function jf(t,e,n,i){const r=e.get(od());null==n&&null!=r&&(n=Df(r,od()));let o=[];return e.children.inorderTraversal(((e,r)=>{const s=n?n.getImmediateChild(e):null,a=rf(i,e),l=t.operationForChild(e);l&&(o=o.concat(jf(l,r,s,a)))})),r&&(o=o.concat(Tf(r,t,i,n))),o}function qf(t,e){const n=e.query,i=Gf(t,n);return{hashFn:()=>(function(t){return t.viewCache_.serverCache.getNode()}(e)||Yd.EMPTY_NODE).hash(),onComplete:e=>{if("ok"===e)return i?function(t,e,n){const i=$f(t,n);if(i){const n=Xf(i),r=n.path,o=n.queryId,s=fd(r,e);return Kf(t,r,new bp(_p(o),s))}return[]}(t,n._path,i):function(t,e){return Hf(t,new bp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);{const i=function(t,e){let n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}(e,n);return Bf(t,n,null,i)}}}}function Gf(t,e){const n=Yf(e);return t.queryToTagMap.get(n)}function Yf(t){return t._path.toString()+"$"+t._queryIdentifier}function $f(t,e){return t.tagToQueryMap.get(e)}function Xf(t){const e=t.indexOf("$");return ws(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new rd(t.substr(0,e))}}function Kf(t,e,n){const i=t.syncPointTree_.get(e);ws(i,"Missing sync point for query tag that we're tracking");return Tf(i,n,qp(t.pendingWriteTree_,e),null)}function Zf(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(ws(Sf,"Reference.ts has not been loaded"),Sf)(t._repo,t._path):t}class Jf{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Jf(e)}node(){return this.node_}}class Qf{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=dd(this.path_,t);return new Qf(this.syncTree_,e)}node(){return Vf(this.syncTree_,this.path_)}}const tg=function(t,e,n){return t&&"object"==typeof t?(ws(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?eg(t[".sv"],e,n):"object"==typeof t[".sv"]?ng(t[".sv"],e):void ws(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},eg=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ws(!1,"Unexpected server value: "+t)}},ng=function(t,e,n){t.hasOwnProperty("increment")||ws(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;"number"!=typeof i&&ws(!1,"Unexpected increment value: "+i);const r=e.node();if(ws(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return"number"!=typeof o?i:o+i},ig=function(t,e,n){return rg(t,new Jf(e),n)};function rg(t,e,n){const i=t.getPriority().val(),r=tg(i,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const i=t,o=tg(i.getValue(),e,n);return o!==i.getValue()||r!==i.getPriority().val()?new zd(o,Xd(r)):t}{const i=t;return o=i,r!==i.getPriority().val()&&(o=o.updatePriority(new zd(r))),i.forEachChild(Bd,((t,i)=>{const r=rg(i,e.getImmediateChild(t),n);r!==i&&(o=o.updateImmediateChild(t,r))})),o}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(t="",e=null,n={children:{},childCount:0}){this.name=t,this.parent=e,this.node=n}}function sg(t,e){let n=e instanceof rd?e:new rd(e),i=t,r=sd(n);for(;null!==r;){const t=Vs(i.node.children,r)||{children:{},childCount:0};i=new og(r,i,t),n=ld(n),r=sd(n)}return i}function ag(t){return t.node.value}function lg(t,e){t.node.value=e,pg(t)}function ug(t){return t.node.childCount>0}function cg(t,e){Eh(t.node.children,((n,i)=>{e(new og(n,t,i))}))}function hg(t,e,n,i){n&&!i&&e(t),cg(t,(t=>{hg(t,e,!0,i)})),n&&i&&e(t)}function dg(t){return new rd(null===t.parent?t.name:dg(t.parent)+"/"+t.name)}function pg(t){null!==t.parent&&function(t,e,n){const i=function(t){return void 0===ag(t)&&!ug(t)}(n),r=Us(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,pg(t)):i||r||(t.node.children[e]=n.node,t.node.childCount++,pg(t))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.parent,t.name,t)}const fg=/[\[\].#$\/\u0000-\u001F\u007F]/,gg=/[\[\].#$\u0000-\u001F\u007F]/,mg=function(t){return"string"==typeof t&&0!==t.length&&!fg.test(t)},yg=function(t){return"string"==typeof t&&0!==t.length&&!gg.test(t)},vg=function(t,e,n,i){i&&void 0===e||_g(Ks(t,"value"),e,n)},_g=function(t,e,n){const i=n instanceof rd?new yd(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+_d(i));if("function"==typeof e)throw new Error(t+"contains a function "+_d(i)+" with contents = "+e.toString());if(Ch(e))throw new Error(t+"contains "+e.toString()+" "+_d(i));if("string"==typeof e&&e.length>10485760/3&&Zs(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+_d(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let n=!1,r=!1;if(Eh(e,((e,o)=>{if(".value"===e)n=!0;else if(".priority"!==e&&".sv"!==e&&(r=!0,!mg(e)))throw new Error(t+" contains an invalid key ("+e+") "+_d(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,a;a=e,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(a),s.byteLength_+=Zs(a),vd(s),_g(t,o,i),function(t){const e=t.parts_.pop();t.byteLength_-=Zs(e),t.parts_.length>0&&(t.byteLength_-=1)}(i)})),n&&r)throw new Error(t+' contains ".value" child '+_d(i)+" in addition to actual children.")}},wg=function(t,e,n,i){if(!(i&&void 0===n||yg(n)))throw new Error(Ks(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},bg=function(t,e){if(".info"===sd(e))throw new Error(t+" failed = Can't modify data under /.info/")},xg=function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!mg(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),yg(t)}(n))throw new Error(Ks(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Sg{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Cg(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();null===n||gd(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function Tg(t,e,n){Cg(t,n),kg(t,(t=>gd(t,e)))}function Ig(t,e,n){Cg(t,n),kg(t,(t=>md(t,e)||md(e,t)))}function kg(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){e(r.path)?(Mg(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Mg(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const i=n.getEventRunner();yh&&_h("event: "+n.toString()),Lh(i)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(t,e,n,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Sg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dp(),this.transactionQueueTree_=new og,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Pg(t,e,n){if(t.stats_=Yh(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new cp(t.repoInfo_,((e,n,i,r)=>{Og(t,e,n,i,r)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((()=>Rg(t,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zs(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new bd(t.repoInfo_,e,((e,n,i,r)=>{Og(t,e,n,i,r)}),(e=>{Rg(t,e)}),(e=>{!function(t,e){Eh(e,((e,n)=>{Ng(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((e=>{t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((e=>{t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=function(t,e){const n=t.toString();return Gh[n]||(Gh[n]=e()),Gh[n]}(t.repoInfo_,(()=>new mp(t.stats_,t.server_))),t.infoData_=new hp,t.infoSyncTree_=new Nf({startListening:(e,n,i,r)=>{let o=[];const s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=zf(t.infoSyncTree_,e._path,s),setTimeout((()=>{r("ok")}),0)),o},stopListening:()=>{}}),Ng(t,"connected",!1),t.serverSyncTree_=new Nf({startListening:(e,n,i,r)=>(t.server_.listen(e,i,n,((n,i)=>{const o=r(n,i);Ig(t.eventQueue_,e._path,o)})),[]),stopListening:(e,n)=>{t.server_.unlisten(e,n)}})}function Ag(t){const e=t.infoData_.getNode(new rd(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Eg(t){return(e=(e={timestamp:Ag(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Og(t,e,n,i,r){t.dataUpdateCount++;const o=new rd(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(r)if(i){const e=Ws(n,(t=>Xd(t)));s=function(t,e,n,i){const r=$f(t,i);if(r){const i=Xf(r),o=i.path,s=i.queryId,a=fd(o,e),l=Op.fromObject(n);return Kf(t,o,new Sp(_p(s),a,l))}return[]}(t.serverSyncTree_,o,e,r)}else{const e=Xd(n);s=function(t,e,n,i){const r=$f(t,i);if(null!=r){const i=Xf(r),o=i.path,s=i.queryId,a=fd(o,e);return Kf(t,o,new xp(_p(s),a,n))}return[]}(t.serverSyncTree_,o,e,r)}else if(i){const e=Ws(n,(t=>Xd(t)));s=function(t,e,n){const i=Op.fromObject(n);return Hf(t,new Sp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,o,e)}else{const e=Xd(n);s=zf(t.serverSyncTree_,o,e)}let a=o;s.length>0&&(a=Hg(t,o)),Ig(t.eventQueue_,a,s)}function Rg(t,e){Ng(t,"connected",e),!1===e&&function(t){Bg(t,"onDisconnectEvents");const e=Eg(t),n=dp();fp(t.onDisconnect_,od(),((i,r)=>{const o=function(t,e,n,i){return rg(e,new Qf(n,t),i)}(i,r,t.serverSyncTree_,e);pp(n,i,o)}));let i=[];fp(n,od(),((e,n)=>{i=i.concat(zf(t.serverSyncTree_,e,n));const r=Yg(t,e);Hg(t,r)})),t.onDisconnect_=dp(),Ig(t.eventQueue_,od(),i)}(t)}function Ng(t,e,n){const i=new rd("/.info/"+e),r=Xd(n);t.infoData_.updateSnapshot(i,r);const o=zf(t.infoSyncTree_,i,r);Ig(t.eventQueue_,i,o)}function Lg(t){return t.nextWriteId_++}function Fg(t,e,n,i,r){Bg(t,"set",{path:e.toString(),value:n,priority:i});const o=Eg(t),s=Xd(n,i),a=Vf(t.serverSyncTree_,e),l=ig(s,a,o),u=Lg(t),c=Lf(t.serverSyncTree_,e,l,u,!0);Cg(t.eventQueue_,c),t.server_.put(e.toString(),s.val(!0),((n,i)=>{const o="ok"===n;o||Sh("set at "+e+" failed: "+n);const s=Ff(t.serverSyncTree_,u,!o);Ig(t.eventQueue_,e,s),function(t,e,n,i){e&&Lh((()=>{if("ok"===n)e(null);else{const t=(n||"error").toUpperCase();let r=t;i&&(r+=": "+i);const o=new Error(r);o.code=t,e(o)}}))}(0,r,n,i)}));const h=Yg(t,e);Hg(t,h),Ig(t.eventQueue_,h,[])}function zg(t,e,n){let i;i=".info"===sd(e._path)?Bf(t.infoSyncTree_,e,n):Bf(t.serverSyncTree_,e,n),Tg(t.eventQueue_,e._path,i)}function Bg(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),_h(n,...e)}function Ug(t,e,n){return Vf(t.serverSyncTree_,e,n)||Yd.EMPTY_NODE}function Vg(t,e=t.transactionQueueTree_){if(e||Gg(t,e),ag(e)){const n=jg(t,e);ws(n.length>0,"Sending zero length transaction queue");n.every((t=>0===t.status))&&function(t,e,n){const i=n.map((t=>t.currentWriteId)),r=Ug(t,e,i);let o=r;const s=r.hash();for(let u=0;u<n.length;u++){const t=n[u];ws(0===t.status,"tryToSendTransactionQueue_: items in queue should all be run."),t.status=1,t.retryCount++;const i=fd(e,t.path);o=o.updateChild(i,t.currentOutputSnapshotRaw)}const a=o.val(!0),l=e;t.server_.put(l.toString(),a,(i=>{Bg(t,"transaction put response",{path:l.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let e=0;e<n.length;e++)n[e].status=2,r=r.concat(Ff(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&i.push((()=>n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved))),n[e].unwatcher();Gg(t,sg(t.transactionQueueTree_,e)),Vg(t,t.transactionQueueTree_),Ig(t.eventQueue_,e,r);for(let t=0;t<i.length;t++)Lh(i[t])}else{if("datastale"===i)for(let t=0;t<n.length;t++)3===n[t].status?n[t].status=4:n[t].status=0;else{Sh("transaction at "+l.toString()+" failed: "+i);for(let t=0;t<n.length;t++)n[t].status=4,n[t].abortReason=i}Hg(t,e)}}),s)}(t,dg(e),n)}else ug(e)&&cg(e,(e=>{Vg(t,e)}))}function Hg(t,e){const n=Wg(t,e),i=dg(n);return function(t,e,n){if(0===e.length)return;const i=[];let r=[];const o=e.filter((t=>0===t.status)).map((t=>t.currentWriteId));for(let a=0;a<e.length;a++){const l=e[a],u=fd(n,l.path);let c,h=!1;if(ws(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,c=l.abortReason,r=r.concat(Ff(t.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)h=!0,c="maxretry",r=r.concat(Ff(t.serverSyncTree_,l.currentWriteId,!0));else{const n=Ug(t,l.path,o);l.currentInputSnapshot=n;const i=e[a].update(n.val());if(void 0!==i){_g("transaction failed: Data returned ",i,l.path);let e=Xd(i);"object"==typeof i&&null!=i&&Us(i,".priority")||(e=e.updatePriority(n.getPriority()));const s=l.currentWriteId,a=Eg(t),u=ig(e,n,a);l.currentOutputSnapshotRaw=e,l.currentOutputSnapshotResolved=u,l.currentWriteId=Lg(t),o.splice(o.indexOf(s),1),r=r.concat(Lf(t.serverSyncTree_,l.path,u,l.currentWriteId,l.applyLocally)),r=r.concat(Ff(t.serverSyncTree_,s,!0))}else h=!0,c="nodata",r=r.concat(Ff(t.serverSyncTree_,l.currentWriteId,!0))}Ig(t.eventQueue_,n,r),r=[],h&&(e[a].status=2,s=e[a].unwatcher,setTimeout(s,Math.floor(0)),e[a].onComplete&&("nodata"===c?i.push((()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot))):i.push((()=>e[a].onComplete(new Error(c),!1,null)))))}var s;Gg(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)Lh(i[a]);Vg(t,t.transactionQueueTree_)}(t,jg(t,n),i),i}function Wg(t,e){let n,i=t.transactionQueueTree_;for(n=sd(e);null!==n&&void 0===ag(i);)i=sg(i,n),n=sd(e=ld(e));return i}function jg(t,e){const n=[];return qg(t,e,n),n.sort(((t,e)=>t.order-e.order)),n}function qg(t,e,n){const i=ag(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);cg(e,(e=>{qg(t,e,n)}))}function Gg(t,e){const n=ag(e);if(n){let t=0;for(let e=0;e<n.length;e++)2!==n[e].status&&(n[t]=n[e],t++);n.length=t,lg(e,n.length>0?n:void 0)}cg(e,(e=>{Gg(t,e)}))}function Yg(t,e){const n=dg(Wg(t,e)),i=sg(t.transactionQueueTree_,e);return function(t,e,n){let i=n?t:t.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,(e=>{$g(t,e)})),$g(t,i),hg(i,(e=>{$g(t,e)})),n}function $g(t,e){const n=ag(e);if(n){const i=[];let r=[],o=-1;for(let e=0;e<n.length;e++)3===n[e].status||(1===n[e].status?(ws(o===e-1,"All SENT items should be at beginning of queue."),o=e,n[e].status=3,n[e].abortReason="set"):(ws(0===n[e].status,"Unexpected transaction status in abort"),n[e].unwatcher(),r=r.concat(Ff(t.serverSyncTree_,n[e].currentWriteId,!0)),n[e].onComplete&&i.push(n[e].onComplete.bind(null,new Error("set"),!1,null))));-1===o?lg(e,void 0):n.length=o+1,Ig(t.eventQueue_,dg(e),r);for(let t=0;t<i.length;t++)Lh(i[t])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=function(t,e){const n=Kg(t),i=n.namespace;"firebase.com"===n.domain&&xh(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||xh("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Sh("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Hh(n.host,n.secure,i,e,r,"",i!==n.subdomain),path:new rd(n.pathString)}},Kg=function(t){let e="",n="",i="",r="",o="",s=!0,a="https",l=443;if("string"==typeof t){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let c=t.indexOf("/");-1===c&&(c=t.length);let h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(c,h)),c<h&&(r=function(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let t=n[r];try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(i){}e+="/"+t}return e}(t.substring(c,h)));const d=function(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Sh(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(s="https"===a||"wss"===a,l=parseInt(e.substring(u+1),10)):u=e.length;const p=e.slice(0,u);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const t=e.indexOf(".");i=e.substring(0,t).toLowerCase(),n=e.substring(t+1),o=i}"ns"in d&&(o=d.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:s,scheme:a,pathString:r,namespace:o}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Zg{constructor(t,e,n,i){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+zs(this.snapshot.exportVal())}}class Jg{constructor(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return ws(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(t,e,n,i){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=i}get key(){return pd(this._path)?null:ud(this._path)}get ref(){return new em(this._repo,this._path)}get _queryIdentifier(){const t=up(this._queryParams),e=Ph(t);return"{}"===e?"default":e}get _queryObject(){return up(this._queryParams)}isEqual(t){if(!((t=Qs(t))instanceof tm))return!1;const e=this._repo===t._repo,n=gd(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return e&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class em extends tm{constructor(t,e){super(t,e,new ap,!1)}get parent(){const t=hd(this._path);return null===t?null:new em(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class nm{constructor(t,e,n){this._node=t,this.ref=e,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new rd(t),n=rm(this.ref,t);return new nm(this._node.getChild(e),n,Bd)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((e,n)=>t(new nm(n,rm(this.ref,e),Bd))))}hasChild(t){const e=new rd(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function im(t,e){return(t=Qs(t))._checkNotDeleted("ref"),void 0!==e?rm(t._root,e):t._root}function rm(t,e){var n,i,r,o;return null===sd((t=Qs(t))._path)?(n="child",i="path",o=!1,(r=e)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),wg(n,i,r,o)):wg("child","path",e,!1),new em(t._repo,dd(t._path,e))}function om(t,e){t=Qs(t),bg("push",t._path),vg("push",e,t._path,!0);const n=Ag(t._repo),i=Qd(n),r=rm(t,i),o=rm(t,i);let s;return s=null!=e?function(t,e){t=Qs(t),bg("set",t._path),vg("set",e,t._path,!1);const n=new ks;return Fg(t._repo,t._path,e,null,n.wrapCallback((()=>{}))),n.promise}(o,e).then((()=>o)):Promise.resolve(o),r.then=s.then.bind(s),r.catch=s.then.bind(s,void 0),r}class sm{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const n=e._queryParams.getIndex();return new Zg("value",this,new nm(t.snapshotNode,new em(e._repo,e._path),n))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Jg(this,t,e):null}matches(t){return t instanceof sm&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class am{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Jg(this,t,e):null}createEvent(t,e){ws(null!=t.childName,"Child events should have a childName.");const n=rm(new em(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new Zg(t.type,this,new nm(t.snapshotNode,n,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof am&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function lm(t,e,n,i,r){let o;if("object"==typeof i&&(o=void 0,r=i),"function"==typeof i&&(o=i),r&&r.onlyOnce){const e=n,i=(n,i)=>{zg(t._repo,t,a),e(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}const s=new Qg(n,o||void 0),a="value"===e?new sm(s):new am(e,s);return function(t,e,n){let i;i=".info"===sd(e._path)?Uf(t.infoSyncTree_,e,n):Uf(t.serverSyncTree_,e,n),Tg(t.eventQueue_,e._path,i)}(t._repo,t,a),()=>zg(t._repo,t,a)}function um(t,e,n,i){return lm(t,"child_added",e,n,i)}!function(t){ws(!xf,"__referenceConstructor has already been defined"),xf=t}(em),function(t){ws(!Sf,"__referenceConstructor has already been defined"),Sf=t}(em);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const cm={};function hm(t,e,n,i,r){let o=i||t.options.databaseURL;void 0===o&&(t.options.projectId||xh("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_h("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s,a,l=Xg(o,r),u=l.repoInfo;"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(s=!0,o=`http://${a}?ns=${u.namespace}`,l=Xg(o,r),u=l.repoInfo):s=!l.repoInfo.secure;const c=r&&s?new Uh(Uh.OWNER):new Bh(t.name,t.options,e);xg("Invalid Firebase Database URL",l),pd(l.path)||xh("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(t,e,n,i){let r=cm[e.name];r||(r={},cm[e.name]=r);let o=r[t.toURLString()];o&&xh("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new Dg(t,false,n,i),r[t.toURLString()]=o,o}(u,t,c,new zh(t.name,n));return new dm(h,t)}class dm{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Pg(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new em(this._repo,od())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(t,e){const n=cm[e];n&&n[t.key]===t||xh(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&xh("Cannot call "+t+" on a deleted database.")}}function pm(t=Sa(),e){return _a(t,"database").getImmediate({identifier:e})}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
bd.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},bd.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function(t){ah="9.0.0",va(new ta("database",((t,{instanceIdentifier:e})=>hm(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e)),"PUBLIC").setMultipleInstances(!0)),Ca("@firebase/database","0.12.0",t)}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var fm=function(t,e){return(fm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function gm(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}fm(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var mm=function(){return(mm=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function ym(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||e)}var vm=function(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},_m=new function(){this.browser=new vm,this.node=!1,this.wxa=!1,this.worker=!1,this.canvasSupported=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(_m.wxa=!0,_m.canvasSupported=!0,_m.touchEventsSupported=!0):"undefined"==typeof document&&"undefined"!=typeof self?(_m.worker=!0,_m.canvasSupported=!0):"undefined"==typeof navigator?(_m.node=!0,_m.canvasSupported=!0,_m.svgSupported=!0):function(t,e){var n=e.browser,i=t.match(/Firefox\/([\d.]+)/),r=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge?\/([\d.]+)/),s=/micromessenger/i.test(t);i&&(n.firefox=!0,n.version=i[1]);r&&(n.ie=!0,n.version=r[1]);o&&(n.edge=!0,n.version=o[1],n.newEdge=+o[1].split(".")[0]>18);s&&(n.weChat=!0);e.canvasSupported=!!document.createElement("canvas").getContext,e.svgSupported="undefined"!=typeof SVGRect,e.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,e.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),e.domSupported="undefined"!=typeof document;var a=document.documentElement.style;e.transform3dSupported=(n.ie&&"transition"in a||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in a)&&!("OTransition"in a),e.transformSupported=e.transform3dSupported||n.ie&&+n.version>=9}(navigator.userAgent,_m);var wm=_m,bm={"[object Function]":!0,"[object RegExp]":!0,"[object Date]":!0,"[object Error]":!0,"[object CanvasGradient]":!0,"[object CanvasPattern]":!0,"[object Image]":!0,"[object Canvas]":!0},xm={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0},Sm=Object.prototype.toString,Cm=Array.prototype,Tm=Cm.forEach,Im=Cm.filter,km=Cm.slice,Mm=Cm.map,Dm=function(){}.constructor,Pm=Dm?Dm.prototype:null,Am={},Em=2311;function Om(){return Em++}function Rm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];"undefined"!=typeof console&&console.error.apply(console,t)}function Nm(t){if(null==t||"object"!=typeof t)return t;var e=t,n=Sm.call(t);if("[object Array]"===n){if(!py(t)){e=[];for(var i=0,r=t.length;i<r;i++)e[i]=Nm(t[i])}}else if(xm[n]){if(!py(t)){var o=t.constructor;if(o.from)e=o.from(t);else{e=new o(t.length);for(i=0,r=t.length;i<r;i++)e[i]=Nm(t[i])}}}else if(!bm[n]&&!py(t)&&!ry(t))for(var s in e={},t)t.hasOwnProperty(s)&&(e[s]=Nm(t[s]));return e}function Lm(t,e,n){if(!ey(e)||!ey(t))return n?Nm(e):t;for(var i in e)if(e.hasOwnProperty(i)){var r=t[i],o=e[i];!ey(o)||!ey(r)||Km(o)||Km(r)||ry(o)||ry(r)||ny(o)||ny(r)||py(o)||py(r)?!n&&i in t||(t[i]=Nm(e[i])):Lm(r,o,n)}return t}function Fm(t,e){if(Object.assign)Object.assign(t,e);else for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function zm(t,e,n){for(var i=Ym(e),r=0;r<i.length;r++){var o=i[r];(n?null!=e[o]:null==t[o])&&(t[o]=e[o])}return t}var Bm=function(){return Am.createCanvas()};function Um(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n}return-1}function Vm(t,e,n){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var i=Object.getOwnPropertyNames(e),r=0;r<i.length;r++){var o=i[r];"constructor"!==o&&(n?null!=e[o]:null==t[o])&&(t[o]=e[o])}else zm(t,e,n)}function Hm(t){return!!t&&("string"!=typeof t&&"number"==typeof t.length)}function Wm(t,e,n){if(t&&e)if(t.forEach&&t.forEach===Tm)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function jm(t,e,n){if(!t)return[];if(!e)return ly(t);if(t.map&&t.map===Mm)return t.map(e,n);for(var i=[],r=0,o=t.length;r<o;r++)i.push(e.call(n,t[r],r,t));return i}function qm(t,e,n,i){if(t&&e){for(var r=0,o=t.length;r<o;r++)n=e.call(i,n,t[r],r,t);return n}}function Gm(t,e,n){if(!t)return[];if(!e)return ly(t);if(t.filter&&t.filter===Im)return t.filter(e,n);for(var i=[],r=0,o=t.length;r<o;r++)e.call(n,t[r],r,t)&&i.push(t[r]);return i}function Ym(t){if(!t)return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}Am.createCanvas=function(){return document.createElement("canvas")};var $m=Pm&&Zm(Pm.bind)?Pm.call.bind(Pm.bind):function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return function(){return t.apply(e,n.concat(km.call(arguments)))}};function Xm(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){return t.apply(this,e.concat(km.call(arguments)))}}function Km(t){return Array.isArray?Array.isArray(t):"[object Array]"===Sm.call(t)}function Zm(t){return"function"==typeof t}function Jm(t){return"string"==typeof t}function Qm(t){return"[object String]"===Sm.call(t)}function ty(t){return"number"==typeof t}function ey(t){var e=typeof t;return"function"===e||!!t&&"object"===e}function ny(t){return!!bm[Sm.call(t)]}function iy(t){return!!xm[Sm.call(t)]}function ry(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}function oy(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,i=t.length;n<i;n++)if(null!=t[n])return t[n]}function sy(t,e){return null!=t?t:e}function ay(t,e,n){return null!=t?t:null!=e?e:n}function ly(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return km.apply(t,e)}function uy(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function cy(t,e){if(!t)throw new Error(e)}function hy(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function dy(t){t.__ec_primitive__=!0}function py(t){return t.__ec_primitive__}var fy=function(){function t(e){this.data={};var n=Km(e);this.data={};var i=this;function r(t,e){n?i.set(t,e):i.set(e,t)}e instanceof t?e.each(r):e&&Wm(e,r)}return t.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},t.prototype.set=function(t,e){return this.data[t]=e},t.prototype.each=function(t,e){for(var n in this.data)this.data.hasOwnProperty(n)&&t.call(e,this.data[n],n)},t.prototype.keys=function(){return Ym(this.data)},t.prototype.removeKey=function(t){delete this.data[t]},t}();function gy(t){return new fy(t)}function my(t,e){var n;if(Object.create)n=Object.create(t);else{var i=function(){};i.prototype=t,n=new i}return e&&Fm(n,e),n}function yy(t,e){return t.hasOwnProperty(e)}function vy(){}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _y=function(t,e){return(_y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function wy(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}_y(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function by(t,e){return null==t&&(t=0),null==e&&(e=0),[t,e]}function xy(t){return[t[0],t[1]]}function Sy(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function Cy(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function Ty(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function Iy(t,e){var n=function(t){return Math.sqrt(function(t){return t[0]*t[0]+t[1]*t[1]}(t))}(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function ky(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var My=ky;var Dy=function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])};function Py(t,e,n,i){return t[0]=e[0]+i*(n[0]-e[0]),t[1]=e[1]+i*(n[1]-e[1]),t}function Ay(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t}function Ey(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function Oy(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}var Ry=function(t,e){this.target=t,this.topTarget=e&&e.topTarget},Ny=function(){function t(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Ry(e,t),"dragstart",t.event))},t.prototype._drag=function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,i=t.offsetY,r=n-this._x,o=i-this._y;this._x=n,this._y=i,e.drift(r,o,t),this.handler.dispatchToElement(new Ry(e,t),"drag",t.event);var s=this.handler.findHover(n,i,e).target,a=this._dropTarget;this._dropTarget=s,e!==s&&(a&&s!==a&&this.handler.dispatchToElement(new Ry(a,t),"dragleave",t.event),s&&s!==a&&this.handler.dispatchToElement(new Ry(s,t),"dragenter",t.event))}},t.prototype._dragEnd=function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.handler.dispatchToElement(new Ry(e,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Ry(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},t}(),Ly=function(){function t(t){t&&(this._$eventProcessor=t)}return t.prototype.on=function(t,e,n,i){this._$handlers||(this._$handlers={});var r=this._$handlers;if("function"==typeof e&&(i=n,n=e,e=null),!n||!t)return this;var o=this._$eventProcessor;null!=e&&o&&o.normalizeQuery&&(e=o.normalizeQuery(e)),r[t]||(r[t]=[]);for(var s=0;s<r[t].length;s++)if(r[t][s].h===n)return this;var a={h:n,query:e,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},l=r[t].length-1,u=r[t][l];return u&&u.callAtLast?r[t].splice(l,0,a):r[t].push(a),this},t.prototype.isSilent=function(t){var e=this._$handlers;return!e||!e[t]||!e[t].length},t.prototype.off=function(t,e){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var i=[],r=0,o=n[t].length;r<o;r++)n[t][r].h!==e&&i.push(n[t][r]);n[t]=i}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],r=this._$eventProcessor;if(i)for(var o=e.length,s=i.length,a=0;a<s;a++){var l=i[a];if(!r||!r.filter||null==l.query||r.filter(t,l.query))switch(o){case 0:l.h.call(l.ctx);break;case 1:l.h.call(l.ctx,e[0]);break;case 2:l.h.call(l.ctx,e[0],e[1]);break;default:l.h.apply(l.ctx,e)}}return r&&r.afterTrigger&&r.afterTrigger(t),this},t.prototype.triggerWithContext=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],r=this._$eventProcessor;if(i)for(var o=e.length,s=e[o-1],a=i.length,l=0;l<a;l++){var u=i[l];if(!r||!r.filter||null==u.query||r.filter(t,u.query))switch(o){case 0:u.h.call(s);break;case 1:u.h.call(s,e[0]);break;case 2:u.h.call(s,e[0],e[1]);break;default:u.h.apply(s,e.slice(1,o-1))}}return r&&r.afterTrigger&&r.afterTrigger(t),this},t}(),Fy=Math.log(2);function zy(t,e,n,i,r,o){var s=i+"-"+r,a=t.length;if(o.hasOwnProperty(s))return o[s];if(1===e){var l=Math.round(Math.log((1<<a)-1&~r)/Fy);return t[n][l]}for(var u=i|1<<n,c=n+1;i&1<<c;)c++;for(var h=0,d=0,p=0;d<a;d++){var f=1<<d;f&r||(h+=(p%2?-1:1)*t[n][d]*zy(t,e-1,c,u,r|f,o),p++)}return o[s]=h,h}function By(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],i={},r=zy(n,8,0,0,0,i);if(0!==r){for(var o=[],s=0;s<8;s++)for(var a=0;a<8;a++)null==o[a]&&(o[a]=0),o[a]+=((s+a)%2?-1:1)*zy(n,7,0===s?1:0,1<<s,1<<a,i)/r*e[s];return function(t,e,n){var i=e*o[6]+n*o[7]+1;t[0]=(e*o[0]+n*o[1]+o[2])/i,t[1]=(e*o[3]+n*o[4]+o[5])/i}}}var Uy=[];function Vy(t,e,n,i,r){if(e.getBoundingClientRect&&wm.domSupported&&!Hy(e)){var o=e.___zrEVENTSAVED||(e.___zrEVENTSAVED={}),s=function(t,e,n){for(var i=n?"invTrans":"trans",r=e[i],o=e.srcCoords,s=[],a=[],l=!0,u=0;u<4;u++){var c=t[u].getBoundingClientRect(),h=2*u,d=c.left,p=c.top;s.push(d,p),l=l&&o&&d===o[h]&&p===o[h+1],a.push(t[u].offsetLeft,t[u].offsetTop)}return l&&r?r:(e.srcCoords=s,e[i]=n?By(a,s):By(s,a))}(function(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var i=["left","right"],r=["top","bottom"],o=0;o<4;o++){var s=document.createElement("div"),a=o%2,l=(o>>1)%2;s.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[a]+":0",r[l]+":0",i[1-a]+":auto",r[1-l]+":auto",""].join("!important;"),t.appendChild(s),n.push(s)}return n}(e,o),o,r);if(s)return s(t,n,i),!0}return!1}function Hy(t){return"CANVAS"===t.nodeName.toUpperCase()}var Wy="undefined"!=typeof window&&!!window.addEventListener,jy=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,qy=[];function Gy(t,e,n,i){return n=n||{},i||!wm.canvasSupported?Yy(t,e,n):wm.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):Yy(t,e,n),n}function Yy(t,e,n){if(wm.domSupported&&t.getBoundingClientRect){var i=e.clientX,r=e.clientY;if(Hy(t)){var o=t.getBoundingClientRect();return n.zrX=i-o.left,void(n.zrY=r-o.top)}if(Vy(qy,t,i,r))return n.zrX=qy[0],void(n.zrY=qy[1])}n.zrX=n.zrY=0}function $y(t){return t||window.event}function Xy(t,e,n){if(null!=(e=$y(e)).zrX)return e;var i=e.type;if(i&&i.indexOf("touch")>=0){var r="touchend"!==i?e.targetTouches[0]:e.changedTouches[0];r&&Gy(t,r,e,n)}else{Gy(t,e,e,n);var o=function(t){var e=t.wheelDelta;if(e)return e;var n=t.deltaX,i=t.deltaY;if(null==n||null==i)return e;return 3*(0!==i?Math.abs(i):Math.abs(n))*(i>0?-1:i<0?1:n>0?-1:1)}(e);e.zrDelta=o?o/120:-(e.detail||0)/3}var s=e.button;return null==e.which&&void 0!==s&&jy.test(e.type)&&(e.which=1&s?1:2&s?3:4&s?2:0),e}var Ky=Wy?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},Zy=function(){function t(){this._track=[]}return t.prototype.recognize=function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(t,e,n){var i=t.touches;if(i){for(var r={points:[],touches:[],target:e,event:t},o=0,s=i.length;o<s;o++){var a=i[o],l=Gy(n,a,{});r.points.push([l.zrX,l.zrY]),r.touches.push(a)}this._track.push(r)}},t.prototype._recognize=function(t){for(var e in Qy)if(Qy.hasOwnProperty(e)){var n=Qy[e](this._track,t);if(n)return n}},t}();function Jy(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}var Qy={pinch:function(t,e){var n=t.length;if(n){var i,r=(t[n-1]||{}).points,o=(t[n-2]||{}).points||r;if(o&&o.length>1&&r&&r.length>1){var s=Jy(r)/Jy(o);!isFinite(s)&&(s=1),e.pinchScale=s;var a=[((i=r)[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2];return e.pinchX=a[0],e.pinchY=a[1],{type:"pinch",target:t[0].target,event:e}}}}};function tv(){Ky(this.event)}var ev=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handler=null,e}return wy(e,t),e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(Ly),nv=function(t,e){this.x=t,this.y=e},iv=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],rv=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o._hovered=new nv(0,0),o.storage=e,o.painter=n,o.painterRoot=r,i=i||new ev,o.proxy=null,o.setHandlerProxy(i),o._draggingMgr=new Ny(o),o}return wy(e,t),e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(Wm(iv,(function(e){t.on&&t.on(e,this[e],this)}),this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var e=t.zrX,n=t.zrY,i=sv(this,e,n),r=this._hovered,o=r.target;o&&!o.__zr&&(o=(r=this.findHover(r.x,r.y)).target);var s=this._hovered=i?new nv(e,n):this.findHover(e,n),a=s.target,l=this.proxy;l.setCursor&&l.setCursor(a?a.cursor:"default"),o&&a!==o&&this.dispatchToElement(r,"mouseout",t),this.dispatchToElement(s,"mousemove",t),a&&a!==o&&this.dispatchToElement(s,"mouseover",t)},e.prototype.mouseout=function(t){var e=t.zrEventControl;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new nv(0,0)},e.prototype.dispatch=function(t,e){var n=this[t];n&&n.call(this,e)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},e.prototype.dispatchToElement=function(t,e,n){var i=(t=t||{}).target;if(!i||!i.silent){for(var r="on"+e,o=function(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:tv}}(e,t,n);i&&(i[r]&&(o.cancelBubble=!!i[r].call(i,o)),i.trigger(e,o),i=i.__hostTarget?i.__hostTarget:i.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(e,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer((function(t){"function"==typeof t[r]&&t[r].call(t,o),t.trigger&&t.trigger(e,o)})))}},e.prototype.findHover=function(t,e,n){for(var i=this.storage.getDisplayList(),r=new nv(t,e),o=i.length-1;o>=0;o--){var s=void 0;if(i[o]!==n&&!i[o].ignore&&(s=ov(i[o],t,e))&&(!r.topTarget&&(r.topTarget=i[o]),"silent"!==s)){r.target=i[o];break}}return r},e.prototype.processGesture=function(t,e){this._gestureMgr||(this._gestureMgr=new Zy);var n=this._gestureMgr;"start"===e&&n.clear();var i=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&n.clear(),i){var r=i.type;t.gestureEvent=r;var o=new nv;o.target=i.target,this.dispatchToElement(o,r,i.event)}},e}(Ly);function ov(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var i=t,r=void 0,o=!1;i;){if(i.ignoreClip&&(o=!0),!o){var s=i.getClipPath();if(s&&!s.contain(e,n))return!1;i.silent&&(r=!0)}var a=i.__hostTarget;i=a||i.parent}return!r||"silent"}return!1}function sv(t,e,n){var i=t.painter;return e<0||e>i.getWidth()||n<0||n>i.getHeight()}Wm(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],(function(t){rv.prototype[t]=function(e){var n,i,r=e.zrX,o=e.zrY,s=sv(this,r,o);if("mouseup"===t&&s||(i=(n=this.findHover(r,o)).target),"mousedown"===t)this._downEl=i,this._downPoint=[e.zrX,e.zrY],this._upEl=i;else if("mouseup"===t)this._upEl=i;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||My(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,t,e)}}));var av=rv;function lv(t,e,n,i){var r=e+1;if(r===n)return 1;if(i(t[r++],t[e])<0){for(;r<n&&i(t[r],t[r-1])<0;)r++;!function(t,e,n){n--;for(;e<n;){var i=t[e];t[e++]=t[n],t[n--]=i}}(t,e,r)}else for(;r<n&&i(t[r],t[r-1])>=0;)r++;return r-e}function uv(t,e,n,i,r){for(i===e&&i++;i<n;i++){for(var o,s=t[i],a=e,l=i;a<l;)r(s,t[o=a+l>>>1])<0?l=o:a=o+1;var u=i-a;switch(u){case 3:t[a+3]=t[a+2];case 2:t[a+2]=t[a+1];case 1:t[a+1]=t[a];break;default:for(;u>0;)t[a+u]=t[a+u-1],u--}t[a]=s}}function cv(t,e,n,i,r,o){var s=0,a=0,l=1;if(o(t,e[n+r])>0){for(a=i-r;l<a&&o(t,e[n+r+l])>0;)s=l,(l=1+(l<<1))<=0&&(l=a);l>a&&(l=a),s+=r,l+=r}else{for(a=r+1;l<a&&o(t,e[n+r-l])<=0;)s=l,(l=1+(l<<1))<=0&&(l=a);l>a&&(l=a);var u=s;s=r-l,l=r-u}for(s++;s<l;){var c=s+(l-s>>>1);o(t,e[n+c])>0?s=c+1:l=c}return l}function hv(t,e,n,i,r,o){var s=0,a=0,l=1;if(o(t,e[n+r])<0){for(a=r+1;l<a&&o(t,e[n+r-l])<0;)s=l,(l=1+(l<<1))<=0&&(l=a);l>a&&(l=a);var u=s;s=r-l,l=r-u}else{for(a=i-r;l<a&&o(t,e[n+r+l])>=0;)s=l,(l=1+(l<<1))<=0&&(l=a);l>a&&(l=a),s+=r,l+=r}for(s++;s<l;){var c=s+(l-s>>>1);o(t,e[n+c])<0?l=c:s=c+1}return l}function dv(t,e){var n,i,r=7,o=0,s=[];function a(a){var l=n[a],u=i[a],c=n[a+1],h=i[a+1];i[a]=u+h,a===o-3&&(n[a+1]=n[a+2],i[a+1]=i[a+2]),o--;var d=hv(t[c],t,l,u,0,e);l+=d,0!==(u-=d)&&0!==(h=cv(t[l+u-1],t,c,h,h-1,e))&&(u<=h?function(n,i,o,a){var l=0;for(l=0;l<i;l++)s[l]=t[n+l];var u=0,c=o,h=n;if(t[h++]=t[c++],0==--a){for(l=0;l<i;l++)t[h+l]=s[u+l];return}if(1===i){for(l=0;l<a;l++)t[h+l]=t[c+l];return void(t[h+a]=s[u])}var d,p,f,g=r;for(;;){d=0,p=0,f=!1;do{if(e(t[c],s[u])<0){if(t[h++]=t[c++],p++,d=0,0==--a){f=!0;break}}else if(t[h++]=s[u++],d++,p=0,1==--i){f=!0;break}}while((d|p)<g);if(f)break;do{if(0!==(d=hv(t[c],s,u,i,0,e))){for(l=0;l<d;l++)t[h+l]=s[u+l];if(h+=d,u+=d,(i-=d)<=1){f=!0;break}}if(t[h++]=t[c++],0==--a){f=!0;break}if(0!==(p=cv(s[u],t,c,a,0,e))){for(l=0;l<p;l++)t[h+l]=t[c+l];if(h+=p,c+=p,0===(a-=p)){f=!0;break}}if(t[h++]=s[u++],1==--i){f=!0;break}g--}while(d>=7||p>=7);if(f)break;g<0&&(g=0),g+=2}if((r=g)<1&&(r=1),1===i){for(l=0;l<a;l++)t[h+l]=t[c+l];t[h+a]=s[u]}else{if(0===i)throw new Error;for(l=0;l<i;l++)t[h+l]=s[u+l]}}(l,u,c,h):function(n,i,o,a){var l=0;for(l=0;l<a;l++)s[l]=t[o+l];var u=n+i-1,c=a-1,h=o+a-1,d=0,p=0;if(t[h--]=t[u--],0==--i){for(d=h-(a-1),l=0;l<a;l++)t[d+l]=s[l];return}if(1===a){for(p=(h-=i)+1,d=(u-=i)+1,l=i-1;l>=0;l--)t[p+l]=t[d+l];return void(t[h]=s[c])}var f=r;for(;;){var g=0,m=0,y=!1;do{if(e(s[c],t[u])<0){if(t[h--]=t[u--],g++,m=0,0==--i){y=!0;break}}else if(t[h--]=s[c--],m++,g=0,1==--a){y=!0;break}}while((g|m)<f);if(y)break;do{if(0!==(g=i-hv(s[c],t,n,i,i-1,e))){for(i-=g,p=(h-=g)+1,d=(u-=g)+1,l=g-1;l>=0;l--)t[p+l]=t[d+l];if(0===i){y=!0;break}}if(t[h--]=s[c--],1==--a){y=!0;break}if(0!==(m=a-cv(t[u],s,0,a,a-1,e))){for(a-=m,p=(h-=m)+1,d=(c-=m)+1,l=0;l<m;l++)t[p+l]=s[d+l];if(a<=1){y=!0;break}}if(t[h--]=t[u--],0==--i){y=!0;break}f--}while(g>=7||m>=7);if(y)break;f<0&&(f=0),f+=2}(r=f)<1&&(r=1);if(1===a){for(p=(h-=i)+1,d=(u-=i)+1,l=i-1;l>=0;l--)t[p+l]=t[d+l];t[h]=s[c]}else{if(0===a)throw new Error;for(d=h-(a-1),l=0;l<a;l++)t[d+l]=s[l]}}(l,u,c,h))}return n=[],i=[],{mergeRuns:function(){for(;o>1;){var t=o-2;if(t>=1&&i[t-1]<=i[t]+i[t+1]||t>=2&&i[t-2]<=i[t]+i[t-1])i[t-1]<i[t+1]&&t--;else if(i[t]>i[t+1])break;a(t)}},forceMergeRuns:function(){for(;o>1;){var t=o-2;t>0&&i[t-1]<i[t+1]&&t--,a(t)}},pushRun:function(t,e){n[o]=t,i[o]=e,o+=1}}}function pv(t,e,n,i){n||(n=0),i||(i=t.length);var r=i-n;if(!(r<2)){var o=0;if(r<32)uv(t,n,i,n+(o=lv(t,n,i,e)),e);else{var s=dv(t,e),a=function(t){for(var e=0;t>=32;)e|=1&t,t>>=1;return t+e}(r);do{if((o=lv(t,n,i,e))<a){var l=r;l>a&&(l=a),uv(t,n,n+l,n+o,e),o=l}s.pushRun(n,o),s.mergeRuns(),r-=o,n+=o}while(0!==r);s.forceMergeRuns()}}}var fv=!1;function gv(){fv||(fv=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function mv(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var yv=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=mv}return t.prototype.traverse=function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},t.prototype.getDisplayList=function(t,e){e=e||!1;var n=this._displayList;return!t&&n.length||this.updateDisplayList(e),n},t.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,i=0,r=e.length;i<r;i++)this._updateAndAddDisplayable(e[i],null,t);n.length=this._displayListLen,wm.canvasSupported&&pv(n,mv)},t.prototype._updateAndAddDisplayable=function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)e=null;else if(i){e=e?e.slice():[];for(var r=i,o=t;r;)r.parent=o,r.updateTransform(),e.push(r),o=r,r=r.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),a=0;a<s.length;a++){var l=s[a];t.__dirty&&(l.__dirty|=1),this._updateAndAddDisplayable(l,e,n)}t.__dirty=0}else{var u=t;e&&e.length?u.__clipPaths=e:u.__clipPaths&&u.__clipPaths.length>0&&(u.__clipPaths=[]),isNaN(u.z)&&(gv(),u.z=0),isNaN(u.z2)&&(gv(),u.z2=0),isNaN(u.zlevel)&&(gv(),u.zlevel=0),this._displayList[this._displayListLen++]=u}var c=t.getDecalElement&&t.getDecalElement();c&&this._updateAndAddDisplayable(c,e,n);var h=t.getTextGuideLine();h&&this._updateAndAddDisplayable(h,e,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,e,n)}},t.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},t.prototype.delRoot=function(t){if(t instanceof Array)for(var e=0,n=t.length;e<n;e++)this.delRoot(t[e]);else{var i=Um(this._roots,t);i>=0&&this._roots.splice(i,1)}},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}(),vv="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)},_v={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=i*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-_v.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*_v.bounceIn(2*t):.5*_v.bounceOut(2*t-1)+.5}},wv=_v,bv=function(){function t(t){this._initialized=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart}return t.prototype.step=function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),!this._paused){var n=(t-this._startTime-this._pausedTime)/this._life;n<0&&(n=0),n=Math.min(n,1);var i=this.easing,r="string"==typeof i?wv[i]:i,o="function"==typeof r?r(n):n;if(this.onframe&&this.onframe(o),1===n){if(!this.loop)return!0;this._restart(t),this.onrestart&&this.onrestart()}return!1}this._pausedTime+=e},t.prototype._restart=function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t}(),xv=function(t){this.value=t},Sv=function(){function t(){this._len=0}return t.prototype.insert=function(t){var e=new xv(t);return this.insertEntry(e),e},t.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},t.prototype.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),Cv=function(){function t(t){this._list=new Sv,this._maxSize=10,this._map={},this._maxSize=t}return t.prototype.put=function(t,e){var n=this._list,i=this._map,r=null;if(null==i[t]){var o=n.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var a=n.head;n.remove(a),delete i[a.key],r=a.value,this._lastRemovedEntry=a}s?s.value=e:s=new xv(e),s.key=t,n.insertEntry(s),i[t]=s}return r},t.prototype.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}(),Tv={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Iv(t){return(t=Math.round(t))<0?0:t>255?255:t}function kv(t){return t<0?0:t>1?1:t}function Mv(t){var e=t;return e.length&&"%"===e.charAt(e.length-1)?Iv(parseFloat(e)/100*255):Iv(parseInt(e,10))}function Dv(t){var e=t;return e.length&&"%"===e.charAt(e.length-1)?kv(parseFloat(e)/100):kv(parseFloat(e))}function Pv(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function Av(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function Ev(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var Ov=new Cv(20),Rv=null;function Nv(t,e){Rv&&Ev(Rv,e),Rv=Ov.put(t,Rv||e.slice())}function Lv(t,e){if(t){e=e||[];var n=Ov.get(t);if(n)return Ev(e,n);var i=(t+="").replace(/ /g,"").toLowerCase();if(i in Tv)return Ev(e,Tv[i]),Nv(t,e),e;var r,o=i.length;if("#"===i.charAt(0))return 4===o||5===o?(r=parseInt(i.slice(1,4),16))>=0&&r<=4095?(Av(e,(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,5===o?parseInt(i.slice(4),16)/15:1),Nv(t,e),e):void Av(e,0,0,0,1):7===o||9===o?(r=parseInt(i.slice(1,7),16))>=0&&r<=16777215?(Av(e,(16711680&r)>>16,(65280&r)>>8,255&r,9===o?parseInt(i.slice(7),16)/255:1),Nv(t,e),e):void Av(e,0,0,0,1):void 0;var s=i.indexOf("("),a=i.indexOf(")");if(-1!==s&&a+1===o){var l=i.substr(0,s),u=i.substr(s+1,a-(s+1)).split(","),c=1;switch(l){case"rgba":if(4!==u.length)return 3===u.length?Av(e,+u[0],+u[1],+u[2],1):Av(e,0,0,0,1);c=Dv(u.pop());case"rgb":return 3!==u.length?void Av(e,0,0,0,1):(Av(e,Mv(u[0]),Mv(u[1]),Mv(u[2]),c),Nv(t,e),e);case"hsla":return 4!==u.length?void Av(e,0,0,0,1):(u[3]=Dv(u[3]),Fv(u,e),Nv(t,e),e);case"hsl":return 3!==u.length?void Av(e,0,0,0,1):(Fv(u,e),Nv(t,e),e);default:return}}Av(e,0,0,0,1)}}function Fv(t,e){var n=(parseFloat(t[0])%360+360)%360/360,i=Dv(t[1]),r=Dv(t[2]),o=r<=.5?r*(i+1):r+i-r*i,s=2*r-o;return Av(e=e||[],Iv(255*Pv(s,o,n+1/3)),Iv(255*Pv(s,o,n)),Iv(255*Pv(s,o,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function zv(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}function Bv(t,e){var n=Lv(t);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*e:0}var Uv=Array.prototype.slice;function Vv(t,e,n){return(e-t)*n+t}function Hv(t,e,n,i){for(var r=e.length,o=0;o<r;o++)t[o]=Vv(e[o],n[o],i)}function Wv(t,e,n,i){for(var r=e.length,o=0;o<r;o++)t[o]=e[o]+n[o]*i;return t}function jv(t,e,n,i){for(var r=e.length,o=r&&e[0].length,s=0;s<r;s++){t[s]||(t[s]=[]);for(var a=0;a<o;a++)t[s][a]=e[s][a]+n[s][a]*i}return t}function qv(t,e,n){var i=t,r=e;if(i.push&&r.push){var o=i.length,s=r.length;if(o!==s)if(o>s)i.length=s;else for(var a=o;a<s;a++)i.push(1===n?r[a]:Uv.call(r[a]));var l=i[0]&&i[0].length;for(a=0;a<i.length;a++)if(1===n)isNaN(i[a])&&(i[a]=r[a]);else for(var u=0;u<l;u++)isNaN(i[a][u])&&(i[a][u]=r[a][u])}}function Gv(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function Yv(t,e,n,i,r,o,s){var a=.5*(n-t),l=.5*(i-e);return(2*(e-n)+a+l)*s+(-3*(e-n)-2*a-l)*o+a*r+e}function $v(t,e,n,i,r,o,s,a){for(var l=e.length,u=0;u<l;u++)t[u]=Yv(e[u],n[u],i[u],r[u],o,s,a)}function Xv(t){if(Hm(t)){var e=t.length;if(Hm(t[0])){for(var n=[],i=0;i<e;i++)n.push(Uv.call(t[i]));return n}return Uv.call(t)}return t}function Kv(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}var Zv,Jv,Qv=[0,0,0,0],t_=function(){function t(t){this.keyframes=[],this.maxTime=0,this.arrDim=0,this.interpolable=!0,this._needsSort=!1,this._isAllValueEqual=!0,this._lastFrame=0,this._lastFramePercent=0,this.propName=t}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return!this._isAllValueEqual&&this.keyframes.length>=2&&this.interpolable&&this.maxTime>0},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(t,e){t>=this.maxTime?this.maxTime=t:this._needsSort=!0;var n=this.keyframes,i=n.length;if(this.interpolable)if(Hm(e)){var r=function(t){return Hm(t&&t[0])?2:1}(e);if(i>0&&this.arrDim!==r)return void(this.interpolable=!1);if(1===r&&"number"!=typeof e[0]||2===r&&"number"!=typeof e[0][0])return void(this.interpolable=!1);if(i>0){var o=n[i-1];this._isAllValueEqual&&(1===r&&Gv(e,o.value)||(this._isAllValueEqual=!1))}this.arrDim=r}else{if(this.arrDim>0)return void(this.interpolable=!1);if("string"==typeof e){var s=Lv(e);s?(e=s,this.isValueColor=!0):this.interpolable=!1}else if("number"!=typeof e||isNaN(e))return void(this.interpolable=!1);if(this._isAllValueEqual&&i>0){o=n[i-1];(this.isValueColor&&!Gv(o.value,e)||o.value!==e)&&(this._isAllValueEqual=!1)}}var a={time:t,value:e,percent:0};return this.keyframes.push(a),a},t.prototype.prepare=function(t){var e=this.keyframes;this._needsSort&&e.sort((function(t,e){return t.time-e.time}));for(var n=this.arrDim,i=e.length,r=e[i-1],o=0;o<i;o++)e[o].percent=e[o].time/this.maxTime,n>0&&o!==i-1&&qv(e[o].value,r.value,n);if(t&&this.needsAnimate()&&t.needsAnimate()&&n===t.arrDim&&this.isValueColor===t.isValueColor&&!t._finished){this._additiveTrack=t;var s=e[0].value;for(o=0;o<i;o++)0===n?this.isValueColor?e[o].additiveValue=Wv([],e[o].value,s,-1):e[o].additiveValue=e[o].value-s:1===n?e[o].additiveValue=Wv([],e[o].value,s,-1):2===n&&(e[o].additiveValue=jv([],e[o].value,s,-1))}},t.prototype.step=function(t,e){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n,i=null!=this._additiveTrack,r=i?"additiveValue":"value",o=this.keyframes,s=this.keyframes.length,a=this.propName,l=this.arrDim,u=this.isValueColor;if(e<0)n=0;else if(e<this._lastFramePercent){for(n=Math.min(this._lastFrame+1,s-1);n>=0&&!(o[n].percent<=e);n--);n=Math.min(n,s-2)}else{for(n=this._lastFrame;n<s&&!(o[n].percent>e);n++);n=Math.min(n-1,s-2)}var c=o[n+1],h=o[n];if(h&&c){this._lastFrame=n,this._lastFramePercent=e;var d=c.percent-h.percent;if(0!==d){var p=(e-h.percent)/d,f=i?this._additiveValue:u?Qv:t[a];if((l>0||u)&&!f&&(f=this._additiveValue=[]),this.useSpline){var g=o[n][r],m=o[0===n?n:n-1][r],y=o[n>s-2?s-1:n+1][r],v=o[n>s-3?s-1:n+2][r];if(l>0)1===l?$v(f,m,g,y,v,p,p*p,p*p*p):function(t,e,n,i,r,o,s,a){for(var l=e.length,u=e[0].length,c=0;c<l;c++){t[c]||(t[1]=[]);for(var h=0;h<u;h++)t[c][h]=Yv(e[c][h],n[c][h],i[c][h],r[c][h],o,s,a)}}(f,m,g,y,v,p,p*p,p*p*p);else if(u)$v(f,m,g,y,v,p,p*p,p*p*p),i||(t[a]=Kv(f));else{var _=void 0;_=this.interpolable?Yv(m,g,y,v,p,p*p,p*p*p):y,i?this._additiveValue=_:t[a]=_}}else if(l>0)1===l?Hv(f,h[r],c[r],p):function(t,e,n,i){for(var r=e.length,o=r&&e[0].length,s=0;s<r;s++){t[s]||(t[s]=[]);for(var a=0;a<o;a++)t[s][a]=Vv(e[s][a],n[s][a],i)}}(f,h[r],c[r],p);else if(u)Hv(f,h[r],c[r],p),i||(t[a]=Kv(f));else{_=void 0;_=this.interpolable?Vv(h[r],c[r],p):function(t,e,n){return n>.5?e:t}(h[r],c[r],p),i?this._additiveValue=_:t[a]=_}i&&this._addToTarget(t)}}}},t.prototype._addToTarget=function(t){var e=this.arrDim,n=this.propName,i=this._additiveValue;0===e?this.isValueColor?(Lv(t[n],Qv),Wv(Qv,Qv,i,1),t[n]=Kv(Qv)):t[n]=t[n]+i:1===e?Wv(t[n],t[n],i,1):2===e&&jv(t[n],t[n],i,1)},t}(),e_=function(){function t(t,e,n){this._tracks={},this._trackKeys=[],this._delay=0,this._maxTime=0,this._paused=!1,this._started=0,this._clip=null,this._target=t,this._loop=e,e&&n?Rm("Can' use additive animation on looped animation."):this._additiveAnimators=n}return t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(t){this._target=t},t.prototype.when=function(t,e){return this.whenWithKeys(t,e,Ym(e))},t.prototype.whenWithKeys=function(t,e,n){for(var i=this._tracks,r=0;r<n.length;r++){var o=n[r],s=i[o];if(!s){s=i[o]=new t_(o);var a=void 0,l=this._getAdditiveTrack(o);if(l){var u=l.keyframes[l.keyframes.length-1];a=u&&u.value,l.isValueColor&&a&&(a=Kv(a))}else a=this._target[o];if(null==a)continue;0!==t&&s.addKeyframe(0,Xv(a)),this._trackKeys.push(o)}s.addKeyframe(t,Xv(e[o]))}return this._maxTime=Math.max(this._maxTime,t),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var e=t.length,n=0;n<e;n++)t[n].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,e=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,e)for(var n=0;n<e.length;n++)e[n].call(this)},t.prototype._setTracksFinished=function(){for(var t=this._tracks,e=this._trackKeys,n=0;n<e.length;n++)t[e[n]].setFinished()},t.prototype._getAdditiveTrack=function(t){var e,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var r=n[i].getTrack(t);r&&(e=r)}return e},t.prototype.start=function(t,e){if(!(this._started>0)){this._started=1;for(var n=this,i=[],r=0;r<this._trackKeys.length;r++){var o=this._trackKeys[r],s=this._tracks[o],a=this._getAdditiveTrack(o),l=s.keyframes;if(s.prepare(a),s.needsAnimate())i.push(s);else if(!s.interpolable){var u=l[l.length-1];u&&(n._target[s.propName]=u.value)}}if(i.length||e){var c=new bv({life:this._maxTime,loop:this._loop,delay:this._delay,onframe:function(t){n._started=2;var e=n._additiveAnimators;if(e){for(var r=!1,o=0;o<e.length;o++)if(e[o]._clip){r=!0;break}r||(n._additiveAnimators=null)}for(o=0;o<i.length;o++)i[o].step(n._target,t);var s=n._onframeCbs;if(s)for(o=0;o<s.length;o++)s[o](n._target,t)},ondestroy:function(){n._doneCallback()}});this._clip=c,this.animation&&this.animation.addClip(c),t&&"spline"!==t&&(c.easing=t)}else this._doneCallback();return this}},t.prototype.stop=function(t){if(this._clip){var e=this._clip;t&&e.onframe(1),this._abortedCallback()}},t.prototype.delay=function(t){return this._delay=t,this},t.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},t.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},t.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(t){return this._tracks[t]},t.prototype.stopTracks=function(t,e){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,r=0;r<t.length;r++){var o=n[t[r]];o&&(e?o.step(this._target,1):1===this._started&&o.step(this._target,0),o.setFinished())}var s=!0;for(r=0;r<i.length;r++)if(!n[i[r]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},t.prototype.saveFinalToTarget=function(t,e){if(t){e=e||this._trackKeys;for(var n=0;n<e.length;n++){var i=e[n],r=this._tracks[i];if(r&&!r.isFinished()){var o=r.keyframes,s=o[o.length-1];if(s){var a=Xv(s.value);r.isValueColor&&(a=Kv(a)),t[i]=a}}}}},t.prototype.__changeFinalValue=function(t,e){e=e||Ym(t);for(var n=0;n<e.length;n++){var i=e[n],r=this._tracks[i];if(r){var o=r.keyframes;if(o.length>1){var s=o.pop();r.addKeyframe(s.time,t[i]),r.prepare(r.getAdditiveTrack())}}}},t}(),n_=function(t){function e(e){var n=t.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,e=e||{},n.stage=e.stage||{},n.onframe=e.onframe||function(){},n}return wy(e,t),e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._clipsHead?(this._clipsTail.next=t,t.prev=this._clipsTail,t.next=null,this._clipsTail=t):this._clipsHead=this._clipsTail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var e=t.getClip();e&&this.addClip(e)},e.prototype.removeClip=function(t){if(t.animation){var e=t.prev,n=t.next;e?e.next=n:this._clipsHead=n,n?n.prev=e:this._clipsTail=e,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var e=t.getClip();e&&this.removeClip(e),t.animation=null},e.prototype.update=function(t){for(var e=(new Date).getTime()-this._pausedTime,n=e-this._time,i=this._clipsHead;i;){var r=i.next;i.step(e,n)?(i.ondestroy&&i.ondestroy(),this.removeClip(i),i=r):i=r}this._time=e,t||(this.onframe(n),this.trigger("frame",n),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0,vv((function e(){t._running&&(vv(e),!t._paused&&t.update())}))},e.prototype.start=function(){this._running||(this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._clipsHead;t;){var e=t.next;t.prev=t.next=t.animation=null,t=e}this._clipsHead=this._clipsTail=null},e.prototype.isFinished=function(){return null==this._clipsHead},e.prototype.animate=function(t,e){e=e||{},this.start();var n=new e_(t,e.loop);return this.addAnimator(n),n},e}(Ly),i_=wm.domSupported,r_=(Jv={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:Zv=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:jm(Zv,(function(t){var e=t.replace("mouse","pointer");return Jv.hasOwnProperty(e)?e:t}))}),o_=["mousemove","mouseup"],s_=["pointermove","pointerup"],a_=!1;function l_(t){var e=t.pointerType;return"pen"===e||"touch"===e}function u_(t){t&&(t.zrByTouch=!0)}function c_(t,e){for(var n=e,i=!1;n&&9!==n.nodeType&&!(i=n.domBelongToZr||n!==e&&n===t.painterRoot);)n=n.parentNode;return i}var h_=function(t,e){this.stopPropagation=vy,this.stopImmediatePropagation=vy,this.preventDefault=vy,this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY},d_={mousedown:function(t){t=Xy(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=Xy(this.dom,t);var e=this.__mayPointerCapture;!e||t.zrX===e[0]&&t.zrY===e[1]||this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=Xy(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){c_(this,(t=Xy(this.dom,t)).toElement||t.relatedTarget)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){a_=!0,t=Xy(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){a_||(t=Xy(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){u_(t=Xy(this.dom,t)),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),d_.mousemove.call(this,t),d_.mousedown.call(this,t)},touchmove:function(t){u_(t=Xy(this.dom,t)),this.handler.processGesture(t,"change"),d_.mousemove.call(this,t)},touchend:function(t){u_(t=Xy(this.dom,t)),this.handler.processGesture(t,"end"),d_.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<300&&d_.click.call(this,t)},pointerdown:function(t){d_.mousedown.call(this,t)},pointermove:function(t){l_(t)||d_.mousemove.call(this,t)},pointerup:function(t){d_.mouseup.call(this,t)},pointerout:function(t){l_(t)||d_.mouseout.call(this,t)}};Wm(["click","dblclick","contextmenu"],(function(t){d_[t]=function(e){e=Xy(this.dom,e),this.trigger(t,e)}}));var p_={pointermove:function(t){l_(t)||p_.mousemove.call(this,t)},pointerup:function(t){p_.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function f_(t,e){var n=e.domHandlers;wm.pointerEventsSupported?Wm(r_.pointer,(function(i){m_(e,i,(function(e){n[i].call(t,e)}))})):(wm.touchEventsSupported&&Wm(r_.touch,(function(i){m_(e,i,(function(r){n[i].call(t,r),function(t){t.touching=!0,null!=t.touchTimer&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout((function(){t.touching=!1,t.touchTimer=null}),700)}(e)}))})),Wm(r_.mouse,(function(i){m_(e,i,(function(r){r=$y(r),e.touching||n[i].call(t,r)}))})))}function g_(t,e){function n(n){m_(e,n,(function(i){i=$y(i),c_(t,i.target)||(i=function(t,e){return Xy(t.dom,new h_(t,e),!0)}(t,i),e.domHandlers[n].call(t,i))}),{capture:!0})}wm.pointerEventsSupported?Wm(s_,n):wm.touchEventsSupported||Wm(o_,n)}function m_(t,e,n,i){t.mounted[e]=n,t.listenerOpts[e]=i,function(t,e,n,i){Wy?t.addEventListener(e,n,i):t.attachEvent("on"+e,n)}(t.domTarget,e,n,i)}function y_(t){var e,n,i,r,o=t.mounted;for(var s in o)o.hasOwnProperty(s)&&(e=t.domTarget,n=s,i=o[s],r=t.listenerOpts[s],Wy?e.removeEventListener(n,i,r):e.detachEvent("on"+n,i));t.mounted={}}var v_=function(t,e){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=e},__=function(t){function e(e,n){var i=t.call(this)||this;return i.__pointerCapturing=!1,i.dom=e,i.painterRoot=n,i._localHandlerScope=new v_(e,d_),i_&&(i._globalHandlerScope=new v_(document,p_)),f_(i,i._localHandlerScope),i}return wy(e,t),e.prototype.dispose=function(){y_(this._localHandlerScope),i_&&y_(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,i_&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var e=this._globalHandlerScope;t?g_(this,e):y_(e)}},e}(Ly),w_=1;"undefined"!=typeof window&&(w_=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var b_=w_;function x_(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function S_(t,e,n){var i=e[0]*n[0]+e[2]*n[1],r=e[1]*n[0]+e[3]*n[1],o=e[0]*n[2]+e[2]*n[3],s=e[1]*n[2]+e[3]*n[3],a=e[0]*n[4]+e[2]*n[5]+e[4],l=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t}function C_(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function T_(t,e,n){var i=e[0],r=e[2],o=e[4],s=e[1],a=e[3],l=e[5],u=Math.sin(n),c=Math.cos(n);return t[0]=i*c+s*u,t[1]=-i*u+s*c,t[2]=r*c+a*u,t[3]=-r*u+c*a,t[4]=c*o+u*l,t[5]=c*l-u*o,t}function I_(t,e,n){var i=n[0],r=n[1];return t[0]=e[0]*i,t[1]=e[1]*r,t[2]=e[2]*i,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*r,t}function k_(t,e){var n=e[0],i=e[2],r=e[4],o=e[1],s=e[3],a=e[5],l=n*s-o*i;return l?(l=1/l,t[0]=s*l,t[1]=-o*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*a-s*r)*l,t[5]=(o*r-n*a)*l,t):null}var M_=x_;function D_(t){return t>5e-5||t<-5e-5}var P_,A_,E_=[],O_=[],R_=[1,0,0,1,0,0],N_=Math.abs,L_=function(){function t(){}var e;return t.prototype.getLocalTransform=function(e){return t.getLocalTransform(this,e)},t.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},t.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},t.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},t.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},t.prototype.needLocalTransform=function(){return D_(this.rotation)||D_(this.x)||D_(this.y)||D_(this.scaleX-1)||D_(this.scaleY-1)},t.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,e=this.needLocalTransform(),n=this.transform;e||t?(n=n||[1,0,0,1,0,0],e?this.getLocalTransform(n):M_(n),t&&(e?S_(n,t,n):function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]}(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)):n&&M_(n)},t.prototype._resolveGlobalScaleRatio=function(t){var e=this.globalScaleRatio;if(null!=e&&1!==e){this.getGlobalScale(E_);var n=E_[0]<0?-1:1,i=E_[1]<0?-1:1,r=((E_[0]-n)*e+n)/E_[0]||0,o=((E_[1]-i)*e+i)/E_[1]||0;t[0]*=r,t[1]*=r,t[2]*=o,t[3]*=o}this.invTransform=this.invTransform||[1,0,0,1,0,0],k_(this.invTransform,t)},t.prototype.getComputedTransform=function(){for(var t=this,e=[];t;)e.push(t),t=t.parent;for(;t=e.pop();)t.updateTransform();return this.transform},t.prototype.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),r=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(r),e=Math.sqrt(e),this.skewX=r,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=e,this.scaleY=n,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(S_(O_,t.invTransform,e),e=O_);var n=this.originX,i=this.originY;(n||i)&&(R_[4]=n,R_[5]=i,S_(O_,e,R_),O_[4]-=n,O_[5]-=i,e=O_),this.setLocalTransform(e)}},t.prototype.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},t.prototype.transformCoordToLocal=function(t,e){var n=[t,e],i=this.invTransform;return i&&Ay(n,n,i),n},t.prototype.transformCoordToGlobal=function(t,e){var n=[t,e],i=this.transform;return i&&Ay(n,n,i),n},t.prototype.getLineScale=function(){var t=this.transform;return t&&N_(t[0]-1)>1e-10&&N_(t[3]-1)>1e-10?Math.sqrt(N_(t[0]*t[3]-t[2]*t[1])):1},t.prototype.copyTransform=function(t){for(var e=0;e<F_.length;e++){var n=F_[e];this[n]=t[n]}},t.getLocalTransform=function(t,e){e=e||[];var n=t.originX||0,i=t.originY||0,r=t.scaleX,o=t.scaleY,s=t.rotation||0,a=t.x,l=t.y,u=t.skewX?Math.tan(t.skewX):0,c=t.skewY?Math.tan(-t.skewY):0;return n||i?(e[4]=-n*r-u*i*o,e[5]=-i*o-c*n*r):e[4]=e[5]=0,e[0]=r,e[3]=o,e[1]=c*r,e[2]=u*o,s&&T_(e,e,s),e[4]+=n+a,e[5]+=i+l,e},t.initDefaultProps=((e=t.prototype).x=0,e.y=0,e.scaleX=1,e.scaleY=1,e.originX=0,e.originY=0,e.skewX=0,e.skewY=0,e.rotation=0,void(e.globalScaleRatio=1)),t}(),F_=["x","y","originX","originY","rotation","scaleX","scaleY","skewX","skewY"],z_=L_,B_=function(){function t(t,e){this.x=t||0,this.y=e||0}return t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.scale=function(t){this.x*=t,this.y*=t},t.prototype.scaleAndAdd=function(t,e){this.x+=t.x*e,this.y+=t.y*e},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},t.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},t.prototype.distanceSquare=function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(t){if(t){var e=this.x,n=this.y;return this.x=t[0]*e+t[2]*n+t[4],this.y=t[1]*e+t[3]*n+t[5],this}},t.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},t.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},t.set=function(t,e,n){t.x=e,t.y=n},t.copy=function(t,e){t.x=e.x,t.y=e.y},t.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.lenSquare=function(t){return t.x*t.x+t.y*t.y},t.dot=function(t,e){return t.x*e.x+t.y*e.y},t.add=function(t,e,n){t.x=e.x+n.x,t.y=e.y+n.y},t.sub=function(t,e,n){t.x=e.x-n.x,t.y=e.y-n.y},t.scale=function(t,e,n){t.x=e.x*n,t.y=e.y*n},t.scaleAndAdd=function(t,e,n,i){t.x=e.x+n.x*i,t.y=e.y+n.y*i},t.lerp=function(t,e,n,i){var r=1-i;t.x=r*e.x+i*n.x,t.y=r*e.y+i*n.y},t}(),U_=Math.min,V_=Math.max,H_=new B_,W_=new B_,j_=new B_,q_=new B_,G_=new B_,Y_=new B_,$_=function(){function t(t,e,n,i){n<0&&(t+=n,n=-n),i<0&&(e+=i,i=-i),this.x=t,this.y=e,this.width=n,this.height=i}return t.prototype.union=function(t){var e=U_(t.x,this.x),n=U_(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=V_(t.x+t.width,this.x+this.width)-e:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=V_(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=e,this.y=n},t.prototype.applyTransform=function(e){t.applyTransform(this,this,e)},t.prototype.calculateTransform=function(t){var e=this,n=t.width/e.width,i=t.height/e.height,r=[1,0,0,1,0,0];return C_(r,r,[-e.x,-e.y]),I_(r,r,[n,i]),C_(r,r,[t.x,t.y]),r},t.prototype.intersect=function(e,n){if(!e)return!1;e instanceof t||(e=t.create(e));var i=this,r=i.x,o=i.x+i.width,s=i.y,a=i.y+i.height,l=e.x,u=e.x+e.width,c=e.y,h=e.y+e.height,d=!(o<l||u<r||a<c||h<s);if(n){var p=1/0,f=0,g=Math.abs(o-l),m=Math.abs(u-r),y=Math.abs(a-c),v=Math.abs(h-s),_=Math.min(g,m),w=Math.min(y,v);o<l||u<r?_>f&&(f=_,g<m?B_.set(Y_,-g,0):B_.set(Y_,m,0)):_<p&&(p=_,g<m?B_.set(G_,g,0):B_.set(G_,-m,0)),a<c||h<s?w>f&&(f=w,y<v?B_.set(Y_,0,-y):B_.set(Y_,0,v)):_<p&&(p=_,y<v?B_.set(G_,0,y):B_.set(G_,0,-v))}return n&&B_.copy(n,d?G_:Y_),d},t.prototype.contain=function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(e){t.copy(this,e)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return 0===this.width||0===this.height},t.create=function(e){return new t(e.x,e.y,e.width,e.height)},t.copy=function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},t.applyTransform=function(e,n,i){if(i){if(i[1]<1e-5&&i[1]>-1e-5&&i[2]<1e-5&&i[2]>-1e-5){var r=i[0],o=i[3],s=i[4],a=i[5];return e.x=n.x*r+s,e.y=n.y*o+a,e.width=n.width*r,e.height=n.height*o,e.width<0&&(e.x+=e.width,e.width=-e.width),void(e.height<0&&(e.y+=e.height,e.height=-e.height))}H_.x=j_.x=n.x,H_.y=q_.y=n.y,W_.x=q_.x=n.x+n.width,W_.y=j_.y=n.y+n.height,H_.transform(i),q_.transform(i),W_.transform(i),j_.transform(i),e.x=U_(H_.x,W_.x,j_.x,q_.x),e.y=U_(H_.y,W_.y,j_.y,q_.y);var l=V_(H_.x,W_.x,j_.x,q_.x),u=V_(H_.y,W_.y,j_.y,q_.y);e.width=l-e.x,e.height=u-e.y}else e!==n&&t.copy(e,n)},t}(),X_={};var K_={measureText:function(t,e){return P_||(P_=Bm().getContext("2d")),A_!==e&&(A_=P_.font=e||"12px sans-serif"),P_.measureText(t)}};function Z_(t,e){var n=X_[e=e||"12px sans-serif"];n||(n=X_[e]=new Cv(500));var i=n.get(t);return null==i&&(i=K_.measureText(t,e).width,n.put(t,i)),i}function J_(t,e,n,i){var r=Z_(t,e),o=nw(e),s=tw(0,r,n),a=ew(0,o,i);return new $_(s,a,r,o)}function Q_(t,e,n,i){var r=((t||"")+"").split("\n");if(1===r.length)return J_(r[0],e,n,i);for(var o=new $_(0,0,0,0),s=0;s<r.length;s++){var a=J_(r[s],e,n,i);0===s?o.copy(a):o.union(a)}return o}function tw(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function ew(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function nw(t){return Z_("",t)}function iw(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function rw(t,e,n){var i=e.position||"inside",r=null!=e.distance?e.distance:5,o=n.height,s=n.width,a=o/2,l=n.x,u=n.y,c="left",h="top";if(i instanceof Array)l+=iw(i[0],n.width),u+=iw(i[1],n.height),c=null,h=null;else switch(i){case"left":l-=r,u+=a,c="right",h="middle";break;case"right":l+=r+s,u+=a,h="middle";break;case"top":l+=s/2,u-=r,c="center",h="bottom";break;case"bottom":l+=s/2,u+=o+r,c="center";break;case"inside":l+=s/2,u+=a,c="center",h="middle";break;case"insideLeft":l+=r,u+=a,h="middle";break;case"insideRight":l+=s-r,u+=a,c="right",h="middle";break;case"insideTop":l+=s/2,u+=r,c="center";break;case"insideBottom":l+=s/2,u+=o-r,c="center",h="bottom";break;case"insideTopLeft":l+=r,u+=r;break;case"insideTopRight":l+=s-r,u+=r,c="right";break;case"insideBottomLeft":l+=r,u+=o-r,h="bottom";break;case"insideBottomRight":l+=s-r,u+=o-r,c="right",h="bottom"}return(t=t||{}).x=l,t.y=u,t.align=c,t.verticalAlign=h,t}var ow=["x","y","scaleX","scaleY","originX","originY","rotation","ignore"],sw={x:!0,y:!0,scaleX:!0,scaleY:!0,originX:!0,originY:!0,rotation:!0,ignore:!1},aw={},lw=new $_(0,0,0,0),uw=function(){function t(t){this.id=Om(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return t.prototype._init=function(t){this.attr(t)},t.prototype.drift=function(t,e,n){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=e,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(t){var e=this._textContent;if(e&&(!e.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,r=e.innerTransformable,o=void 0,s=void 0,a=!1;r.parent=i?this:null;var l=!1;if(r.copyTransform(e),null!=n.position){var u=lw;n.layoutRect?u.copy(n.layoutRect):u.copy(this.getBoundingRect()),i||u.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(aw,n,u):rw(aw,n,u),r.x=aw.x,r.y=aw.y,o=aw.align,s=aw.verticalAlign;var c=n.origin;if(c&&null!=n.rotation){var h=void 0,d=void 0;"center"===c?(h=.5*u.width,d=.5*u.height):(h=iw(c[0],u.width),d=iw(c[1],u.height)),l=!0,r.originX=-r.x+h+(i?0:u.x),r.originY=-r.y+d+(i?0:u.y)}}null!=n.rotation&&(r.rotation=n.rotation);var p=n.offset;p&&(r.x+=p[0],r.y+=p[1],l||(r.originX=-p[0],r.originY=-p[1]));var f=null==n.inside?"string"==typeof n.position&&n.position.indexOf("inside")>=0:n.inside,g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,y=void 0,v=void 0;f&&this.canBeInsideText()?(m=n.insideFill,y=n.insideStroke,null!=m&&"auto"!==m||(m=this.getInsideTextFill()),null!=y&&"auto"!==y||(y=this.getInsideTextStroke(m),v=!0)):(m=n.outsideFill,y=n.outsideStroke,null!=m&&"auto"!==m||(m=this.getOutsideFill()),null!=y&&"auto"!==y||(y=this.getOutsideStroke(m),v=!0)),(m=m||"#000")===g.fill&&y===g.stroke&&v===g.autoStroke&&o===g.align&&s===g.verticalAlign||(a=!0,g.fill=m,g.stroke=y,g.autoStroke=v,g.align=o,g.verticalAlign=s,e.setDefaultTextStyle(g)),e.__dirty|=1,a&&e.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(t){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?"#ccc":"#333"},t.prototype.getOutsideStroke=function(t){var e=this.__zr&&this.__zr.getBackgroundColor(),n="string"==typeof e&&Lv(e);n||(n=[255,255,255,1]);for(var i=n[3],r=this.__zr.isDarkMode(),o=0;o<3;o++)n[o]=n[o]*i+(r?0:255)*(1-i);return n[3]=1,zv(n,"rgba")},t.prototype.traverse=function(t,e){},t.prototype.attrKV=function(t,e){"textConfig"===t?this.setTextConfig(e):"textContent"===t?this.setTextContent(e):"clipPath"===t?this.setClipPath(e):"extra"===t?(this.extra=this.extra||{},Fm(this.extra,e)):this[t]=e},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(ey(t))for(var n=Ym(t),i=0;i<n.length;i++){var r=n[i];this.attrKV(r,t[r])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var e=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],r=i.__fromStateTransition;if(!r||"__zr_normal__"===r){var o=i.targetName,s=o?e[o]:e;i.saveFinalToTarget(s)}}},t.prototype._innerSaveToNormal=function(t){var e=this._normalState;e||(e=this._normalState={}),t.textConfig&&!e.textConfig&&(e.textConfig=this.textConfig),this._savePrimaryToNormal(t,e,ow)},t.prototype._savePrimaryToNormal=function(t,e,n){for(var i=0;i<n.length;i++){var r=n[i];null==t[r]||r in e||(e[r]=this[r])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(t){return this.states[t]},t.prototype.ensureState=function(t){var e=this.states;return e[t]||(e[t]={}),e[t]},t.prototype.clearStates=function(t){this.useState("__zr_normal__",!1,t)},t.prototype.useState=function(t,e,n,i){var r="__zr_normal__"===t;if(this.hasState()||!r){var o=this.currentStates,s=this.stateTransition;if(!(Um(o,t)>=0)||!e&&1!==o.length){var a;if(this.stateProxy&&!r&&(a=this.stateProxy(t)),a||(a=this.states&&this.states[t]),a||r){r||this.saveCurrentToNormalState(a);var l=!!(a&&a.hoverLayer||i);l&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,a,this._normalState,e,!n&&!this.__inHover&&s&&s.duration>0,s);var u=this._textContent,c=this._textGuide;return u&&u.useState(t,e,n,l),c&&c.useState(t,e,n,l),r?(this.currentStates=[],this._normalState={}):e?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!l&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2),a}Rm("State "+t+" not exists.")}}},t.prototype.useStates=function(t,e,n){if(t.length){var i=[],r=this.currentStates,o=t.length,s=o===r.length;if(s)for(var a=0;a<o;a++)if(t[a]!==r[a]){s=!1;break}if(s)return;for(a=0;a<o;a++){var l=t[a],u=void 0;this.stateProxy&&(u=this.stateProxy(l,t)),u||(u=this.states[l]),u&&i.push(u)}var c=i[o-1],h=!!(c&&c.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!e&&!this.__inHover&&p&&p.duration>0,p);var f=this._textContent,g=this._textGuide;f&&f.useStates(t,e,h),g&&g.useStates(t,e,h),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2)}else this.clearStates()},t.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var e=this.animators[t];e.targetName&&e.changeTarget(this[e.targetName])}},t.prototype.removeState=function(t){var e=Um(this.currentStates,t);if(e>=0){var n=this.currentStates.slice();n.splice(e,1),this.useStates(n)}},t.prototype.replaceState=function(t,e,n){var i=this.currentStates.slice(),r=Um(i,t),o=Um(i,e)>=0;r>=0?o?i.splice(r,1):i[r]=e:n&&!o&&i.push(e),this.useStates(i)},t.prototype.toggleState=function(t,e){e?this.useState(t,!0):this.removeState(t)},t.prototype._mergeStates=function(t){for(var e,n={},i=0;i<t.length;i++){var r=t[i];Fm(n,r),r.textConfig&&Fm(e=e||{},r.textConfig)}return e&&(n.textConfig=e),n},t.prototype._applyStateObj=function(t,e,n,i,r,o){var s=!(e&&i);e&&e.textConfig?(this.textConfig=Fm({},i?this.textConfig:n.textConfig),Fm(this.textConfig,e.textConfig)):s&&n.textConfig&&(this.textConfig=n.textConfig);for(var a={},l=!1,u=0;u<ow.length;u++){var c=ow[u],h=r&&sw[c];e&&null!=e[c]?h?(l=!0,a[c]=e[c]):this[c]=e[c]:s&&null!=n[c]&&(h?(l=!0,a[c]=n[c]):this[c]=n[c])}if(!r)for(u=0;u<this.animators.length;u++){var d=this.animators[u],p=d.targetName;d.__changeFinalValue(p?(e||n)[p]:e||n)}l&&this._transitionState(t,a,o)},t.prototype._attachComponent=function(t){if(t.__zr&&!t.__hostTarget)throw new Error("Text element has been added to zrender.");if(t===this)throw new Error("Recursive component attachment.");var e=this.__zr;e&&t.addSelfToZr(e),t.__zr=e,t.__hostTarget=this},t.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},t.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(t){var e=this._textContent;if(e!==t){if(e&&e!==t&&this.removeTextContent(),t.__zr&&!t.__hostTarget)throw new Error("Text element has been added to zrender.");t.innerTransformable=new z_,this._attachComponent(t),this._textContent=t,this.markRedraw()}},t.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),Fm(this.textConfig,t),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=1;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var e=this._textContent,n=this._textGuide;e&&(e.__inHover=t),n&&(n.__inHover=t)},t.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},t.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},t.prototype.animate=function(t,e){var n=t?this[t]:this;if(n){var i=new e_(n,e);return this.addAnimator(i,t),i}Rm('Property "'+t+'" is not existed in element '+this.id)},t.prototype.addAnimator=function(t,e){var n=this.__zr,i=this;t.during((function(){i.updateDuringAnimation(e)})).done((function(){var e=i.animators,n=Um(e,t);n>=0&&e.splice(n,1)})),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},t.prototype.updateDuringAnimation=function(t){this.markRedraw()},t.prototype.stopAnimation=function(t,e){for(var n=this.animators,i=n.length,r=[],o=0;o<i;o++){var s=n[o];t&&t!==s.scope?r.push(s):s.stop(e)}return this.animators=r,this},t.prototype.animateTo=function(t,e,n){cw(this,t,e,n)},t.prototype.animateFrom=function(t,e,n){cw(this,t,e,n,!0)},t.prototype._transitionState=function(t,e,n,i){for(var r=cw(this,e,n,i),o=0;o<r.length;o++)r[o].__fromStateTransition=t},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var e=t.prototype;e.type="element",e.name="",e.ignore=!1,e.silent=!1,e.isGroup=!1,e.draggable=!1,e.dragging=!1,e.ignoreClip=!1,e.__inHover=!1,e.__dirty=1;var n={};function i(t,e,i){n[t+e+i]||(console.warn("DEPRECATED: '"+t+"' has been deprecated. use '"+e+"', '"+i+"' instead"),n[t+e+i]=!0)}function r(t,n,r,o){function s(t,e){Object.defineProperty(e,0,{get:function(){return t[r]},set:function(e){t[r]=e}}),Object.defineProperty(e,1,{get:function(){return t[o]},set:function(e){t[o]=e}})}Object.defineProperty(e,t,{get:function(){(i(t,r,o),this[n])||s(this,this[n]=[]);return this[n]},set:function(e){i(t,r,o),this[r]=e[0],this[o]=e[1],this[n]=e,s(this,e)}})}Object.defineProperty&&(!wm.browser.ie||wm.browser.version>8)&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),t}();function cw(t,e,n,i,r){var o=[];pw(t,"",t,e,n=n||{},i,o,r);var s=o.length,a=!1,l=n.done,u=n.aborted,c=function(){a=!0,--s<=0&&(a?l&&l():u&&u())},h=function(){--s<=0&&(a?l&&l():u&&u())};s||l&&l(),o.length>0&&n.during&&o[0].during((function(t,e){n.during(e)}));for(var d=0;d<o.length;d++){var p=o[d];c&&p.done(c),h&&p.aborted(h),p.start(n.easing,n.force)}return o}function hw(t,e,n){for(var i=0;i<n;i++)t[i]=e[i]}function dw(t,e,n){if(Hm(e[n]))if(Hm(t[n])||(t[n]=[]),iy(e[n])){var i=e[n].length;t[n].length!==i&&(t[n]=new e[n].constructor(i),hw(t[n],e[n],i))}else{var r=e[n],o=t[n],s=r.length;if(Hm(r[0]))for(var a=r[0].length,l=0;l<s;l++)o[l]?hw(o[l],r[l],a):o[l]=Array.prototype.slice.call(r[l]);else hw(o,r,s);o.length=r.length}else t[n]=e[n]}function pw(t,e,n,i,r,o,s,a){for(var l=[],u=[],c=Ym(i),h=r.duration,d=r.delay,p=r.additive,f=r.setToFinal,g=!ey(o),m=0;m<c.length;m++){if(null!=n[T=c[m]]&&null!=i[T]&&(g||o[T]))if(ey(i[T])&&!Hm(i[T])){if(e){a||(n[T]=i[T],t.updateDuringAnimation(e));continue}pw(t,T,n[T],i[T],r,o&&o[T],s,a)}else l.push(T),u.push(T);else a||(n[T]=i[T],t.updateDuringAnimation(e),u.push(T))}var y=l.length;if(y>0||r.force&&!s.length){for(var v=t.animators,_=[],w=0;w<v.length;w++)v[w].targetName===e&&_.push(v[w]);if(!p&&_.length)for(w=0;w<_.length;w++){if(_[w].stopTracks(u)){var b=Um(v,_[w]);v.splice(b,1)}}var x=void 0,S=void 0,C=void 0;if(a){S={},f&&(x={});for(w=0;w<y;w++){S[T=l[w]]=n[T],f?x[T]=i[T]:n[T]=i[T]}}else if(f){C={};for(w=0;w<y;w++){var T;C[T=l[w]]=Xv(n[T]),dw(n,i,T)}}var I=new e_(n,!1,p?_:null);I.targetName=e,r.scope&&(I.scope=r.scope),f&&x&&I.whenWithKeys(0,x,l),C&&I.whenWithKeys(0,C,l),I.whenWithKeys(null==h?500:h,a?S:i,l).delay(d||0),t.addAnimator(I,e),s.push(I)}}Vm(uw,Ly),Vm(uw,z_);var fw=uw,gw=function(t){function e(e){var n=t.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(e),n}return wy(e,t),e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){if(t&&(t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),t.__hostTarget))throw"This elemenet has been used as an attachment";return this},e.prototype.addBefore=function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,i=n.indexOf(e);i>=0&&(n.splice(i,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,e){var n=Um(this._children,t);return n>=0&&this.replaceAt(e,n),this},e.prototype.replaceAt=function(t,e){var n=this._children,i=n[e];if(t&&t!==this&&t.parent!==this&&t!==i){n[e]=t,i.parent=null;var r=this.__zr;r&&i.removeSelfFromZr(r),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__zr;e&&e!==t.__zr&&t.addSelfToZr(e),e&&e.refresh()},e.prototype.remove=function(t){var e=this.__zr,n=this._children,i=Um(n,t);return i<0||(n.splice(i,1),t.parent=null,e&&t.removeSelfFromZr(e),e&&e.refresh()),this},e.prototype.removeAll=function(){for(var t=this._children,e=this.__zr,n=0;n<t.length;n++){var i=t[n];e&&i.removeSelfFromZr(e),i.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,e){for(var n=this._children,i=0;i<n.length;i++){var r=n[i];t.call(e,r,i)}return this},e.prototype.traverse=function(t,e){for(var n=0;n<this._children.length;n++){var i=this._children[n],r=t.call(e,i);i.isGroup&&!r&&i.traverse(t,e)}return this},e.prototype.addSelfToZr=function(e){t.prototype.addSelfToZr.call(this,e);for(var n=0;n<this._children.length;n++){this._children[n].addSelfToZr(e)}},e.prototype.removeSelfFromZr=function(e){t.prototype.removeSelfFromZr.call(this,e);for(var n=0;n<this._children.length;n++){this._children[n].removeSelfFromZr(e)}},e.prototype.getBoundingRect=function(t){for(var e=new $_(0,0,0,0),n=t||this._children,i=[],r=null,o=0;o<n.length;o++){var s=n[o];if(!s.ignore&&!s.invisible){var a=s.getBoundingRect(),l=s.getLocalTransform(i);l?($_.applyTransform(e,a,l),(r=r||e.clone()).union(e)):(r=r||a.clone()).union(a)}}return r||e},e}(fw);gw.prototype.type="group";var mw=gw,yw=!wm.canvasSupported,vw={},_w={};
/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var ww=function(){function t(t,e,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=e,this.id=t;var r=new yv,o=n.renderer||"canvas";if(yw)throw new Error("IE8 support has been dropped since 5.0");if(vw[o]||(o=Ym(vw)[0]),!vw[o])throw new Error("Renderer '"+o+"' is not imported. Please import it first.");n.useDirtyRect=null!=n.useDirtyRect&&n.useDirtyRect;var s=new vw[o](e,r,n,t);this.storage=r,this.painter=s;var a=wm.node||wm.worker?null:new __(s.getViewportRoot(),s.root);this.handler=new av(r,s,a,s.root),this.animation=new n_({stage:{update:function(){return i._flush(!0)}}}),this.animation.start()}return t.prototype.add=function(t){t&&(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},t.prototype.remove=function(t){t&&(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this.refresh()},t.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=function(t){if(!t)return!1;if("string"==typeof t)return Bv(t,1)<.4;if(t.colorStops){for(var e=t.colorStops,n=0,i=e.length,r=0;r<i;r++)n+=Bv(e[r].color,1);return(n/=i)<.4}return!1}(t)},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(t){this._darkMode=t},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},t.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},t.prototype.flush=function(){this._flush(!1)},t.prototype._flush=function(t){var e,n=(new Date).getTime();this._needsRefresh&&(e=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately());var i=(new Date).getTime();e?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},t.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},t.prototype.addHover=function(t){},t.prototype.removeHover=function(t){},t.prototype.clearHover=function(){},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover()},t.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},t.prototype.clearAnimation=function(){this.animation.clear()},t.prototype.getWidth=function(){return this.painter.getWidth()},t.prototype.getHeight=function(){return this.painter.getHeight()},t.prototype.pathToImage=function(t,e){if(this.painter.pathToImage)return this.painter.pathToImage(t,e)},t.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},t.prototype.findHover=function(t,e){return this.handler.findHover(t,e)},t.prototype.on=function(t,e,n){return this.handler.on(t,e,n),this},t.prototype.off=function(t,e){this.handler.off(t,e)},t.prototype.trigger=function(t,e){this.handler.trigger(t,e)},t.prototype.clear=function(){for(var t=this.storage.getRoots(),e=0;e<t.length;e++)t[e]instanceof mw&&t[e].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},t.prototype.dispose=function(){var t;this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,t=this.id,delete _w[t]},t}();function bw(t,e){var n=new ww(Om(),t,e);return _w[n.id]=n,n}function xw(t,e,n,i){var r=e[0],o=e[1],s=n[0],a=n[1],l=o-r,u=a-s;if(0===l)return 0===u?s:(s+a)/2;if(i)if(l>0){if(t<=r)return s;if(t>=o)return a}else{if(t>=r)return s;if(t<=o)return a}else{if(t===r)return s;if(t===o)return a}return(t-r)/l*u+s}function Sw(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return"string"==typeof t?(n=t,n.replace(/^\s+|\s+$/g,"")).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t;var n}function Cw(t){if(t=+t,isNaN(t))return 0;if(t>1e-14)for(var e=1,n=0;n<15;n++,e*=10)if(Math.round(t*e)/e===t)return n;return function(t){var e=t.toString().toLowerCase(),n=e.indexOf("e"),i=n>0?+e.slice(n+1):0,r=n>0?n:e.length,o=e.indexOf("."),s=o<0?0:r-1-o;return Math.max(0,s-i)}(t)}function Tw(t,e){var n,i,r,o=Math.max(Cw(t),Cw(e)),s=t+e;return o>20?s:(n=s,null==(i=o)&&(i=10),i=Math.min(Math.max(0,i),20),n=(+n).toFixed(i),r?n:+n)}function Iw(t){var e=2*Math.PI;return(t%e+e)%e}function kw(t){return t>-1e-4&&t<1e-4}var Mw=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Dw(t){if(t instanceof Date)return t;if("string"==typeof t){var e=Mw.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(n-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}return null==t?new Date(NaN):new Date(Math.round(t))}function Pw(t){var e=parseFloat(t);return e==t&&(0!==e||"string"!=typeof t||t.indexOf("x")<=0)?e:NaN}function Aw(){return Math.round(9*Math.random())}function Ew(t,e){return 0===e?t:Ew(e,t%e)}function Ow(t,e){return null==t?e:null==e?t:t*e/Ew(t,e)}function Rw(t){throw new Error(t)}function Nw(t){return t instanceof Array?t:null==t?[]:[t]}function Lw(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var i=0,r=n.length;i<r;i++){var o=n[i];!t.emphasis[e].hasOwnProperty(o)&&t[e].hasOwnProperty(o)&&(t.emphasis[e][o]=t[e][o])}}}var Fw=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function zw(t){return!ey(t)||Km(t)||t instanceof Date?t:t.value}function Bw(t){return ey(t)&&!(t instanceof Array)}function Uw(t,e,n){var i="normalMerge"===n,r="replaceMerge"===n,o="replaceAll"===n;t=t||[],e=(e||[]).slice();var s=gy();Wm(e,(function(t,n){ey(t)||(e[n]=null)}));var a,l,u=function(t,e,n){var i=[];if("replaceAll"===n)return i;for(var r=0;r<t.length;r++){var o=t[r];o&&null!=o.id&&e.set(o.id,r),i.push({existing:"replaceMerge"===n||qw(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return i}(t,s,n);return(i||r)&&function(t,e,n,i){Wm(i,(function(r,o){if(r&&null!=r.id){var s=Hw(r.id),a=n.get(s);if(null!=a){var l=t[a];cy(!l.newOption,'Duplicated option on id "'+s+'".'),l.newOption=r,l.existing=e[a],i[o]=null}}}))}(u,t,s,e),i&&function(t,e){Wm(e,(function(n,i){if(n&&null!=n.name)for(var r=0;r<t.length;r++){var o=t[r].existing;if(!t[r].newOption&&o&&(null==o.id||null==n.id)&&!qw(n)&&!qw(o)&&Vw("name",o,n))return t[r].newOption=n,void(e[i]=null)}}))}(u,e),i||r?function(t,e,n){Wm(e,(function(e){if(e){for(var i,r=0;(i=t[r])&&(i.newOption||qw(i.existing)||i.existing&&null!=e.id&&!Vw("id",e,i.existing));)r++;i?(i.newOption=e,i.brandNew=n):t.push({newOption:e,brandNew:n,existing:null,keyInfo:null}),r++}}))}(u,e,r):o&&function(t,e){Wm(e,(function(e){t.push({newOption:e,brandNew:!0,existing:null,keyInfo:null})}))}(u,e),a=u,l=gy(),Wm(a,(function(t){var e=t.existing;e&&l.set(e.id,t)})),Wm(a,(function(t){var e=t.newOption;cy(!e||null==e.id||!l.get(e.id)||l.get(e.id)===t,"id duplicates: "+(e&&e.id)),e&&null!=e.id&&l.set(e.id,t),!t.keyInfo&&(t.keyInfo={})})),Wm(a,(function(t,e){var n=t.existing,i=t.newOption,r=t.keyInfo;if(ey(i)){if(r.name=null!=i.name?Hw(i.name):n?n.name:"series\0"+e,n)r.id=Hw(n.id);else if(null!=i.id)r.id=Hw(i.id);else{var o=0;do{r.id="\0"+r.name+"\0"+o++}while(l.get(r.id))}l.set(r.id,t)}})),u}function Vw(t,e,n){var i=Ww(e[t],null),r=Ww(n[t],null);return null!=i&&null!=r&&i===r}function Hw(t){return Ww(t,"")}function Ww(t,e){if(null==t)return e;var n=typeof t;return"string"===n?t:"number"===n||Qm(t)?t+"":e}function jw(t){var e=t.name;return!(!e||!e.indexOf("series\0"))}function qw(t){return t&&null!=t.id&&0===Hw(t.id).indexOf("\0_ec_\0")}function Gw(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?Km(e.dataIndex)?jm(e.dataIndex,(function(e){return t.indexOfRawIndex(e)})):t.indexOfRawIndex(e.dataIndex):null!=e.name?Km(e.name)?jm(e.name,(function(e){return t.indexOfName(e)})):t.indexOfName(e.name):void 0}function Yw(){var t="__ec_inner_"+$w++;return function(e){return e[t]||(e[t]={})}}var $w=Aw();function Xw(t,e,n){var i=Kw(e,n),r=i.mainTypeSpecified,o=i.queryOptionMap,s=i.others,a=n?n.defaultMainType:null;return!r&&a&&o.set(a,{}),o.each((function(e,i){var r=Jw(t,i,e,{useDefault:a===i,enableAll:!n||null==n.enableAll||n.enableAll,enableNone:!n||null==n.enableNone||n.enableNone});s[i+"Models"]=r.models,s[i+"Model"]=r.models[0]})),s}function Kw(t,e){var n;if(Jm(t)){var i={};i[t+"Index"]=0,n=i}else n=t;var r=gy(),o={},s=!1;return Wm(n,(function(t,n){if("dataIndex"!==n&&"dataIndexInside"!==n){var i=n.match(/^(\w+)(Index|Id|Name)$/)||[],a=i[1],l=(i[2]||"").toLowerCase();if(a&&l&&!(e&&e.includeMainTypes&&Um(e.includeMainTypes,a)<0))s=s||!!a,(r.get(a)||r.set(a,{}))[l]=t}else o[n]=t})),{mainTypeSpecified:s,queryOptionMap:r,others:o}}var Zw={useDefault:!0,enableAll:!1,enableNone:!1};function Jw(t,e,n,i){i=i||Zw;var r=n.index,o=n.id,s=n.name,a={models:null,specified:null!=r||null!=o||null!=s};if(!a.specified){var l=void 0;return a.models=i.useDefault&&(l=t.getComponent(e))?[l]:[],a}return"none"===r||!1===r?(cy(i.enableNone,'`"none"` or `false` is not a valid value on index option.'),a.models=[],a):("all"===r&&(cy(i.enableAll,'`"all"` is not a valid value on index option.'),r=o=s=null),a.models=t.queryComponents({mainType:e,index:r,id:o,name:s}),a)}function Qw(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}var tb="___EC__COMPONENT__CONTAINER___";function eb(t){var e={main:"",sub:""};if(t){var n=t.split(".");e.main=n[0]||"",e.sub=n[1]||""}return e}function nb(t,e){t.$constructor=t,t.extend=function(t){var e=this;function n(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];if(t.$constructor)t.$constructor.apply(this,arguments);else{if(ib(e)){var o=my(n.prototype,new(e.bind.apply(e,ym([void 0],i))));return o}e.apply(this,arguments)}}return n.___EC__EXTENDED_CLASS___=!0,Fm(n.prototype,t),n.extend=this.extend,n.superCall=sb,n.superApply=ab,function(t,e){var n=t.prototype;function i(){}for(var r in i.prototype=e.prototype,t.prototype=new i,n)n.hasOwnProperty(r)&&(t.prototype[r]=n[r]);t.prototype.constructor=t,t.superClass=e}(n,this),n.superClass=e,n}}function ib(t){return"function"==typeof t&&/^class\s/.test(Function.prototype.toString.call(t))}function rb(t,e){t.extend=e.extend}var ob=Math.round(10*Math.random());function sb(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return this.superClass.prototype[e].apply(t,n)}function ab(t,e,n){return this.superClass.prototype[e].apply(t,n)}function lb(t){var e={};t.registerClass=function(t){var n,i=t.type||t.prototype.type;if(i){cy(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n=i),'componentType "'+n+'" illegal'),t.prototype.type=i;var r=eb(i);if(r.sub){if(r.sub!==tb){(function(t){var n=e[t.main];n&&n[tb]||((n=e[t.main]={})[tb]=!0);return n}(r))[r.sub]=t}}else e[r.main]=t}return t},t.getClass=function(t,n,i){var r=e[t];if(r&&r[tb]&&(r=n?r[n]:null),i&&!r)throw new Error(n?"Component "+t+"."+(n||"")+" is used but not imported.":t+".type should be specified.");return r},t.getClassesByMainType=function(t){var n=eb(t),i=[],r=e[n.main];return r&&r[tb]?Wm(r,(function(t,e){e!==tb&&i.push(t)})):i.push(r),i},t.hasClass=function(t){var n=eb(t);return!!e[n.main]},t.getAllClassMainTypes=function(){var t=[];return Wm(e,(function(e,n){t.push(n)})),t},t.hasSubTypes=function(t){var n=eb(t),i=e[n.main];return i&&i[tb]}}function ub(t,e){for(var n=0;n<t.length;n++)t[n][1]||(t[n][1]=t[n][0]);return e=e||!1,function(n,i,r){for(var o={},s=0;s<t.length;s++){var a=t[s][1];if(!(i&&Um(i,a)>=0||r&&Um(r,a)<0)){var l=n.getShallow(a,e);null!=l&&(o[t[s][0]]=l)}}return o}}var cb=ub([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),hb=function(){function t(){}return t.prototype.getAreaStyle=function(t,e){return cb(this,t,e)},t}(),db=new Cv(50);function pb(t){if("string"==typeof t){var e=db.get(t);return e&&e.image}return t}function fb(t,e,n,i,r){if(t){if("string"==typeof t){if(e&&e.__zrImageSrc===t||!n)return e;var o=db.get(t),s={hostEl:n,cb:i,cbPayload:r};return o?!mb(e=o.image)&&o.pending.push(s):((e=new Image).onload=e.onerror=gb,db.put(t,e.__cachedImgObj={image:e,pending:[s]}),e.src=e.__zrImageSrc=t),e}return t}return e}function gb(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],i=n.cb;i&&i(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function mb(t){return t&&t.width&&t.height}var yb=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function vb(t,e,n,i,r){if(!e)return"";var o=(t+"").split("\n");r=_b(e,n,i,r);for(var s=0,a=o.length;s<a;s++)o[s]=wb(o[s],r);return o.join("\n")}function _b(t,e,n,i){var r=Fm({},i=i||{});r.font=e,n=sy(n,"..."),r.maxIterations=sy(i.maxIterations,2);var o=r.minChar=sy(i.minChar,0);r.cnCharWidth=Z_("",e);var s=r.ascCharWidth=Z_("a",e);r.placeholder=sy(i.placeholder,"");for(var a=t=Math.max(0,t-1),l=0;l<o&&a>=s;l++)a-=s;var u=Z_(n,e);return u>a&&(n="",u=0),a=t-u,r.ellipsis=n,r.ellipsisWidth=u,r.contentWidth=a,r.containerWidth=t,r}function wb(t,e){var n=e.containerWidth,i=e.font,r=e.contentWidth;if(!n)return"";var o=Z_(t,i);if(o<=n)return t;for(var s=0;;s++){if(o<=r||s>=e.maxIterations){t+=e.ellipsis;break}var a=0===s?bb(t,r,e.ascCharWidth,e.cnCharWidth):o>0?Math.floor(t.length*r/o):0;o=Z_(t=t.substr(0,a),i)}return""===t&&(t=e.placeholder),t}function bb(t,e,n,i){for(var r=0,o=0,s=t.length;o<s&&r<e;o++){var a=t.charCodeAt(o);r+=0<=a&&a<=127?n:i}return o}var xb=function(){},Sb=function(t){this.tokens=[],t&&(this.tokens=t)},Cb=function(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function Tb(t,e,n,i,r){var o,s,a=""===e,l=r&&n.rich[r]||{},u=t.lines,c=l.font||n.font,h=!1;if(i){var d=l.padding,p=d?d[1]+d[3]:0;if(null!=l.width&&"auto"!==l.width){var f=iw(l.width,i.width)+p;u.length>0&&f+i.accumWidth>i.width&&(o=e.split("\n"),h=!0),i.accumWidth=f}else{var g=Mb(e,c,i.width,i.breakAll,i.accumWidth);i.accumWidth=g.accumWidth+p,s=g.linesWidths,o=g.lines}}else o=e.split("\n");for(var m=0;m<o.length;m++){var y=o[m],v=new xb;if(v.styleName=r,v.text=y,v.isLineHolder=!y&&!a,"number"==typeof l.width?v.width=l.width:v.width=s?s[m]:Z_(y,c),m||h)u.push(new Sb([v]));else{var _=(u[u.length-1]||(u[0]=new Sb)).tokens,w=_.length;1===w&&_[0].isLineHolder?_[0]=v:(y||!w||a)&&_.push(v)}}}var Ib=qm(",&?/;] ".split(""),(function(t,e){return t[e]=!0,t}),{});function kb(t){return!function(t){var e=t.charCodeAt(0);return e>=33&&e<=255}(t)||!!Ib[t]}function Mb(t,e,n,i,r){for(var o=[],s=[],a="",l="",u=0,c=0,h=0;h<t.length;h++){var d=t.charAt(h);if("\n"!==d){var p=Z_(d,e),f=!i&&!kb(d);(o.length?c+p>n:r+c+p>n)?c?(a||l)&&(f?(a||(a=l,l="",c=u=0),o.push(a),s.push(c-u),l+=d,a="",c=u+=p):(l&&(a+=l,c+=u,l="",u=0),o.push(a),s.push(c),a=d,c=p)):f?(o.push(l),s.push(u),l=d,u=p):(o.push(d),s.push(p)):(c+=p,f?(l+=d,u+=p):(l&&(a+=l,l="",u=0),a+=d))}else l&&(a+=l,c+=u),o.push(a),s.push(c),a="",l="",u=0,c=0}return o.length||a||(a=t,l="",u=0),l&&(a+=l),a&&(o.push(a),s.push(c)),1===o.length&&(c+=r),{accumWidth:c,lines:o,linesWidths:s}}var Db="__zr_style_"+Math.round(10*Math.random()),Pb={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},Ab={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Pb[Db]=!0;var Eb=["z","z2","invisible"],Ob=["invisible"],Rb=function(t){function e(e){return t.call(this,e)||this}var n;return wy(e,t),e.prototype._init=function(e){for(var n=Ym(e),i=0;i<n.length;i++){var r=n[i];"style"===r?this.useStyle(e[r]):t.prototype.attrKV.call(this,r,e[r])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,e,n,i){var r=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&function(t,e,n){Nb.copy(t.getBoundingRect()),t.transform&&Nb.applyTransform(t.transform);return Lb.width=e,Lb.height=n,!Nb.intersect(Lb)}(this,t,e)||r&&!r[0]&&!r[3])return!1;if(n&&this.__clipPaths)for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1;if(i&&this.parent)for(var s=this.parent;s;){if(s.ignore)return!1;s=s.parent}return!0},e.prototype.contain=function(t,e){return this.rectContain(t,e)},e.prototype.traverse=function(t,e){t.call(e,this)},e.prototype.rectContain=function(t,e){var n=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(n[0],n[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var e=this.transform,n=this.getBoundingRect(),i=this.style,r=i.shadowBlur||0,o=i.shadowOffsetX||0,s=i.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new $_(0,0,0,0)),e?$_.applyTransform(t,n,e):t.copy(n),(r||o||s)&&(t.width+=2*r+Math.abs(o),t.height+=2*r+Math.abs(s),t.x=Math.min(t.x,t.x+o-r),t.y=Math.min(t.y,t.y+s-r));var a=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-a),t.y=Math.floor(t.y-a),t.width=Math.ceil(t.width+1+2*a),t.height=Math.ceil(t.height+1+2*a))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new $_(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(e,n){"style"!==e?t.prototype.attrKV.call(this,e,n):this.style?this.setStyle(n):this.useStyle(n)},e.prototype.setStyle=function(t,e){return"string"==typeof t?this.style[t]=e:Fm(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=2,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(2&this.__dirty)},e.prototype.styleUpdated=function(){this.__dirty&=-3},e.prototype.createStyle=function(t){return my(Pb,t)},e.prototype.useStyle=function(t){t[Db]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[Db]},e.prototype._innerSaveToNormal=function(e){t.prototype._innerSaveToNormal.call(this,e);var n=this._normalState;e.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(e,n,Eb)},e.prototype._applyStateObj=function(e,n,i,r,o,s){t.prototype._applyStateObj.call(this,e,n,i,r,o,s);var a,l=!(n&&r);if(n&&n.style?o?r?a=n.style:(a=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(a,n.style)):(a=this._mergeStyle(this.createStyle(),r?this.style:i.style),this._mergeStyle(a,n.style)):l&&(a=i.style),a)if(o){var u=this.style;if(this.style=this.createStyle(l?{}:u),l)for(var c=Ym(u),h=0;h<c.length;h++){(p=c[h])in a&&(a[p]=a[p],this.style[p]=u[p])}var d=Ym(a);for(h=0;h<d.length;h++){var p=d[h];this.style[p]=this.style[p]}this._transitionState(e,{style:a},s,this.getAnimationStyleProps())}else this.useStyle(a);var f=this.__inHover?Ob:Eb;for(h=0;h<f.length;h++){p=f[h];n&&null!=n[p]?this[p]=n[p]:l&&null!=i[p]&&(this[p]=i[p])}},e.prototype._mergeStates=function(e){for(var n,i=t.prototype._mergeStates.call(this,e),r=0;r<e.length;r++){var o=e[r];o.style&&(n=n||{},this._mergeStyle(n,o.style))}return n&&(i.style=n),i},e.prototype._mergeStyle=function(t,e){return Fm(t,e),t},e.prototype.getAnimationStyleProps=function(){return Ab},e.initDefaultProps=((n=e.prototype).type="displayable",n.invisible=!1,n.z=0,n.z2=0,n.zlevel=0,n.culling=!1,n.cursor="pointer",n.rectHover=!1,n.incremental=!1,n._rect=null,n.dirtyRectTolerance=0,void(n.__dirty=3)),e}(fw),Nb=new $_(0,0,0,0),Lb=new $_(0,0,0,0);var Fb=Rb,zb=Math.pow,Bb=Math.sqrt,Ub=Bb(3),Vb=1/3,Hb=by(),Wb=by(),jb=by();function qb(t){return t>-1e-8&&t<1e-8}function Gb(t){return t>1e-8||t<-1e-8}function Yb(t,e,n,i,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*i+3*o*n)}function $b(t,e,n,i,r){var o=1-r;return 3*(((e-t)*o+2*(n-e)*r)*o+(i-n)*r*r)}function Xb(t,e,n,i,r){var o=6*n-12*e+6*t,s=9*e+3*i-3*t-9*n,a=3*e-3*t,l=0;if(qb(s)){if(Gb(o))(c=-a/o)>=0&&c<=1&&(r[l++]=c)}else{var u=o*o-4*s*a;if(qb(u))r[0]=-o/(2*s);else if(u>0){var c,h=Bb(u),d=(-o-h)/(2*s);(c=(-o+h)/(2*s))>=0&&c<=1&&(r[l++]=c),d>=0&&d<=1&&(r[l++]=d)}}return l}function Kb(t,e,n,i,r,o){var s=(e-t)*r+t,a=(n-e)*r+e,l=(i-n)*r+n,u=(a-s)*r+s,c=(l-a)*r+a,h=(c-u)*r+u;o[0]=t,o[1]=s,o[2]=u,o[3]=h,o[4]=h,o[5]=c,o[6]=l,o[7]=i}function Zb(t,e,n,i,r,o,s,a,l){for(var u=t,c=e,h=0,d=1/l,p=1;p<=l;p++){var f=p*d,g=Yb(t,n,r,s,f),m=Yb(e,i,o,a,f),y=g-u,v=m-c;h+=Math.sqrt(y*y+v*v),u=g,c=m}return h}function Jb(t,e,n,i){var r=1-i;return r*(r*t+2*i*e)+i*i*n}function Qb(t,e,n,i){return 2*((1-i)*(e-t)+i*(n-e))}function tx(t,e,n){var i=t+n-2*e;return 0===i?.5:(t-e)/i}function ex(t,e,n,i,r){var o=(e-t)*i+t,s=(n-e)*i+e,a=(s-o)*i+o;r[0]=t,r[1]=o,r[2]=a,r[3]=a,r[4]=s,r[5]=n}function nx(t,e,n,i,r,o,s){for(var a=t,l=e,u=0,c=1/s,h=1;h<=s;h++){var d=h*c,p=Jb(t,n,r,d),f=Jb(e,i,o,d),g=p-a,m=f-l;u+=Math.sqrt(g*g+m*m),a=p,l=f}return u}var ix=Math.min,rx=Math.max,ox=Math.sin,sx=Math.cos,ax=2*Math.PI,lx=by(),ux=by(),cx=by();function hx(t,e,n){if(0!==t.length){for(var i=t[0],r=i[0],o=i[0],s=i[1],a=i[1],l=1;l<t.length;l++)i=t[l],r=ix(r,i[0]),o=rx(o,i[0]),s=ix(s,i[1]),a=rx(a,i[1]);e[0]=r,e[1]=s,n[0]=o,n[1]=a}}function dx(t,e,n,i,r,o){r[0]=ix(t,n),r[1]=ix(e,i),o[0]=rx(t,n),o[1]=rx(e,i)}var px=[],fx=[];function gx(t,e,n,i,r,o,s,a,l,u){var c=Xb,h=Yb,d=c(t,n,r,s,px);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var p=0;p<d;p++){var f=h(t,n,r,s,px[p]);l[0]=ix(f,l[0]),u[0]=rx(f,u[0])}d=c(e,i,o,a,fx);for(p=0;p<d;p++){var g=h(e,i,o,a,fx[p]);l[1]=ix(g,l[1]),u[1]=rx(g,u[1])}l[0]=ix(t,l[0]),u[0]=rx(t,u[0]),l[0]=ix(s,l[0]),u[0]=rx(s,u[0]),l[1]=ix(e,l[1]),u[1]=rx(e,u[1]),l[1]=ix(a,l[1]),u[1]=rx(a,u[1])}function mx(t,e,n,i,r,o,s,a){var l=tx,u=Jb,c=rx(ix(l(t,n,r),1),0),h=rx(ix(l(e,i,o),1),0),d=u(t,n,r,c),p=u(e,i,o,h);s[0]=ix(t,r,d),s[1]=ix(e,o,p),a[0]=rx(t,r,d),a[1]=rx(e,o,p)}function yx(t,e,n,i,r,o,s,a,l){var u=Ey,c=Oy,h=Math.abs(r-o);if(h%ax<1e-4&&h>1e-4)return a[0]=t-n,a[1]=e-i,l[0]=t+n,void(l[1]=e+i);if(lx[0]=sx(r)*n+t,lx[1]=ox(r)*i+e,ux[0]=sx(o)*n+t,ux[1]=ox(o)*i+e,u(a,lx,ux),c(l,lx,ux),(r%=ax)<0&&(r+=ax),(o%=ax)<0&&(o+=ax),r>o&&!s?o+=ax:r<o&&s&&(r+=ax),s){var d=o;o=r,r=d}for(var p=0;p<o;p+=Math.PI/2)p>r&&(cx[0]=sx(p)*n+t,cx[1]=ox(p)*i+e,u(a,cx,a),c(l,cx,l))}var vx={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},_x=[],bx=[],xx=[],Sx=[],Cx=[],Tx=[],Ix=Math.min,kx=Math.max,Mx=Math.cos,Dx=Math.sin,Px=Math.sqrt,Ax=Math.abs,Ex=Math.PI,Ox=2*Ex,Rx="undefined"!=typeof Float32Array,Nx=[];function Lx(t){return Math.round(t/Ex*1e8)/1e8%2*Ex}function Fx(t,e){var n=Lx(t[0]);n<0&&(n+=Ox);var i=n-t[0],r=t[1];r+=i,!e&&r-n>=Ox?r=n+Ox:e&&n-r>=Ox?r=n-Ox:!e&&n>r?r=n+(Ox-Lx(n-r)):e&&n<r&&(r=n-(Ox-Lx(r-n))),t[0]=n,t[1]=r}var zx=function(){function t(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}var e;return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(t,e,n){(n=n||0)>0&&(this._ux=Ax(n/b_/t)||0,this._uy=Ax(n/b_/e)||0)},t.prototype.setDPR=function(t){this.dpr=t},t.prototype.setContext=function(t){this._ctx=t},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(t,e){return this._drawPendingPt(),this.addData(vx.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},t.prototype.lineTo=function(t,e){var n=Ax(t-this._xi),i=Ax(e-this._yi),r=n>this._ux||i>this._uy;if(this.addData(vx.L,t,e),this._ctx&&r&&(this._needsDash?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),r)this._xi=t,this._yi=e,this._pendingPtDist=0;else{var o=n*n+i*i;o>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=e,this._pendingPtDist=o)}return this},t.prototype.bezierCurveTo=function(t,e,n,i,r,o){return this._drawPendingPt(),this.addData(vx.C,t,e,n,i,r,o),this._ctx&&(this._needsDash?this._dashedBezierTo(t,e,n,i,r,o):this._ctx.bezierCurveTo(t,e,n,i,r,o)),this._xi=r,this._yi=o,this},t.prototype.quadraticCurveTo=function(t,e,n,i){return this._drawPendingPt(),this.addData(vx.Q,t,e,n,i),this._ctx&&(this._needsDash?this._dashedQuadraticTo(t,e,n,i):this._ctx.quadraticCurveTo(t,e,n,i)),this._xi=n,this._yi=i,this},t.prototype.arc=function(t,e,n,i,r,o){this._drawPendingPt(),Nx[0]=i,Nx[1]=r,Fx(Nx,o),i=Nx[0];var s=(r=Nx[1])-i;return this.addData(vx.A,t,e,n,n,i,s,0,o?0:1),this._ctx&&this._ctx.arc(t,e,n,i,r,o),this._xi=Mx(r)*n+t,this._yi=Dx(r)*n+e,this},t.prototype.arcTo=function(t,e,n,i,r){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,e,n,i,r),this},t.prototype.rect=function(t,e,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,e,n,i),this.addData(vx.R,t,e,n,i),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(vx.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},t.prototype.fill=function(t){t&&t.fill(),this.toStatic()},t.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},t.prototype.setLineDash=function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e,this._needsDash=!0}else this._lineDash=null,this._needsDash=!1;return this},t.prototype.setLineDashOffset=function(t){return this._dashOffset=t,this},t.prototype.len=function(){return this._len},t.prototype.setData=function(t){var e=t.length;this.data&&this.data.length===e||!Rx||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},t.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,i=this._len,r=0;r<e;r++)n+=t[r].len();Rx&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(r=0;r<e;r++)for(var o=t[r].data,s=0;s<o.length;s++)this.data[i++]=o[s];this._len=i},t.prototype.addData=function(t,e,n,i,r,o,s,a,l){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var c=0;c<arguments.length;c++)u[this._len++]=arguments[c]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},t.prototype._dashedLineTo=function(t,e){var n,i,r=this._dashSum,o=this._lineDash,s=this._ctx,a=this._dashOffset,l=this._xi,u=this._yi,c=t-l,h=e-u,d=Px(c*c+h*h),p=l,f=u,g=o.length;for(a<0&&(a=r+a),p-=(a%=r)*(c/=d),f-=a*(h/=d);c>0&&p<=t||c<0&&p>=t||0===c&&(h>0&&f<=e||h<0&&f>=e);)p+=c*(n=o[i=this._dashIdx]),f+=h*n,this._dashIdx=(i+1)%g,c>0&&p<l||c<0&&p>l||h>0&&f<u||h<0&&f>u||s[i%2?"moveTo":"lineTo"](c>=0?Ix(p,t):kx(p,t),h>=0?Ix(f,e):kx(f,e));c=p-t,h=f-e,this._dashOffset=-Px(c*c+h*h)},t.prototype._dashedBezierTo=function(t,e,n,i,r,o){var s,a,l,u,c,h=this._ctx,d=this._dashSum,p=this._dashOffset,f=this._lineDash,g=this._xi,m=this._yi,y=0,v=this._dashIdx,_=f.length,w=0;for(p<0&&(p=d+p),p%=d,s=0;s<1;s+=.1)a=Yb(g,t,n,r,s+.1)-Yb(g,t,n,r,s),l=Yb(m,e,i,o,s+.1)-Yb(m,e,i,o,s),y+=Px(a*a+l*l);for(;v<_&&!((w+=f[v])>p);v++);for(s=(w-p)/y;s<=1;)u=Yb(g,t,n,r,s),c=Yb(m,e,i,o,s),v%2?h.moveTo(u,c):h.lineTo(u,c),s+=f[v]/y,v=(v+1)%_;v%2!=0&&h.lineTo(r,o),a=r-u,l=o-c,this._dashOffset=-Px(a*a+l*l)},t.prototype._dashedQuadraticTo=function(t,e,n,i){var r=n,o=i;n=(n+2*t)/3,i=(i+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,n,i,r,o)},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,Rx&&this._len>11&&(this.data=new Float32Array(t)))}},t.prototype.getBoundingRect=function(){xx[0]=xx[1]=Cx[0]=Cx[1]=Number.MAX_VALUE,Sx[0]=Sx[1]=Tx[0]=Tx[1]=-Number.MAX_VALUE;var t,e=this.data,n=0,i=0,r=0,o=0;for(t=0;t<this._len;){var s=e[t++],a=1===t;switch(a&&(r=n=e[t],o=i=e[t+1]),s){case vx.M:n=r=e[t++],i=o=e[t++],Cx[0]=r,Cx[1]=o,Tx[0]=r,Tx[1]=o;break;case vx.L:dx(n,i,e[t],e[t+1],Cx,Tx),n=e[t++],i=e[t++];break;case vx.C:gx(n,i,e[t++],e[t++],e[t++],e[t++],e[t],e[t+1],Cx,Tx),n=e[t++],i=e[t++];break;case vx.Q:mx(n,i,e[t++],e[t++],e[t],e[t+1],Cx,Tx),n=e[t++],i=e[t++];break;case vx.A:var l=e[t++],u=e[t++],c=e[t++],h=e[t++],d=e[t++],p=e[t++]+d;t+=1;var f=!e[t++];a&&(r=Mx(d)*c+l,o=Dx(d)*h+u),yx(l,u,c,h,d,p,f,Cx,Tx),n=Mx(p)*c+l,i=Dx(p)*h+u;break;case vx.R:dx(r=n=e[t++],o=i=e[t++],r+e[t++],o+e[t++],Cx,Tx);break;case vx.Z:n=r,i=o}Ey(xx,xx,Cx),Oy(Sx,Sx,Tx)}return 0===t&&(xx[0]=xx[1]=Sx[0]=Sx[1]=0),new $_(xx[0],xx[1],Sx[0]-xx[0],Sx[1]-xx[1])},t.prototype._calculateLength=function(){var t=this.data,e=this._len,n=this._ux,i=this._uy,r=0,o=0,s=0,a=0;this._pathSegLen||(this._pathSegLen=[]);for(var l=this._pathSegLen,u=0,c=0,h=0;h<e;){var d=t[h++],p=1===h;p&&(s=r=t[h],a=o=t[h+1]);var f=-1;switch(d){case vx.M:r=s=t[h++],o=a=t[h++];break;case vx.L:var g=t[h++],m=(_=t[h++])-o;(Ax(D=g-r)>n||Ax(m)>i||h===e-1)&&(f=Math.sqrt(D*D+m*m),r=g,o=_);break;case vx.C:var y=t[h++],v=t[h++],_=(g=t[h++],t[h++]),w=t[h++],b=t[h++];f=Zb(r,o,y,v,g,_,w,b,10),r=w,o=b;break;case vx.Q:f=nx(r,o,y=t[h++],v=t[h++],g=t[h++],_=t[h++],10),r=g,o=_;break;case vx.A:var x=t[h++],S=t[h++],C=t[h++],T=t[h++],I=t[h++],k=t[h++],M=k+I;h+=1,t[h++],p&&(s=Mx(I)*C+x,a=Dx(I)*T+S),f=kx(C,T)*Ix(Ox,Math.abs(k)),r=Mx(M)*C+x,o=Dx(M)*T+S;break;case vx.R:s=r=t[h++],a=o=t[h++],f=2*t[h++]+2*t[h++];break;case vx.Z:var D=s-r;m=a-o;f=Math.sqrt(D*D+m*m),r=s,o=a}f>=0&&(l[c++]=f,u+=f)}return this._pathLen=u,u},t.prototype.rebuildPath=function(t,e){var n,i,r,o,s,a,l,u,c,h,d=this.data,p=this._ux,f=this._uy,g=this._len,m=e<1,y=0,v=0,_=0;if(!m||(this._pathSegLen||this._calculateLength(),l=this._pathSegLen,u=e*this._pathLen))t:for(var w=0;w<g;){var b=d[w++],x=1===w;switch(x&&(n=r=d[w],i=o=d[w+1]),b!==vx.L&&_>0&&(t.lineTo(c,h),_=0),b){case vx.M:n=r=d[w++],i=o=d[w++],t.moveTo(r,o);break;case vx.L:s=d[w++],a=d[w++];var S=Ax(s-r),C=Ax(a-o);if(S>p||C>f){if(m){if(y+($=l[v++])>u){var T=(u-y)/$;t.lineTo(r*(1-T)+s*T,o*(1-T)+a*T);break t}y+=$}t.lineTo(s,a),r=s,o=a,_=0}else{var I=S*S+C*C;I>_&&(c=s,h=a,_=I)}break;case vx.C:var k=d[w++],M=d[w++],D=d[w++],P=d[w++],A=d[w++],E=d[w++];if(m){if(y+($=l[v++])>u){Kb(r,k,D,A,T=(u-y)/$,_x),Kb(o,M,P,E,T,bx),t.bezierCurveTo(_x[1],bx[1],_x[2],bx[2],_x[3],bx[3]);break t}y+=$}t.bezierCurveTo(k,M,D,P,A,E),r=A,o=E;break;case vx.Q:k=d[w++],M=d[w++],D=d[w++],P=d[w++];if(m){if(y+($=l[v++])>u){ex(r,k,D,T=(u-y)/$,_x),ex(o,M,P,T,bx),t.quadraticCurveTo(_x[1],bx[1],_x[2],bx[2]);break t}y+=$}t.quadraticCurveTo(k,M,D,P),r=D,o=P;break;case vx.A:var O=d[w++],R=d[w++],N=d[w++],L=d[w++],F=d[w++],z=d[w++],B=d[w++],U=!d[w++],V=N>L?N:L,H=Ax(N-L)>.001,W=F+z,j=!1;if(m)y+($=l[v++])>u&&(W=F+z*(u-y)/$,j=!0),y+=$;if(H&&t.ellipse?t.ellipse(O,R,N,L,B,F,W,U):t.arc(O,R,V,F,W,U),j)break t;x&&(n=Mx(F)*N+O,i=Dx(F)*L+R),r=Mx(W)*N+O,o=Dx(W)*L+R;break;case vx.R:n=r=d[w],i=o=d[w+1],s=d[w++],a=d[w++];var q=d[w++],G=d[w++];if(m){if(y+($=l[v++])>u){var Y=u-y;t.moveTo(s,a),t.lineTo(s+Ix(Y,q),a),(Y-=q)>0&&t.lineTo(s+q,a+Ix(Y,G)),(Y-=G)>0&&t.lineTo(s+kx(q-Y,0),a+G),(Y-=q)>0&&t.lineTo(s,a+kx(G-Y,0));break t}y+=$}t.rect(s,a,q,G);break;case vx.Z:if(m){var $;if(y+($=l[v++])>u){T=(u-y)/$;t.lineTo(r*(1-T)+n*T,o*(1-T)+i*T);break t}y+=$}t.closePath(),r=n,o=i}}},t.prototype.clone=function(){var e=new t,n=this.data;return e.data=n.slice?n.slice():Array.prototype.slice.call(n),e._len=this._len,e},t.CMD=vx,t.initDefaultProps=((e=t.prototype)._saveData=!0,e._needsDash=!1,e._dashOffset=0,e._dashIdx=0,e._dashSum=0,e._ux=0,e._uy=0,e._pendingPtDist=0,void(e._version=0)),t}();function Bx(t,e,n,i,r,o,s){if(0===r)return!1;var a=r,l=0;if(s>e+a&&s>i+a||s<e-a&&s<i-a||o>t+a&&o>n+a||o<t-a&&o<n-a)return!1;if(t===n)return Math.abs(o-t)<=a/2;var u=(l=(e-i)/(t-n))*o-s+(t*i-n*e)/(t-n);return u*u/(l*l+1)<=a/2*a/2}function Ux(t,e,n,i,r,o,s,a,l,u,c){if(0===l)return!1;var h=l;return!(c>e+h&&c>i+h&&c>o+h&&c>a+h||c<e-h&&c<i-h&&c<o-h&&c<a-h||u>t+h&&u>n+h&&u>r+h&&u>s+h||u<t-h&&u<n-h&&u<r-h&&u<s-h)&&function(t,e,n,i,r,o,s,a,l,u,c){var h,d,p,f,g,m=.005,y=1/0;Hb[0]=l,Hb[1]=u;for(var v=0;v<1;v+=.05)Wb[0]=Yb(t,n,r,s,v),Wb[1]=Yb(e,i,o,a,v),(f=Dy(Hb,Wb))<y&&(h=v,y=f);y=1/0;for(var _=0;_<32&&!(m<1e-4);_++)d=h-m,p=h+m,Wb[0]=Yb(t,n,r,s,d),Wb[1]=Yb(e,i,o,a,d),f=Dy(Wb,Hb),d>=0&&f<y?(h=d,y=f):(jb[0]=Yb(t,n,r,s,p),jb[1]=Yb(e,i,o,a,p),g=Dy(jb,Hb),p<=1&&g<y?(h=p,y=g):m*=.5);return c&&(c[0]=Yb(t,n,r,s,h),c[1]=Yb(e,i,o,a,h)),Bb(y)}(t,e,n,i,r,o,s,a,u,c,null)<=h/2}function Vx(t,e,n,i,r,o,s,a,l){if(0===s)return!1;var u=s;return!(l>e+u&&l>i+u&&l>o+u||l<e-u&&l<i-u&&l<o-u||a>t+u&&a>n+u&&a>r+u||a<t-u&&a<n-u&&a<r-u)&&function(t,e,n,i,r,o,s,a,l){var u,c=.005,h=1/0;Hb[0]=s,Hb[1]=a;for(var d=0;d<1;d+=.05)Wb[0]=Jb(t,n,r,d),Wb[1]=Jb(e,i,o,d),(m=Dy(Hb,Wb))<h&&(u=d,h=m);h=1/0;for(var p=0;p<32&&!(c<1e-4);p++){var f=u-c,g=u+c;Wb[0]=Jb(t,n,r,f),Wb[1]=Jb(e,i,o,f);var m=Dy(Wb,Hb);if(f>=0&&m<h)u=f,h=m;else{jb[0]=Jb(t,n,r,g),jb[1]=Jb(e,i,o,g);var y=Dy(jb,Hb);g<=1&&y<h?(u=g,h=y):c*=.5}}return l&&(l[0]=Jb(t,n,r,u),l[1]=Jb(e,i,o,u)),Bb(h)}(t,e,n,i,r,o,a,l,null)<=u/2}var Hx=2*Math.PI;function Wx(t){return(t%=Hx)<0&&(t+=Hx),t}var jx=2*Math.PI;function qx(t,e,n,i,r,o,s,a,l){if(0===s)return!1;var u=s;a-=t,l-=e;var c=Math.sqrt(a*a+l*l);if(c-u>n||c+u<n)return!1;if(Math.abs(i-r)%jx<1e-4)return!0;if(o){var h=i;i=Wx(r),r=Wx(h)}else i=Wx(i),r=Wx(r);i>r&&(r+=jx);var d=Math.atan2(l,a);return d<0&&(d+=jx),d>=i&&d<=r||d+jx>=i&&d+jx<=r}function Gx(t,e,n,i,r,o){if(o>e&&o>i||o<e&&o<i)return 0;if(i===e)return 0;var s=(o-e)/(i-e),a=i<e?1:-1;1!==s&&0!==s||(a=i<e?.5:-.5);var l=s*(n-t)+t;return l===r?1/0:l>r?a:0}var Yx=zx.CMD,$x=2*Math.PI;var Xx=[-1,-1,-1],Kx=[-1,-1];function Zx(t,e,n,i,r,o,s,a,l,u){if(u>e&&u>i&&u>o&&u>a||u<e&&u<i&&u<o&&u<a)return 0;var c,h=function(t,e,n,i,r,o){var s=i+3*(e-n)-t,a=3*(n-2*e+t),l=3*(e-t),u=t-r,c=a*a-3*s*l,h=a*l-9*s*u,d=l*l-3*a*u,p=0;if(qb(c)&&qb(h))qb(a)?o[0]=0:(C=-l/a)>=0&&C<=1&&(o[p++]=C);else{var f=h*h-4*c*d;if(qb(f)){var g=h/c,m=-g/2;(C=-a/s+g)>=0&&C<=1&&(o[p++]=C),m>=0&&m<=1&&(o[p++]=m)}else if(f>0){var y=Bb(f),v=c*a+1.5*s*(-h+y),_=c*a+1.5*s*(-h-y);(C=(-a-((v=v<0?-zb(-v,Vb):zb(v,Vb))+(_=_<0?-zb(-_,Vb):zb(_,Vb))))/(3*s))>=0&&C<=1&&(o[p++]=C)}else{var w=(2*c*a-3*s*h)/(2*Bb(c*c*c)),b=Math.acos(w)/3,x=Bb(c),S=Math.cos(b),C=(-a-2*x*S)/(3*s),T=(m=(-a+x*(S+Ub*Math.sin(b)))/(3*s),(-a+x*(S-Ub*Math.sin(b)))/(3*s));C>=0&&C<=1&&(o[p++]=C),m>=0&&m<=1&&(o[p++]=m),T>=0&&T<=1&&(o[p++]=T)}}return p}(e,i,o,a,u,Xx);if(0===h)return 0;for(var d=0,p=-1,f=void 0,g=void 0,m=0;m<h;m++){var y=Xx[m],v=0===y||1===y?.5:1;Yb(t,n,r,s,y)<l||(p<0&&(p=Xb(e,i,o,a,Kx),Kx[1]<Kx[0]&&p>1&&(c=void 0,c=Kx[0],Kx[0]=Kx[1],Kx[1]=c),f=Yb(e,i,o,a,Kx[0]),p>1&&(g=Yb(e,i,o,a,Kx[1]))),2===p?y<Kx[0]?d+=f<e?v:-v:y<Kx[1]?d+=g<f?v:-v:d+=a<g?v:-v:y<Kx[0]?d+=f<e?v:-v:d+=a<f?v:-v)}return d}function Jx(t,e,n,i,r,o,s,a){if(a>e&&a>i&&a>o||a<e&&a<i&&a<o)return 0;var l=function(t,e,n,i,r){var o=t-2*e+n,s=2*(e-t),a=t-i,l=0;if(qb(o))Gb(s)&&(c=-a/s)>=0&&c<=1&&(r[l++]=c);else{var u=s*s-4*o*a;if(qb(u))(c=-s/(2*o))>=0&&c<=1&&(r[l++]=c);else if(u>0){var c,h=Bb(u),d=(-s-h)/(2*o);(c=(-s+h)/(2*o))>=0&&c<=1&&(r[l++]=c),d>=0&&d<=1&&(r[l++]=d)}}return l}(e,i,o,a,Xx);if(0===l)return 0;var u=tx(e,i,o);if(u>=0&&u<=1){for(var c=0,h=Jb(e,i,o,u),d=0;d<l;d++){var p=0===Xx[d]||1===Xx[d]?.5:1;Jb(t,n,r,Xx[d])<s||(Xx[d]<u?c+=h<e?p:-p:c+=o<h?p:-p)}return c}p=0===Xx[0]||1===Xx[0]?.5:1;return Jb(t,n,r,Xx[0])<s?0:o<e?p:-p}function Qx(t,e,n,i,r,o,s,a){if((a-=e)>n||a<-n)return 0;var l=Math.sqrt(n*n-a*a);Xx[0]=-l,Xx[1]=l;var u=Math.abs(i-r);if(u<1e-4)return 0;if(u>=$x-1e-4){i=0,r=$x;var c=o?1:-1;return s>=Xx[0]+t&&s<=Xx[1]+t?c:0}if(i>r){var h=i;i=r,r=h}i<0&&(i+=$x,r+=$x);for(var d=0,p=0;p<2;p++){var f=Xx[p];if(f+t>s){var g=Math.atan2(a,f);c=o?1:-1;g<0&&(g=$x+g),(g>=i&&g<=r||g+$x>=i&&g+$x<=r)&&(g>Math.PI/2&&g<1.5*Math.PI&&(c=-c),d+=c)}}return d}function tS(t,e,n,i,r){for(var o,s,a,l,u=t.data,c=t.len(),h=0,d=0,p=0,f=0,g=0,m=0;m<c;){var y=u[m++],v=1===m;switch(y===Yx.M&&m>1&&(n||(h+=Gx(d,p,f,g,i,r))),v&&(f=d=u[m],g=p=u[m+1]),y){case Yx.M:d=f=u[m++],p=g=u[m++];break;case Yx.L:if(n){if(Bx(d,p,u[m],u[m+1],e,i,r))return!0}else h+=Gx(d,p,u[m],u[m+1],i,r)||0;d=u[m++],p=u[m++];break;case Yx.C:if(n){if(Ux(d,p,u[m++],u[m++],u[m++],u[m++],u[m],u[m+1],e,i,r))return!0}else h+=Zx(d,p,u[m++],u[m++],u[m++],u[m++],u[m],u[m+1],i,r)||0;d=u[m++],p=u[m++];break;case Yx.Q:if(n){if(Vx(d,p,u[m++],u[m++],u[m],u[m+1],e,i,r))return!0}else h+=Jx(d,p,u[m++],u[m++],u[m],u[m+1],i,r)||0;d=u[m++],p=u[m++];break;case Yx.A:var _=u[m++],w=u[m++],b=u[m++],x=u[m++],S=u[m++],C=u[m++];m+=1;var T=!!(1-u[m++]);o=Math.cos(S)*b+_,s=Math.sin(S)*x+w,v?(f=o,g=s):h+=Gx(d,p,o,s,i,r);var I=(i-_)*x/b+_;if(n){if(qx(_,w,x,S,S+C,T,e,I,r))return!0}else h+=Qx(_,w,x,S,S+C,T,I,r);d=Math.cos(S+C)*b+_,p=Math.sin(S+C)*x+w;break;case Yx.R:if(f=d=u[m++],g=p=u[m++],o=f+u[m++],s=g+u[m++],n){if(Bx(f,g,o,g,e,i,r)||Bx(o,g,o,s,e,i,r)||Bx(o,s,f,s,e,i,r)||Bx(f,s,f,g,e,i,r))return!0}else h+=Gx(o,g,o,s,i,r),h+=Gx(f,s,f,g,i,r);break;case Yx.Z:if(n){if(Bx(d,p,f,g,e,i,r))return!0}else h+=Gx(d,p,f,g,i,r);d=f,p=g}}return n||(a=p,l=g,Math.abs(a-l)<1e-4)||(h+=Gx(d,p,f,g,i,r)||0),0!==h}var eS=zm({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Pb),nS={style:zm({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},Ab.style)},iS=["x","y","rotation","scaleX","scaleY","originX","originY","invisible","culling","z","z2","zlevel","parent"],rS=function(t){function e(e){return t.call(this,e)||this}var n;return wy(e,t),e.prototype.update=function(){var n=this;t.prototype.update.call(this);var i=this.style;if(i.decal){var r=this._decalEl=this._decalEl||new e;r.buildPath===e.prototype.buildPath&&(r.buildPath=function(t){n.buildPath(t,n.shape)}),r.silent=!0;var o=r.style;for(var s in i)o[s]!==i[s]&&(o[s]=i[s]);o.fill=i.fill?i.decal:null,o.decal=null,o.shadowColor=null,i.strokeFirst&&(o.stroke=null);for(var a=0;a<iS.length;++a)r[iS[a]]=this[iS[a]];r.__dirty|=1}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(e){var n=Ym(e);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var r=0;r<n.length;r++){var o=n[r],s=e[o];"style"===o?this.style?Fm(this.style,s):this.useStyle(s):"shape"===o?Fm(this.shape,s):t.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if("none"!==t){if(Jm(t)){var e=Bv(t,0);return e>.5?"#333":e>.2?"#eee":"#ccc"}if(t)return"#ccc"}return"#333"},e.prototype.getInsideTextStroke=function(t){var e=this.style.fill;if(Jm(e)){var n=this.__zr;if(!(!n||!n.isDarkMode())===Bv(t,0)<.4)return e}},e.prototype.buildPath=function(t,e,n){},e.prototype.pathUpdated=function(){this.__dirty&=-5},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new zx(!1)},e.prototype.hasStroke=function(){var t=this.style,e=t.stroke;return!(null==e||"none"===e||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style.fill;return null!=t&&"none"!==t},e.prototype.getBoundingRect=function(){var t=this._rect,e=this.style,n=!t;if(n){var i=!1;this.path||(i=!0,this.createPathProxy());var r=this.path;(i||4&this.__dirty)&&(r.beginPath(),this.buildPath(r,this.shape,!1),this.pathUpdated()),t=r.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||n){o.copy(t);var s=e.strokeNoScale?this.getLineScale():1,a=e.lineWidth;if(!this.hasFill()){var l=this.strokeContainThreshold;a=Math.max(a,null==l?4:l)}s>1e-10&&(o.width+=a/s,o.height+=a/s,o.x-=a/s/2,o.y-=a/s/2)}return o}return t},e.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect(),r=this.style;if(t=n[0],e=n[1],i.contain(t,e)){var o=this.path;if(this.hasStroke()){var s=r.lineWidth,a=r.strokeNoScale?this.getLineScale():1;if(a>1e-10&&(this.hasFill()||(s=Math.max(s,this.strokeContainThreshold)),function(t,e,n,i){return tS(t,e,!0,n,i)}(o,s/a,t,e)))return!0}if(this.hasFill())return function(t,e,n){return tS(t,0,!1,e,n)}(o,t,e)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=4,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():"shape"===t?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(e,n){"shape"===e?this.setShape(n):t.prototype.attrKV.call(this,e,n)},e.prototype.setShape=function(t,e){var n=this.shape;return n||(n=this.shape={}),"string"==typeof t?n[t]=e:Fm(n,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(4&this.__dirty)},e.prototype.createStyle=function(t){return my(eS,t)},e.prototype._innerSaveToNormal=function(e){t.prototype._innerSaveToNormal.call(this,e);var n=this._normalState;e.shape&&!n.shape&&(n.shape=Fm({},this.shape))},e.prototype._applyStateObj=function(e,n,i,r,o,s){t.prototype._applyStateObj.call(this,e,n,i,r,o,s);var a,l=!(n&&r);if(n&&n.shape?o?r?a=n.shape:(a=Fm({},i.shape),Fm(a,n.shape)):(a=Fm({},r?this.shape:i.shape),Fm(a,n.shape)):l&&(a=i.shape),a)if(o){this.shape=Fm({},this.shape);for(var u={},c=Ym(a),h=0;h<c.length;h++){var d=c[h];"object"==typeof a[d]?this.shape[d]=a[d]:u[d]=a[d]}this._transitionState(e,{shape:u},s)}else this.shape=a,this.dirtyShape()},e.prototype._mergeStates=function(e){for(var n,i=t.prototype._mergeStates.call(this,e),r=0;r<e.length;r++){var o=e[r];o.shape&&(n=n||{},this._mergeStyle(n,o.shape))}return n&&(i.shape=n),i},e.prototype.getAnimationStyleProps=function(){return nS},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var n=function(e){function n(n){var i=e.call(this,n)||this;return t.init&&t.init.call(i,n),i}return wy(n,e),n.prototype.getDefaultStyle=function(){return Nm(t.style)},n.prototype.getDefaultShape=function(){return Nm(t.shape)},n}(e);for(var i in t)"function"==typeof t[i]&&(n.prototype[i]=t[i]);return n},e.initDefaultProps=((n=e.prototype).type="path",n.strokeContainThreshold=5,n.segmentIgnoreThreshold=0,n.subPixelOptimize=!1,n.autoBatch=!1,void(n.__dirty=7)),e}(Fb),oS=zm({strokeFirst:!0,font:"12px sans-serif",x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},eS),sS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wy(e,t),e.prototype.hasStroke=function(){var t=this.style,e=t.stroke;return null!=e&&"none"!==e&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style.fill;return null!=t&&"none"!==t},e.prototype.createStyle=function(t){return my(oS,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var e=t.text;null!=e?e+="":e="";var n=Q_(e,t.font,t.textAlign,t.textBaseline);if(n.x+=t.x||0,n.y+=t.y||0,this.hasStroke()){var i=t.lineWidth;n.x-=i/2,n.y-=i/2,n.width+=i,n.height+=i}this._rect=n}return this._rect},e.initDefaultProps=void(e.prototype.dirtyRectTolerance=10),e}(Fb);sS.prototype.type="tspan";var aS=sS,lS=zm({x:0,y:0},Pb),uS={style:zm({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},Ab.style)};var cS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wy(e,t),e.prototype.createStyle=function(t){return my(lS,t)},e.prototype._getSize=function(t){var e=this.style,n=e[t];if(null!=n)return n;var i,r=(i=e.image)&&"string"!=typeof i&&i.width&&i.height?e.image:this.__image;if(!r)return 0;var o="width"===t?"height":"width",s=e[o];return null==s?r[t]:r[t]/r[o]*s},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return uS},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new $_(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(Fb);cS.prototype.type="image";var hS=cS;var dS=Math.round;function pS(t,e,n){if(e){var i=e.x1,r=e.x2,o=e.y1,s=e.y2;t.x1=i,t.x2=r,t.y1=o,t.y2=s;var a=n&&n.lineWidth;return a?(dS(2*i)===dS(2*r)&&(t.x1=t.x2=gS(i,a,!0)),dS(2*o)===dS(2*s)&&(t.y1=t.y2=gS(o,a,!0)),t):t}}function fS(t,e,n){if(e){var i=e.x,r=e.y,o=e.width,s=e.height;t.x=i,t.y=r,t.width=o,t.height=s;var a=n&&n.lineWidth;return a?(t.x=gS(i,a,!0),t.y=gS(r,a,!0),t.width=Math.max(gS(i+o,a,!1)-t.x,0===o?0:1),t.height=Math.max(gS(r+s,a,!1)-t.y,0===s?0:1),t):t}}function gS(t,e,n){if(!e)return t;var i=dS(2*t);return(i+dS(e))%2==0?i/2:(i+(n?1:-1))/2}var mS=function(){this.x=0,this.y=0,this.width=0,this.height=0},yS={},vS=function(t){function e(e){return t.call(this,e)||this}return wy(e,t),e.prototype.getDefaultShape=function(){return new mS},e.prototype.buildPath=function(t,e){var n,i,r,o;if(this.subPixelOptimize){var s=fS(yS,e,this.style);n=s.x,i=s.y,r=s.width,o=s.height,s.r=e.r,e=s}else n=e.x,i=e.y,r=e.width,o=e.height;e.r?function(t,e){var n,i,r,o,s,a=e.x,l=e.y,u=e.width,c=e.height,h=e.r;u<0&&(a+=u,u=-u),c<0&&(l+=c,c=-c),"number"==typeof h?n=i=r=o=h:h instanceof Array?1===h.length?n=i=r=o=h[0]:2===h.length?(n=r=h[0],i=o=h[1]):3===h.length?(n=h[0],i=o=h[1],r=h[2]):(n=h[0],i=h[1],r=h[2],o=h[3]):n=i=r=o=0,n+i>u&&(n*=u/(s=n+i),i*=u/s),r+o>u&&(r*=u/(s=r+o),o*=u/s),i+r>c&&(i*=c/(s=i+r),r*=c/s),n+o>c&&(n*=c/(s=n+o),o*=c/s),t.moveTo(a+n,l),t.lineTo(a+u-i,l),0!==i&&t.arc(a+u-i,l+i,i,-Math.PI/2,0),t.lineTo(a+u,l+c-r),0!==r&&t.arc(a+u-r,l+c-r,r,0,Math.PI/2),t.lineTo(a+o,l+c),0!==o&&t.arc(a+o,l+c-o,o,Math.PI/2,Math.PI),t.lineTo(a,l+n),0!==n&&t.arc(a+n,l+n,n,Math.PI,1.5*Math.PI)}(t,e):t.rect(n,i,r,o)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(rS);vS.prototype.type="rect";var _S=vS,wS={fill:"#000"},bS={style:zm({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},Ab.style)},xS=function(t){function e(e){var n=t.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=wS,n.attr(e),n}return wy(e,t),e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var e=0;e<this._children.length;e++){var n=this._children[e];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},e.prototype.updateTransform=function(){var e=this.innerTransformable;e?(e.updateTransform(),e.transform&&(this.transform=e.transform)):t.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(e){var n=this.innerTransformable;return n?n.getLocalTransform(e):t.prototype.getLocalTransform.call(this,e)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){var t;this._childCursor=0,TS(t=this.style),Wm(t.rich,TS),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(e){t.prototype.addSelfToZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].__zr=e},e.prototype.removeSelfFromZr=function(e){t.prototype.removeSelfFromZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new $_(0,0,0,0),e=this._children,n=[],i=null,r=0;r<e.length;r++){var o=e[r],s=o.getBoundingRect(),a=o.getLocalTransform(n);a?(t.copy(s),t.applyTransform(a),(i=i||t.clone()).union(t)):(i=i||s.clone()).union(s)}this._rect=i||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||wS},e.prototype.setTextContent=function(t){throw new Error("Can't attach text on another text")},e.prototype._mergeStyle=function(t,e){if(!e)return t;var n=e.rich,i=t.rich||n&&{};return Fm(t,e),n&&i?(this._mergeRich(i,n),t.rich=i):i&&(t.rich=i),t},e.prototype._mergeRich=function(t,e){for(var n=Ym(e),i=0;i<n.length;i++){var r=n[i];t[r]=t[r]||{},Fm(t[r],e[r])}},e.prototype.getAnimationStyleProps=function(){return bS},e.prototype._getOrCreateChild=function(t){var e=this._children[this._childCursor];return e&&e instanceof t||(e=new t),this._children[this._childCursor++]=e,e.__zr=this.__zr,e.parent=this,e},e.prototype._updatePlainTexts=function(){var t=this.style,e=t.font||"12px sans-serif",n=t.padding,i=function(t,e){null!=t&&(t+="");var n,i=e.overflow,r=e.padding,o=e.font,s="truncate"===i,a=nw(o),l=sy(e.lineHeight,a),u="truncate"===e.lineOverflow,c=e.width,h=(n=null!=c&&"break"===i||"breakAll"===i?t?Mb(t,e.font,c,"breakAll"===i,0).lines:[]:t?t.split("\n"):[]).length*l,d=sy(e.height,h);if(h>d&&u){var p=Math.floor(d/l);n=n.slice(0,p)}var f=d,g=c;if(r&&(f+=r[0]+r[2],null!=g&&(g+=r[1]+r[3])),t&&s&&null!=g)for(var m=_b(c,o,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),y=0;y<n.length;y++)n[y]=wb(n[y],m);if(null==c){var v=0;for(y=0;y<n.length;y++)v=Math.max(Z_(n[y],o),v);c=v}return{lines:n,height:d,outerHeight:f,lineHeight:l,calculatedLineHeight:a,contentHeight:h,width:c}}(DS(t),t),r=PS(t),o=!!t.backgroundColor,s=i.outerHeight,a=i.lines,l=i.lineHeight,u=this._defaultStyle,c=t.x||0,h=t.y||0,d=t.align||u.align||"left",p=t.verticalAlign||u.verticalAlign||"top",f=c,g=ew(h,i.contentHeight,p);if(r||n){var m=i.width;n&&(m+=n[1]+n[3]);var y=tw(c,m,d),v=ew(h,s,p);r&&this._renderBackground(t,t,y,v,m,s)}g+=l/2,n&&(f=MS(c,d,n),"top"===p?g+=n[0]:"bottom"===p&&(g-=n[2]));for(var _=0,w=!1,b=(kS("fill"in t?t.fill:(w=!0,u.fill))),x=(IS("stroke"in t?t.stroke:o||u.autoStroke&&!w?null:(_=2,u.stroke))),S=t.textShadowBlur>0,C=null!=t.width&&("truncate"===t.overflow||"break"===t.overflow||"breakAll"===t.overflow),T=i.calculatedLineHeight,I=0;I<a.length;I++){var k=this._getOrCreateChild(aS),M=k.createStyle();k.useStyle(M),M.text=a[I],M.x=f,M.y=g,d&&(M.textAlign=d),M.textBaseline="middle",M.opacity=t.opacity,M.strokeFirst=!0,S&&(M.shadowBlur=t.textShadowBlur||0,M.shadowColor=t.textShadowColor||"transparent",M.shadowOffsetX=t.textShadowOffsetX||0,M.shadowOffsetY=t.textShadowOffsetY||0),x&&(M.stroke=x,M.lineWidth=t.lineWidth||_,M.lineDash=t.lineDash,M.lineDashOffset=t.lineDashOffset||0),b&&(M.fill=b),M.font=e,g+=l,C&&k.setBoundingRect(new $_(tw(M.x,t.width,M.textAlign),ew(M.y,T,M.textBaseline),t.width,T))}},e.prototype._updateRichTexts=function(){var t=this.style,e=function(t,e){var n=new Cb;if(null!=t&&(t+=""),!t)return n;for(var i,r=e.width,o=e.height,s=e.overflow,a="break"!==s&&"breakAll"!==s||null==r?null:{width:r,accumWidth:0,breakAll:"breakAll"===s},l=yb.lastIndex=0;null!=(i=yb.exec(t));){var u=i.index;u>l&&Tb(n,t.substring(l,u),e,a),Tb(n,i[2],e,a,i[1]),l=yb.lastIndex}l<t.length&&Tb(n,t.substring(l,t.length),e,a);var c=[],h=0,d=0,p=e.padding,f="truncate"===s,g="truncate"===e.lineOverflow;function m(t,e,n){t.width=e,t.lineHeight=n,h+=n,d=Math.max(d,e)}t:for(var y=0;y<n.lines.length;y++){for(var v=n.lines[y],_=0,w=0,b=0;b<v.tokens.length;b++){var x=(E=v.tokens[b]).styleName&&e.rich[E.styleName]||{},S=E.textPadding=x.padding,C=S?S[1]+S[3]:0,T=E.font=x.font||e.font;E.contentHeight=nw(T);var I=sy(x.height,E.contentHeight);if(E.innerHeight=I,S&&(I+=S[0]+S[2]),E.height=I,E.lineHeight=ay(x.lineHeight,e.lineHeight,I),E.align=x&&x.align||e.align,E.verticalAlign=x&&x.verticalAlign||"middle",g&&null!=o&&h+E.lineHeight>o){b>0?(v.tokens=v.tokens.slice(0,b),m(v,w,_),n.lines=n.lines.slice(0,y+1)):n.lines=n.lines.slice(0,y);break t}var k=x.width,M=null==k||"auto"===k;if("string"==typeof k&&"%"===k.charAt(k.length-1))E.percentWidth=k,c.push(E),E.contentWidth=Z_(E.text,T);else{if(M){var D=x.backgroundColor,P=D&&D.image;P&&mb(P=pb(P))&&(E.width=Math.max(E.width,P.width*I/P.height))}var A=f&&null!=r?r-w:null;null!=A&&A<E.width?!M||A<C?(E.text="",E.width=E.contentWidth=0):(E.text=vb(E.text,A-C,T,e.ellipsis,{minChar:e.truncateMinChar}),E.width=E.contentWidth=Z_(E.text,T)):E.contentWidth=Z_(E.text,T)}E.width+=C,w+=E.width,x&&(_=Math.max(_,E.lineHeight))}m(v,w,_)}for(n.outerWidth=n.width=sy(r,d),n.outerHeight=n.height=sy(o,h),n.contentHeight=h,n.contentWidth=d,p&&(n.outerWidth+=p[1]+p[3],n.outerHeight+=p[0]+p[2]),y=0;y<c.length;y++){var E,O=(E=c[y]).percentWidth;E.width=parseInt(O,10)/100*n.width}return n}(DS(t),t),n=e.width,i=e.outerWidth,r=e.outerHeight,o=t.padding,s=t.x||0,a=t.y||0,l=this._defaultStyle,u=t.align||l.align,c=t.verticalAlign||l.verticalAlign,h=tw(s,i,u),d=ew(a,r,c),p=h,f=d;o&&(p+=o[3],f+=o[0]);var g=p+n;PS(t)&&this._renderBackground(t,t,h,d,i,r);for(var m=!!t.backgroundColor,y=0;y<e.lines.length;y++){for(var v=e.lines[y],_=v.tokens,w=_.length,b=v.lineHeight,x=v.width,S=0,C=p,T=g,I=w-1,k=void 0;S<w&&(!(k=_[S]).align||"left"===k.align);)this._placeToken(k,t,b,f,C,"left",m),x-=k.width,C+=k.width,S++;for(;I>=0&&"right"===(k=_[I]).align;)this._placeToken(k,t,b,f,T,"right",m),x-=k.width,T-=k.width,I--;for(C+=(n-(C-p)-(g-T)-x)/2;S<=I;)k=_[S],this._placeToken(k,t,b,f,C+k.width/2,"center",m),C+=k.width,S++;f+=b}},e.prototype._placeToken=function(t,e,n,i,r,o,s){var a=e.rich[t.styleName]||{};a.text=t.text;var l=t.verticalAlign,u=i+n/2;"top"===l?u=i+t.height/2:"bottom"===l&&(u=i+n-t.height/2),!t.isLineHolder&&PS(a)&&this._renderBackground(a,e,"right"===o?r-t.width:"center"===o?r-t.width/2:r,u-t.height/2,t.width,t.height);var c=!!a.backgroundColor,h=t.textPadding;h&&(r=MS(r,o,h),u-=t.height/2-h[0]-t.innerHeight/2);var d=this._getOrCreateChild(aS),p=d.createStyle();d.useStyle(p);var f=this._defaultStyle,g=!1,m=0,y=kS("fill"in a?a.fill:"fill"in e?e.fill:(g=!0,f.fill)),v=IS("stroke"in a?a.stroke:"stroke"in e?e.stroke:c||s||f.autoStroke&&!g?null:(m=2,f.stroke)),_=a.textShadowBlur>0||e.textShadowBlur>0;p.text=t.text,p.x=r,p.y=u,_&&(p.shadowBlur=a.textShadowBlur||e.textShadowBlur||0,p.shadowColor=a.textShadowColor||e.textShadowColor||"transparent",p.shadowOffsetX=a.textShadowOffsetX||e.textShadowOffsetX||0,p.shadowOffsetY=a.textShadowOffsetY||e.textShadowOffsetY||0),p.textAlign=o,p.textBaseline="middle",p.font=t.font||"12px sans-serif",p.opacity=ay(a.opacity,e.opacity,1),v&&(p.lineWidth=ay(a.lineWidth,e.lineWidth,m),p.lineDash=sy(a.lineDash,e.lineDash),p.lineDashOffset=e.lineDashOffset||0,p.stroke=v),y&&(p.fill=y);var w=t.contentWidth,b=t.contentHeight;d.setBoundingRect(new $_(tw(p.x,w,p.textAlign),ew(p.y,b,p.textBaseline),w,b))},e.prototype._renderBackground=function(t,e,n,i,r,o){var s,a,l,u=t.backgroundColor,c=t.borderWidth,h=t.borderColor,d=u&&u.image,p=u&&!d,f=t.borderRadius,g=this;if(p||t.lineHeight||c&&h){(s=this._getOrCreateChild(_S)).useStyle(s.createStyle()),s.style.fill=null;var m=s.shape;m.x=n,m.y=i,m.width=r,m.height=o,m.r=f,s.dirtyShape()}if(p)(l=s.style).fill=u||null,l.fillOpacity=sy(t.fillOpacity,1);else if(d){(a=this._getOrCreateChild(hS)).onload=function(){g.dirtyStyle()};var y=a.style;y.image=u.image,y.x=n,y.y=i,y.width=r,y.height=o}c&&h&&((l=s.style).lineWidth=c,l.stroke=h,l.strokeOpacity=sy(t.strokeOpacity,1),l.lineDash=t.borderDash,l.lineDashOffset=t.borderDashOffset||0,s.strokeContainThreshold=0,s.hasFill()&&s.hasStroke()&&(l.strokeFirst=!0,l.lineWidth*=2));var v=(s||a).style;v.shadowBlur=t.shadowBlur||0,v.shadowColor=t.shadowColor||"transparent",v.shadowOffsetX=t.shadowOffsetX||0,v.shadowOffsetY=t.shadowOffsetY||0,v.opacity=ay(t.opacity,e.opacity,1)},e.makeFont=function(t){var e="";if(t.fontSize||t.fontFamily||t.fontWeight){var n="";n="string"!=typeof t.fontSize||-1===t.fontSize.indexOf("px")&&-1===t.fontSize.indexOf("rem")&&-1===t.fontSize.indexOf("em")?isNaN(+t.fontSize)?"12px":t.fontSize+"px":t.fontSize,e=[t.fontStyle,t.fontWeight,n,t.fontFamily||"sans-serif"].join(" ")}return e&&hy(e)||t.textFont||t.font},e}(Fb),SS={left:!0,right:1,center:1},CS={top:1,bottom:1,middle:1};function TS(t){if(t){t.font=xS.makeFont(t);var e=t.align;"middle"===e&&(e="center"),t.align=null==e||SS[e]?e:"left";var n=t.verticalAlign;"center"===n&&(n="middle"),t.verticalAlign=null==n||CS[n]?n:"top",t.padding&&(t.padding=uy(t.padding))}}function IS(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function kS(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function MS(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}function DS(t){var e=t.text;return null!=e&&(e+=""),e}function PS(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}var AS=xS,ES=Yw(),OS=1,RS={},NS=Yw(),LS=["emphasis","blur","select"],FS=["normal","emphasis","blur","select"];function zS(t){return null!=t&&"none"!==t}var BS=new Cv(100);function US(t){if("string"!=typeof t)return t;var e=BS.get(t);return e||(e=function(t,e){var n=Lv(t);if(n){for(var i=0;i<3;i++)n[i]=e<0?n[i]*(1-e)|0:(255-n[i])*e+n[i]|0,n[i]>255?n[i]=255:n[i]<0&&(n[i]=0);return zv(n,4===n.length?"rgba":"rgb")}}(t,-.1),BS.put(t,e)),e}function VS(t,e,n){t.onHoverStateChange&&(t.hoverState||0)!==n&&t.onHoverStateChange(e),t.hoverState=n}function HS(t){VS(t,"emphasis",2)}function WS(t){2===t.hoverState&&VS(t,"normal",0)}function jS(t){VS(t,"blur",1)}function qS(t){1===t.hoverState&&VS(t,"normal",0)}function GS(t){t.selected=!0}function YS(t){t.selected=!1}function $S(t,e,n){e(t,n)}function XS(t,e,n){$S(t,e,n),t.isGroup&&t.traverse((function(t){$S(t,e,n)}))}function KS(t,e){var n=this.states[t];if(this.style){if("emphasis"===t)return function(t,e,n,i){var r=n&&Um(n,"select")>=0,o=!1;if(t instanceof rS){var s=NS(t),a=r&&s.selectFill||s.normalFill,l=r&&s.selectStroke||s.normalStroke;if(zS(a)||zS(l)){var u=(i=i||{}).style||{};"inherit"===u.fill?(o=!0,i=Fm({},i),(u=Fm({},u)).fill=a):!zS(u.fill)&&zS(a)?(o=!0,i=Fm({},i),(u=Fm({},u)).fill=US(a)):!zS(u.stroke)&&zS(l)&&(o||(i=Fm({},i),u=Fm({},u)),u.stroke=US(l)),i.style=u}}if(i&&null==i.z2){o||(i=Fm({},i));var c=t.z2EmphasisLift;i.z2=t.z2+(null!=c?c:10)}return i}(this,0,e,n);if("blur"===t)return function(t,e,n){var i=Um(t.currentStates,e)>=0,r=t.style.opacity,o=i?null:function(t,e,n,i){for(var r=t.style,o={},s=0;s<e.length;s++){var a=e[s],l=r[a];o[a]=null==l?i&&i[a]:l}for(s=0;s<t.animators.length;s++){var u=t.animators[s];u.__fromStateTransition&&u.__fromStateTransition.indexOf(n)<0&&"style"===u.targetName&&u.saveFinalToTarget(o,e)}return o}(t,["opacity"],e,{opacity:1}),s=(n=n||{}).style||{};return null==s.opacity&&(n=Fm({},n),s=Fm({opacity:i?r:.1*o.opacity},s),n.style=s),n}(this,t,n);if("select"===t)return function(t,e,n){if(n&&null==n.z2){n=Fm({},n);var i=t.z2SelectLift;n.z2=t.z2+(null!=i?i:9)}return n}(this,0,n)}return n}function ZS(t){t.stateProxy=KS;var e=t.getTextContent(),n=t.getTextGuideLine();e&&(e.stateProxy=KS),n&&(n.stateProxy=KS)}function JS(t,e){!oC(t,e)&&!t.__highByOuter&&XS(t,HS)}function QS(t,e){!oC(t,e)&&!t.__highByOuter&&XS(t,WS)}function tC(t,e){t.__highByOuter|=1<<(e||0),XS(t,HS)}function eC(t,e){!(t.__highByOuter&=~(1<<(e||0)))&&XS(t,WS)}function nC(t){XS(t,qS)}function iC(t){XS(t,GS)}function rC(t){XS(t,YS)}function oC(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function sC(t){t.getModel().eachComponent((function(e,n){("series"===e?t.getViewOfSeriesModel(n):t.getViewOfComponentModel(n)).group.traverse((function(t){qS(t)}))}))}function aC(t,e,n,i){var r=i.getModel();function o(t,e){for(var n=0;n<e.length;n++){var i=t.getItemGraphicEl(e[n]);i&&nC(i)}}if(n=n||"coordinateSystem",null!=t&&e&&"none"!==e){var s=r.getSeriesByIndex(t),a=s.coordinateSystem;a&&a.master&&(a=a.master);var l=[];r.eachSeries((function(t){var r=s===t,u=t.coordinateSystem;if(u&&u.master&&(u=u.master),!("series"===n&&!r||"coordinateSystem"===n&&!(u&&a?u===a:r)||"series"===e&&r)){if(i.getViewOfSeriesModel(t).group.traverse((function(t){jS(t)})),Hm(e))o(t.getData(),e);else if(ey(e))for(var c=Ym(e),h=0;h<c.length;h++)o(t.getData(c[h]),e[c[h]]);l.push(t)}})),r.eachComponent((function(t,e){if("series"!==t){var n=i.getViewOfComponentModel(e);n&&n.blurSeries&&n.blurSeries(l,r)}}))}}function lC(t,e,n){if(null!=t&&null!=e){var i=n.getModel().getComponent(t,e);if(i){var r=n.getViewOfComponentModel(i);r&&r.focusBlurEnabled&&r.group.traverse((function(t){jS(t)}))}}}function uC(t,e,n,i){var r={focusSelf:!1,dispatchers:null};if(null==t||"series"===t||null==e||null==n)return r;var o=i.getModel().getComponent(t,e);if(!o)return r;var s=i.getViewOfComponentModel(o);if(!s||!s.findHighDownDispatchers)return r;for(var a,l=s.findHighDownDispatchers(n),u=0;u<l.length;u++)if("self"===ES(l[u]).focus){a=!0;break}return{focusSelf:a,dispatchers:l}}function cC(t){Wm(t.getAllData(),(function(e){var n=e.data,i=e.type;n.eachItemGraphicEl((function(e,n){t.isSelected(n,i)?iC(e):rC(e)}))}))}function hC(t){var e=[];return t.eachSeries((function(t){Wm(t.getAllData(),(function(n){n.data;var i=n.type,r=t.getSelectedDataIndices();if(r.length>0){var o={dataIndex:r,seriesIndex:t.seriesIndex};null!=i&&(o.dataType=i),e.push(o)}}))})),e}function dC(t,e,n){!function(t,e){var n=!1===e,i=t;t.highDownSilentOnTouch&&(i.__highDownSilentOnTouch=t.highDownSilentOnTouch);n&&!i.__highDownDispatcher||(i.__highByOuter=i.__highByOuter||0,i.__highDownDispatcher=!n)}(t,!0),XS(t,ZS),function(t,e,n){var i=ES(t);null!=e?(i.focus=e,i.blurScope=n):i.focus&&(i.focus=null)}(t,e,n)}var pC=["emphasis","blur","select"],fC={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function gC(t){return!(!t||!t.__highDownDispatcher)}function mC(t){var e=t.type;return"select"===e||"unselect"===e||"toggleSelect"===e}function yC(t){var e=t.type;return"highlight"===e||"downplay"===e}var vC=zx.CMD,_C=[[],[],[]],wC=Math.sqrt,bC=Math.atan2;var xC=Math.sqrt,SC=Math.sin,CC=Math.cos,TC=Math.PI;function IC(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function kC(t,e){return(t[0]*e[0]+t[1]*e[1])/(IC(t)*IC(e))}function MC(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(kC(t,e))}function DC(t,e,n,i,r,o,s,a,l,u,c){var h=l*(TC/180),d=CC(h)*(t-n)/2+SC(h)*(e-i)/2,p=-1*SC(h)*(t-n)/2+CC(h)*(e-i)/2,f=d*d/(s*s)+p*p/(a*a);f>1&&(s*=xC(f),a*=xC(f));var g=(r===o?-1:1)*xC((s*s*(a*a)-s*s*(p*p)-a*a*(d*d))/(s*s*(p*p)+a*a*(d*d)))||0,m=g*s*p/a,y=g*-a*d/s,v=(t+n)/2+CC(h)*m-SC(h)*y,_=(e+i)/2+SC(h)*m+CC(h)*y,w=MC([1,0],[(d-m)/s,(p-y)/a]),b=[(d-m)/s,(p-y)/a],x=[(-1*d-m)/s,(-1*p-y)/a],S=MC(b,x);if(kC(b,x)<=-1&&(S=TC),kC(b,x)>=1&&(S=0),S<0){var C=Math.round(S/TC*1e6)/1e6;S=2*TC+C%2*TC}c.addData(u,v,_,s,a,w,S,h,o)}var PC=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,AC=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;var EC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wy(e,t),e.prototype.applyTransform=function(t){},e}(rS);function OC(t){return null!=t.setData}function RC(t,e){var n=function(t){var e=new zx;if(!t)return e;var n,i=0,r=0,o=i,s=r,a=zx.CMD,l=t.match(PC);if(!l)return e;for(var u=0;u<l.length;u++){for(var c=l[u],h=c.charAt(0),d=void 0,p=c.match(AC)||[],f=p.length,g=0;g<f;g++)p[g]=parseFloat(p[g]);for(var m=0;m<f;){var y=void 0,v=void 0,_=void 0,w=void 0,b=void 0,x=void 0,S=void 0,C=i,T=r,I=void 0,k=void 0;switch(h){case"l":i+=p[m++],r+=p[m++],d=a.L,e.addData(d,i,r);break;case"L":i=p[m++],r=p[m++],d=a.L,e.addData(d,i,r);break;case"m":i+=p[m++],r+=p[m++],d=a.M,e.addData(d,i,r),o=i,s=r,h="l";break;case"M":i=p[m++],r=p[m++],d=a.M,e.addData(d,i,r),o=i,s=r,h="L";break;case"h":i+=p[m++],d=a.L,e.addData(d,i,r);break;case"H":i=p[m++],d=a.L,e.addData(d,i,r);break;case"v":r+=p[m++],d=a.L,e.addData(d,i,r);break;case"V":r=p[m++],d=a.L,e.addData(d,i,r);break;case"C":d=a.C,e.addData(d,p[m++],p[m++],p[m++],p[m++],p[m++],p[m++]),i=p[m-2],r=p[m-1];break;case"c":d=a.C,e.addData(d,p[m++]+i,p[m++]+r,p[m++]+i,p[m++]+r,p[m++]+i,p[m++]+r),i+=p[m-2],r+=p[m-1];break;case"S":y=i,v=r,I=e.len(),k=e.data,n===a.C&&(y+=i-k[I-4],v+=r-k[I-3]),d=a.C,C=p[m++],T=p[m++],i=p[m++],r=p[m++],e.addData(d,y,v,C,T,i,r);break;case"s":y=i,v=r,I=e.len(),k=e.data,n===a.C&&(y+=i-k[I-4],v+=r-k[I-3]),d=a.C,C=i+p[m++],T=r+p[m++],i+=p[m++],r+=p[m++],e.addData(d,y,v,C,T,i,r);break;case"Q":C=p[m++],T=p[m++],i=p[m++],r=p[m++],d=a.Q,e.addData(d,C,T,i,r);break;case"q":C=p[m++]+i,T=p[m++]+r,i+=p[m++],r+=p[m++],d=a.Q,e.addData(d,C,T,i,r);break;case"T":y=i,v=r,I=e.len(),k=e.data,n===a.Q&&(y+=i-k[I-4],v+=r-k[I-3]),i=p[m++],r=p[m++],d=a.Q,e.addData(d,y,v,i,r);break;case"t":y=i,v=r,I=e.len(),k=e.data,n===a.Q&&(y+=i-k[I-4],v+=r-k[I-3]),i+=p[m++],r+=p[m++],d=a.Q,e.addData(d,y,v,i,r);break;case"A":_=p[m++],w=p[m++],b=p[m++],x=p[m++],S=p[m++],DC(C=i,T=r,i=p[m++],r=p[m++],x,S,_,w,b,d=a.A,e);break;case"a":_=p[m++],w=p[m++],b=p[m++],x=p[m++],S=p[m++],DC(C=i,T=r,i+=p[m++],r+=p[m++],x,S,_,w,b,d=a.A,e)}}"z"!==h&&"Z"!==h||(d=a.Z,e.addData(d),i=o,r=s),n=d}return e.toStatic(),e}(t),i=Fm({},e);return i.buildPath=function(t){if(OC(t)){t.setData(n.data),(e=t.getContext())&&t.rebuildPath(e,1)}else{var e=t;n.rebuildPath(e,1)}},i.applyTransform=function(t){!function(t,e){if(e){var n,i,r,o,s,a,l=t.data,u=t.len(),c=vC.M,h=vC.C,d=vC.L,p=vC.R,f=vC.A,g=vC.Q;for(r=0,o=0;r<u;){switch(n=l[r++],o=r,i=0,n){case c:case d:i=1;break;case h:i=3;break;case g:i=2;break;case f:var m=e[4],y=e[5],v=wC(e[0]*e[0]+e[1]*e[1]),_=wC(e[2]*e[2]+e[3]*e[3]),w=bC(-e[1]/_,e[0]/v);l[r]*=v,l[r++]+=m,l[r]*=_,l[r++]+=y,l[r++]*=v,l[r++]*=_,l[r++]+=w,l[r++]+=w,o=r+=2;break;case p:a[0]=l[r++],a[1]=l[r++],Ay(a,a,e),l[o++]=a[0],l[o++]=a[1],a[0]+=l[r++],a[1]+=l[r++],Ay(a,a,e),l[o++]=a[0],l[o++]=a[1]}for(s=0;s<i;s++){var b=_C[s];b[0]=l[r++],b[1]=l[r++],Ay(b,b,e),l[o++]=b[0],l[o++]=b[1]}}t.increaseVersion()}}(n,t),this.dirtyShape()},i}function NC(t,e){return new EC(RC(t,e))}var LC=function(){this.cx=0,this.cy=0,this.r=0},FC=function(t){function e(e){return t.call(this,e)||this}return wy(e,t),e.prototype.getDefaultShape=function(){return new LC},e.prototype.buildPath=function(t,e,n){n&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI)},e}(rS);FC.prototype.type="circle";var zC=FC,BC=function(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},UC=function(t){function e(e){return t.call(this,e)||this}return wy(e,t),e.prototype.getDefaultShape=function(){return new BC},e.prototype.buildPath=function(t,e){var n=.5522848,i=e.cx,r=e.cy,o=e.rx,s=e.ry,a=o*n,l=s*n;t.moveTo(i-o,r),t.bezierCurveTo(i-o,r-l,i-a,r-s,i,r-s),t.bezierCurveTo(i+a,r-s,i+o,r-l,i+o,r),t.bezierCurveTo(i+o,r+l,i+a,r+s,i,r+s),t.bezierCurveTo(i-a,r+s,i-o,r+l,i-o,r),t.closePath()},e}(rS);UC.prototype.type="ellipse";var VC=UC,HC=Math.PI,WC=2*HC,jC=Math.sin,qC=Math.cos,GC=Math.acos,YC=Math.atan2,$C=Math.abs,XC=Math.sqrt,KC=Math.max,ZC=Math.min,JC=1e-4;function QC(t,e,n,i,r,o,s){var a=t-n,l=e-i,u=(s?o:-o)/XC(a*a+l*l),c=u*l,h=-u*a,d=t+c,p=e+h,f=n+c,g=i+h,m=(d+f)/2,y=(p+g)/2,v=f-d,_=g-p,w=v*v+_*_,b=r-o,x=d*g-f*p,S=(_<0?-1:1)*XC(KC(0,b*b*w-x*x)),C=(x*_-v*S)/w,T=(-x*v-_*S)/w,I=(x*_+v*S)/w,k=(-x*v+_*S)/w,M=C-m,D=T-y,P=I-m,A=k-y;return M*M+D*D>P*P+A*A&&(C=I,T=k),{cx:C,cy:T,x01:-c,y01:-h,x11:C*(r/b-1),y11:T*(r/b-1)}}function tT(t,e){var n=KC(e.r,0),i=KC(e.r0||0,0),r=n>0;if(r||i>0){if(r||(n=i,i=0),i>n){var o=n;n=i,i=o}var s,a=!!e.clockwise,l=e.startAngle,u=e.endAngle;if(l===u)s=0;else{var c=[l,u];Fx(c,!a),s=$C(c[0]-c[1])}var h=e.cx,d=e.cy,p=e.cornerRadius||0,f=e.innerCornerRadius||0;if(n>JC)if(s>WC-JC)t.moveTo(h+n*qC(l),d+n*jC(l)),t.arc(h,d,n,l,u,!a),i>JC&&(t.moveTo(h+i*qC(u),d+i*jC(u)),t.arc(h,d,i,u,l,a));else{var g=$C(n-i)/2,m=ZC(g,p),y=ZC(g,f),v=y,_=m,w=n*qC(l),b=n*jC(l),x=i*qC(u),S=i*jC(u),C=void 0,T=void 0,I=void 0,k=void 0;if((m>JC||y>JC)&&(C=n*qC(u),T=n*jC(u),I=i*qC(l),k=i*jC(l),s<HC)){var M=function(t,e,n,i,r,o,s,a){var l=n-t,u=i-e,c=s-r,h=a-o,d=h*l-c*u;if(!(d*d<JC))return[t+(d=(c*(e-o)-h*(t-r))/d)*l,e+d*u]}(w,b,I,k,C,T,x,S);if(M){var D=w-M[0],P=b-M[1],A=C-M[0],E=T-M[1],O=1/jC(GC((D*A+P*E)/(XC(D*D+P*P)*XC(A*A+E*E)))/2),R=XC(M[0]*M[0]+M[1]*M[1]);v=ZC(y,(i-R)/(O-1)),_=ZC(m,(n-R)/(O+1))}}if(s>JC)if(_>JC){var N=QC(I,k,w,b,n,_,a),L=QC(C,T,x,S,n,_,a);t.moveTo(h+N.cx+N.x01,d+N.cy+N.y01),_<m?t.arc(h+N.cx,d+N.cy,_,YC(N.y01,N.x01),YC(L.y01,L.x01),!a):(t.arc(h+N.cx,d+N.cy,_,YC(N.y01,N.x01),YC(N.y11,N.x11),!a),t.arc(h,d,n,YC(N.cy+N.y11,N.cx+N.x11),YC(L.cy+L.y11,L.cx+L.x11),!a),t.arc(h+L.cx,d+L.cy,_,YC(L.y11,L.x11),YC(L.y01,L.x01),!a))}else t.moveTo(h+w,d+b),t.arc(h,d,n,l,u,!a);else t.moveTo(h+w,d+b);if(i>JC&&s>JC)if(v>JC){N=QC(x,S,C,T,i,-v,a),L=QC(w,b,I,k,i,-v,a);t.lineTo(h+N.cx+N.x01,d+N.cy+N.y01),v<y?t.arc(h+N.cx,d+N.cy,v,YC(N.y01,N.x01),YC(L.y01,L.x01),!a):(t.arc(h+N.cx,d+N.cy,v,YC(N.y01,N.x01),YC(N.y11,N.x11),!a),t.arc(h,d,i,YC(N.cy+N.y11,N.cx+N.x11),YC(L.cy+L.y11,L.cx+L.x11),a),t.arc(h+L.cx,d+L.cy,v,YC(L.y11,L.x11),YC(L.y01,L.x01),!a))}else t.lineTo(h+x,d+S),t.arc(h,d,i,u,l,a);else t.lineTo(h+x,d+S)}else t.moveTo(h,d);t.closePath()}}var eT=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0,this.innerCornerRadius=0},nT=function(t){function e(e){return t.call(this,e)||this}return wy(e,t),e.prototype.getDefaultShape=function(){return new eT},e.prototype.buildPath=function(t,e){tT(t,e)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(rS);nT.prototype.type="sector";var iT=nT,rT=function(){this.cx=0,this.cy=0,this.r=0,this.r0=0},oT=function(t){function e(e){return t.call(this,e)||this}return wy(e,t),e.prototype.getDefaultShape=function(){return new rT},e.prototype.buildPath=function(t,e){var n=e.cx,i=e.cy,r=2*Math.PI;t.moveTo(n+e.r,i),t.arc(n,i,e.r,0,r,!1),t.moveTo(n+e.r0,i),t.arc(n,i,e.r0,0,r,!0)},e}(rS);oT.prototype.type="ring";var sT=oT;function aT(t,e,n,i,r,o,s){var a=.5*(n-t),l=.5*(i-e);return(2*(e-n)+a+l)*s+(-3*(e-n)-2*a-l)*o+a*r+e}function lT(t,e,n){var i=e.smooth,r=e.points;if(r&&r.length>=2){if(i&&"spline"!==i){var o=function(t,e,n,i){var r,o,s,a,l=[],u=[],c=[],h=[];if(i){s=[1/0,1/0],a=[-1/0,-1/0];for(var d=0,p=t.length;d<p;d++)Ey(s,s,t[d]),Oy(a,a,t[d]);Ey(s,s,i[0]),Oy(a,a,i[1])}for(d=0,p=t.length;d<p;d++){var f=t[d];if(n)r=t[d?d-1:p-1],o=t[(d+1)%p];else{if(0===d||d===p-1){l.push(xy(t[d]));continue}r=t[d-1],o=t[d+1]}Cy(u,o,r),Ty(u,u,e);var g=ky(f,r),m=ky(f,o),y=g+m;0!==y&&(g/=y,m/=y),Ty(c,u,-g),Ty(h,u,m);var v=Sy([],f,c),_=Sy([],f,h);i&&(Oy(v,v,s),Ey(v,v,a),Oy(_,_,s),Ey(_,_,a)),l.push(v),l.push(_)}return n&&l.push(l.shift()),l}(r,i,n,e.smoothConstraint);t.moveTo(r[0][0],r[0][1]);for(var s=r.length,a=0;a<(n?s:s-1);a++){var l=o[2*a],u=o[2*a+1],c=r[(a+1)%s];t.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{"spline"===i&&(r=function(t,e){for(var n=t.length,i=[],r=0,o=1;o<n;o++)r+=ky(t[o-1],t[o]);var s=r/2;for(s=s<n?n:s,o=0;o<s;o++){var a=o/(s-1)*(e?n:n-1),l=Math.floor(a),u=a-l,c=void 0,h=t[l%n],d=void 0,p=void 0;e?(c=t[(l-1+n)%n],d=t[(l+1)%n],p=t[(l+2)%n]):(c=t[0===l?l:l-1],d=t[l>n-2?n-1:l+1],p=t[l>n-3?n-1:l+2]);var f=u*u,g=u*f;i.push([aT(c[0],h[0],d[0],p[0],u,f,g),aT(c[1],h[1],d[1],p[1],u,f,g)])}return i}(r,n)),t.moveTo(r[0][0],r[0][1]);a=1;for(var h=r.length;a<h;a++)t.lineTo(r[a][0],r[a][1])}n&&t.closePath()}}var uT=function(){this.points=null,this.smooth=0,this.smoothConstraint=null},cT=function(t){function e(e){return t.call(this,e)||this}return wy(e,t),e.prototype.getDefaultShape=function(){return new uT},e.prototype.buildPath=function(t,e){lT(t,e,!0)},e}(rS);cT.prototype.type="polygon";var hT=cT,dT=function(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},pT=function(t){function e(e){return t.call(this,e)||this}return wy(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new dT},e.prototype.buildPath=function(t,e){lT(t,e,!1)},e}(rS);pT.prototype.type="polyline";var fT=pT,gT={},mT=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},yT=function(t){function e(e){return t.call(this,e)||this}return wy(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new mT},e.prototype.buildPath=function(t,e){var n,i,r,o;if(this.subPixelOptimize){var s=pS(gT,e,this.style);n=s.x1,i=s.y1,r=s.x2,o=s.y2}else n=e.x1,i=e.y1,r=e.x2,o=e.y2;var a=e.percent;0!==a&&(t.moveTo(n,i),a<1&&(r=n*(1-a)+r*a,o=i*(1-a)+o*a),t.lineTo(r,o))},e.prototype.pointAt=function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]},e}(rS);yT.prototype.type="line";var vT=yT,_T=[],wT=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function bT(t,e,n){var i=t.cpx2,r=t.cpy2;return null===i||null===r?[(n?$b:Yb)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?$b:Yb)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?Qb:Jb)(t.x1,t.cpx1,t.x2,e),(n?Qb:Jb)(t.y1,t.cpy1,t.y2,e)]}var xT=function(t){function e(e){return t.call(this,e)||this}return wy(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new wT},e.prototype.buildPath=function(t,e){var n=e.x1,i=e.y1,r=e.x2,o=e.y2,s=e.cpx1,a=e.cpy1,l=e.cpx2,u=e.cpy2,c=e.percent;0!==c&&(t.moveTo(n,i),null==l||null==u?(c<1&&(ex(n,s,r,c,_T),s=_T[1],r=_T[2],ex(i,a,o,c,_T),a=_T[1],o=_T[2]),t.quadraticCurveTo(s,a,r,o)):(c<1&&(Kb(n,s,l,r,c,_T),s=_T[1],l=_T[2],r=_T[3],Kb(i,a,u,o,c,_T),a=_T[1],u=_T[2],o=_T[3]),t.bezierCurveTo(s,a,l,u,r,o)))},e.prototype.pointAt=function(t){return bT(this.shape,t,!1)},e.prototype.tangentAt=function(t){var e=bT(this.shape,t,!0);return Iy(e,e)},e}(rS);xT.prototype.type="bezier-curve";var ST=xT,CT=function(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},TT=function(t){function e(e){return t.call(this,e)||this}return wy(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new CT},e.prototype.buildPath=function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r,0),o=e.startAngle,s=e.endAngle,a=e.clockwise,l=Math.cos(o),u=Math.sin(o);t.moveTo(l*r+n,u*r+i),t.arc(n,i,r,o,s,!a)},e}(rS);TT.prototype.type="arc";var IT=TT,kT=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="compound",e}return wy(e,t),e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,e=this.shapeChanged(),n=0;n<t.length;n++)e=e||t[n].shapeChanged();e&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1],t[n].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,e){for(var n=e.paths||[],i=0;i<n.length;i++)n[i].buildPath(t,n[i].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),rS.prototype.getBoundingRect.call(this)},e}(rS),MT=function(){function t(t){this.colorStops=t||[]}return t.prototype.addColorStop=function(t,e){this.colorStops.push({offset:t,color:e})},t}(),DT=function(t){function e(e,n,i,r,o,s){var a=t.call(this,o)||this;return a.x=null==e?0:e,a.y=null==n?0:n,a.x2=null==i?1:i,a.y2=null==r?0:r,a.type="linear",a.global=s||!1,a}return wy(e,t),e}(MT),PT=function(t){function e(e,n,i,r,o){var s=t.call(this,r)||this;return s.x=null==e?.5:e,s.y=null==n?.5:n,s.r=null==i?.5:i,s.type="radial",s.global=o||!1,s}return wy(e,t),e}(MT),AT=[0,0],ET=[0,0],OT=new B_,RT=new B_,NT=function(){function t(t,e){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new B_;for(n=0;n<2;n++)this._axes[n]=new B_;t&&this.fromBoundingRect(t,e)}return t.prototype.fromBoundingRect=function(t,e){var n=this._corners,i=this._axes,r=t.x,o=t.y,s=r+t.width,a=o+t.height;if(n[0].set(r,o),n[1].set(s,o),n[2].set(s,a),n[3].set(r,a),e)for(var l=0;l<4;l++)n[l].transform(e);B_.sub(i[0],n[1],n[0]),B_.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(l=0;l<2;l++)this._origin[l]=i[l].dot(n[0])},t.prototype.intersect=function(t,e){var n=!0,i=!e;return OT.set(1/0,1/0),RT.set(0,0),!this._intersectCheckOneSide(this,t,OT,RT,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,OT,RT,i,-1)&&(n=!1,i)||i||B_.copy(e,n?OT:RT),n},t.prototype._intersectCheckOneSide=function(t,e,n,i,r,o){for(var s=!0,a=0;a<2;a++){var l=this._axes[a];if(this._getProjMinMaxOnAxis(a,t._corners,AT),this._getProjMinMaxOnAxis(a,e._corners,ET),AT[1]<ET[0]||AT[0]>ET[1]){if(s=!1,r)return s;var u=Math.abs(ET[0]-AT[1]),c=Math.abs(AT[0]-ET[1]);Math.min(u,c)>i.len()&&(u<c?B_.scale(i,l,-u*o):B_.scale(i,l,c*o))}else if(n){u=Math.abs(ET[0]-AT[1]),c=Math.abs(AT[0]-ET[1]);Math.min(u,c)<n.len()&&(u<c?B_.scale(n,l,u*o):B_.scale(n,l,-c*o))}}return s},t.prototype._getProjMinMaxOnAxis=function(t,e,n){for(var i=this._axes[t],r=this._origin,o=e[0].dot(i)+r[t],s=o,a=o,l=1;l<e.length;l++){var u=e[l].dot(i)+r[t];s=Math.min(u,s),a=Math.max(u,a)}n[0]=s,n[1]=a},t}(),LT=[],FT=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.notClear=!0,e.incremental=!0,e._displayables=[],e._temporaryDisplayables=[],e._cursor=0,e}return wy(e,t),e.prototype.traverse=function(t,e){t.call(e,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){(e=this._displayables[t]).parent=this,e.update(),e.parent=null}for(t=0;t<this._temporaryDisplayables.length;t++){var e;(e=this._temporaryDisplayables[t]).parent=this,e.update(),e.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new $_(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var n=this._displayables[e],i=n.getBoundingRect().clone();n.needLocalTransform()&&i.applyTransform(n.getLocalTransform(LT)),t.union(i)}this._rect=t}return this._rect},e.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(n[0],n[1]))for(var i=0;i<this._displayables.length;i++){if(this._displayables[i].contain(t,e))return!0}return!1},e}(Fb),zT=Yw();function BT(t,e,n,i,r,o,s){var a,l=!1;"function"==typeof r?(s=o,o=r,r=null):ey(r)&&(o=r.cb,s=r.during,l=r.isFrom,a=r.removeOpt,r=r.dataIndex);var u="remove"===t;u||e.stopAnimation("remove");var c=function(t,e,n,i,r){var o;if(e&&e.ecModel){var s=e.ecModel.getUpdatePayload();o=s&&s.animation}var a="update"===t;if(e&&e.isAnimationEnabled()){var l=void 0,u=void 0,c=void 0;return i?(l=sy(i.duration,200),u=sy(i.easing,"cubicOut"),c=0):(l=e.getShallow(a?"animationDurationUpdate":"animationDuration"),u=e.getShallow(a?"animationEasingUpdate":"animationEasing"),c=e.getShallow(a?"animationDelayUpdate":"animationDelay")),o&&(null!=o.duration&&(l=o.duration),null!=o.easing&&(u=o.easing),null!=o.delay&&(c=o.delay)),"function"==typeof c&&(c=c(n,r)),"function"==typeof l&&(l=l(n)),{duration:l||0,delay:c,easing:u}}return null}(t,i,r,u?a||{}:null,i&&i.getAnimationDelayParams?i.getAnimationDelayParams(e,r):null);if(c&&c.duration>0){var h={duration:c.duration,delay:c.delay||0,easing:c.easing,done:o,force:!!o||!!s,setToFinal:!u,scope:t,during:s};l?e.animateFrom(n,h):e.animateTo(n,h)}else e.stopAnimation(),!l&&e.attr(n),s&&s(1),o&&o()}function UT(t,e,n,i,r,o){BT("update",t,e,n,i,r,o)}function VT(t,e,n,i,r,o){BT("init",t,e,n,i,r,o)}function HT(t){if(!t.__zr)return!0;for(var e=0;e<t.animators.length;e++){if("remove"===t.animators[e].scope)return!0}return!1}function WT(t,e,n,i,r,o){HT(t)||BT("remove",t,e,n,i,r,o)}function jT(t,e,n,i){t.removeTextContent(),t.removeTextGuideLine(),WT(t,{style:{opacity:0}},e,n,i)}function qT(t,e,n){function i(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse((function(t){t.isGroup||jT(t,e,n,i)})):jT(t,e,n,i)}var GT=Math.max,YT=Math.min,$T={};var XT=function(t,e){var n=RC(t,e);return function(t){function e(e){var i=t.call(this,e)||this;return i.applyTransform=n.applyTransform,i.buildPath=n.buildPath,i}return wy(e,t),e}(EC)};function KT(t,e){$T[t]=e}function ZT(t,e,n,i){var r=NC(t,e);return n&&("center"===i&&(n=QT(n,r.getBoundingRect())),eI(r,n)),r}function JT(t,e,n){var i=new hS({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(t){if("center"===n){var r={width:t.width,height:t.height};i.setStyle(QT(e,r))}}});return i}function QT(t,e){var n,i=e.width/e.height,r=t.height*i;return n=r<=t.width?t.height:(r=t.width)/i,{x:t.x+t.width/2-r/2,y:t.y+t.height/2-n/2,width:r,height:n}}var tI=function(t,e){for(var n=[],i=t.length,r=0;r<i;r++){var o=t[r];n.push(o.getUpdatedPathProxy(!0))}var s=new rS(e);return s.createPathProxy(),s.buildPath=function(t){if(OC(t)){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e,1)}},s};function eI(t,e){if(t.applyTransform){var n=t.getBoundingRect().calculateTransform(e);t.applyTransform(n)}}var nI=gS;function iI(t,e,n){return e&&!Hm(e)&&(e=z_.getLocalTransform(e)),n&&(e=k_([],e)),Ay([],t,e)}function rI(t){return!t.isGroup}function oI(t,e,n){var i=Fm({rectHover:!0},e),r=i.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(r.image=t.slice(8),zm(r,n),new hS(i)):ZT(t.replace("path://",""),i,n,"center")}function sI(t,e,n,i,r,o,s,a){var l=n-t,u=i-e,c=s-r,h=a-o,d=aI(c,h,l,u);if(function(t){return t<=1e-6&&t>=-1e-6}(d))return!1;var p=t-r,f=e-o,g=aI(p,f,l,u)/d;if(g<0||g>1)return!1;var m=aI(p,f,c,h)/d;return!(m<0||m>1)}function aI(t,e,n,i){return t*i-n*e}function lI(t){var e=t.itemTooltipOption,n=t.componentModel,i=t.itemName,r=Jm(e)?{formatter:e}:e,o=n.mainType,s=n.componentIndex,a={componentType:o,name:i,$vars:["name"]};a[o+"Index"]=s;var l=t.formatterParamsExtra;l&&Wm(Ym(l),(function(t){yy(a,t)||(a[t]=l[t],a.$vars.push(t))}));var u=ES(t.el);u.componentMainType=o,u.componentIndex=s,u.tooltipConfig={name:i,option:zm({content:i,formatterParams:a},r)}}KT("circle",zC),KT("ellipse",VC),KT("sector",iT),KT("ring",sT),KT("polygon",hT),KT("polyline",fT),KT("rect",_S),KT("line",vT),KT("bezierCurve",ST),KT("arc",IT);var uI=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",updateProps:UT,initProps:VT,removeElement:WT,removeElementWithFadeOut:qT,isElementRemoved:HT,extendShape:function(t){return rS.extend(t)},extendPath:function(t,e){return XT(t,e)},registerShape:KT,getShapeClass:function(t){if($T.hasOwnProperty(t))return $T[t]},makePath:ZT,makeImage:JT,mergePath:tI,resizePath:eI,subPixelOptimizeLine:function(t){return pS(t.shape,t.shape,t.style),t},subPixelOptimizeRect:function(t){return fS(t.shape,t.shape,t.style),t},subPixelOptimize:nI,getTransform:function(t,e){for(var n=x_([]);t&&t!==e;)S_(n,t.getLocalTransform(),n),t=t.parent;return n},applyTransform:iI,transformDirection:function(t,e,n){var i=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),o=["left"===t?-i:"right"===t?i:0,"top"===t?-r:"bottom"===t?r:0];return o=iI(o,e,n),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"},groupTransition:function(t,e,n){if(t&&e){var i,r=(i={},t.traverse((function(t){rI(t)&&t.anid&&(i[t.anid]=t)})),i);e.traverse((function(t){if(rI(t)&&t.anid){var e=r[t.anid];if(e){var i=o(t);t.attr(o(e)),UT(t,i,n,ES(t).dataIndex)}}}))}function o(t){var e={x:t.x,y:t.y,rotation:t.rotation};return function(t){return null!=t.shape}(t)&&(e.shape=Fm({},t.shape)),e}},clipPointsByRect:function(t,e){return jm(t,(function(t){var n=t[0];n=GT(n,e.x),n=YT(n,e.x+e.width);var i=t[1];return i=GT(i,e.y),[n,i=YT(i,e.y+e.height)]}))},clipRectByRect:function(t,e){var n=GT(t.x,e.x),i=YT(t.x+t.width,e.x+e.width),r=GT(t.y,e.y),o=YT(t.y+t.height,e.y+e.height);if(i>=n&&o>=r)return{x:n,y:r,width:i-n,height:o-r}},createIcon:oI,linePolygonIntersect:function(t,e,n,i,r){for(var o=0,s=r[r.length-1];o<r.length;o++){var a=r[o];if(sI(t,e,n,i,a[0],a[1],s[0],s[1]))return!0;s=a}},lineLineIntersect:sI,setTooltipConfig:lI,Group:mw,Image:hS,Text:AS,Circle:zC,Ellipse:VC,Sector:iT,Ring:sT,Polygon:hT,Polyline:fT,Rect:_S,Line:vT,BezierCurve:ST,Arc:IT,IncrementalDisplayable:FT,CompoundPath:kT,LinearGradient:DT,RadialGradient:PT,BoundingRect:$_,OrientedBoundingRect:NT,Point:B_,Path:rS}),cI={};function hI(t,e,n){var i,r=t.labelFetcher,o=t.labelDataIndex,s=t.labelDimIndex,a=e.normal;r&&(i=r.getFormattedLabel(o,"normal",null,s,a&&a.get("formatter"),null!=n?{interpolatedValue:n}:null)),null==i&&(i=Zm(t.defaultText)?t.defaultText(o,t,n):t.defaultText);for(var l={normal:i},u=0;u<LS.length;u++){var c=LS[u],h=e[c];l[c]=sy(r?r.getFormattedLabel(o,c,null,s,h&&h.get("formatter")):null,i)}return l}function dI(t,e,n,i){n=n||cI;for(var r=t instanceof AS,o=!1,s=0;s<FS.length;s++){if((d=e[FS[s]])&&d.getShallow("show")){o=!0;break}}var a=r?t:t.getTextContent();if(o){r||(a||(a=new AS,t.setTextContent(a)),t.stateProxy&&(a.stateProxy=t.stateProxy));var l=hI(n,e),u=e.normal,c=!!u.getShallow("show"),h=pI(u,i&&i.normal,n,!1,!r);h.text=l.normal,r||t.setTextConfig(fI(u,n,!1));for(s=0;s<LS.length;s++){var d,p=LS[s];if(d=e[p]){var f=a.ensureState(p),g=!!sy(d.getShallow("show"),c);if(g!==c&&(f.ignore=!g),f.style=pI(d,i&&i[p],n,!0,!r),f.style.text=l[p],!r)t.ensureState(p).textConfig=fI(d,n,!0)}}a.silent=!!u.getShallow("silent"),null!=a.style.x&&(h.x=a.style.x),null!=a.style.y&&(h.y=a.style.y),a.ignore=!c,a.useStyle(h),a.dirty(),n.enableTextSetter&&(bI(a).setLabelText=function(t){var i=hI(n,e,t);!function(t,e){for(var n=0;n<LS.length;n++){var i=LS[n],r=e[i],o=t.ensureState(i);o.style=o.style||{},o.style.text=r}var s=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:e.normal}),t.useStates(s,!0)}(a,i)})}else a&&(a.ignore=!0);t.dirty()}function pI(t,e,n,i,r){var o={};return function(t,e,n,i,r){n=n||cI;var o,s=e.ecModel,a=s&&s.option.textStyle,l=function(t){var e;for(;t&&t!==t.ecModel;){var n=(t.option||cI).rich;if(n){e=e||{};for(var i=Ym(n),r=0;r<i.length;r++){e[i[r]]=1}}t=t.parentModel}return e}(e);if(l)for(var u in o={},l)if(l.hasOwnProperty(u)){var c=e.getModel(["rich",u]);vI(o[u]={},c,a,n,i,r,!1,!0)}o&&(t.rich=o);var h=e.get("overflow");h&&(t.overflow=h);var d=e.get("minMargin");null!=d&&(t.margin=d);vI(t,e,a,n,i,r,!0,!1)}(o,t,n,i,r),e&&Fm(o,e),o}function fI(t,e,n){e=e||{};var i,r={},o=t.getShallow("rotate"),s=sy(t.getShallow("distance"),n?null:5),a=t.getShallow("offset");return"outside"===(i=t.getShallow("position")||(n?null:"inside"))&&(i=e.defaultOutsidePosition||"top"),null!=i&&(r.position=i),null!=a&&(r.offset=a),null!=o&&(o*=Math.PI/180,r.rotation=o),null!=s&&(r.distance=s),r.outsideFill="inherit"===t.get("color")?e.inheritColor||null:"auto",r}var gI=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],mI=["align","lineHeight","width","height","tag","verticalAlign"],yI=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function vI(t,e,n,i,r,o,s,a){n=!r&&n||cI;var l=i&&i.inheritColor,u=e.getShallow("color"),c=e.getShallow("textBorderColor"),h=sy(e.getShallow("opacity"),n.opacity);"inherit"!==u&&"auto"!==u||(u=l||null),"inherit"!==c&&"auto"!==c||(c=l||null),o||(u=u||n.color,c=c||n.textBorderColor),null!=u&&(t.fill=u),null!=c&&(t.stroke=c);var d=sy(e.getShallow("textBorderWidth"),n.textBorderWidth);null!=d&&(t.lineWidth=d);var p=sy(e.getShallow("textBorderType"),n.textBorderType);null!=p&&(t.lineDash=p);var f=sy(e.getShallow("textBorderDashOffset"),n.textBorderDashOffset);null!=f&&(t.lineDashOffset=f),r||null!=h||a||(h=i&&i.defaultOpacity),null!=h&&(t.opacity=h),r||o||null==t.fill&&i.inheritColor&&(t.fill=i.inheritColor);for(var g=0;g<gI.length;g++){var m=gI[g];null!=(v=sy(e.getShallow(m),n[m]))&&(t[m]=v)}for(g=0;g<mI.length;g++){m=mI[g];null!=(v=e.getShallow(m))&&(t[m]=v)}if(null==t.verticalAlign){var y=e.getShallow("baseline");null!=y&&(t.verticalAlign=y)}if(!s||!i.disableBox){for(g=0;g<yI.length;g++){var v;m=yI[g];null!=(v=e.getShallow(m))&&(t[m]=v)}var _=e.getShallow("borderType");null!=_&&(t.borderDash=_),"auto"!==t.backgroundColor&&"inherit"!==t.backgroundColor||!l||(t.backgroundColor=l),"auto"!==t.borderColor&&"inherit"!==t.borderColor||!l||(t.borderColor=l)}}var _I,wI,bI=Yw(),xI=["textStyle","color"],SI=new AS,CI=function(){function t(){}return t.prototype.getTextColor=function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(xI):null)},t.prototype.getFont=function(){return t={fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},e=this.ecModel,n=e&&e.getModel("textStyle"),hy([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "));var t,e,n},t.prototype.getTextRect=function(t){return SI.useStyle({text:t,fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily"),verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline"),padding:this.getShallow("padding"),lineHeight:this.getShallow("lineHeight"),rich:this.getShallow("rich")}),SI.update(),SI.getBoundingRect()},t}(),TI=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],II=ub(TI),kI=function(){function t(){}return t.prototype.getLineStyle=function(t){return II(this,t)},t}(),MI=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],DI=ub(MI),PI=function(){function t(){}return t.prototype.getItemStyle=function(t,e){return DI(this,t,e)},t}(),AI=function(){function t(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}return t.prototype.init=function(t,e,n){for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r]},t.prototype.mergeOption=function(t,e){Lm(this.option,t,!0)},t.prototype.get=function(t,e){return null==t?this.option:this._doGet(this.parsePath(t),!e&&this.parentModel)},t.prototype.getShallow=function(t,e){var n=this.option,i=null==n?n:n[t];if(null==i&&!e){var r=this.parentModel;r&&(i=r.getShallow(t))}return i},t.prototype.getModel=function(e,n){var i=null!=e,r=i?this.parsePath(e):null;return new t(i?this._doGet(r):this.option,n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(r)),this.ecModel)},t.prototype.isEmpty=function(){return null==this.option},t.prototype.restoreData=function(){},t.prototype.clone=function(){return new(0,this.constructor)(Nm(this.option))},t.prototype.parsePath=function(t){return"string"==typeof t?t.split("."):t},t.prototype.resolveParentPath=function(t){return t},t.prototype.isAnimationEnabled=function(){if(!wm.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(t,e){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&(!t[i]||null!=(n=n&&"object"==typeof n?n[t[i]]:null));i++);return null==n&&e&&(n=e._doGet(this.resolveParentPath(t),e.parentModel)),n},t}();nb(AI),_I=AI,wI=["__\0is_clz",ob++].join("_"),_I.prototype[wI]=!0,_I.isInstance=function(t){return!(!t||!t[wI])},Vm(AI,kI),Vm(AI,PI),Vm(AI,hb),Vm(AI,CI);var EI=AI,OI=Math.round(10*Math.random());function RI(t){return[t||"",OI++].join("_")}var NI={},LI={},FI=wm.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase().indexOf("ZH")>-1?"ZH":"EN";function zI(t,e){t=t.toUpperCase(),LI[t]=new EI(e),NI[t]=e}function BI(t,e){return"0000".substr(0,e-(t+="").length)+t}function UI(t,e,n,i){var r=Dw(t),o=r[function(t){return t?"getUTCFullYear":"getFullYear"}(n)](),s=r[function(t){return t?"getUTCMonth":"getMonth"}(n)]()+1,a=Math.floor((s-1)/4)+1,l=r[function(t){return t?"getUTCDate":"getDate"}(n)](),u=r["get"+(n?"UTC":"")+"Day"](),c=r[function(t){return t?"getUTCHours":"getHours"}(n)](),h=(c-1)%12+1,d=r[function(t){return t?"getUTCMinutes":"getMinutes"}(n)](),p=r[function(t){return t?"getUTCSeconds":"getSeconds"}(n)](),f=r[function(t){return t?"getUTCMilliseconds":"getMilliseconds"}(n)](),g=(i instanceof EI?i:function(t){return LI[t]}(i||FI)||LI.EN).getModel("time"),m=g.get("month"),y=g.get("monthAbbr"),v=g.get("dayOfWeek"),_=g.get("dayOfWeekAbbr");return(e||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,o%100+"").replace(/{Q}/g,a+"").replace(/{MMMM}/g,m[s-1]).replace(/{MMM}/g,y[s-1]).replace(/{MM}/g,BI(s,2)).replace(/{M}/g,s+"").replace(/{dd}/g,BI(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,v[u]).replace(/{ee}/g,_[u]).replace(/{e}/g,u+"").replace(/{HH}/g,BI(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,BI(h+"",2)).replace(/{h}/g,h+"").replace(/{mm}/g,BI(d,2)).replace(/{m}/g,d+"").replace(/{ss}/g,BI(p,2)).replace(/{s}/g,p+"").replace(/{SSS}/g,BI(f,3)).replace(/{S}/g,f+"")}function VI(t){if(!function(t){return!isNaN(Pw(t))}(t))return Jm(t)?t:"-";var e=(t+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function HI(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()})),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}zI("EN",{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),zI("ZH",{time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}});var WI=uy,jI=/([&<>"'])/g,qI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function GI(t){return null==t?"":(t+"").replace(jI,(function(t,e){return qI[e]}))}function YI(t,e,n){function i(t){return t&&hy(t)?t:"-"}function r(t){return!(null==t||isNaN(t)||!isFinite(t))}var o="time"===e,s=t instanceof Date;if(o||s){var a=o?Dw(t):t;if(!isNaN(+a))return UI(a,"{yyyy}-{MM}-{dd} {hh}:{mm}:{ss}",n);if(s)return"-"}if("ordinal"===e)return Qm(t)?i(t):ty(t)&&r(t)?t+"":"-";var l=Pw(t);return r(l)?VI(l):Qm(t)?i(t):"-"}var $I=["a","b","c","d","e","f","g"],XI=function(t,e){return"{"+t+(null==e?"":e)+"}"};function KI(t,e,n){Km(e)||(e=[e]);var i=e.length;if(!i)return"";for(var r=e[0].$vars||[],o=0;o<r.length;o++){var s=$I[o];t=t.replace(XI(s),XI(s,0))}for(var a=0;a<i;a++)for(var l=0;l<r.length;l++){var u=e[a][r[l]];t=t.replace(XI($I[l],a),n?GI(u):u)}return t}function ZI(t,e){return e=e||"transparent",Jm(t)?t:ey(t)&&t.colorStops&&(t.colorStops[0]||{}).color||e}function JI(t,e){if("_blank"===e||"blank"===e){var n=window.open();n.opener=null,n.location.href=t}else window.open(t,e)}var QI=Wm,tk=["left","right","top","bottom","width","height"],ek=[["width","left","right"],["height","top","bottom"]];function nk(t,e,n,i,r){var o=0,s=0;null==i&&(i=1/0),null==r&&(r=1/0);var a=0;e.eachChild((function(l,u){var c,h,d=l.getBoundingRect(),p=e.childAt(u+1),f=p&&p.getBoundingRect();if("horizontal"===t){var g=d.width+(f?-f.x+d.x:0);(c=o+g)>i||l.newline?(o=0,c=g,s+=a+n,a=d.height):a=Math.max(a,d.height)}else{var m=d.height+(f?-f.y+d.y:0);(h=s+m)>r||l.newline?(o+=a+n,s=0,h=m,a=d.width):a=Math.max(a,d.width)}l.newline||(l.x=o,l.y=s,l.markRedraw(),"horizontal"===t?o=c+n:s=h+n)}))}var ik=nk;function rk(t,e,n){n=WI(n||0);var i=e.width,r=e.height,o=Sw(t.left,i),s=Sw(t.top,r),a=Sw(t.right,i),l=Sw(t.bottom,r),u=Sw(t.width,i),c=Sw(t.height,r),h=n[2]+n[0],d=n[1]+n[3],p=t.aspect;switch(isNaN(u)&&(u=i-a-d-o),isNaN(c)&&(c=r-l-h-s),null!=p&&(isNaN(u)&&isNaN(c)&&(p>i/r?u=.8*i:c=.8*r),isNaN(u)&&(u=p*c),isNaN(c)&&(c=u/p)),isNaN(o)&&(o=i-a-u-d),isNaN(s)&&(s=r-l-c-h),t.left||t.right){case"center":o=i/2-u/2-n[3];break;case"right":o=i-u-d}switch(t.top||t.bottom){case"middle":case"center":s=r/2-c/2-n[0];break;case"bottom":s=r-c-h}o=o||0,s=s||0,isNaN(u)&&(u=i-d-o-(a||0)),isNaN(c)&&(c=r-h-s-(l||0));var f=new $_(o+n[3],s+n[0],u,c);return f.margin=n,f}function ok(t){var e=t.layoutMode||t.constructor.layoutMode;return ey(e)?e:e?{type:e}:null}function sk(t,e,n){var i=n&&n.ignoreSize;!Km(i)&&(i=[i,i]);var r=s(ek[0],0),o=s(ek[1],1);function s(n,r){var o={},s=0,u={},c=0;if(QI(n,(function(e){u[e]=t[e]})),QI(n,(function(t){a(e,t)&&(o[t]=u[t]=e[t]),l(o,t)&&s++,l(u,t)&&c++})),i[r])return l(e,n[1])?u[n[2]]=null:l(e,n[2])&&(u[n[1]]=null),u;if(2!==c&&s){if(s>=2)return o;for(var h=0;h<n.length;h++){var d=n[h];if(!a(o,d)&&a(t,d)){o[d]=t[d];break}}return o}return u}function a(t,e){return t.hasOwnProperty(e)}function l(t,e){return null!=t[e]&&"auto"!==t[e]}function u(t,e,n){QI(t,(function(t){e[t]=n[t]}))}u(ek[0],t,r),u(ek[1],t,o)}function ak(t){return function(t,e){return e&&t&&QI(tk,(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}({},t)}Xm(nk,"vertical"),Xm(nk,"horizontal");var lk=Yw(),uk=function(t){function e(e,n,i){var r=t.call(this,e,n,i)||this;return r.uid=RI("ec_cpt_model"),r}var n;return gm(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n)},e.prototype.mergeDefaultAndTheme=function(t,e){var n=ok(this),i=n?ak(t):{};Lm(t,e.getTheme().get(this.mainType)),Lm(t,this.getDefaultOption()),n&&sk(t,i,n)},e.prototype.mergeOption=function(t,e){Lm(this.option,t,!0);var n=ok(this);n&&sk(this.option,t,n)},e.prototype.optionUpdated=function(t,e){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!function(t){return!(!t||!t.___EC__EXTENDED_CLASS___)}(t))return t.defaultOption;var e=lk(this);if(!e.defaultOption){for(var n=[],i=t;i;){var r=i.prototype.defaultOption;r&&n.push(r),i=i.superClass}for(var o={},s=n.length-1;s>=0;s--)o=Lm(o,n[s],!0);e.defaultOption=o}return e.defaultOption},e.prototype.getReferringComponents=function(t,e){var n=t+"Index",i=t+"Id";return Jw(this.ecModel,t,{index:this.get(n,!0),id:this.get(i,!0)},e)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.protoInitialize=((n=e.prototype).type="component",n.id="",n.name="",n.mainType="",n.subType="",void(n.componentIndex=0)),e}(EI);rb(uk,EI),lb(uk),function(t){var e={};t.registerSubTypeDefaulter=function(t,n){var i=eb(t);e[i.main]=n},t.determineSubType=function(n,i){var r=i.type;if(!r){var o=eb(n).main;t.hasSubTypes(n)&&e[o]&&(r=e[o](i))}return r}}(uk),function(t,e){function n(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}t.topologicalTravel=function(t,i,r,o){if(t.length){var s=function(t){var i={},r=[];return Wm(t,(function(o){var s=n(i,o),a=function(t,e){var n=[];return Wm(t,(function(t){Um(e,t)>=0&&n.push(t)})),n}(s.originalDeps=e(o),t);s.entryCount=a.length,0===s.entryCount&&r.push(o),Wm(a,(function(t){Um(s.predecessor,t)<0&&s.predecessor.push(t);var e=n(i,t);Um(e.successor,t)<0&&e.successor.push(o)}))})),{graph:i,noEntryList:r}}(i),a=s.graph,l=s.noEntryList,u={};for(Wm(t,(function(t){u[t]=!0}));l.length;){var c=l.pop(),h=a[c],d=!!u[c];d&&(r.call(o,c,h.originalDeps.slice()),delete u[c]),Wm(h.successor,d?f:p)}Wm(u,(function(){throw new Error("")}))}function p(t){a[t].entryCount--,0===a[t].entryCount&&l.push(t)}function f(t){u[t]=!0,p(t)}}}(uk,(function(t){var e=[];Wm(uk.getClassesByMainType(t),(function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])})),e=jm(e,(function(t){return eb(t).main})),"dataset"!==t&&Um(e,"dataset")<=0&&e.unshift("dataset");return e}));var ck=uk,hk="";"undefined"!=typeof navigator&&(hk=navigator.platform||"");var dk="rgba(0, 0, 0, 0.2)",pk={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:dk,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:dk,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:dk,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:dk,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:dk,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:dk,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:hk.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},fk=gy(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),gk=1,mk=2,yk=3,vk=Yw();function _k(t,e,n){var i={};if(!wk(t))return i;var r,o=e.sourceFormat,s=e.dimensionsDefine;"objectRows"!==o&&"keyedColumns"!==o||Wm(s,(function(t,e){"name"===(ey(t)?t.name:t)&&(r=e)}));var a=function(){for(var t={},i={},a=[],l=0,u=Math.min(5,n);l<u;l++){var c=xk(e.data,o,e.seriesLayoutBy,s,e.startIndex,l);a.push(c);var h=c===yk;if(h&&null==t.v&&l!==r&&(t.v=l),(null==t.n||t.n===t.v||!h&&a[t.n]===yk)&&(t.n=l),d(t)&&a[t.n]!==yk)return t;h||(c===mk&&null==i.v&&l!==r&&(i.v=l),null!=i.n&&i.n!==i.v||(i.n=l))}function d(t){return null!=t.v&&null!=t.n}return d(t)?t:d(i)?i:null}();if(a){i.value=[a.v];var l=null!=r?r:a.n;i.itemName=[l],i.seriesName=[l]}return i}function wk(t){if(!t.get("data",!0))return Jw(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},Zw).models[0]}function bk(t,e){return xk(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function xk(t,e,n,i,r,o){var s,a,l;if(iy(t))return yk;if(i){var u=i[o];ey(u)?(a=u.name,l=u.type):Jm(u)&&(a=u)}if(null!=l)return"ordinal"===l?gk:yk;if("arrayRows"===e){var c=t;if("row"===n){for(var h=c[o],d=0;d<(h||[]).length&&d<5;d++)if(null!=(s=v(h[r+d])))return s}else for(d=0;d<c.length&&d<5;d++){var p=c[r+d];if(p&&null!=(s=v(p[o])))return s}}else if("objectRows"===e){var f=t;if(!a)return yk;for(d=0;d<f.length&&d<5;d++){if((m=f[d])&&null!=(s=v(m[a])))return s}}else if("keyedColumns"===e){if(!a)return yk;if(!(h=t[a])||iy(h))return yk;for(d=0;d<h.length&&d<5;d++)if(null!=(s=v(h[d])))return s}else if("original"===e){var g=t;for(d=0;d<g.length&&d<5;d++){var m,y=zw(m=g[d]);if(!Km(y))return yk;if(null!=(s=v(y[o])))return s}}function v(t){var e=Jm(t);return null!=t&&isFinite(t)&&""!==t?e?mk:yk:e&&"-"!==t?gk:void 0}return yk}var Sk=gy();var Ck=Yw();Yw();var Tk,Ik,kk,Mk=function(){function t(){}return t.prototype.getColorFromPalette=function(t,e,n){var i=Nw(this.get("color",!0)),r=this.get("colorLayer",!0);return function(t,e,n,i,r,o,s){var a=e(o=o||t),l=a.paletteIdx||0,u=a.paletteNameMap=a.paletteNameMap||{};if(u.hasOwnProperty(r))return u[r];var c=null!=s&&i?function(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i].length>e)return t[i];return t[n-1]}(i,s):n;if(!(c=c||n)||!c.length)return;var h=c[l];r&&(u[r]=h);return a.paletteIdx=(l+1)%c.length,h}(this,Ck,i,r,t,e,n)},t.prototype.clearColorPalette=function(){var t,e;(e=Ck)(t=this).paletteIdx=0,e(t).paletteNameMap={}},t}();var Dk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gm(e,t),e.prototype.init=function(t,e,n,i,r,o){i=i||{},this.option=null,this._theme=new EI(i),this._locale=new EI(r),this._optionManager=o},e.prototype.setOption=function(t,e,n){var i=Ek(e);this._optionManager.setOption(t,n,i),this._resetOption(null,i)},e.prototype.resetOption=function(t,e){return this._resetOption(t,Ek(e))},e.prototype._resetOption=function(t,e){var n=!1,i=this._optionManager;if(!t||"recreate"===t){var r=i.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this._mergeOption(r,e)):kk(this,r),n=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var o=i.getTimelineOption(this);o&&(n=!0,this._mergeOption(o,e))}if(!t||"recreate"===t||"media"===t){var s=i.getMediaOption(this);s.length&&Wm(s,(function(t){n=!0,this._mergeOption(t,e)}),this)}return n},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,e){var n=this.option,i=this._componentsMap,r=this._componentsCount,o=[],s=gy(),a=e&&e.replaceMergeMainTypeMap;vk(this).datasetMap=gy(),Wm(t,(function(t,e){null!=t&&(ck.hasClass(e)?e&&(o.push(e),s.set(e,!0)):n[e]=null==n[e]?Nm(t):Lm(n[e],t,!0))})),a&&a.each((function(t,e){ck.hasClass(e)&&!s.get(e)&&(o.push(e),s.set(e,!0))})),ck.topologicalTravel(o,ck.getAllClassMainTypes(),(function(e){var o=function(t,e,n){var i=Sk.get(e);if(!i)return n;var r=i(t);return r?n.concat(r):n}(this,e,Nw(t[e])),s=i.get(e),l=s?a&&a.get(e)?"replaceMerge":"normalMerge":"replaceAll",u=Uw(s,o,l);(function(t,e,n){Wm(t,(function(t){var i=t.newOption;ey(i)&&(t.keyInfo.mainType=e,t.keyInfo.subType=function(t,e,n,i){return e.type?e.type:n?n.subType:i.determineSubType(t,e)}(e,i,t.existing,n))}))})(u,e,ck),n[e]=null,i.set(e,null),r.set(e,0);var c=[],h=[],d=0;Wm(u,(function(t,n){var i=t.existing,r=t.newOption;if(r){var o="series"===e,s=ck.getClass(e,t.keyInfo.subType,!o);if(!s)return;if(i&&i.constructor===s)i.name=t.keyInfo.name,i.mergeOption(r,this),i.optionUpdated(r,!1);else{var a=Fm({componentIndex:n},t.keyInfo);Fm(i=new s(r,this,this,a),a),t.brandNew&&(i.__requireNewView=!0),i.init(r,this,this),i.optionUpdated(null,!0)}}else i&&(i.mergeOption({},this),i.optionUpdated({},!1));i?(c.push(i.option),h.push(i),d++):(c.push(void 0),h.push(void 0))}),this),n[e]=c,i.set(e,h),r.set(e,d),"series"===e&&Tk(this)}),this),this._seriesIndices||Tk(this)},e.prototype.getOption=function(){var t=Nm(this.option);return Wm(t,(function(e,n){if(ck.hasClass(n)){for(var i=Nw(e),r=i.length,o=!1,s=r-1;s>=0;s--)i[s]&&!qw(i[s])?o=!0:(i[s]=null,!o&&r--);i.length=r,t[n]=i}})),delete t["\0_ec_inner"],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,e){var n=this._componentsMap.get(t);if(n){var i=n[e||0];if(i)return i;if(null==e)for(var r=0;r<n.length;r++)if(n[r])return n[r]}},e.prototype.queryComponents=function(t){var e=t.mainType;if(!e)return[];var n,i=t.index,r=t.id,o=t.name,s=this._componentsMap.get(e);return s&&s.length?(null!=i?(n=[],Wm(Nw(i),(function(t){s[t]&&n.push(s[t])}))):n=null!=r?Pk("id",r,s):null!=o?Pk("name",o,s):Gm(s,(function(t){return!!t})),Ak(n,t)):[]},e.prototype.findComponents=function(t){var e,n,i,r,o,s=t.query,a=t.mainType,l=(n=a+"Index",i=a+"Id",r=a+"Name",!(e=s)||null==e[n]&&null==e[i]&&null==e[r]?null:{mainType:a,index:e[n],id:e[i],name:e[r]}),u=l?this.queryComponents(l):Gm(this._componentsMap.get(a),(function(t){return!!t}));return o=Ak(u,t),t.filter?Gm(o,t.filter):o},e.prototype.eachComponent=function(t,e,n){var i=this._componentsMap;if(Zm(t)){var r=e,o=t;i.each((function(t,e){for(var n=0;t&&n<t.length;n++){var i=t[n];i&&o.call(r,e,i,i.componentIndex)}}))}else for(var s=Jm(t)?i.get(t):ey(t)?this.findComponents(t):null,a=0;s&&a<s.length;a++){var l=s[a];l&&e.call(n,l,l.componentIndex)}},e.prototype.getSeriesByName=function(t){var e=Ww(t,null);return Gm(this._componentsMap.get("series"),(function(t){return!!t&&null!=e&&t.name===e}))},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return Gm(this._componentsMap.get("series"),(function(e){return!!e&&e.subType===t}))},e.prototype.getSeries=function(){return Gm(this._componentsMap.get("series"),(function(t){return!!t}))},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,e){Ik(this),Wm(this._seriesIndices,(function(n){var i=this._componentsMap.get("series")[n];t.call(e,i,n)}),this)},e.prototype.eachRawSeries=function(t,e){Wm(this._componentsMap.get("series"),(function(n){n&&t.call(e,n,n.componentIndex)}))},e.prototype.eachSeriesByType=function(t,e,n){Ik(this),Wm(this._seriesIndices,(function(i){var r=this._componentsMap.get("series")[i];r.subType===t&&e.call(n,r,i)}),this)},e.prototype.eachRawSeriesByType=function(t,e,n){return Wm(this.getSeriesByType(t),e,n)},e.prototype.isSeriesFiltered=function(t){return Ik(this),null==this._seriesIndicesMap.get(t.componentIndex)},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,e){Ik(this);var n=[];Wm(this._seriesIndices,(function(i){var r=this._componentsMap.get("series")[i];t.call(e,r,i)&&n.push(i)}),this),this._seriesIndices=n,this._seriesIndicesMap=gy(n)},e.prototype.restoreData=function(t){Tk(this);var e=this._componentsMap,n=[];e.each((function(t,e){ck.hasClass(e)&&n.push(e)})),ck.topologicalTravel(n,ck.getAllClassMainTypes(),(function(n){Wm(e.get(n),(function(e){!e||"series"===n&&function(t,e){if(e){var n=e.seriesIndex,i=e.seriesId,r=e.seriesName;return null!=n&&t.componentIndex!==n||null!=i&&t.id!==i||null!=r&&t.name!==r}}(e,t)||e.restoreData()}))}))},e.internalField=(Tk=function(t){var e=t._seriesIndices=[];Wm(t._componentsMap.get("series"),(function(t){t&&e.push(t.componentIndex)})),t._seriesIndicesMap=gy(e)},Ik=function(t){},void(kk=function(t,e){t.option={},t.option["\0_ec_inner"]=1,t._componentsMap=gy({series:[]}),t._componentsCount=gy();var n,i,r,o=e.aria;ey(o)&&null==o.enabled&&(o.enabled=!0),n=e,i=t._theme.option,r=n.color&&!n.colorLayer,Wm(i,(function(t,e){"colorLayer"===e&&r||ck.hasClass(e)||("object"==typeof t?n[e]=n[e]?Lm(n[e],t,!1):Nm(t):null==n[e]&&(n[e]=t))})),Lm(e,pk,!1),t._mergeOption(e,null)})),e}(EI);function Pk(t,e,n){if(Km(e)){var i=gy();return Wm(e,(function(t){null!=t&&(null!=Ww(t,null)&&i.set(t,!0))})),Gm(n,(function(e){return e&&i.get(e[t])}))}var r=Ww(e,null);return Gm(n,(function(e){return e&&null!=r&&e[t]===r}))}function Ak(t,e){return e.hasOwnProperty("subType")?Gm(t,(function(t){return t&&t.subType===e.subType})):t}function Ek(t){var e=gy();return t&&Wm(Nw(t.replaceMerge),(function(t){e.set(t,!0)})),{replaceMergeMainTypeMap:e}}Vm(Dk,Mk);var Ok=Dk,Rk=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],Nk=function(t){Wm(Rk,(function(e){this[e]=$m(t[e],t)}),this)},Lk={},Fk=function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(t,e){var n=[];Wm(Lk,(function(i,r){var o=i.create(t,e);n=n.concat(o||[])})),this._coordinateSystems=n},t.prototype.update=function(t,e){Wm(this._coordinateSystems,(function(n){n.update&&n.update(t,e)}))},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(t,e){Lk[t]=e},t.get=function(t){return Lk[t]},t}(),zk=/^(min|max)?(.+)$/;function Bk(t,e,n){var i={width:e,height:n,aspectratio:e/n},r=!0;return Wm(t,(function(t,e){var n=e.match(zk);if(n&&n[1]&&n[2]){var o=n[1],s=n[2].toLowerCase();(function(t,e,n){return"min"===n?t>=e:"max"===n?t<=e:t===e})(i[s],t,o)||(r=!1)}})),r}var Uk=function(){function t(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return t.prototype.setOption=function(t,e,n){t&&(Wm(Nw(t.series),(function(t){t&&t.data&&iy(t.data)&&dy(t.data)})),Wm(Nw(t.dataset),(function(t){t&&t.source&&iy(t.source)&&dy(t.source)}))),t=Nm(t);var i=this._optionBackup,r=function(t,e,n){var i,r,o=[],s=t.baseOption,a=t.timeline,l=t.options,u=t.media,c=!!t.media,h=!!(l||a||s&&s.timeline);s?(r=s).timeline||(r.timeline=a):((h||c)&&(t.options=t.media=null),r=t);c&&Km(u)&&Wm(u,(function(t){t&&t.option&&(t.query?o.push(t):i||(i=t))}));function d(t){Wm(e,(function(e){e(t,n)}))}return d(r),Wm(l,(function(t){return d(t)})),Wm(o,(function(t){return d(t.option)})),{baseOption:r,timelineOptions:l||[],mediaDefault:i,mediaList:o}}(t,e,!i);this._newBaseOption=r.baseOption,i?(r.timelineOptions.length&&(i.timelineOptions=r.timelineOptions),r.mediaList.length&&(i.mediaList=r.mediaList),r.mediaDefault&&(i.mediaDefault=r.mediaDefault)):this._optionBackup=r},t.prototype.mountOption=function(t){var e=this._optionBackup;return this._timelineOptions=e.timelineOptions,this._mediaList=e.mediaList,this._mediaDefault=e.mediaDefault,this._currentMediaIndices=[],Nm(t?e.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(t){var e,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(e=Nm(n[i.getCurrentIndex()]))}return e},t.prototype.getMediaOption=function(t){var e,n,i=this._api.getWidth(),r=this._api.getHeight(),o=this._mediaList,s=this._mediaDefault,a=[],l=[];if(!o.length&&!s)return l;for(var u=0,c=o.length;u<c;u++)Bk(o[u].query,i,r)&&a.push(u);return!a.length&&s&&(a=[-1]),a.length&&(e=a,n=this._currentMediaIndices,e.join(",")!==n.join(","))&&(l=jm(a,(function(t){return Nm(-1===t?s.option:o[t].option)}))),this._currentMediaIndices=a,l},t}(),Vk=Wm,Hk=ey,Wk=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function jk(t){var e=t&&t.itemStyle;if(e)for(var n=0,i=Wk.length;n<i;n++){var r=Wk[n],o=e.normal,s=e.emphasis;o&&o[r]&&(t[r]=t[r]||{},t[r].normal?Lm(t[r].normal,o[r]):t[r].normal=o[r],o[r]=null),s&&s[r]&&(t[r]=t[r]||{},t[r].emphasis?Lm(t[r].emphasis,s[r]):t[r].emphasis=s[r],s[r]=null)}}function qk(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var i=t[e].normal,r=t[e].emphasis;i&&(n?(t[e].normal=t[e].emphasis=null,zm(t[e],i)):t[e]=i),r&&(t.emphasis=t.emphasis||{},t.emphasis[e]=r,r.focus&&(t.emphasis.focus=r.focus),r.blurScope&&(t.emphasis.blurScope=r.blurScope))}}function Gk(t){qk(t,"itemStyle"),qk(t,"lineStyle"),qk(t,"areaStyle"),qk(t,"label"),qk(t,"labelLine"),qk(t,"upperLabel"),qk(t,"edgeLabel")}function Yk(t,e){var n=Hk(t)&&t[e],i=Hk(n)&&n.textStyle;if(i)for(var r=0,o=Fw.length;r<o;r++){var s=Fw[r];i.hasOwnProperty(s)&&(n[s]=i[s])}}function $k(t){t&&(Gk(t),Yk(t,"label"),t.emphasis&&Yk(t.emphasis,"label"))}function Xk(t){return Km(t)?t:t?[t]:[]}function Kk(t){return(Km(t)?t[0]:t)||{}}function Zk(t,e){Vk(Xk(t.series),(function(t){Hk(t)&&function(t){if(Hk(t)){jk(t),Gk(t),Yk(t,"label"),Yk(t,"upperLabel"),Yk(t,"edgeLabel"),t.emphasis&&(Yk(t.emphasis,"label"),Yk(t.emphasis,"upperLabel"),Yk(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(jk(e),$k(e));var n=t.markLine;n&&(jk(n),$k(n));var i=t.markArea;i&&$k(i);var r=t.data;if("graph"===t.type){r=r||t.nodes;var o=t.links||t.edges;if(o&&!iy(o))for(var s=0;s<o.length;s++)$k(o[s]);Wm(t.categories,(function(t){Gk(t)}))}if(r&&!iy(r))for(s=0;s<r.length;s++)$k(r[s]);if((e=t.markPoint)&&e.data){var a=e.data;for(s=0;s<a.length;s++)$k(a[s])}if((n=t.markLine)&&n.data){var l=n.data;for(s=0;s<l.length;s++)Km(l[s])?($k(l[s][0]),$k(l[s][1])):$k(l[s])}"gauge"===t.type?(Yk(t,"axisLabel"),Yk(t,"title"),Yk(t,"detail")):"treemap"===t.type?(qk(t.breadcrumb,"itemStyle"),Wm(t.levels,(function(t){Gk(t)}))):"tree"===t.type&&Gk(t.leaves)}}(t)}));var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),Vk(n,(function(e){Vk(Xk(t[e]),(function(t){t&&(Yk(t,"axisLabel"),Yk(t.axisPointer,"label"))}))})),Vk(Xk(t.parallel),(function(t){var e=t&&t.parallelAxisDefault;Yk(e,"axisLabel"),Yk(e&&e.axisPointer,"label")})),Vk(Xk(t.calendar),(function(t){qk(t,"itemStyle"),Yk(t,"dayLabel"),Yk(t,"monthLabel"),Yk(t,"yearLabel")})),Vk(Xk(t.radar),(function(t){Yk(t,"name"),t.name&&null==t.axisName&&(t.axisName=t.name,delete t.name),null!=t.nameGap&&null==t.axisNameGap&&(t.axisNameGap=t.nameGap,delete t.nameGap)})),Vk(Xk(t.geo),(function(t){Hk(t)&&($k(t),Vk(Xk(t.regions),(function(t){$k(t)})))})),Vk(Xk(t.timeline),(function(t){$k(t),qk(t,"label"),qk(t,"itemStyle"),qk(t,"controlStyle",!0);var e=t.data;Km(e)&&Wm(e,(function(t){ey(t)&&(qk(t,"label"),qk(t,"itemStyle"))}))})),Vk(Xk(t.toolbox),(function(t){qk(t,"iconStyle"),Vk(t.feature,(function(t){qk(t,"iconStyle")}))})),Yk(Kk(t.axisPointer),"label"),Yk(Kk(t.tooltip).axisPointer,"label")}function Jk(t){t&&Wm(Qk,(function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])}))}var Qk=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],tM=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],eM=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function nM(t){var e=t&&t.itemStyle;if(e)for(var n=0;n<eM.length;n++){var i=eM[n][1],r=eM[n][0];null!=e[i]&&(e[r]=e[i])}}function iM(t){t&&"edge"===t.alignTo&&null!=t.margin&&null==t.edgeDistance&&(t.edgeDistance=t.margin)}function rM(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function oM(t,e){if(t)for(var n=0;n<t.length;n++)e(t[n]),t[n]&&oM(t[n].children,e)}function sM(t,e){Zk(t,e),t.series=Nw(t.series),Wm(t.series,(function(t){if(ey(t)){var e=t.type;if("line"===e)null!=t.clipOverflow&&(t.clip=t.clipOverflow);else if("pie"===e||"gauge"===e){if(null!=t.clockWise&&(t.clockwise=t.clockWise),iM(t.label),(r=t.data)&&!iy(r))for(var n=0;n<r.length;n++)iM(r[n]);null!=t.hoverOffset&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if("gauge"===e){var i=function(t,e){for(var n=e.split(","),i=t,r=0;r<n.length&&null!=(i=i&&i[n[r]]);r++);return i}(t,"pointer.color");null!=i&&function(t,e,n,i){for(var r,o=e.split(","),s=t,a=0;a<o.length-1;a++)null==s[r=o[a]]&&(s[r]={}),s=s[r];(i||null==s[o[a]])&&(s[o[a]]=n)}(t,"itemStyle.color",i)}else if("bar"===e){var r;if(nM(t),nM(t.backgroundStyle),nM(t.emphasis),(r=t.data)&&!iy(r))for(n=0;n<r.length;n++)"object"==typeof r[n]&&(nM(r[n]),nM(r[n]&&r[n].emphasis))}else if("sunburst"===e){var o=t.highlightPolicy;o&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=o)),rM(t),oM(t.data,rM)}else"graph"===e||"sankey"===e?function(t){t&&null!=t.focusNodeAdjacency&&(t.emphasis=t.emphasis||{},null==t.emphasis.focus&&(t.emphasis.focus="adjacency"))}(t):"map"===e&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&zm(t,t.mapLocation));null!=t.hoverAnimation&&(t.emphasis=t.emphasis||{},t.emphasis&&null==t.emphasis.scale&&(t.emphasis.scale=t.hoverAnimation)),Jk(t)}})),t.dataRange&&(t.visualMap=t.dataRange),Wm(tM,(function(e){var n=t[e];n&&(Km(n)||(n=[n]),Wm(n,(function(t){Jk(t)})))}))}function aM(t){Wm(t,(function(e,n){var i=[],r=[NaN,NaN],o=[e.stackResultDimension,e.stackedOverDimension],s=e.data,a=e.isStackedByIndex;s.modify(o,(function(o,l,u){var c,h,d=s.get(e.stackedDimension,u);if(isNaN(d))return r;a?h=s.getRawIndex(u):c=s.get(e.stackedByDimension,u);for(var p=NaN,f=n-1;f>=0;f--){var g=t[f];if(a||(h=g.data.rawIndexOf(g.stackedByDimension,c)),h>=0){var m=g.data.getByRawIndex(g.stackResultDimension,h);if(d>=0&&m>0||d<=0&&m<0){d=Tw(d,m),p=m;break}}}return i[0]=d,i[1]=p,i}))}))}var lM,uM,cM,hM,dM,pM=function(t){this.data=t.data||("keyedColumns"===t.sourceFormat?{}:[]),this.sourceFormat=t.sourceFormat||"unknown",this.seriesLayoutBy=t.seriesLayoutBy||"column",this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var e=this.dimensionsDefine=t.dimensionsDefine;if(e)for(var n=0;n<e.length;n++){var i=e[n];null==i.type&&bk(this,n)===gk&&(i.type="ordinal")}};function fM(t){return t instanceof pM}function gM(t,e,n){n=n||yM(t);var i=e.seriesLayoutBy,r=function(t,e,n,i,r){var o,s;if(!t)return{dimensionsDefine:vM(r),startIndex:s,dimensionsDetectedCount:o};if("arrayRows"===e){var a=t;"auto"===i||null==i?_M((function(t){null!=t&&"-"!==t&&(Jm(t)?null==s&&(s=1):s=0)}),n,a,10):s=ty(i)?i:i?1:0,r||1!==s||(r=[],_M((function(t,e){r[e]=null!=t?t+"":""}),n,a,1/0)),o=r?r.length:"row"===n?a.length:a[0]?a[0].length:null}else if("objectRows"===e)r||(r=function(t){var e,n=0;for(;n<t.length&&!(e=t[n++]););if(e){var i=[];return Wm(e,(function(t,e){i.push(e)})),i}}(t));else if("keyedColumns"===e)r||(r=[],Wm(t,(function(t,e){r.push(e)})));else if("original"===e){var l=zw(t[0]);o=Km(l)&&l.length||1}return{startIndex:s,dimensionsDefine:vM(r),dimensionsDetectedCount:o}}(t,n,i,e.sourceHeader,e.dimensions);return new pM({data:t,sourceFormat:n,seriesLayoutBy:i,dimensionsDefine:r.dimensionsDefine,startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount,metaRawOption:Nm(e)})}function mM(t){return new pM({data:t,sourceFormat:iy(t)?"typedArray":"original"})}function yM(t){var e="unknown";if(iy(t))e="typedArray";else if(Km(t)){0===t.length&&(e="arrayRows");for(var n=0,i=t.length;n<i;n++){var r=t[n];if(null!=r){if(Km(r)){e="arrayRows";break}if(ey(r)){e="objectRows";break}}}}else if(ey(t))for(var o in t)if(yy(t,o)&&Hm(t[o])){e="keyedColumns";break}return e}function vM(t){if(t){var e=gy();return jm(t,(function(t,n){var i={name:(t=ey(t)?t:{name:t}).name,displayName:t.displayName,type:t.type};if(null==i.name)return i;i.name+="",null==i.displayName&&(i.displayName=i.name);var r=e.get(i.name);return r?i.name+="-"+r.count++:e.set(i.name,{count:1}),i}))}}function _M(t,e,n,i){if("row"===e)for(var r=0;r<n.length&&r<i;r++)t(n[r]?n[r][0]:null,r);else{var o=n[0]||[];for(r=0;r<o.length&&r<i;r++)t(o[r],r)}}function wM(t){var e=t.sourceFormat;return"objectRows"===e||"keyedColumns"===e}var bM=function(){function t(t,e){var n=fM(t)?t:mM(t);this._source=n;var i=this._data=n.data;"typedArray"===n.sourceFormat&&(this._offset=0,this._dimSize=e,this._data=i),dM(this,i,n)}var e;return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(t,e){},t.prototype.appendData=function(t){},t.prototype.clean=function(){},t.protoInitialize=((e=t.prototype).pure=!1,void(e.persistent=!0)),t.internalField=function(){var t;dM=function(t,r,o){var s=o.sourceFormat,a=o.seriesLayoutBy,l=o.startIndex,u=o.dimensionsDefine;if(Fm(t,hM[AM(s,a)]),"typedArray"===s)t.getItem=e,t.count=i,t.fillStorage=n;else{var c=CM(s,a);t.getItem=$m(c,null,r,l,u);var h=kM(s,a);t.count=$m(h,null,r,l,u)}};var e=function(t,e){t-=this._offset,e=e||[];for(var n=this._data,i=this._dimSize,r=i*t,o=0;o<i;o++)e[o]=n[r+o];return e},n=function(t,e,n,i){for(var r=this._data,o=this._dimSize,s=0;s<o;s++){for(var a=i[s],l=null==a[0]?1/0:a[0],u=null==a[1]?-1/0:a[1],c=e-t,h=n[s],d=0;d<c;d++){var p=r[d*o+s];h[t+d]=p,p<l&&(l=p),p>u&&(u=p)}a[0]=l,a[1]=u}},i=function(){return this._data?this._data.length/this._dimSize:0};function r(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}(t={}).arrayRows_column={pure:!0,appendData:r},t.arrayRows_row={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t.objectRows={pure:!0,appendData:r},t.keyedColumns={pure:!0,appendData:function(t){var e=this._data;Wm(t,(function(t,n){for(var i=e[n]||(e[n]=[]),r=0;r<(t||[]).length;r++)i.push(t[r])}))}},t.original={appendData:r},t.typedArray={persistent:!1,pure:!0,appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}},hM=t}(),t}(),xM=function(t,e,n,i){return t[i]},SM=((lM={}).arrayRows_column=function(t,e,n,i){return t[i+e]},lM.arrayRows_row=function(t,e,n,i,r){i+=e;for(var o=r||[],s=t,a=0;a<s.length;a++){var l=s[a];o[a]=l?l[i]:null}return o},lM.objectRows=xM,lM.keyedColumns=function(t,e,n,i,r){for(var o=r||[],s=0;s<n.length;s++){var a=t[n[s].name];o[s]=a?a[i]:null}return o},lM.original=xM,lM);function CM(t,e){return SM[AM(t,e)]}var TM=function(t,e,n){return t.length},IM=((uM={}).arrayRows_column=function(t,e,n){return Math.max(0,t.length-e)},uM.arrayRows_row=function(t,e,n){var i=t[0];return i?Math.max(0,i.length-e):0},uM.objectRows=TM,uM.keyedColumns=function(t,e,n){var i=t[n[0].name];return i?i.length:0},uM.original=TM,uM);function kM(t,e){return IM[AM(t,e)]}var MM=function(t,e,n){return t[e]},DM=((cM={}).arrayRows=MM,cM.objectRows=function(t,e,n){return t[n]},cM.keyedColumns=MM,cM.original=function(t,e,n){var i=zw(t);return i instanceof Array?i[e]:i},cM.typedArray=MM,cM);function PM(t){return DM[t]}function AM(t,e){return"arrayRows"===t?t+"_"+e:t}function EM(t,e,n){if(t){var i=t.getRawDataItem(e);if(null!=i){var r=t.getStore(),o=r.getSource().sourceFormat;if(null!=n){var s=t.getDimensionIndex(n),a=r.getDimensionProperty(s);return PM(o)(i,s,a)}var l=i;return"original"===o&&(l=zw(i)),l}}}var OM=/\{@(.+?)\}/g,RM=function(){function t(){}return t.prototype.getDataParams=function(t,e){var n=this.getData(e),i=this.getRawValue(t,e),r=n.getRawIndex(t),o=n.getName(t),s=n.getRawDataItem(t),a=n.getItemVisual(t,"style"),l=a&&a[n.getItemVisual(t,"drawType")||"fill"],u=a&&a.stroke,c=this.mainType,h="series"===c,d=n.userOutput&&n.userOutput.get();return{componentType:c,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:o,dataIndex:r,data:s,dataType:e,value:i,color:l,borderColor:u,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(t,e,n,i,r,o){e=e||"normal";var s=this.getData(n),a=this.getDataParams(t,n);(o&&(a.value=o.interpolatedValue),null!=i&&Km(a.value)&&(a.value=a.value[i]),r)||(r=s.getItemModel(t).get("normal"===e?["label","formatter"]:[e,"label","formatter"]));return"function"==typeof r?(a.status=e,a.dimensionIndex=i,r(a)):"string"==typeof r?KI(r,a).replace(OM,(function(e,n){var i=n.length,r=n;"["===r.charAt(0)&&"]"===r.charAt(i-1)&&(r=+r.slice(1,i-1));var a=EM(s,t,r);if(o&&Km(o.interpolatedValue)){var l=s.getDimensionIndex(r);l>=0&&(a=o.interpolatedValue[l])}return null!=a?a+"":""})):void 0},t.prototype.getRawValue=function(t,e){return EM(this.getData(e),t)},t.prototype.formatTooltip=function(t,e,n){},t}();function NM(t){var e,n;return ey(t)?t.type&&(n=t):e=t,{markupText:e,markupFragment:n}}function LM(t){return new FM(t)}var FM=function(){function t(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return t.prototype.perform=function(t){var e,n=this._upstream,i=t&&t.skip;if(this._dirty&&n){var r=this.context;r.data=r.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!i&&(e=this._plan(this.context));var o,s=c(this._modBy),a=this._modDataCount||0,l=c(t&&t.modBy),u=t&&t.modDataCount||0;function c(t){return!(t>=1)&&(t=1),t}s===l&&a===u||(e="reset"),(this._dirty||"reset"===e)&&(this._dirty=!1,o=this._doReset(i)),this._modBy=l,this._modDataCount=u;var h=t&&t.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(null!=h?this._dueIndex+h:1/0,this._dueEnd);if(!i&&(o||d<p)){var f=this._progress;if(Km(f))for(var g=0;g<f.length;g++)this._doProgress(f[g],d,p,l,u);else this._doProgress(f,d,p,l,u)}this._dueIndex=p;var m=null!=this._settedOutputEnd?this._settedOutputEnd:p;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(t,e,n,i,r){zM.reset(e,n,i,r),this._callingProgress=t,this._callingProgress({start:e,end:n,count:n-e,next:zM.next},this.context)},t.prototype._doReset=function(t){var e,n;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!t&&this._reset&&((e=this._reset(this.context))&&e.progress&&(n=e.forceFirstProgress,e=e.progress),Km(e)&&!e.length&&(e=null)),this._progress=e,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},t}(),zM=function(){var t,e,n,i,r,o={reset:function(l,u,c,h){e=l,t=u,n=c,i=h,r=Math.ceil(i/n),o.next=n>1&&i>0?a:s}};return o;function s(){return e<t?e++:null}function a(){var o=e%r*n+Math.ceil(e/r),s=e>=t?null:o<i?o:e;return e++,s}}();function BM(t,e){var n=e&&e.type;return"ordinal"===n?t:("time"===n&&"number"!=typeof t&&null!=t&&"-"!==t&&(t=+Dw(t)),null==t||""===t?NaN:+t)}gy({number:function(t){return parseFloat(t)},time:function(t){return+Dw(t)},trim:function(t){return"string"==typeof t?hy(t):t}});var UM=function(){function t(t,e){var n="desc"===t;this._resultLT=n?1:-1,null==e&&(e=n?"min":"max"),this._incomparable="min"===e?-1/0:1/0}return t.prototype.evaluate=function(t,e){var n=typeof t,i=typeof e,r="number"===n?t:Pw(t),o="number"===i?e:Pw(e),s=isNaN(r),a=isNaN(o);if(s&&(r=this._incomparable),a&&(o=this._incomparable),s&&a){var l="string"===n,u="string"===i;l&&(r=u?t:0),u&&(o=l?e:0)}return r<o?this._resultLT:r>o?-this._resultLT:0},t}(),VM=function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(t){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(t){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(t,e){},t.prototype.retrieveValueFromItem=function(t,e){},t.prototype.convertValue=function(t,e){return BM(t,e)},t}();function HM(t){if(!$M(t.sourceFormat)){Rw("")}return t.data}function WM(t){var e=t.sourceFormat,n=t.data;if(!$M(e)){Rw("")}if("arrayRows"===e){for(var i=[],r=0,o=n.length;r<o;r++)i.push(n[r].slice());return i}if("objectRows"===e){for(i=[],r=0,o=n.length;r<o;r++)i.push(Fm({},n[r]));return i}}function jM(t,e,n){if(null!=n)return"number"==typeof n||!isNaN(n)&&!yy(e,n)?t[n]:yy(e,n)?e[n]:void 0}function qM(t){return Nm(t)}var GM=gy();function YM(t,e,n,i){e.length||Rw(""),ey(t)||Rw("");var r=t.type,o=GM.get(r);o||Rw("");var s=jm(e,(function(t){return function(t,e){var n=new VM,i=t.data,r=n.sourceFormat=t.sourceFormat,o=t.startIndex;"column"!==t.seriesLayoutBy&&Rw("");var s=[],a={},l=t.dimensionsDefine;if(l)Wm(l,(function(t,e){var n=t.name,i={index:e,name:n,displayName:t.displayName};s.push(i),null!=n&&(yy(a,n)&&Rw(""),a[n]=i)}));else for(var u=0;u<t.dimensionsDetectedCount;u++)s.push({index:u});var c=CM(r,"column");e.__isBuiltIn&&(n.getRawDataItem=function(t){return c(i,o,s,t)},n.getRawData=$m(HM,null,t)),n.cloneRawData=$m(WM,null,t);var h=kM(r,"column");n.count=$m(h,null,i,o,s);var d=PM(r);n.retrieveValue=function(t,e){var n=c(i,o,s,t);return p(n,e)};var p=n.retrieveValueFromItem=function(t,e){if(null!=t){var n=s[e];return n?d(t,e,n.name):void 0}};return n.getDimensionInfo=$m(jM,null,s,a),n.cloneAllDimensionInfo=$m(qM,null,s),n}(t,o)}));return jm(Nw(o.transform({upstream:s[0],upstreamList:s,config:Nm(t.config)})),(function(t,n){var i;ey(t)||Rw(""),t.data||Rw(""),$M(yM(t.data))||Rw("");var r=e[0];if(r&&0===n&&!t.dimensions){var o=r.startIndex;o&&(t.data=r.data.slice(0,o).concat(t.data)),i={seriesLayoutBy:"column",sourceHeader:o,dimensions:r.metaRawOption.dimensions}}else i={seriesLayoutBy:"column",sourceHeader:0,dimensions:t.dimensions};return gM(t.data,i,null)}))}function $M(t){return"arrayRows"===t||"objectRows"===t}var XM,KM="undefined"==typeof Uint32Array?Array:Uint32Array,ZM="undefined"==typeof Uint16Array?Array:Uint16Array,JM="undefined"==typeof Int32Array?Array:Int32Array,QM="undefined"==typeof Float64Array?Array:Float64Array,tD={float:QM,int:JM,ordinal:Array,number:Array,time:QM};function eD(t){return t>65535?KM:ZM}function nD(t,e,n,i,r){var o=tD[n||"float"];if(r){var s=t[e],a=s&&s.length;if(a!==i){for(var l=new o(i),u=0;u<a;u++)l[u]=s[u];t[e]=l}}else t[e]=new o(i)}var iD=function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=gy()}return t.prototype.initData=function(t,e,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),r=this.defaultDimValueGetter=XM[i.sourceFormat];this._dimValueGetter=n||r,this._rawExtent=[],wM(i),this._dimensions=jm(e,(function(t){return{type:t.type,property:t.property}})),this._initDataFromProvider(0,t.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(t,e){var n=this._calcDimNameToIdx,i=this._dimensions,r=n.get(t);if(null!=r){if(i[r].type===e)return r}else r=i.length;return i[r]={type:e},n.set(t,r),this._chunks[r]=new tD[e||"float"](this._rawCount),this._rawExtent[r]=[1/0,-1/0],r},t.prototype.collectOrdinalMeta=function(t,e){var n=this._chunks[t],i=this._dimensions[t],r=this._rawExtent,o=i.ordinalOffset||0,s=n.length;0===o&&(r[t]=[1/0,-1/0]);for(var a=r[t],l=o;l<s;l++){var u=n[l]=e.parseAndCollect(n[l]);a[0]=Math.min(u,a[0]),a[1]=Math.max(u,a[1])}i.ordinalMeta=e,i.ordinalOffset=s,i.type="ordinal"},t.prototype.getOrdinalMeta=function(t){return this._dimensions[t].ordinalMeta},t.prototype.getDimensionProperty=function(t){var e=this._dimensions[t];return e&&e.property},t.prototype.appendData=function(t){var e=this._provider,n=this.count();e.appendData(t);var i=e.count();return e.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},t.prototype.appendValues=function(t,e){for(var n=this._chunks,i=this._dimensions,r=i.length,o=this._rawExtent,s=this.count(),a=s+Math.max(t.length,e||0),l=0;l<r;l++){nD(n,l,(p=i[l]).type,a,!0)}for(var u=[],c=s;c<a;c++)for(var h=c-s,d=0;d<r;d++){var p=i[d],f=XM.arrayRows.call(this,t[h]||u,p.property,h,d);n[d][c]=f;var g=o[d];f<g[0]&&(g[0]=f),f>g[1]&&(g[1]=f)}return this._rawCount=this._count=a,{start:s,end:a}},t.prototype._initDataFromProvider=function(t,e,n){for(var i=this._provider,r=this._chunks,o=this._dimensions,s=o.length,a=this._rawExtent,l=jm(o,(function(t){return t.property})),u=0;u<s;u++){var c=o[u];a[u]||(a[u]=[1/0,-1/0]),nD(r,u,c.type,e,n)}if(i.fillStorage)i.fillStorage(t,e,r,a);else for(var h=[],d=t;d<e;d++){h=i.getItem(d,h);for(var p=0;p<s;p++){var f=r[p],g=this._dimValueGetter(h,l[p],d,p);f[d]=g;var m=a[p];g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=e,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(e)]:NaN},t.prototype.getValues=function(t,e){var n=[],i=[];if(null==e){e=t,t=[];for(var r=0;r<this._dimensions.length;r++)i.push(r)}else i=t;r=0;for(var o=i.length;r<o;r++)n.push(this.get(i[r],e));return n},t.prototype.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var n=this._chunks[t];return n?n[e]:NaN},t.prototype.getSum=function(t){var e=0;if(this._chunks[t])for(var n=0,i=this.count();n<i;n++){var r=this.get(t,n);isNaN(r)||(e+=r)}return e},t.prototype.getMedian=function(t){var e=[];this.each([t],(function(t){isNaN(t)||e.push(t)}));var n=e.sort((function(t,e){return t-e})),i=this.count();return 0===i?0:i%2==1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},t.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,n=e[t];if(null!=n&&n<this._count&&n===t)return t;for(var i=0,r=this._count-1;i<=r;){var o=(i+r)/2|0;if(e[o]<t)i=o+1;else{if(!(e[o]>t))return o;r=o-1}}return-1},t.prototype.indicesOfNearest=function(t,e,n){var i=this._chunks[t],r=[];if(!i)return r;null==n&&(n=1/0);for(var o=1/0,s=-1,a=0,l=0,u=this.count();l<u;l++){var c=e-i[this.getRawIndex(l)],h=Math.abs(c);h<=n&&((h<o||h===o&&c>=0&&s<0)&&(o=h,s=c,a=0),c===s&&(r[a++]=l))}return r.length=a,r},t.prototype.getIndices=function(){var t,e=this._indices;if(e){var n=e.constructor,i=this._count;if(n===Array){t=new n(i);for(var r=0;r<i;r++)t[r]=e[r]}else t=new n(e.buffer,0,i)}else{t=new(n=eD(this._rawCount))(this.count());for(r=0;r<t.length;r++)t[r]=r}return t},t.prototype.filter=function(t,e){if(!this._count)return this;for(var n=this.clone(),i=n.count(),r=new(eD(n._rawCount))(i),o=[],s=t.length,a=0,l=t[0],u=n._chunks,c=0;c<i;c++){var h=void 0,d=n.getRawIndex(c);if(0===s)h=e(c);else if(1===s){h=e(u[l][d],c)}else{for(var p=0;p<s;p++)o[p]=u[t[p]][d];o[p]=c,h=e.apply(null,o)}h&&(r[a++]=d)}return a<i&&(n._indices=r),n._count=a,n._extent=[],n._updateGetRawIdx(),n},t.prototype.selectRange=function(t){var e=this.clone(),n=e._count;if(!n)return this;var i=Ym(t),r=i.length;if(!r)return this;var o=e.count(),s=new(eD(e._rawCount))(o),a=0,l=i[0],u=t[l][0],c=t[l][1],h=e._chunks,d=!1;if(!e._indices){var p=0;if(1===r){for(var f=h[i[0]],g=0;g<n;g++){((_=f[g])>=u&&_<=c||isNaN(_))&&(s[a++]=p),p++}d=!0}else if(2===r){f=h[i[0]];var m=h[i[1]],y=t[i[1]][0],v=t[i[1]][1];for(g=0;g<n;g++){var _=f[g],w=m[g];(_>=u&&_<=c||isNaN(_))&&(w>=y&&w<=v||isNaN(w))&&(s[a++]=p),p++}d=!0}}if(!d)if(1===r)for(g=0;g<o;g++){var b=e.getRawIndex(g);((_=h[i[0]][b])>=u&&_<=c||isNaN(_))&&(s[a++]=b)}else for(g=0;g<o;g++){for(var x=!0,S=(b=e.getRawIndex(g),0);S<r;S++){var C=i[S];((_=h[C][b])<t[C][0]||_>t[C][1])&&(x=!1)}x&&(s[a++]=e.getRawIndex(g))}return a<o&&(e._indices=s),e._count=a,e._extent=[],e._updateGetRawIdx(),e},t.prototype.map=function(t,e){var n=this.clone(t);return this._updateDims(n,t,e),n},t.prototype.modify=function(t,e){this._updateDims(this,t,e)},t.prototype._updateDims=function(t,e,n){for(var i=t._chunks,r=[],o=e.length,s=t.count(),a=[],l=t._rawExtent,u=0;u<e.length;u++)l[e[u]]=[1/0,-1/0];for(var c=0;c<s;c++){for(var h=t.getRawIndex(c),d=0;d<o;d++)a[d]=i[e[d]][h];a[o]=c;var p=n&&n.apply(null,a);if(null!=p){"object"!=typeof p&&(r[0]=p,p=r);for(u=0;u<p.length;u++){var f=e[u],g=p[u],m=l[f],y=i[f];y&&(y[h]=g),g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}}},t.prototype.lttbDownSample=function(t,e){var n,i,r,o=this.clone([t],!0),s=o._chunks[t],a=this.count(),l=0,u=Math.floor(1/e),c=this.getRawIndex(0),h=new(eD(this._rawCount))(Math.ceil(a/u)+2);h[l++]=c;for(var d=1;d<a-1;d+=u){for(var p=Math.min(d+u,a-1),f=Math.min(d+2*u,a),g=(f+p)/2,m=0,y=p;y<f;y++){var v=s[S=this.getRawIndex(y)];isNaN(v)||(m+=v)}m/=f-p;var _=d,w=Math.min(d+u,a),b=d-1,x=s[c];n=-1,r=_;for(y=_;y<w;y++){var S;v=s[S=this.getRawIndex(y)];isNaN(v)||(i=Math.abs((b-g)*(v-x)-(b-y)*(m-x)))>n&&(n=i,r=S)}h[l++]=r,c=r}return h[l++]=this.getRawIndex(a-1),o._count=l,o._indices=h,o.getRawIndex=this._getRawIdx,o},t.prototype.downSample=function(t,e,n,i){for(var r=this.clone([t],!0),o=r._chunks,s=[],a=Math.floor(1/e),l=o[t],u=this.count(),c=r._rawExtent[t]=[1/0,-1/0],h=new(eD(this._rawCount))(Math.ceil(u/a)),d=0,p=0;p<u;p+=a){a>u-p&&(a=u-p,s.length=a);for(var f=0;f<a;f++){var g=this.getRawIndex(p+f);s[f]=l[g]}var m=n(s),y=this.getRawIndex(Math.min(p+i(s,m)||0,u-1));l[y]=m,m<c[0]&&(c[0]=m),m>c[1]&&(c[1]=m),h[d++]=y}return r._count=d,r._indices=h,r._updateGetRawIdx(),r},t.prototype.each=function(t,e){if(this._count)for(var n=t.length,i=this._chunks,r=0,o=this.count();r<o;r++){var s=this.getRawIndex(r);switch(n){case 0:e(r);break;case 1:e(i[t[0]][s],r);break;case 2:e(i[t[0]][s],i[t[1]][s],r);break;default:for(var a=0,l=[];a<n;a++)l[a]=i[t[a]][s];l[a]=r,e.apply(null,l)}}},t.prototype.getDataExtent=function(t){var e=this._chunks[t],n=[1/0,-1/0];if(!e)return n;var i,r=this.count();if(!this._indices)return this._rawExtent[t].slice();if(i=this._extent[t])return i.slice();for(var o=(i=n)[0],s=i[1],a=0;a<r;a++){var l=e[this.getRawIndex(a)];l<o&&(o=l),l>s&&(s=l)}return i=[o,s],this._extent[t]=i,i},t.prototype.getRawDataItem=function(t){var e=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(e);for(var n=[],i=this._chunks,r=0;r<i.length;r++)n.push(i[r][e]);return n},t.prototype.clone=function(e,n){var i,r,o=new t,s=this._chunks,a=e&&qm(e,(function(t,e){return t[e]=!0,t}),{});if(a)for(var l=0;l<s.length;l++)o._chunks[l]=a[l]?(i=s[l],r=void 0,(r=i.constructor)===Array?i.slice():new r(i)):s[l];else o._chunks=s;return this._copyCommonProps(o),n||(o._indices=this._cloneIndices()),o._updateGetRawIdx(),o},t.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=Nm(this._extent),t._rawExtent=Nm(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,e=void 0;if(t===Array){var n=this._indices.length;e=new t(n);for(var i=0;i<n;i++)e[i]=this._indices[i]}else e=new t(this._indices);return e}return null},t.prototype._getRawIdxIdentity=function(t){return t},t.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=function(){function t(t,e,n,i){return BM(t[i],this._dimensions[i])}XM={arrayRows:t,objectRows:function(t,e,n,i){return BM(t[e],this._dimensions[i])},keyedColumns:t,original:function(t,e,n,i){var r=t&&(null==t.value?t:t.value);return BM(r instanceof Array?r[i]:r,this._dimensions[i])},typedArray:function(t,e,n,i){return t[i]}}}(),t}(),rD=function(){function t(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(t,e){this._sourceList=t,this._upstreamSignList=e,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var t,e,n=this._sourceHost,i=this._getUpstreamSourceManagers(),r=!!i.length;if(oD(n)){var o=n,s=void 0,a=void 0,l=void 0;if(r){var u=i[0];u.prepareSource(),s=(l=u.getSource()).data,a=l.sourceFormat,e=[u._getVersionSign()]}else a=iy(s=o.get("data",!0))?"typedArray":"original",e=[];var c=this._getSourceMetaRawOption()||{},h=l&&l.metaRawOption||{},d=sy(c.seriesLayoutBy,h.seriesLayoutBy)||null,p=sy(c.sourceHeader,h.sourceHeader)||null,f=sy(c.dimensions,h.dimensions);t=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||f?[gM(s,{seriesLayoutBy:d,sourceHeader:p,dimensions:f},a)]:[]}else{var g=n;if(r){var m=this._applyTransform(i);t=m.sourceList,e=m.upstreamSignList}else{t=[gM(g.get("source",!0),this._getSourceMetaRawOption(),null)],e=[]}}this._setLocalSource(t,e)},t.prototype._applyTransform=function(t){var e,n=this._sourceHost,i=n.get("transform",!0),r=n.get("fromTransformResult",!0);if(null!=r){1!==t.length&&sD("")}var o,s=[],a=[];return Wm(t,(function(t){t.prepareSource();var e=t.getSource(r||0);null==r||e||sD(""),s.push(e),a.push(t._getVersionSign())})),i?e=function(t,e,n){var i=Nw(t),r=i.length;r||Rw("");for(var o=0,s=r;o<s;o++)e=YM(i[o],e),o!==s-1&&(e.length=Math.max(e.length,1));return e}(i,s,n.componentIndex):null!=r&&(e=[(o=s[0],new pM({data:o.data,sourceFormat:o.sourceFormat,seriesLayoutBy:o.seriesLayoutBy,dimensionsDefine:Nm(o.dimensionsDefine),startIndex:o.startIndex,dimensionsDetectedCount:o.dimensionsDetectedCount}))]),{sourceList:e,upstreamSignList:a}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),e=0;e<t.length;e++){var n=t[e];if(n._isDirty()||this._upstreamSignList[e]!==n._getVersionSign())return!0}},t.prototype.getSource=function(t){t=t||0;var e=this._sourceList[t];if(!e){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return e},t.prototype.getSharedDataStore=function(t){var e=t.makeStoreSchema();return this._innerGetDataStore(e.dimensions,t.source,e.hash)},t.prototype._innerGetDataStore=function(t,e,n){var i=this._storeList,r=i[0];r||(r=i[0]={});var o=r[n];if(!o){var s=this._getUpstreamSourceManagers()[0];oD(this._sourceHost)&&s?o=s._innerGetDataStore(t,e,n):(o=new iD).initData(new bM(e,t.length),t),r[n]=o}return o},t.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(oD(t)){var e=wk(t);return e?[e.getSourceManager()]:[]}return jm(function(t){return t.get("transform",!0)||t.get("fromTransformResult",!0)?Jw(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},Zw).models:[]}(t),(function(t){return t.getSourceManager()}))},t.prototype._getSourceMetaRawOption=function(){var t,e,n,i=this._sourceHost;if(oD(i))t=i.get("seriesLayoutBy",!0),e=i.get("sourceHeader",!0),n=i.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var r=i;t=r.get("seriesLayoutBy",!0),e=r.get("sourceHeader",!0),n=r.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:e,dimensions:n}},t}();function oD(t){return"series"===t.mainType}function sD(t){throw new Error(t)}function aD(t,e){var n=t.color||"#6e7079",i=t.fontSize||12,r=t.fontWeight||"400",o=t.color||"#464646",s=t.fontSize||14,a=t.fontWeight||"900";return"html"===e?{nameStyle:"font-size:"+GI(i+"")+"px;color:"+GI(n)+";font-weight:"+GI(r+""),valueStyle:"font-size:"+GI(s+"")+"px;color:"+GI(o)+";font-weight:"+GI(a+"")}:{nameStyle:{fontSize:i,fill:n,fontWeight:r},valueStyle:{fontSize:s,fill:o,fontWeight:a}}}var lD=[0,10,20,30],uD=["","\n","\n\n","\n\n\n"];function cD(t,e){return e.type=t,e}function hD(t){return yy(dD,t.type)&&dD[t.type]}var dD={section:{planLayout:function(t){var e=t.blocks.length,n=e>1||e>0&&!t.noHeader,i=0;Wm(t.blocks,(function(t){hD(t).planLayout(t);var e=t.__gapLevelBetweenSubBlocks;e>=i&&(i=e+(!n||e&&("section"!==t.type||t.noHeader)?0:1))})),t.__gapLevelBetweenSubBlocks=i},build:function(t,e,n,i){var r=e.noHeader,o=fD(e),s=function(t,e,n,i){var r=[],o=e.blocks||[];cy(!o||Km(o)),o=o||[];var s=t.orderMode;if(e.sortBlocks&&s){o=o.slice();var a={valueAsc:"asc",valueDesc:"desc"};if(yy(a,s)){var l=new UM(a[s],null);o.sort((function(t,e){return l.evaluate(t.sortParam,e.sortParam)}))}else"seriesDesc"===s&&o.reverse()}var u=fD(e);if(Wm(o,(function(e,n){var o=hD(e).build(t,e,n>0?u.html:0,i);null!=o&&r.push(o)})),!r.length)return;return"richText"===t.renderMode?r.join(u.richText):gD(r.join(""),n)}(t,e,r?n:o.html,i);if(r)return s;var a=YI(e.header,"ordinal",t.useUTC),l=aD(i,t.renderMode).nameStyle;return"richText"===t.renderMode?mD(t,a,l)+o.richText+s:gD('<div style="'+l+';line-height:1;">'+GI(a)+"</div>"+s,n)}},nameValue:{planLayout:function(t){t.__gapLevelBetweenSubBlocks=0},build:function(t,e,n,i){var r=t.renderMode,o=e.noName,s=e.noValue,a=!e.markerType,l=e.name,u=e.value,c=t.useUTC;if(!o||!s){var h=a?"":t.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",r),d=o?"":YI(l,"ordinal",c),p=e.valueType,f=s?[]:Km(u)?jm(u,(function(t,e){return YI(t,Km(p)?p[e]:p,c)})):[YI(u,Km(p)?p[0]:p,c)],g=!a||!o,m=!a&&o,y=aD(i,r),v=y.nameStyle,_=y.valueStyle;return"richText"===r?(a?"":h)+(o?"":mD(t,d,v))+(s?"":function(t,e,n,i,r){var o=[r],s=i?10:20;return n&&o.push({padding:[0,0,0,s],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(e.join("  "),o)}(t,f,g,m,_)):gD((a?"":h)+(o?"":function(t,e,n){return'<span style="'+n+";"+(e?"margin-left:2px":"")+'">'+GI(t)+"</span>"}(d,!a,v))+(s?"":function(t,e,n,i){var r=n?"10px":"20px";return'<span style="'+(e?"float:right;margin-left:"+r:"")+";"+i+'">'+jm(t,(function(t){return GI(t)})).join("&nbsp;&nbsp;")+"</span>"}(f,g,m,_)),n)}}}};function pD(t,e,n,i,r,o){if(t){var s=hD(t);s.planLayout(t);var a={useUTC:r,renderMode:n,orderMode:i,markupStyleCreator:e};return s.build(a,t,0,o)}}function fD(t){var e=t.__gapLevelBetweenSubBlocks;return{html:lD[e],richText:uD[e]}}function gD(t,e){return'<div style="'+("margin: "+e+"px 0 0")+';line-height:1;">'+t+'<div style="clear:both"></div></div>'}function mD(t,e,n){return t.markupStyleCreator.wrapRichTextStyle(e,n)}function yD(t,e){var n=t.get("padding");return null!=n?n:"richText"===e?[8,10]:10}var vD=function(){function t(){this.richTextStyles={},this._nextStyleNameId=Aw()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(t,e,n){var i="richText"===n?this._generateStyleName():null,r=function(t,e){var n=Jm(t)?{color:t,extraCssText:e}:t||{},i=n.color,r=n.type;e=n.extraCssText;var o=n.renderMode||"html";return i?"html"===o?"subItem"===r?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+GI(i)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+GI(i)+";"+(e||"")+'"></span>':{renderMode:o,content:"{"+(n.markerId||"markerX")+"|}  ",style:"subItem"===r?{width:4,height:4,borderRadius:2,backgroundColor:i}:{width:10,height:10,borderRadius:5,backgroundColor:i}}:""}({color:e,type:t,renderMode:n,markerId:i});return Jm(r)?r:(this.richTextStyles[i]=r.style,r.content)},t.prototype.wrapRichTextStyle=function(t,e){var n={};Km(e)?Wm(e,(function(t){return Fm(n,t)})):Fm(n,e);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},t}();function _D(t){var e,n,i,r,o=t.series,s=t.dataIndex,a=t.multipleSeries,l=o.getData(),u=l.mapDimensionsAll("defaultedTooltip"),c=u.length,h=o.getRawValue(s),d=Km(h),p=function(t,e){return ZI(t.getData().getItemVisual(e,"style")[t.visualDrawType])}(o,s);if(c>1||d&&!c){var f=function(t,e,n,i,r){var o=e.getData(),s=qm(t,(function(t,e,n){var i=o.getDimensionInfo(n);return t||i&&!1!==i.tooltip&&null!=i.displayName}),!1),a=[],l=[],u=[];function c(t,e){var n=o.getDimensionInfo(e);n&&!1!==n.otherDims.tooltip&&(s?u.push(cD("nameValue",{markerType:"subItem",markerColor:r,name:n.displayName,value:t,valueType:n.type})):(a.push(t),l.push(n.type)))}return i.length?Wm(i,(function(t){c(EM(o,n,t),t)})):Wm(t,c),{inlineValues:a,inlineValueTypes:l,blocks:u}}(h,o,s,u,p);e=f.inlineValues,n=f.inlineValueTypes,i=f.blocks,r=f.inlineValues[0]}else if(c){var g=l.getDimensionInfo(u[0]);r=e=EM(l,s,u[0]),n=g.type}else r=e=d?h[0]:h;var m=jw(o),y=m&&o.name||"",v=l.getName(s),_=a?y:v;return cD("section",{header:y,noHeader:a||!m,sortParam:r,blocks:[cD("nameValue",{markerType:"item",markerColor:p,name:_,noName:!hy(_),value:e,valueType:n})].concat(i||[])})}var wD=Yw();function bD(t,e){return t.getName(e)||t.getId(e)}var xD=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._selectedDataIndicesMap={},e}var n;return gm(e,t),e.prototype.init=function(t,e,n){this.seriesIndex=this.componentIndex,this.dataTask=LM({count:CD,reset:TD}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n),(wD(this).sourceManager=new rD(this)).prepareSource();var i=this.getInitialData(t,n);kD(i,this),this.dataTask.context.data=i,wD(this).dataBeforeProcessed=i,SD(this),this._initSelectedMapFromData(i)},e.prototype.mergeDefaultAndTheme=function(t,e){var n=ok(this),i=n?ak(t):{},r=this.subType;ck.hasClass(r)&&(r+="Series"),Lm(t,e.getTheme().get(this.subType)),Lm(t,this.getDefaultOption()),Lw(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&sk(t,i,n)},e.prototype.mergeOption=function(t,e){t=Lm(this.option,t,!0),this.fillDataTextStyle(t.data);var n=ok(this);n&&sk(this.option,t,n);var i=wD(this).sourceManager;i.dirty(),i.prepareSource();var r=this.getInitialData(t,e);kD(r,this),this.dataTask.dirty(),this.dataTask.context.data=r,wD(this).dataBeforeProcessed=r,SD(this),this._initSelectedMapFromData(r)},e.prototype.fillDataTextStyle=function(t){if(t&&!iy(t))for(var e=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&Lw(t[n],"label",e)},e.prototype.getInitialData=function(t,e){},e.prototype.appendData=function(t){this.getRawData().appendData(t.data)},e.prototype.getData=function(t){var e=DD(this);if(e){var n=e.context.data;return null==t?n:n.getLinkedData(t)}return wD(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var e=DD(this);if(e){var n=e.context;n.outputData=t,e!==this.dataTask&&(n.data=t)}wD(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return gy(t)},e.prototype.getSourceManager=function(){return wD(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return wD(this).dataBeforeProcessed},e.prototype.getColorBy=function(){return this.get("colorBy")||"series"},e.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,e,n){return _D({series:this,dataIndex:t,multipleSeries:e})},e.prototype.isAnimationEnabled=function(){if(wm.node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),!!t},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,e,n){var i=this.ecModel,r=Mk.prototype.getColorFromPalette.call(this,t,e,n);return r||(r=i.getColorFromPalette(t,e,n)),r},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,e){this._innerSelect(this.getData(e),t)},e.prototype.unselect=function(t,e){var n=this.option.selectedMap;if(n)for(var i=this.getData(e),r=0;r<t.length;r++){var o=bD(i,t[r]);n[o]=!1,this._selectedDataIndicesMap[o]=-1}},e.prototype.toggleSelect=function(t,e){for(var n=[],i=0;i<t.length;i++)n[0]=t[i],this.isSelected(t[i],e)?this.unselect(n,e):this.select(n,e)},e.prototype.getSelectedDataIndices=function(){for(var t=this._selectedDataIndicesMap,e=Ym(t),n=[],i=0;i<e.length;i++){var r=t[e[i]];r>=0&&n.push(r)}return n},e.prototype.isSelected=function(t,e){var n=this.option.selectedMap;return n&&n[bD(this.getData(e),t)]||!1},e.prototype.isUniversalTransitionEnabled=function(){if(this.__universalTransitionEnabled)return!0;var t=this.option.universalTransition;return!!t&&(!0===t||t&&t.enabled)},e.prototype._innerSelect=function(t,e){var n,i,r=this.option.selectedMode,o=e.length;if(r&&o)if("multiple"===r)for(var s=this.option.selectedMap||(this.option.selectedMap={}),a=0;a<o;a++){var l=e[a];s[c=bD(t,l)]=!0,this._selectedDataIndicesMap[c]=t.getRawIndex(l)}else if("single"===r||!0===r){var u=e[o-1],c=bD(t,u);this.option.selectedMap=((n={})[c]=!0,n),this._selectedDataIndicesMap=((i={})[c]=t.getRawIndex(u),i)}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var e=[];t.hasItemOption&&t.each((function(n){var i=t.getRawDataItem(n);i&&i.selected&&e.push(n)})),e.length>0&&this._innerSelect(t,e)}},e.registerClass=function(t){return ck.registerClass(t)},e.protoInitialize=((n=e.prototype).type="series.__base__",n.seriesIndex=0,n.ignoreStyleOnData=!1,n.hasSymbolVisual=!1,n.defaultSymbol="circle",n.visualStyleAccessPath="itemStyle",void(n.visualDrawType="fill")),e}(ck);function SD(t){var e=t.name;jw(t)||(t.name=function(t){var e=t.getRawData(),n=e.mapDimensionsAll("seriesName"),i=[];return Wm(n,(function(t){var n=e.getDimensionInfo(t);n.displayName&&i.push(n.displayName)})),i.join(" ")}(t)||e)}function CD(t){return t.model.getRawData().count()}function TD(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),ID}function ID(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function kD(t,e){Wm(function(t,e){for(var n=new t.constructor(t.length+e.length),i=0;i<t.length;i++)n[i]=t[i];var r=t.length;for(i=0;i<e.length;i++)n[i+r]=e[i];return n}(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),(function(n){t.wrapMethod(n,Xm(MD,e))}))}function MD(t,e){var n=DD(t);return n&&n.setOutputEnd((e||this).count()),e}function DD(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var i=n.currentTask;if(i){var r=i.agentStubMap;r&&(i=r.get(t.uid))}return i}}Vm(xD,RM),Vm(xD,Mk),rb(xD,ck);var PD=xD,AD=function(){function t(){this.group=new mw,this.uid=RI("viewComponent")}return t.prototype.init=function(t,e){},t.prototype.render=function(t,e,n,i){},t.prototype.dispose=function(t,e){},t.prototype.updateView=function(t,e,n,i){},t.prototype.updateLayout=function(t,e,n,i){},t.prototype.updateVisual=function(t,e,n,i){},t.prototype.blurSeries=function(t,e){},t}();nb(AD),lb(AD);var ED=AD;var OD,RD=Yw(),ND=(OD=Yw(),function(t){var e=OD(t),n=t.pipelineContext,i=!!e.large,r=!!e.progressiveRender,o=e.large=!(!n||!n.large),s=e.progressiveRender=!(!n||!n.progressiveRender);return!(i===o&&r===s)&&"reset"}),LD=function(){function t(){this.group=new mw,this.uid=RI("viewChart"),this.renderTask=LM({plan:BD,reset:UD}),this.renderTask.context={view:this}}return t.prototype.init=function(t,e){},t.prototype.render=function(t,e,n,i){},t.prototype.highlight=function(t,e,n,i){zD(t.getData(),i,"emphasis")},t.prototype.downplay=function(t,e,n,i){zD(t.getData(),i,"normal")},t.prototype.remove=function(t,e){this.group.removeAll()},t.prototype.dispose=function(t,e){},t.prototype.updateView=function(t,e,n,i){this.render(t,e,n,i)},t.prototype.updateLayout=function(t,e,n,i){this.render(t,e,n,i)},t.prototype.updateVisual=function(t,e,n,i){this.render(t,e,n,i)},t.markUpdateMethod=function(t,e){RD(t).updateMethod=e},t.protoInitialize=void(t.prototype.type="chart"),t}();function FD(t,e,n){t&&("emphasis"===e?tC:eC)(t,n)}function zD(t,e,n){var i=Gw(t,e),r=e&&null!=e.highlightKey?function(t){var e=RS[t];return null==e&&OS<=32&&(e=RS[t]=OS++),e}(e.highlightKey):null;null!=i?Wm(Nw(i),(function(e){FD(t.getItemGraphicEl(e),n,r)})):t.eachItemGraphicEl((function(t){FD(t,n,r)}))}function BD(t){return ND(t.model)}function UD(t){var e=t.model,n=t.ecModel,i=t.api,r=t.payload,o=e.pipelineContext.progressiveRender,s=t.view,a=r&&RD(r).updateMethod,l=o?"incrementalPrepareRender":a&&s[a]?a:"render";return"render"!==l&&s[l](e,n,i,r),VD[l]}nb(LD),lb(LD);var VD={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},HD=LD,WD="\0__throttleRate";function jD(t,e,n){var i,r,o,s,a,l=0,u=0,c=null;function h(){u=(new Date).getTime(),c=null,t.apply(o,s||[])}e=e||0;var d=function(){for(var t=[],d=0;d<arguments.length;d++)t[d]=arguments[d];i=(new Date).getTime(),o=this,s=t;var p=a||e,f=a||n;a=null,r=i-(f?l:u)-p,clearTimeout(c),f?c=setTimeout(h,p):r>=0?h():c=setTimeout(h,-r),l=i};return d.clear=function(){c&&(clearTimeout(c),c=null)},d.debounceNextCall=function(t){a=t},d}var qD=Yw(),GD={itemStyle:ub(MI,!0),lineStyle:ub(TI,!0)},YD={lineStyle:"stroke",itemStyle:"fill"};function $D(t,e){var n=t.visualStyleMapper||GD[e];return n||(console.warn("Unkown style type '"+e+"'."),GD.itemStyle)}function XD(t,e){var n=t.visualDrawType||YD[e];return n||(console.warn("Unkown style type '"+e+"'."),"fill")}var KD={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),i=t.visualStyleAccessPath||"itemStyle",r=t.getModel(i),o=$D(t,i)(r),s=r.getShallow("decal");s&&(n.setVisual("decal",s),s.dirty=!0);var a=XD(t,i),l=o[a],u=Zm(l)?l:null,c="auto"===o.fill||"auto"===o.stroke;if(!o[a]||u||c){var h=t.getColorFromPalette(t.name,null,e.getSeriesCount());o[a]||(o[a]=h,n.setVisual("colorFromPalette",!0)),o.fill="auto"===o.fill||"function"==typeof o.fill?h:o.fill,o.stroke="auto"===o.stroke||"function"==typeof o.stroke?h:o.stroke}if(n.setVisual("style",o),n.setVisual("drawType",a),!e.isSeriesFiltered(t)&&u)return n.setVisual("colorFromPalette",!1),{dataEach:function(e,n){var i=t.getDataParams(n),r=Fm({},o);r[a]=u(i),e.setItemVisual(n,"style",r)}}}},ZD=new EI,JD={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!t.ignoreStyleOnData&&!e.isSeriesFiltered(t)){var n=t.getData(),i=t.visualStyleAccessPath||"itemStyle",r=$D(t,i),o=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(t,e){var n=t.getRawDataItem(e);if(n&&n[i]){ZD.option=n[i];var s=r(ZD);Fm(t.ensureUniqueItemVisual(e,"style"),s),ZD.option.decal&&(t.setItemVisual(e,"decal",ZD.option.decal),ZD.option.decal.dirty=!0),o in s&&t.setItemVisual(e,"colorFromPalette",!1)}}:null}}}},QD={performRawSeries:!0,overallReset:function(t){var e=gy();t.eachSeries((function(t){var n=t.getColorBy();if(!t.isColorBySeries()){var i=t.type+"-"+n,r=e.get(i);r||(r={},e.set(i,r)),qD(t).scope=r}})),t.eachSeries((function(e){if(!e.isColorBySeries()&&!t.isSeriesFiltered(e)){var n=e.getRawData(),i={},r=e.getData(),o=qD(e).scope,s=e.visualStyleAccessPath||"itemStyle",a=XD(e,s);r.each((function(t){var e=r.getRawIndex(t);i[e]=t})),n.each((function(t){var s=i[t];if(r.getItemVisual(s,"colorFromPalette")){var l=r.ensureUniqueItemVisual(s,"style"),u=n.getName(t)||t+"",c=n.count();l[a]=e.getColorFromPalette(u,o,c)}}))}}))}},tP=Math.PI;var eP=function(){function t(t,e,n,i){this._stageTaskMap=gy(),this.ecInstance=t,this.api=e,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return t.prototype.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each((function(t){var e=t.overallTask;e&&e.dirty()}))},t.prototype.getPerformArgs=function(t,e){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,r=!e&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex?n.step:null,o=i&&i.modDataCount;return{step:r,modBy:null!=o?Math.ceil(o/r):null,modDataCount:o}}},t.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},t.prototype.updateStreamModes=function(t,e){var n=this._pipelineMap.get(t.uid),i=t.getData().count(),r=n.progressiveEnabled&&e.incrementalPrepareRender&&i>=n.threshold,o=t.get("large")&&i>=t.get("largeThreshold"),s="mod"===t.get("progressiveChunkMode")?i:null;t.pipelineContext=n.context={progressiveRender:r,modDataCount:s,large:o}},t.prototype.restorePipelines=function(t){var e=this,n=e._pipelineMap=gy();t.eachSeries((function(t){var i=t.getProgressive(),r=t.uid;n.set(r,{id:r,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:i&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),e._pipe(t,t.dataTask)}))},t.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.api.getModel(),n=this.api;Wm(this._allHandlers,(function(i){var r=t.get(i.uid)||t.set(i.uid,{});cy(!(i.reset&&i.overallReset),""),i.reset&&this._createSeriesStageTask(i,r,e,n),i.overallReset&&this._createOverallStageTask(i,r,e,n)}),this)},t.prototype.prepareView=function(t,e,n,i){var r=t.renderTask,o=r.context;o.model=e,o.ecModel=n,o.api=i,r.__block=!t.incrementalPrepareRender,this._pipe(e,r)},t.prototype.performDataProcessorTasks=function(t,e){this._performStageTasks(this._dataProcessorHandlers,t,e,{block:!0})},t.prototype.performVisualTasks=function(t,e,n){this._performStageTasks(this._visualHandlers,t,e,n)},t.prototype._performStageTasks=function(t,e,n,i){i=i||{};var r=!1,o=this;function s(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}Wm(t,(function(t,a){if(!i.visualType||i.visualType===t.visualType){var l=o._stageTaskMap.get(t.uid),u=l.seriesTaskMap,c=l.overallTask;if(c){var h,d=c.agentStubMap;d.each((function(t){s(i,t)&&(t.dirty(),h=!0)})),h&&c.dirty(),o.updatePayload(c,n);var p=o.getPerformArgs(c,i.block);d.each((function(t){t.perform(p)})),c.perform(p)&&(r=!0)}else u&&u.each((function(a,l){s(i,a)&&a.dirty();var u=o.getPerformArgs(a,i.block);u.skip=!t.performRawSeries&&e.isSeriesFiltered(a.context.model),o.updatePayload(a,n),a.perform(u)&&(r=!0)}))}})),this.unfinished=r||this.unfinished},t.prototype.performSeriesTasks=function(t){var e;t.eachSeries((function(t){e=t.dataTask.perform()||e})),this.unfinished=e||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each((function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)}))},t.prototype.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)},t.prototype._createSeriesStageTask=function(t,e,n,i){var r=this,o=e.seriesTaskMap,s=e.seriesTaskMap=gy(),a=t.seriesType,l=t.getTargetSeries;function u(e){var a=e.uid,l=s.set(a,o&&o.get(a)||LM({plan:sP,reset:aP,count:cP}));l.context={model:e,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:r},r._pipe(e,l)}t.createOnAllSeries?n.eachRawSeries(u):a?n.eachRawSeriesByType(a,u):l&&l(n,i).each(u)},t.prototype._createOverallStageTask=function(t,e,n,i){var r=this,o=e.overallTask=e.overallTask||LM({reset:nP});o.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:r};var s=o.agentStubMap,a=o.agentStubMap=gy(),l=t.seriesType,u=t.getTargetSeries,c=!0,h=!1;function d(t){var e=t.uid,n=a.set(e,s&&s.get(e)||(h=!0,LM({reset:iP,onDirty:oP})));n.context={model:t,overallProgress:c},n.agent=o,n.__block=c,r._pipe(t,n)}cy(!t.createOnAllSeries,""),l?n.eachRawSeriesByType(l,d):u?u(n,i).each(d):(c=!1,Wm(n.getSeries(),d)),h&&o.dirty()},t.prototype._pipe=function(t,e){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=e),i.tail&&i.tail.pipe(e),i.tail=e,e.__idxInPipeline=i.count++,e.__pipeline=i},t.wrapStageHandler=function(t,e){return Zm(t)&&(t={overallReset:t,seriesType:hP(t)}),t.uid=RI("stageHandler"),e&&(t.visualType=e),t},t}();function nP(t){t.overallReset(t.ecModel,t.api,t.payload)}function iP(t){return t.overallProgress&&rP}function rP(){this.agent.dirty(),this.getDownstream().dirty()}function oP(){this.agent&&this.agent.dirty()}function sP(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function aP(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=Nw(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?jm(e,(function(t,e){return uP(e)})):lP}var lP=uP(0);function uP(t){return function(e,n){var i=n.data,r=n.resetDefines[t];if(r&&r.dataEach)for(var o=e.start;o<e.end;o++)r.dataEach(i,o);else r&&r.progress&&r.progress(e,i)}}function cP(t){return t.data.count()}function hP(t){dP=null;try{t(pP,fP)}catch(e){}return dP}var dP,pP={},fP={};function gP(t,e){for(var n in e.prototype)t[n]=vy}gP(pP,Ok),gP(fP,Nk),pP.eachSeriesByType=pP.eachRawSeriesByType=function(t){dP=t},pP.eachComponent=function(t){"series"===t.mainType&&t.subType&&(dP=t.subType)};var mP=eP,yP=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],vP={color:yP,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],yP]},_P=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],wP={darkMode:!0,color:_P,backgroundColor:"#100C2A",axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:"#B9B8CE"}},textStyle:{color:"#B9B8CE"},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:"#B9B8CE"}},dataZoom:{borderColor:"#71708A",textStyle:{color:"#B9B8CE"},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:"#B9B8CE"}},timeline:{lineStyle:{color:"#B9B8CE"},label:{color:"#B9B8CE"},controlStyle:{color:"#B9B8CE",borderColor:"#B9B8CE"}},calendar:{itemStyle:{color:"#100C2A"},dayLabel:{color:"#B9B8CE"},monthLabel:{color:"#B9B8CE"},yearLabel:{color:"#B9B8CE"}},timeAxis:{axisLine:{lineStyle:{color:"#B9B8CE"}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}},logAxis:{axisLine:{lineStyle:{color:"#B9B8CE"}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}},valueAxis:{axisLine:{lineStyle:{color:"#B9B8CE"}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}},categoryAxis:{axisLine:{lineStyle:{color:"#B9B8CE"}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}},line:{symbol:"circle"},graph:{color:_P},gauge:{title:{color:"#B9B8CE"},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:"#B9B8CE"},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};wP.categoryAxis.splitLine.show=!1;var bP=wP,xP=function(){function t(){}return t.prototype.normalizeQuery=function(t){var e={},n={},i={};if(Jm(t)){var r=eb(t);e.mainType=r.main||null,e.subType=r.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};Wm(t,(function(t,r){for(var a=!1,l=0;l<o.length;l++){var u=o[l],c=r.lastIndexOf(u);if(c>0&&c===r.length-u.length){var h=r.slice(0,c);"data"!==h&&(e.mainType=h,e[u.toLowerCase()]=t,a=!0)}}s.hasOwnProperty(r)&&(n[r]=t,a=!0),a||(i[r]=t)}))}return{cptQuery:e,dataQuery:n,otherQuery:i}},t.prototype.filter=function(t,e){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,r=n.packedEvent,o=n.model,s=n.view;if(!o||!s)return!0;var a=e.cptQuery,l=e.dataQuery;return u(a,o,"mainType")&&u(a,o,"subType")&&u(a,o,"index","componentIndex")&&u(a,o,"name")&&u(a,o,"id")&&u(l,r,"name")&&u(l,r,"dataIndex")&&u(l,r,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,e.otherQuery,i,r));function u(t,e,n,i){return null==t[n]||e[i||n]===t[n]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),SP={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData();if(t.legendIcon&&n.setVisual("legendIcon",t.legendIcon),t.hasSymbolVisual){var i=t.get("symbol"),r=t.get("symbolSize"),o=t.get("symbolKeepAspect"),s=t.get("symbolRotate"),a=t.get("symbolOffset"),l=Zm(i),u=Zm(r),c=Zm(s),h=Zm(a),d=l||u||c||h,p=!l&&i?i:t.defaultSymbol,f=u?null:r,g=c?null:s,m=h?null:a;if(n.setVisual({legendIcon:t.legendIcon||p,symbol:p,symbolSize:f,symbolKeepAspect:o,symbolRotate:g,symbolOffset:m}),!e.isSeriesFiltered(t))return{dataEach:d?function(e,n){var o=t.getRawValue(n),d=t.getDataParams(n);l&&e.setItemVisual(n,"symbol",i(o,d)),u&&e.setItemVisual(n,"symbolSize",r(o,d)),c&&e.setItemVisual(n,"symbolRotate",s(o,d)),h&&e.setItemVisual(n,"symbolOffset",a(o,d))}:null}}}};function CP(t,e,n,i,r){var o=t+e;n.isSilent(o)||i.eachComponent({mainType:"series",subType:"pie"},(function(t){for(var e=t.seriesIndex,i=r.selected,s=0;s<i.length;s++)if(i[s].seriesIndex===e){var a=t.getData(),l=Gw(a,r.fromActionPayload);n.trigger(o,{type:o,seriesId:t.id,name:Km(l)?a.getName(l[0]):a.getName(l),selected:Fm({},t.option.selectedMap)})}}))}function TP(t,e,n){for(var i;t&&(!e(t)||(i=t,!n));)t=t.__hostTarget||t.parent;return i}var IP=Math.round(9*Math.random()),kP="function"==typeof Object.defineProperty,MP=function(){function t(){this._id="__ec_inner_"+IP++}return t.prototype.get=function(t){return this._guard(t)[this._id]},t.prototype.set=function(t,e){var n=this._guard(t);return kP?Object.defineProperty(n,this._id,{value:e,enumerable:!1,configurable:!0}):n[this._id]=e,this},t.prototype.delete=function(t){return!!this.has(t)&&(delete this._guard(t)[this._id],!0)},t.prototype.has=function(t){return!!this._guard(t)[this._id]},t.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},t}(),DP=rS.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,o=e.height/2;t.moveTo(n,i-o),t.lineTo(n+r,i+o),t.lineTo(n-r,i+o),t.closePath()}}),PP=rS.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,o=e.height/2;t.moveTo(n,i-o),t.lineTo(n+r,i),t.lineTo(n,i+o),t.lineTo(n-r,i),t.closePath()}}),AP=rS.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,i=e.y,r=e.width/5*3,o=Math.max(r,e.height),s=r/2,a=s*s/(o-s),l=i-o+s+a,u=Math.asin(a/s),c=Math.cos(u)*s,h=Math.sin(u),d=Math.cos(u),p=.6*s,f=.7*s;t.moveTo(n-c,l+a),t.arc(n,l,s,Math.PI-u,2*Math.PI+u),t.bezierCurveTo(n+c-h*p,l+a+d*p,n,i-f,n,i),t.bezierCurveTo(n,i-f,n-c+h*p,l+a+d*p,n-c,l+a),t.closePath()}}),EP=rS.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,i=e.width,r=e.x,o=e.y,s=i/3*2;t.moveTo(r,o),t.lineTo(r+s,o+n),t.lineTo(r,o+n/4*3),t.lineTo(r-s,o+n),t.lineTo(r,o),t.closePath()}}),OP={line:function(t,e,n,i,r){r.x1=t,r.y1=e+i/2,r.x2=t+n,r.y2=e+i/2},rect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i},roundRect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i,r.r=Math.min(n,i)/4},square:function(t,e,n,i,r){var o=Math.min(n,i);r.x=t,r.y=e,r.width=o,r.height=o},circle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.r=Math.min(n,i)/2},diamond:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i},pin:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},arrow:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},triangle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i}},RP={};Wm({line:vT,rect:_S,roundRect:_S,square:_S,circle:zC,diamond:PP,pin:AP,arrow:EP,triangle:DP},(function(t,e){RP[e]=new t}));var NP=rS.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var i=rw(t,e,n),r=this.shape;return r&&"pin"===r.symbolType&&"inside"===e.position&&(i.y=n.y+.4*n.height),i},buildPath:function(t,e,n){var i=e.symbolType;if("none"!==i){var r=RP[i];r||(r=RP[i="rect"]),OP[i](e.x,e.y,e.width,e.height,r.shape),r.buildPath(t,r.shape,n)}}});function LP(t,e){if("image"!==this.type){var n=this.style;this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff",n.lineWidth=2):"line"===this.shape.symbolType?n.stroke=t:n.fill=t,this.markRedraw()}}function FP(t,e,n,i,r,o,s){var a,l=0===t.indexOf("empty");return l&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),(a=0===t.indexOf("image://")?JT(t.slice(8),new $_(e,n,i,r),s?"center":"cover"):0===t.indexOf("path://")?ZT(t.slice(7),{},new $_(e,n,i,r),s?"center":"cover"):new NP({shape:{symbolType:t,x:e,y:n,width:i,height:r}})).__isEmptyBrush=l,a.setColor=LP,o&&a.setColor(o),a}function zP(t,e,n){for(var i="radial"===e.type?function(t,e,n){var i=n.width,r=n.height,o=Math.min(i,r),s=null==e.x?.5:e.x,a=null==e.y?.5:e.y,l=null==e.r?.5:e.r;return e.global||(s=s*i+n.x,a=a*r+n.y,l*=o),t.createRadialGradient(s,a,0,s,a,l)}(t,e,n):function(t,e,n){var i=null==e.x?0:e.x,r=null==e.x2?1:e.x2,o=null==e.y?0:e.y,s=null==e.y2?0:e.y2;return e.global||(i=i*n.width+n.x,r=r*n.width+n.x,o=o*n.height+n.y,s=s*n.height+n.y),i=isNaN(i)?0:i,r=isNaN(r)?1:r,o=isNaN(o)?0:o,s=isNaN(s)?0:s,t.createLinearGradient(i,o,r,s)}(t,e,n),r=e.colorStops,o=0;o<r.length;o++)i.addColorStop(r[o].offset,r[o].color);return i}function BP(t,e){return t&&"solid"!==t&&e>0?(e=e||1,"dashed"===t?[4*e,2*e]:"dotted"===t?[e]:ty(t)?[t]:Km(t)?t:null):null}var UP=new zx(!0);function VP(t){var e=t.stroke;return!(null==e||"none"===e||!(t.lineWidth>0))}function HP(t){return"string"==typeof t&&"none"!==t}function WP(t){var e=t.fill;return null!=e&&"none"!==e}function jP(t,e){if(null!=e.fillOpacity&&1!==e.fillOpacity){var n=t.globalAlpha;t.globalAlpha=e.fillOpacity*e.opacity,t.fill(),t.globalAlpha=n}else t.fill()}function qP(t,e){if(null!=e.strokeOpacity&&1!==e.strokeOpacity){var n=t.globalAlpha;t.globalAlpha=e.strokeOpacity*e.opacity,t.stroke(),t.globalAlpha=n}else t.stroke()}function GP(t,e,n){var i=fb(e.image,e.__image,n);if(mb(i)){var r=t.createPattern(i,e.repeat||"repeat");if("function"==typeof DOMMatrix&&r.setTransform){var o=new DOMMatrix;o.rotateSelf(0,0,(e.rotation||0)/Math.PI*180),o.scaleSelf(e.scaleX||1,e.scaleY||1),o.translateSelf(e.x||0,e.y||0),r.setTransform(o)}return r}}var YP=["shadowBlur","shadowOffsetX","shadowOffsetY"],$P=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function XP(t,e,n,i,r){var o=!1;if(!i&&e===(n=n||{}))return!1;if(i||e.opacity!==n.opacity){o||(JP(t,r),o=!0);var s=Math.max(Math.min(e.opacity,1),0);t.globalAlpha=isNaN(s)?Pb.opacity:s}(i||e.blend!==n.blend)&&(o||(JP(t,r),o=!0),t.globalCompositeOperation=e.blend||Pb.blend);for(var a=0;a<YP.length;a++){var l=YP[a];(i||e[l]!==n[l])&&(o||(JP(t,r),o=!0),t[l]=t.dpr*(e[l]||0))}return(i||e.shadowColor!==n.shadowColor)&&(o||(JP(t,r),o=!0),t.shadowColor=e.shadowColor||Pb.shadowColor),o}function KP(t,e,n,i,r){var o=QP(e,r.inHover),s=i?null:n&&QP(n,r.inHover)||{};if(o===s)return!1;var a=XP(t,o,s,i,r);if((i||o.fill!==s.fill)&&(a||(JP(t,r),a=!0),HP(o.fill)&&(t.fillStyle=o.fill)),(i||o.stroke!==s.stroke)&&(a||(JP(t,r),a=!0),HP(o.stroke)&&(t.strokeStyle=o.stroke)),(i||o.opacity!==s.opacity)&&(a||(JP(t,r),a=!0),t.globalAlpha=null==o.opacity?1:o.opacity),e.hasStroke()){var l=o.lineWidth/(o.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1);t.lineWidth!==l&&(a||(JP(t,r),a=!0),t.lineWidth=l)}for(var u=0;u<$P.length;u++){var c=$P[u],h=c[0];(i||o[h]!==s[h])&&(a||(JP(t,r),a=!0),t[h]=o[h]||c[1])}return a}function ZP(t,e){var n=e.transform,i=t.dpr||1;n?t.setTransform(i*n[0],i*n[1],i*n[2],i*n[3],i*n[4],i*n[5]):t.setTransform(i,0,0,i,0,0)}function JP(t,e){e.batchFill&&t.fill(),e.batchStroke&&t.stroke(),e.batchFill="",e.batchStroke=""}function QP(t,e){return e&&t.__hoverStyle||t.style}function tA(t,e){eA(t,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function eA(t,e,n,i){var r=e.transform;if(!e.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1))return e.__dirty&=-2,void(e.__isRendered=!1);var o=e.__clipPaths,s=n.prevElClipPaths,a=!1,l=!1;if(s&&!function(t,e){if(t===e||!t&&!e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}(o,s)||(s&&s.length&&(JP(t,n),t.restore(),l=a=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),o&&o.length&&(JP(t,n),t.save(),function(t,e,n){for(var i=!1,r=0;r<t.length;r++){var o=t[r];i=i||o.isZeroArea(),ZP(e,o),e.beginPath(),o.buildPath(e,o.shape),e.clip()}n.allClipped=i}(o,t,n),a=!0),n.prevElClipPaths=o),n.allClipped)e.__isRendered=!1;else{e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var u=n.prevEl;u||(l=a=!0);var c,h,d=e instanceof rS&&e.autoBatch&&function(t){var e=WP(t),n=VP(t);return!(t.lineDash||!(+e^+n)||e&&"string"!=typeof t.fill||n&&"string"!=typeof t.stroke||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}(e.style);a||(c=r,h=u.transform,c&&h?c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||c[3]!==h[3]||c[4]!==h[4]||c[5]!==h[5]:c||h)?(JP(t,n),ZP(t,e)):d||JP(t,n);var p=QP(e,n.inHover);e instanceof rS?(1!==n.lastDrawType&&(l=!0,n.lastDrawType=1),KP(t,e,u,l,n),d&&(n.batchFill||n.batchStroke)||t.beginPath(),function(t,e,n,i){var r=VP(n),o=WP(n),s=n.strokePercent,a=s<1,l=!e.path;e.silent&&!a||!l||e.createPathProxy();var u=e.path||UP;if(!i){var c=n.fill,h=n.stroke,d=o&&!!c.colorStops,p=r&&!!h.colorStops,f=o&&!!c.image,g=r&&!!h.image,m=void 0,y=void 0,v=void 0,_=void 0,w=void 0;(d||p)&&(w=e.getBoundingRect()),d&&(m=e.__dirty?zP(t,c,w):e.__canvasFillGradient,e.__canvasFillGradient=m),p&&(y=e.__dirty?zP(t,h,w):e.__canvasStrokeGradient,e.__canvasStrokeGradient=y),f&&(v=e.__dirty||!e.__canvasFillPattern?GP(t,c,e):e.__canvasFillPattern,e.__canvasFillPattern=v),g&&(_=e.__dirty||!e.__canvasStrokePattern?GP(t,h,e):e.__canvasStrokePattern,e.__canvasStrokePattern=v),d?t.fillStyle=m:f&&(v?t.fillStyle=v:o=!1),p?t.strokeStyle=y:g&&(_?t.strokeStyle=_:r=!1)}var b=n.lineDash&&n.lineWidth>0&&BP(n.lineDash,n.lineWidth),x=n.lineDashOffset,S=!!t.setLineDash,C=e.getGlobalScale();if(u.setScale(C[0],C[1],e.segmentIgnoreThreshold),b){var T=n.strokeNoScale&&e.getLineScale?e.getLineScale():1;T&&1!==T&&(b=jm(b,(function(t){return t/T})),x/=T)}var I=!0;(l||4&e.__dirty||b&&!S&&r)&&(u.setDPR(t.dpr),a?u.setContext(null):(u.setContext(t),I=!1),u.reset(),b&&!S&&(u.setLineDash(b),u.setLineDashOffset(x)),e.buildPath(u,e.shape,i),u.toStatic(),e.pathUpdated()),I&&u.rebuildPath(t,a?s:1),b&&S&&(t.setLineDash(b),t.lineDashOffset=x),i||(n.strokeFirst?(r&&qP(t,n),o&&jP(t,n)):(o&&jP(t,n),r&&qP(t,n))),b&&S&&t.setLineDash([])}(t,e,p,d),d&&(n.batchFill=p.fill||"",n.batchStroke=p.stroke||"")):e instanceof aS?(3!==n.lastDrawType&&(l=!0,n.lastDrawType=3),KP(t,e,u,l,n),function(t,e,n){var i=n.text;if(null!=i&&(i+=""),i){t.font=n.font||"12px sans-serif",t.textAlign=n.textAlign,t.textBaseline=n.textBaseline;var r=void 0;if(t.setLineDash){var o=n.lineDash&&n.lineWidth>0&&BP(n.lineDash,n.lineWidth),s=n.lineDashOffset;if(o){var a=n.strokeNoScale&&e.getLineScale?e.getLineScale():1;a&&1!==a&&(o=jm(o,(function(t){return t/a})),s/=a),t.setLineDash(o),t.lineDashOffset=s,r=!0}}n.strokeFirst?(VP(n)&&t.strokeText(i,n.x,n.y),WP(n)&&t.fillText(i,n.x,n.y)):(WP(n)&&t.fillText(i,n.x,n.y),VP(n)&&t.strokeText(i,n.x,n.y)),r&&t.setLineDash([])}}(t,e,p)):e instanceof hS?(2!==n.lastDrawType&&(l=!0,n.lastDrawType=2),function(t,e,n,i,r){XP(t,QP(e,r.inHover),n&&QP(n,r.inHover),i,r)}(t,e,u,l,n),function(t,e,n){var i=e.__image=fb(n.image,e.__image,e,e.onload);if(i&&mb(i)){var r=n.x||0,o=n.y||0,s=e.getWidth(),a=e.getHeight(),l=i.width/i.height;if(null==s&&null!=a?s=a*l:null==a&&null!=s?a=s/l:null==s&&null==a&&(s=i.width,a=i.height),n.sWidth&&n.sHeight){var u=n.sx||0,c=n.sy||0;t.drawImage(i,u,c,n.sWidth,n.sHeight,r,o,s,a)}else if(n.sx&&n.sy){var h=s-(u=n.sx),d=a-(c=n.sy);t.drawImage(i,u,c,h,d,r,o,s,a)}else t.drawImage(i,r,o,s,a)}}(t,e,p)):e instanceof FT&&(4!==n.lastDrawType&&(l=!0,n.lastDrawType=4),function(t,e,n){var i=e.getDisplayables(),r=e.getTemporalDisplayables();t.save();var o,s,a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover};for(o=e.getCursor(),s=i.length;o<s;o++){(c=i[o]).beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),eA(t,c,a,o===s-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),a.prevEl=c}for(var l=0,u=r.length;l<u;l++){var c;(c=r[l]).beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),eA(t,c,a,l===u-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),a.prevEl=c}e.clearTemporalDisplayables(),e.notClear=!0,t.restore()}(t,e,n)),d&&i&&JP(t,n),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),n.prevEl=e,e.__dirty=0,e.__isRendered=!0}}var nA,iA=new MP,rA=new Cv(100),oA=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function sA(t,e){if("none"===t)return null;var n=e.getDevicePixelRatio(),i=e.getZr(),r="svg"===i.painter.type;t.dirty&&iA.delete(t);var o=iA.get(t);if(o)return o;var s=zm(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===s.backgroundColor&&(s.backgroundColor=null);var a={repeat:"repeat"};return function(t){for(var e,o=[n],a=!0,l=0;l<oA.length;++l){var u=s[oA[l]],c=typeof u;if(null!=u&&!Km(u)&&"string"!==c&&"number"!==c&&"boolean"!==c){a=!1;break}o.push(u)}if(a){e=o.join(",")+(r?"-svg":"");var h=rA.get(e);h&&(r?t.svgElement=h:t.image=h)}var d,p=lA(s.dashArrayX),f=function(t){if(!t||"object"==typeof t&&0===t.length)return[0,0];if("number"==typeof t){var e=Math.ceil(t);return[e,e]}var n=jm(t,(function(t){return Math.ceil(t)}));return t.length%2?n.concat(n):n}(s.dashArrayY),g=aA(s.symbol),m=(b=p,jm(b,(function(t){return uA(t)}))),y=uA(f),v=!r&&Bm(),_=r&&i.painter.createSVGElement("g"),w=function(){for(var t=1,e=0,n=m.length;e<n;++e)t=Ow(t,m[e]);var i=1;for(e=0,n=g.length;e<n;++e)i=Ow(i,g[e].length);t*=i;var r=y*m.length*g.length;return{width:Math.max(1,Math.min(t,s.maxTileWidth)),height:Math.max(1,Math.min(r,s.maxTileHeight))}}();var b;v&&(v.width=w.width*n,v.height=w.height*n,d=v.getContext("2d"));(function(){d&&(d.clearRect(0,0,v.width,v.height),s.backgroundColor&&(d.fillStyle=s.backgroundColor,d.fillRect(0,0,v.width,v.height)));for(var t=0,e=0;e<f.length;++e)t+=f[e];if(t<=0)return;var o=-y,a=0,l=0,u=0;for(;o<w.height;){if(a%2==0){for(var c=l/2%g.length,h=0,m=0,b=0;h<2*w.width;){var x=0;for(e=0;e<p[u].length;++e)x+=p[u][e];if(x<=0)break;if(m%2==0){var S=.5*(1-s.symbolSize),C=h+p[u][m]*S,T=o+f[a]*S,I=p[u][m]*s.symbolSize,k=f[a]*s.symbolSize,M=b/2%g[c].length;D(C,T,I,k,g[c][M])}h+=p[u][m],++b,++m===p[u].length&&(m=0)}++u===p.length&&(u=0)}o+=f[a],++l,++a===f.length&&(a=0)}function D(t,e,o,a,l){var u=r?1:n,c=FP(l,t*u,e*u,o*u,a*u,s.color,s.symbolKeepAspect);r?_.appendChild(i.painter.paintOne(c)):tA(d,c)}})(),a&&rA.put(e,v||_);t.image=v,t.svgElement=_,t.svgWidth=w.width,t.svgHeight=w.height}(a),a.rotation=s.rotation,a.scaleX=a.scaleY=r?1:1/n,iA.set(t,a),t.dirty=!1,a}function aA(t){if(!t||0===t.length)return[["rect"]];if("string"==typeof t)return[[t]];for(var e=!0,n=0;n<t.length;++n)if("string"!=typeof t[n]){e=!1;break}if(e)return aA([t]);var i=[];for(n=0;n<t.length;++n)"string"==typeof t[n]?i.push([t[n]]):i.push(t[n]);return i}function lA(t){if(!t||0===t.length)return[[0,0]];if("number"==typeof t)return[[r=Math.ceil(t),r]];for(var e=!0,n=0;n<t.length;++n)if("number"!=typeof t[n]){e=!1;break}if(e)return lA([t]);var i=[];for(n=0;n<t.length;++n)if("number"==typeof t[n]){var r=Math.ceil(t[n]);i.push([r,r])}else{(r=jm(t[n],(function(t){return Math.ceil(t)}))).length%2==1?i.push(r.concat(r)):i.push(r)}return i}function uA(t){for(var e=0,n=0;n<t.length;++n)e+=t[n];return t.length%2==1?2*e:e}function cA(t){Jm(t)&&(t=(new DOMParser).parseFromString(t,"text/xml"));var e=t;for(9===e.nodeType&&(e=e.firstChild);"svg"!==e.nodeName.toLowerCase()||1!==e.nodeType;)e=e.nextSibling;return e}var hA={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},dA=Ym(hA),pA={"alignment-baseline":"textBaseline","stop-color":"stopColor"},fA=Ym(pA),gA=function(){function t(){this._defs={},this._root=null}return t.prototype.parse=function(t,e){e=e||{};var n=cA(t);if(!n)throw new Error("Illegal svg");this._defsUsePending=[];var i=new mw;this._root=i;var r=[],o=n.getAttribute("viewBox")||"",s=parseFloat(n.getAttribute("width")||e.width),a=parseFloat(n.getAttribute("height")||e.height);isNaN(s)&&(s=null),isNaN(a)&&(a=null),bA(n,i,null,!0,!1);for(var l,u,c=n.firstChild;c;)this._parseNode(c,i,r,null,!1,!1),c=c.nextSibling;if(function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i[0].style[i[1]]=t[i[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],o){var h=TA(o);h.length>=4&&(l={x:parseFloat(h[0]||0),y:parseFloat(h[1]||0),width:parseFloat(h[2]),height:parseFloat(h[3])})}if(l&&null!=s&&null!=a&&(u=PA(l,{x:0,y:0,width:s,height:a}),!e.ignoreViewBox)){var d=i;(i=new mw).add(d),d.scaleX=d.scaleY=u.scale,d.x=u.x,d.y=u.y}return e.ignoreRootClip||null==s||null==a||i.setClipPath(new _S({shape:{x:0,y:0,width:s,height:a}})),{root:i,width:s,height:a,viewBoxRect:l,viewBoxTransform:u,named:r}},t.prototype._parseNode=function(t,e,n,i,r,o){var s,a=t.nodeName.toLowerCase(),l=i;if("defs"===a&&(r=!0),"text"===a&&(o=!0),"defs"===a||"switch"===a)s=e;else{if(!r){var u=nA[a];if(u&&yy(nA,a)){s=u.call(this,t,e);var c=t.getAttribute("name");if(c){var h={name:c,namedFrom:null,svgNodeTagLower:a,el:s};n.push(h),"g"===a&&(l=h)}else i&&n.push({name:i.name,namedFrom:i,svgNodeTagLower:a,el:s});e.add(s)}}var d=mA[a];if(d&&yy(mA,a)){var p=d.call(this,t),f=t.getAttribute("id");f&&(this._defs[f]=p)}}if(s&&s.isGroup)for(var g=t.firstChild;g;)1===g.nodeType?this._parseNode(g,s,n,l,r,o):3===g.nodeType&&o&&this._parseText(g,s),g=g.nextSibling},t.prototype._parseText=function(t,e){var n=new aS({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});_A(e,n),bA(t,n,this._defsUsePending,!1,!1),function(t,e){var n=e.__selfStyle;if(n){var i=n.textBaseline,r=i;i&&"auto"!==i?"baseline"===i?r="alphabetic":"before-edge"===i||"text-before-edge"===i?r="top":"after-edge"===i||"text-after-edge"===i?r="bottom":"central"!==i&&"mathematical"!==i||(r="middle"):r="alphabetic",t.style.textBaseline=r}var o=e.__inheritedStyle;if(o){var s=o.textAlign,a=s;s&&("middle"===s&&(a="center"),t.style.textAlign=a)}}(n,e);var i=n.style,r=i.fontSize;r&&r<9&&(i.fontSize=9,n.scaleX*=r/9,n.scaleY*=r/9);var o=(i.fontSize||i.fontFamily)&&[i.fontStyle,i.fontWeight,(i.fontSize||12)+"px",i.fontFamily||"sans-serif"].join(" ");i.font=o;var s=n.getBoundingRect();return this._textX+=s.width,e.add(n),n},t.internalField=void(nA={g:function(t,e){var n=new mw;return _A(e,n),bA(t,n,this._defsUsePending,!1,!1),n},rect:function(t,e){var n=new _S;return _A(e,n),bA(t,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(t,e){var n=new zC;return _A(e,n),bA(t,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),n.silent=!0,n},line:function(t,e){var n=new vT;return _A(e,n),bA(t,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(t,e){var n=new VC;return _A(e,n),bA(t,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(t,e){var n,i=t.getAttribute("points");i&&(n=wA(i));var r=new hT({shape:{points:n||[]},silent:!0});return _A(e,r),bA(t,r,this._defsUsePending,!1,!1),r},polyline:function(t,e){var n,i=t.getAttribute("points");i&&(n=wA(i));var r=new fT({shape:{points:n||[]},silent:!0});return _A(e,r),bA(t,r,this._defsUsePending,!1,!1),r},image:function(t,e){var n=new hS;return _A(e,n),bA(t,n,this._defsUsePending,!1,!1),n.setStyle({image:t.getAttribute("xlink:href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),n.silent=!0,n},text:function(t,e){var n=t.getAttribute("x")||"0",i=t.getAttribute("y")||"0",r=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(r),this._textY=parseFloat(i)+parseFloat(o);var s=new mw;return _A(e,s),bA(t,s,this._defsUsePending,!1,!0),s},tspan:function(t,e){var n=t.getAttribute("x"),i=t.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=i&&(this._textY=parseFloat(i));var r=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0",s=new mw;return _A(e,s),bA(t,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(r),this._textY+=parseFloat(o),s},path:function(t,e){var n=NC(t.getAttribute("d")||"");return _A(e,n),bA(t,n,this._defsUsePending,!1,!1),n.silent=!0,n}}),t}(),mA={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||"0",10),n=parseInt(t.getAttribute("y1")||"0",10),i=parseInt(t.getAttribute("x2")||"10",10),r=parseInt(t.getAttribute("y2")||"0",10),o=new DT(e,n,i,r);return yA(t,o),vA(t,o),o},radialgradient:function(t){var e=parseInt(t.getAttribute("cx")||"0",10),n=parseInt(t.getAttribute("cy")||"0",10),i=parseInt(t.getAttribute("r")||"0",10),r=new PT(e,n,i);return yA(t,r),vA(t,r),r}};function yA(t,e){"userSpaceOnUse"===t.getAttribute("gradientUnits")&&(e.global=!0)}function vA(t,e){for(var n=t.firstChild;n;){if(1===n.nodeType&&"stop"===n.nodeName.toLocaleLowerCase()){var i=n.getAttribute("offset"),r=void 0;r=i&&i.indexOf("%")>0?parseInt(i,10)/100:i?parseFloat(i):0;var o={};DA(n,o,o);var s=o.stopColor||n.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:r,color:s})}n=n.nextSibling}}function _A(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),zm(e.__inheritedStyle,t.__inheritedStyle))}function wA(t){for(var e=TA(t),n=[],i=0;i<e.length;i+=2){var r=parseFloat(e[i]),o=parseFloat(e[i+1]);n.push([r,o])}return n}function bA(t,e,n,i,r){var o=e,s=o.__inheritedStyle=o.__inheritedStyle||{},a={};1===t.nodeType&&(function(t,e){var n=t.getAttribute("transform");if(n){n=n.replace(/,/g," ");var i=[],r=null;n.replace(IA,(function(t,e,n){return i.push(e,n),""}));for(var o=i.length-1;o>0;o-=2){var s=i[o],a=i[o-1],l=TA(s);switch(r=r||[1,0,0,1,0,0],a){case"translate":C_(r,r,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":I_(r,r,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":T_(r,r,-parseFloat(l[0])*kA);break;case"skewX":S_(r,[1,0,Math.tan(parseFloat(l[0])*kA),1,0,0],r);break;case"skewY":S_(r,[1,Math.tan(parseFloat(l[0])*kA),0,1,0,0],r);break;case"matrix":r[0]=parseFloat(l[0]),r[1]=parseFloat(l[1]),r[2]=parseFloat(l[2]),r[3]=parseFloat(l[3]),r[4]=parseFloat(l[4]),r[5]=parseFloat(l[5])}}e.setLocalTransform(r)}}(t,e),DA(t,s,a),i||function(t,e,n){for(var i=0;i<dA.length;i++){var r=dA[i];null!=(o=t.getAttribute(r))&&(e[hA[r]]=o)}for(i=0;i<fA.length;i++){var o;r=fA[i];null!=(o=t.getAttribute(r))&&(n[pA[r]]=o)}}(t,s,a)),o.style=o.style||{},null!=s.fill&&(o.style.fill=SA(o,"fill",s.fill,n)),null!=s.stroke&&(o.style.stroke=SA(o,"stroke",s.stroke,n)),Wm(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(t){null!=s[t]&&(o.style[t]=parseFloat(s[t]))})),Wm(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],(function(t){null!=s[t]&&(o.style[t]=s[t])})),r&&(o.__selfStyle=a),s.lineDash&&(o.style.lineDash=jm(TA(s.lineDash),(function(t){return parseFloat(t)}))),"hidden"!==s.visibility&&"collapse"!==s.visibility||(o.invisible=!0),"none"===s.display&&(o.ignore=!0)}var xA=/^url\(\s*#(.*?)\)/;function SA(t,e,n,i){var r=n&&n.match(xA);if(!r)return"none"===n&&(n=null),n;var o=hy(r[1]);i.push([t,e,o])}var CA=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function TA(t){return t.match(CA)||[]}var IA=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,kA=Math.PI/180;var MA=/([^\s:;]+)\s*:\s*([^:;]+)/g;function DA(t,e,n){var i,r=t.getAttribute("style");if(r)for(MA.lastIndex=0;null!=(i=MA.exec(r));){var o=i[1],s=yy(hA,o)?hA[o]:null;s&&(e[s]=i[2]);var a=yy(pA,o)?pA[o]:null;a&&(n[a]=i[2])}}function PA(t,e){var n=e.width/t.width,i=e.height/t.height,r=Math.min(n,i);return{scale:r,x:-(t.x+t.width/2)*r+(e.x+e.width/2),y:-(t.y+t.height/2)*r+(e.y+e.height/2)}}function AA(t,e){return Math.abs(t-e)<1e-8}function EA(t,e,n){var i=0,r=t[0];if(!r)return!1;for(var o=1;o<t.length;o++){var s=t[o];i+=Gx(r[0],r[1],s[0],s[1],e,n),r=s}var a=t[0];return AA(r[0],a[0])&&AA(r[1],a[1])||(i+=Gx(r[0],r[1],a[0],a[1],e,n)),0!==i}var OA=[],RA=function(){function t(t){this.name=t}return t.prototype.getCenter=function(){},t}(),NA=function(t){function e(e,n,i){var r=t.call(this,e)||this;if(r.type="geoJSON",r.geometries=n,i)i=[i[0],i[1]];else{var o=r.getBoundingRect();i=[o.x+o.width/2,o.y+o.height/2]}return r._center=i,r}return gm(e,t),e.prototype.getBoundingRect=function(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,n=[e,e],i=[-e,-e],r=[],o=[],s=this.geometries,a=0;a<s.length;a++){if("polygon"===s[a].type)hx(s[a].exterior,r,o),Ey(n,n,r),Oy(i,i,o)}return 0===a&&(n[0]=n[1]=i[0]=i[1]=0),this._rect=new $_(n[0],n[1],i[0]-n[0],i[1]-n[1])},e.prototype.contain=function(t){var e=this.getBoundingRect(),n=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var i=0,r=n.length;i<r;i++)if("polygon"===n[i].type){var o=n[i].exterior,s=n[i].interiors;if(EA(o,t[0],t[1])){for(var a=0;a<(s?s.length:0);a++)if(EA(s[a],t[0],t[1]))continue t;return!0}}return!1},e.prototype.transformTo=function(t,e,n,i){var r=this.getBoundingRect(),o=r.width/r.height;n?i||(i=n/o):n=o*i;for(var s=new $_(t,e,n,i),a=r.calculateTransform(s),l=this.geometries,u=0;u<l.length;u++)if("polygon"===l[u].type){for(var c=l[u].exterior,h=l[u].interiors,d=0;d<c.length;d++)Ay(c[d],c[d],a);for(var p=0;p<(h?h.length:0);p++)for(d=0;d<h[p].length;d++)Ay(h[p][d],h[p][d],a)}(r=this._rect).copy(s),this._center=[r.x+r.width/2,r.y+r.height/2]},e.prototype.cloneShallow=function(t){null==t&&(t=this.name);var n=new e(t,this.geometries,this._center);return n._rect=this._rect,n.transformTo=null,n},e.prototype.getCenter=function(){return this._center},e.prototype.setCenter=function(t){this._center=t},e}(RA),LA=function(t){function e(e,n){var i=t.call(this,e)||this;return i.type="geoSVG",i._elOnlyForCalculate=n,i}return gm(e,t),e.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this._calculateCenter()),t},e.prototype._calculateCenter=function(){for(var t=this._elOnlyForCalculate,e=t.getBoundingRect(),n=[e.x+e.width/2,e.y+e.height/2],i=x_(OA),r=t;r&&!r.isGeoSVGGraphicRoot;)S_(i,r.getLocalTransform(),i),r=r.parent;return k_(i,i),Ay(n,n,i),n},e}(RA),FA=gy(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),zA=function(){function t(t,e){this.type="geoSVG",this._usedGraphicMap=gy(),this._freedGraphics=[],this._mapName=t,this._parsedXML=cA(e)}return t.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=function(t){var e=[],n=gy();return Wm(t,(function(t){if(null==t.namedFrom){var i=new LA(t.name,t.el);e.push(i),n.set(t.name,i)}})),{regions:e,regionsMap:n}}(t.named),n=e.regions,i=e.regionsMap;this._regions=n,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},t.prototype._buildGraphic=function(t){var e,n,i,r;try{cy(null!=(n=(e=t&&(i=t,r={ignoreViewBox:!0,ignoreRootClip:!0},(new gA).parse(i,r))||{}).root))}catch(y){throw new Error("Invalid svg format\n"+y.message)}var o=new mw;o.add(n),o.isGeoSVGGraphicRoot=!0;var s=e.width,a=e.height,l=e.viewBoxRect,u=this._boundingRect;if(!u){var c=void 0,h=void 0,d=void 0,p=void 0;if(null!=s?(c=0,d=s):l&&(c=l.x,d=l.width),null!=a?(h=0,p=a):l&&(h=l.y,p=l.height),null==c||null==h){var f=n.getBoundingRect();null==c&&(c=f.x,d=f.width),null==h&&(h=f.y,p=f.height)}u=this._boundingRect=new $_(c,h,d,p)}if(l){var g=PA(l,u);n.scaleX=n.scaleY=g.scale,n.x=g.x,n.y=g.y}o.setClipPath(new _S({shape:u.plain()}));var m=[];return Wm(e.named,(function(t){var e;null!=FA.get(t.svgNodeTagLower)&&(m.push(t),(e=t.el).silent=!1,e.isGroup&&e.traverse((function(t){t.silent=!1})))})),{root:o,boundingRect:u,named:m}},t.prototype.useGraphic=function(t){var e=this._usedGraphicMap,n=e.get(t);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(t,n),n)},t.prototype.freeGraphic=function(t){var e=this._usedGraphicMap,n=e.get(t);n&&(e.removeKey(t),this._freedGraphics.push(n))},t}();function BA(t,e,n){for(var i=[],r=e[0],o=e[1],s=0;s<t.length;s+=2){var a=t.charCodeAt(s)-64,l=t.charCodeAt(s+1)-64;a=a>>1^-(1&a),l=l>>1^-(1&l),r=a+=r,o=l+=o,i.push([a/n,l/n])}return i}function UA(t,e){return jm(Gm((t=function(t){if(!t.UTF8Encoding)return t;var e=t,n=e.UTF8Scale;null==n&&(n=1024);for(var i=e.features,r=0;r<i.length;r++){var o=i[r].geometry;if("Polygon"===o.type)for(var s=o.coordinates,a=0;a<s.length;a++)s[a]=BA(s[a],o.encodeOffsets[a],n);else if("MultiPolygon"===o.type)for(s=o.coordinates,a=0;a<s.length;a++)for(var l=s[a],u=0;u<l.length;u++)l[u]=BA(l[u],o.encodeOffsets[a][u],n)}return e.UTF8Encoding=!1,e}(t)).features,(function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0})),(function(t){var n=t.properties,i=t.geometry,r=[];if("Polygon"===i.type){var o=i.coordinates;r.push({type:"polygon",exterior:o[0],interiors:o.slice(1)})}"MultiPolygon"===i.type&&Wm(o=i.coordinates,(function(t){t[0]&&r.push({type:"polygon",exterior:t[0],interiors:t.slice(1)})}));var s=new NA(n[e||"name"],r,n.cp);return s.properties=n,s}))}for(var VA=[126,25],HA=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],WA=0;WA<HA.length;WA++)for(var jA=0;jA<HA[WA].length;jA++)HA[WA][jA][0]/=10.5,HA[WA][jA][1]/=-14,HA[WA][jA][0]+=VA[0],HA[WA][jA][1]+=VA[1];var qA={"":[32,80],"":[0,-10],"":[10,5],"":[-10,10],"":[5,5]};var GA={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};var YA=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];var $A=function(){function t(t,e,n){var i;this.type="geoJSON",this._parsedMap=gy(),this._mapName=t,this._specialAreas=n,this._geoJSON=Jm(i=e)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(i):new Function("return ("+i+");")():i}return t.prototype.load=function(t,e){e=e||"name";var n=this._parsedMap.get(e);if(!n){var i=this._parseToRegions(e);n=this._parsedMap.set(e,{regions:i,boundingRect:XA(i)})}var r=gy(),o=[];return Wm(n.regions,(function(e){var n=e.name;t&&t.hasOwnProperty(n)&&(e=e.cloneShallow(n=t[n])),o.push(e),r.set(n,e)})),{regions:o,boundingRect:n.boundingRect||new $_(0,0,0,0),regionsMap:r}},t.prototype._parseToRegions=function(t){var e,n=this._mapName,i=this._geoJSON;try{e=i?UA(i,t):[]}catch(r){throw new Error("Invalid geoJson format\n"+r.message)}return function(t,e){if("china"===t){for(var n=0;n<e.length;n++)if(""===e[n].name)return;e.push(new NA("",jm(HA,(function(t){return{type:"polygon",exterior:t}})),VA))}}(n,e),Wm(e,(function(t){var e=t.name;!function(t,e){if("china"===t){var n=qA[e.name];if(n){var i=e.getCenter();i[0]+=n[0]/10.5,i[1]+=-n[1]/14,e.setCenter(i)}}}(n,t),function(t,e){if("world"===t){var n=GA[e.name];if(n){var i=[n[0],n[1]];e.setCenter(i)}}}(n,t),function(t,e){"china"===t&&""===e.name&&e.geometries.push({type:"polygon",exterior:YA[0]})}(n,t);var i=this._specialAreas&&this._specialAreas[e];i&&t.transformTo(i.left,i.top,i.width,i.height)}),this),e},t.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},t}();function XA(t){for(var e,n=0;n<t.length;n++){var i=t[n].getBoundingRect();(e=e||i.clone()).union(i)}return e}var KA=gy(),ZA=function(t,e,n){if(e.svg){var i=new zA(t,e.svg);KA.set(t,i)}else{var r=e.geoJson||e.geoJSON;r&&!e.features?n=e.specialAreas:r=e;i=new $A(t,r,n);KA.set(t,i)}},JA=new Ly,QA="undefined"!=typeof window,tE={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:4500,ARIA:6e3,DECAL:7e3}},eE=/^[a-zA-Z0-9_]+$/;function nE(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!this.isDisposed())return rE(this,t,e);this.id}}function iE(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return rE(this,t,e)}}function rE(t,e,n){return n[0]=n[0]&&n[0].toLowerCase(),Ly.prototype[e].apply(t,n)}var oE,sE,aE,lE,uE,cE,hE,dE,pE,fE,gE,mE,yE,vE,_E,wE,bE,xE,SE,CE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gm(e,t),e}(Ly),TE=CE.prototype;TE.on=iE("on"),TE.off=iE("off");var IE=function(t){function e(e,n,i){var r=t.call(this,new xP)||this;r._chartsViews=[],r._chartsMap={},r._componentsViews=[],r._componentsMap={},r._pendingActions=[],i=i||{},"string"==typeof n&&(n=RE[n]),r._dom=e;var o=r._zr=bw(e,{renderer:i.renderer||"canvas",devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,useDirtyRect:null!=i.useDirtyRect&&i.useDirtyRect});r._throttledZrFlush=jD($m(o.flush,o),17),(n=Nm(n))&&sM(n,!0),r._theme=n,r._locale=function(t){if(Jm(t)){var e=NI[t.toUpperCase()]||{};return"ZH"===t||"EN"===t?Nm(e):Lm(Nm(e),Nm(NI.EN),!1)}return Lm(Nm(t),Nm(NI.EN),!1)}(i.locale||FI),r._coordSysMgr=new Fk;var s=r._api=wE(r);function a(t,e){return t.__prio-e.__prio}return pv(OE,a),pv(AE,a),r._scheduler=new mP(r,s,AE,OE),r._messageCenter=new CE,r._initEvents(),r.resize=$m(r.resize,r),o.animation.on("frame",r._onframe,r),fE(o,r),gE(o,r),dy(r),r}return gm(e,t),e.prototype._onframe=function(){if(!this._disposed){SE(this);var t=this._scheduler;if(this.__pendingUpdate){var e=this.__pendingUpdate.silent;this.__flagInMainProcess=!0,oE(this),lE.update.call(this,null,this.__pendingUpdate.updateParams),this._zr.flush(),this.__flagInMainProcess=!1,this.__pendingUpdate=null,dE.call(this,e),pE.call(this,e)}else if(t.unfinished){var n=1,i=this._model,r=this._api;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(i),t.performDataProcessorTasks(i),cE(this,i),t.performVisualTasks(i),_E(this,this._model,r,"remain",{}),n-=+new Date-o}while(n>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.setOption=function(t,e,n){if(this._disposed)this.id;else{var i,r,o;if(ey(e)&&(n=e.lazyUpdate,i=e.silent,r=e.replaceMerge,o=e.transition,e=e.notMerge),this.__flagInMainProcess=!0,!this._model||e){var s=new Uk(this._api),a=this._theme,l=this._model=new Ok;l.scheduler=this._scheduler,l.init(null,null,null,a,this._locale,s)}this._model.setOption(t,{replaceMerge:r},EE);var u={seriesTransition:o,optionChanged:!0};n?(this.__pendingUpdate={silent:i,updateParams:u},this.__flagInMainProcess=!1,this.getZr().wakeUp()):(oE(this),lE.update.call(this,null,u),this._zr.flush(),this.__pendingUpdate=null,this.__flagInMainProcess=!1,dE.call(this,i),pE.call(this,i))}},e.prototype.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||QA&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){if(wm.canvasSupported)return t=t||{},this._zr.painter.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.getSvgDataURL=function(){if(wm.svgSupported){var t=this._zr;return Wm(t.storage.getDisplayList(),(function(t){t.stopAnimation(null,!0)})),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(!this._disposed){var e=(t=t||{}).excludeComponents,n=this._model,i=[],r=this;Wm(e,(function(t){n.eachComponent({mainType:t},(function(t){var e=r._componentsMap[t.__viewId];e.group.ignore||(i.push(e),e.group.ignore=!0)}))}));var o="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return Wm(i,(function(t){t.group.ignore=!1})),o}this.id},e.prototype.getConnectedDataURL=function(t){if(this._disposed)this.id;else if(wm.canvasSupported){var e="svg"===t.type,n=this.group,i=Math.min,r=Math.max,o=1/0;if(FE[n]){var s=o,a=o,l=-1/0,u=-1/0,c=[],h=t&&t.pixelRatio||this.getDevicePixelRatio();Wm(LE,(function(o,h){if(o.group===n){var d=e?o.getZr().painter.getSvgDom().innerHTML:o.getRenderedCanvas(Nm(t)),p=o.getDom().getBoundingClientRect();s=i(p.left,s),a=i(p.top,a),l=r(p.right,l),u=r(p.bottom,u),c.push({dom:d,left:p.left,top:p.top})}}));var d=(l*=h)-(s*=h),p=(u*=h)-(a*=h),f=Bm(),g=bw(f,{renderer:e?"svg":"canvas"});if(g.resize({width:d,height:p}),e){var m="";return Wm(c,(function(t){var e=t.left-s,n=t.top-a;m+='<g transform="translate('+e+","+n+')">'+t.dom+"</g>"})),g.painter.getSvgRoot().innerHTML=m,t.connectedBackgroundColor&&g.painter.setBackgroundColor(t.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()}return t.connectedBackgroundColor&&g.add(new _S({shape:{x:0,y:0,width:d,height:p},style:{fill:t.connectedBackgroundColor}})),Wm(c,(function(t){var e=new hS({style:{x:t.left*h-s,y:t.top*h-a,image:t.dom}});g.add(e)})),g.refreshImmediately(),f.toDataURL("image/"+(t&&t.type||"png"))}return this.getDataURL(t)}},e.prototype.convertToPixel=function(t,e){return uE(this,"convertToPixel",t,e)},e.prototype.convertFromPixel=function(t,e){return uE(this,"convertFromPixel",t,e)},e.prototype.containPixel=function(t,e){var n;if(!this._disposed)return Wm(Xw(this._model,t),(function(t,i){i.indexOf("Models")>=0&&Wm(t,(function(t){var r=t.coordinateSystem;if(r&&r.containPoint)n=n||!!r.containPoint(e);else if("seriesModels"===i){var o=this._chartsMap[t.__viewId];o&&o.containPoint&&(n=n||o.containPoint(e,t))}}),this)}),this),!!n;this.id},e.prototype.getVisual=function(t,e){var n=Xw(this._model,t,{defaultMainType:"series"}),i=n.seriesModel.getData(),r=n.hasOwnProperty("dataIndexInside")?n.dataIndexInside:n.hasOwnProperty("dataIndex")?i.indexOfRawIndex(n.dataIndex):null;return null!=r?function(t,e,n){switch(n){case"color":return t.getItemVisual(e,"style")[t.getVisual("drawType")];case"opacity":return t.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(e,n)}}(i,r,e):function(t,e){switch(e){case"color":return t.getVisual("style")[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(e)}}(i,e)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t,e,n,i=this;Wm(ME,(function(t){var e=function(e){var n,r=i.getModel(),o=e.target;if("globalout"===t?n={}:o&&TP(o,(function(t){var e=ES(t);if(e&&null!=e.dataIndex){var i=e.dataModel||r.getSeriesByIndex(e.seriesIndex);return n=i&&i.getDataParams(e.dataIndex,e.dataType)||{},!0}if(e.eventData)return n=Fm({},e.eventData),!0}),!0),n){var s=n.componentType,a=n.componentIndex;"markLine"!==s&&"markPoint"!==s&&"markArea"!==s||(s="series",a=n.seriesIndex);var l=s&&null!=a&&r.getComponent(s,a),u=l&&i["series"===l.mainType?"_chartsMap":"_componentsMap"][l.__viewId];n.event=e,n.type=t,i._$eventProcessor.eventInfo={targetEl:o,packedEvent:n,model:l,view:u},i.trigger(t,n)}};e.zrEventfulCallAtLast=!0,i._zr.on(t,e,i)})),Wm(PE,(function(t,e){i._messageCenter.on(e,(function(t){this.trigger(e,t)}),i)})),Wm(["selectchanged"],(function(t){i._messageCenter.on(t,(function(e){this.trigger(t,e)}),i)})),t=this._messageCenter,e=this,n=this._api,t.on("selectchanged",(function(t){var i=n.getModel();t.isFromClick?(CP("map","selectchanged",e,i,t),CP("pie","selectchanged",e,i,t)):"select"===t.fromAction?(CP("map","selected",e,i,t),CP("pie","selected",e,i,t)):"unselect"===t.fromAction&&(CP("map","unselected",e,i,t),CP("pie","unselected",e,i,t))}))},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){this._disposed?this.id:this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed)this.id;else{this._disposed=!0,Qw(this.getDom(),BE,"");var t=this,e=t._api,n=t._model;Wm(t._componentsViews,(function(t){t.dispose(n,e)})),Wm(t._chartsViews,(function(t){t.dispose(n,e)})),t._zr.dispose(),t._dom=t._model=t._chartsMap=t._componentsMap=t._chartsViews=t._componentsViews=t._scheduler=t._api=t._zr=t._throttledZrFlush=t._theme=t._coordSysMgr=t._messageCenter=null,delete LE[t.id]}},e.prototype.resize=function(t){if(this._disposed)this.id;else{this._zr.resize(t);var e=this._model;if(this._loadingFX&&this._loadingFX.resize(),e){var n=e.resetOption("media"),i=t&&t.silent;this.__pendingUpdate&&(null==i&&(i=this.__pendingUpdate.silent),n=!0,this.__pendingUpdate=null),this.__flagInMainProcess=!0,n&&oE(this),lE.update.call(this,{type:"resize",animation:Fm({duration:0},t&&t.animation)}),this.__flagInMainProcess=!1,dE.call(this,i),pE.call(this,i)}}},e.prototype.showLoading=function(t,e){if(this._disposed)this.id;else if(ey(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),NE[t]){var n=NE[t](this._api,e),i=this._zr;this._loadingFX=n,i.add(n)}},e.prototype.hideLoading=function(){this._disposed?this.id:(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},e.prototype.makeActionFromEvent=function(t){var e=Fm({},t);return e.type=PE[t.type],e},e.prototype.dispatchAction=function(t,e){if(this._disposed)this.id;else if(ey(e)||(e={silent:!!e}),DE[t.type]&&this._model)if(this.__flagInMainProcess)this._pendingActions.push(t);else{var n=e.silent;hE.call(this,t,n);var i=e.flush;i?this._zr.flush():!1!==i&&wm.browser.weChat&&this._throttledZrFlush(),dE.call(this,n),pE.call(this,n)}},e.prototype.updateLabelLayout=function(){JA.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed)this.id;else{var e=t.seriesIndex;this.getModel().getSeriesByIndex(e).appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},e.internalField=function(){function t(t){for(var e=[],n=t.currentStates,i=0;i<n.length;i++){var r=n[i];"emphasis"!==r&&"blur"!==r&&"select"!==r&&e.push(r)}t.selected&&t.states.select&&e.push("select"),2===t.hoverState&&t.states.emphasis?e.push("emphasis"):1===t.hoverState&&t.states.blur&&e.push("blur"),t.useStates(e)}function e(t,e){t.preventAutoZ||n(e.group,t.get("z")||0,t.get("zlevel")||0,-1/0)}function n(t,e,i,r){var o=t.getTextContent(),s=t.getTextGuideLine();if(t.isGroup)for(var a=t.childrenRef(),l=0;l<a.length;l++)r=Math.max(n(a[l],e,i,r),r);else t.z=e,t.zlevel=i,r=Math.max(t.z2,r);if(o&&(o.z=e,o.zlevel=i,isFinite(r)&&(o.z2=r+2)),s){var u=t.textGuideLineConfig;s.z=e,s.zlevel=i,isFinite(r)&&(s.z2=r+(u&&u.showAbove?1:-1))}return r}function i(t,e){e.group.traverse((function(t){if(!HT(t)){var e=t.getTextContent(),n=t.getTextGuideLine();t.stateTransition&&(t.stateTransition=null),e&&e.stateTransition&&(e.stateTransition=null),n&&n.stateTransition&&(n.stateTransition=null),t.hasState()?(t.prevStates=t.currentStates,t.clearStates()):t.prevStates&&(t.prevStates=null)}}))}function r(e,n){var i=e.getModel("stateAnimation"),r=e.isAnimationEnabled(),o=i.get("duration"),s=o>0?{duration:o,delay:i.get("delay"),easing:i.get("easing")}:null;n.group.traverse((function(e){if(e.states&&e.states.emphasis){if(HT(e))return;if(e instanceof rS&&function(t){var e=NS(t);e.normalFill=t.style.fill,e.normalStroke=t.style.stroke;var n=t.states.select||{};e.selectFill=n.style&&n.style.fill||null,e.selectStroke=n.style&&n.style.stroke||null}(e),e.__dirty){var n=e.prevStates;n&&e.useStates(n)}if(r){e.stateTransition=s;var i=e.getTextContent(),o=e.getTextGuideLine();i&&(i.stateTransition=s),o&&(o.stateTransition=s)}e.__dirty&&t(e)}}))}oE=function(t){var e=t._scheduler;e.restorePipelines(t._model),e.prepareStageTasks(),sE(t,!0),sE(t,!1),e.plan()},sE=function(t,e){for(var n=t._model,i=t._scheduler,r=e?t._componentsViews:t._chartsViews,o=e?t._componentsMap:t._chartsMap,s=t._zr,a=t._api,l=0;l<r.length;l++)r[l].__alive=!1;function u(t){var l=t.__requireNewView;t.__requireNewView=!1;var u="_ec_"+t.id+"_"+t.type,c=!l&&o[u];if(!c){var h=eb(t.type);(c=new(e?ED.getClass(h.main,h.sub):HD.getClass(h.sub))).init(n,a),o[u]=c,r.push(c),s.add(c.group)}t.__viewId=c.__id=u,c.__alive=!0,c.__model=t,c.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex},!e&&i.prepareView(c,t,n,a)}e?n.eachComponent((function(t,e){"series"!==t&&u(e)})):n.eachSeries(u);for(l=0;l<r.length;){var c=r[l];c.__alive?l++:(!e&&c.renderTask.dispose(),s.remove(c.group),c.dispose(n,a),r.splice(l,1),o[c.__id]===c&&delete o[c.__id],c.__id=c.group.__ecComponentInfo=null)}},aE=function(t,e,n,i,r){var o=t._model;if(o.setUpdatePayload(n),i){var s={};s[i+"Id"]=n[i+"Id"],s[i+"Index"]=n[i+"Index"],s[i+"Name"]=n[i+"Name"];var a={mainType:i,query:s};r&&(a.subType=r);var l,u=n.excludeSeriesId;null!=u&&(l=gy(),Wm(Nw(u),(function(t){var e=Ww(t,null);null!=e&&l.set(e,!0)}))),yC(n)&&sC(t._api),o&&o.eachComponent(a,(function(e){if(!(l&&null!==l.get(e.id)))if(yC(n))if(e instanceof PD)"highlight"!==n.type||n.notBlur||function(t,e,n){var i=t.seriesIndex,r=t.getData(e.dataType),o=Gw(r,e);o=(Km(o)?o[0]:o)||0;var s=r.getItemGraphicEl(o);if(!s)for(var a=r.count(),l=0;!s&&l<a;)s=r.getItemGraphicEl(l++);if(s){var u=ES(s);aC(i,u.focus,u.blurScope,n)}else{var c=t.get(["emphasis","focus"]),h=t.get(["emphasis","blurScope"]);null!=c&&aC(i,c,h,n)}}(e,n,t._api);else{var i=uC(e.mainType,e.componentIndex,n.name,t._api),r=i.focusSelf,o=i.dispatchers;"highlight"===n.type&&r&&!n.notBlur&&lC(e.mainType,e.componentIndex,t._api),o&&Wm(o,(function(t){"highlight"===n.type?tC(t):eC(t)}))}else mC(n)&&e instanceof PD&&(!function(t,e,n){if(mC(e)){var i=e.dataType,r=Gw(t.getData(i),e);Km(r)||(r=[r]),t["toggleSelect"===e.type?"toggleSelect":"select"===e.type?"select":"unselect"](r,i)}}(e,n,t._api),cC(e),xE(t))}),t),o&&o.eachComponent(a,(function(e){l&&null!==l.get(e.id)||c(t["series"===i?"_chartsMap":"_componentsMap"][e.__viewId])}),t)}else Wm([].concat(t._componentsViews).concat(t._chartsViews),c);function c(i){i&&i.__alive&&i[e]&&i[e](i.__model,o,t._api,n)}},lE={prepareAndUpdate:function(t){oE(this),lE.update.call(this,t,{optionChanged:null!=t.newOption})},update:function(t,e){var n=this._model,i=this._api,r=this._zr,o=this._coordSysMgr,s=this._scheduler;if(n){n.setUpdatePayload(t),s.restoreData(n,t),s.performSeriesTasks(n),o.create(n,i),s.performDataProcessorTasks(n,t),cE(this,n),o.update(n,i),mE(n),s.performVisualTasks(n,t),yE(this,n,i,t,e);var a=n.get("backgroundColor")||"transparent",l=n.get("darkMode");if(wm.canvasSupported)r.setBackgroundColor(a),null!=l&&"auto"!==l&&r.setDarkMode(l);else{var u=Lv(a);a=zv(u,"rgb"),0===u[3]&&(a="transparent")}JA.trigger("afterupdate",n,i)}},updateTransform:function(t){var e=this,n=this._model,i=this._api;if(n){n.setUpdatePayload(t);var r=[];n.eachComponent((function(o,s){if("series"!==o){var a=e.getViewOfComponentModel(s);if(a&&a.__alive)if(a.updateTransform){var l=a.updateTransform(s,n,i,t);l&&l.update&&r.push(a)}else r.push(a)}}));var o=gy();n.eachSeries((function(r){var s=e._chartsMap[r.__viewId];if(s.updateTransform){var a=s.updateTransform(r,n,i,t);a&&a.update&&o.set(r.uid,1)}else o.set(r.uid,1)})),mE(n),this._scheduler.performVisualTasks(n,t,{setDirty:!0,dirtyMap:o}),_E(this,n,i,t,{},o),JA.trigger("afterupdate",n,i)}},updateView:function(t){var e=this._model;e&&(e.setUpdatePayload(t),HD.markUpdateMethod(t,"updateView"),mE(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0}),yE(this,e,this._api,t,{}),JA.trigger("afterupdate",e,this._api))},updateVisual:function(t){var e=this,n=this._model;n&&(n.setUpdatePayload(t),n.eachSeries((function(t){t.getData().clearAllVisual()})),HD.markUpdateMethod(t,"updateVisual"),mE(n),this._scheduler.performVisualTasks(n,t,{visualType:"visual",setDirty:!0}),n.eachComponent((function(i,r){if("series"!==i){var o=e.getViewOfComponentModel(r);o&&o.__alive&&o.updateVisual(r,n,e._api,t)}})),n.eachSeries((function(i){e._chartsMap[i.__viewId].updateVisual(i,n,e._api,t)})),JA.trigger("afterupdate",n,this._api))},updateLayout:function(t){lE.update.call(this,t)}},uE=function(t,e,n,i){if(t._disposed)t.id;else for(var r,o=t._model,s=t._coordSysMgr.getCoordinateSystems(),a=Xw(o,n),l=0;l<s.length;l++){var u=s[l];if(u[e]&&null!=(r=u[e](o,a,i)))return r}},cE=function(t,e){var n=t._chartsMap,i=t._scheduler;e.eachSeries((function(t){i.updateStreamModes(t,n[t.__viewId])}))},hE=function(t,e){var n=this,i=this.getModel(),r=t.type,o=t.escapeConnect,s=DE[r],a=s.actionInfo,l=(a.update||"update").split(":"),u=l.pop(),c=null!=l[0]&&eb(l[0]);this.__flagInMainProcess=!0;var h=[t],d=!1;t.batch&&(d=!0,h=jm(t.batch,(function(e){return(e=zm(Fm({},e),t)).batch=null,e})));var p,f=[],g=mC(t),m=yC(t);if(Wm(h,(function(e){if((p=(p=s.action(e,n._model,n._api))||Fm({},e)).type=a.event||p.type,f.push(p),m){var i=Kw(t),r=i.queryOptionMap,o=i.mainTypeSpecified?r.keys()[0]:"series";aE(n,u,e,o),xE(n)}else g?(aE(n,u,e,"series"),xE(n)):c&&aE(n,u,e,c.main,c.sub)})),"none"===u||m||g||c||(this.__pendingUpdate?(oE(this),lE.update.call(this,t),this.__pendingUpdate=null):lE[u].call(this,t)),p=d?{type:a.event||r,escapeConnect:o,batch:f}:f[0],this.__flagInMainProcess=!1,!e){var y=this._messageCenter;if(y.trigger(p.type,p),g){var v={type:"selectchanged",escapeConnect:o,selected:hC(i),isFromClick:t.isFromClick||!1,fromAction:t.type,fromActionPayload:t};y.trigger(v.type,v)}}},dE=function(t){for(var e=this._pendingActions;e.length;){var n=e.shift();hE.call(this,n,t)}},pE=function(t){!t&&this.trigger("updated")},fE=function(t,e){t.on("rendered",(function(n){e.trigger("rendered",n),!t.animation.isFinished()||e.__pendingUpdate||e._scheduler.unfinished||e._pendingActions.length||e.trigger("finished")}))},gE=function(t,e){t.on("mouseover",(function(t){var n=TP(t.target,gC);n&&(!function(t,e,n){var i=ES(t),r=uC(i.componentMainType,i.componentIndex,i.componentHighDownName,n),o=r.dispatchers,s=r.focusSelf;o?(s&&lC(i.componentMainType,i.componentIndex,n),Wm(o,(function(t){return JS(t,e)}))):(aC(i.seriesIndex,i.focus,i.blurScope,n),"self"===i.focus&&lC(i.componentMainType,i.componentIndex,n),JS(t,e))}(n,t,e._api),xE(e))})).on("mouseout",(function(t){var n=TP(t.target,gC);n&&(!function(t,e,n){sC(n);var i=ES(t),r=uC(i.componentMainType,i.componentIndex,i.componentHighDownName,n).dispatchers;r?Wm(r,(function(t){return QS(t,e)})):QS(t,e)}(n,t,e._api),xE(e))})).on("click",(function(t){var n=TP(t.target,(function(t){return null!=ES(t).dataIndex}),!0);if(n){var i=n.selected?"unselect":"select",r=ES(n);e._api.dispatchAction({type:i,dataType:r.dataType,dataIndexInside:r.dataIndex,seriesIndex:r.seriesIndex,isFromClick:!0})}}))},mE=function(t){t.clearColorPalette(),t.eachSeries((function(t){t.clearColorPalette()}))},yE=function(t,e,n,i,r){vE(t,e,n,i,r),Wm(t._chartsViews,(function(t){t.__alive=!1})),_E(t,e,n,i,r),Wm(t._chartsViews,(function(t){t.__alive||t.remove(e,n)}))},vE=function(t,n,o,s,a,l){Wm(l||t._componentsViews,(function(t){var a=t.__model;i(a,t),t.render(a,n,o,s),e(a,t),r(a,t)}))},_E=function(t,n,o,s,a,l){var u=t._scheduler;a=Fm(a||{},{updatedSeries:n.getSeries()}),JA.trigger("series:beforeupdate",n,o,a);var c=!1;n.eachSeries((function(e){var n=t._chartsMap[e.__viewId];n.__alive=!0;var r=n.renderTask;u.updatePayload(r,s),i(e,n),l&&l.get(e.uid)&&r.dirty(),r.perform(u.getPerformArgs(r))&&(c=!0),n.group.silent=!!e.get("silent"),function(t,e){var n=t.get("blendMode")||null;e.group.traverse((function(t){t.isGroup||(t.style.blend=n),t.eachPendingDisplayable&&t.eachPendingDisplayable((function(t){t.style.blend=n}))}))}(e,n),cC(e)})),u.unfinished=c||u.unfinished,JA.trigger("series:layoutlabels",n,o,a),JA.trigger("series:transition",n,o,a),n.eachSeries((function(n){var i=t._chartsMap[n.__viewId];e(n,i),r(n,i)})),function(t,e){var n=t._zr.storage,i=0;n.traverse((function(t){t.isGroup||i++})),i>e.get("hoverLayerThreshold")&&!wm.node&&!wm.worker&&e.eachSeries((function(e){if(!e.preventUsingHoverLayer){var n=t._chartsMap[e.__viewId];n.__alive&&n.group.traverse((function(t){t.states.emphasis&&(t.states.emphasis.hoverLayer=!0)}))}}))}(t,n),JA.trigger("series:afterupdate",n,o,a)},xE=function(t){t.__needsUpdateStatus=!0,t.getZr().wakeUp()},SE=function(e){e.__needsUpdateStatus&&(e.getZr().storage.traverse((function(e){HT(e)||t(e)})),e.__needsUpdateStatus=!1)},wE=function(t){return new(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return gm(n,e),n.prototype.getCoordinateSystems=function(){return t._coordSysMgr.getCoordinateSystems()},n.prototype.getComponentByElement=function(e){for(;e;){var n=e.__ecComponentInfo;if(null!=n)return t._model.getComponent(n.mainType,n.index);e=e.parent}},n.prototype.enterEmphasis=function(e,n){tC(e,n),xE(t)},n.prototype.leaveEmphasis=function(e,n){eC(e,n),xE(t)},n.prototype.enterBlur=function(e){!function(t){XS(t,jS)}(e),xE(t)},n.prototype.leaveBlur=function(e){nC(e),xE(t)},n.prototype.enterSelect=function(e){iC(e),xE(t)},n.prototype.leaveSelect=function(e){rC(e),xE(t)},n.prototype.getModel=function(){return t.getModel()},n.prototype.getViewOfComponentModel=function(e){return t.getViewOfComponentModel(e)},n.prototype.getViewOfSeriesModel=function(e){return t.getViewOfSeriesModel(e)},n}(Nk))(t)},bE=function(t){function e(t,e){for(var n=0;n<t.length;n++){t[n].__connectUpdateStatus=e}}Wm(PE,(function(n,i){t._messageCenter.on(i,(function(n){if(FE[t.group]&&0!==t.__connectUpdateStatus){if(n&&n.escapeConnect)return;var i=t.makeActionFromEvent(n),r=[];Wm(LE,(function(e){e!==t&&e.group===t.group&&r.push(e)})),e(r,0),Wm(r,(function(t){1!==t.__connectUpdateStatus&&t.dispatchAction(i)})),e(r,2)}}))}))}}(),e}(Ly),kE=IE.prototype;kE.on=nE("on"),kE.off=nE("off"),kE.one=function(t,e,n){var i=this;this.on.call(this,t,(function n(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];e&&e.apply&&e.apply(this,r),i.off(t,n)}),n)};var ME=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var DE={},PE={},AE=[],EE=[],OE=[],RE={},NE={},LE={},FE={},zE=+new Date-0,BE="_echarts_instance_";function UE(t,e,n){var i=function(t){return LE[function(t,e){return t.getAttribute?t.getAttribute(e):t[e]}(t,BE)]}(t);if(i)return i;var r=new IE(t,e,n);return r.id="ec_"+zE++,LE[r.id]=r,Qw(t,BE,r.id),bE(r),JA.trigger("afterinit",r),r}function VE(t,e){RE[t]=e}function HE(t){Um(EE,t)<0&&EE.push(t)}function WE(t,e){$E(AE,t,e,2e3)}function jE(t,e){JA.on(t,e)}function qE(t,e,n){"function"==typeof e&&(n=e,e="");var i=ey(t)?t.type:[t,t={event:e}][0];t.event=(t.event||i).toLowerCase(),e=t.event,PE[e]||(cy(eE.test(i)&&eE.test(e)),DE[i]||(DE[i]={action:n,actionInfo:t}),PE[e]=i)}function GE(t,e){$E(OE,t,e,3e3,"visual")}var YE=[];function $E(t,e,n,i,r){if((Zm(e)||ey(e))&&(n=e,e=i),!(Um(YE,n)>=0)){YE.push(n);var o=mP.wrapStageHandler(n,r);o.__prio=e,o.__raw=n,t.push(o)}}function XE(t,e){NE[t]=e}var KE=function(t){var e=(t=Nm(t)).type;e||Rw("");var n=e.split(":");2!==n.length&&Rw("");var i=!1;"echarts"===n[0]&&(e=n[1],i=!0),t.__isBuiltIn=i,GM.set(e,t)};function ZE(t){return null==t?0:t.length||1}function JE(t){return t}GE(2e3,KD),GE(4500,JD),GE(4500,QD),GE(2e3,SP),GE(4500,{createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(t.hasSymbolVisual&&!e.isSeriesFiltered(t))return{dataEach:t.getData().hasItemOption?function(t,e){var n=t.getItemModel(e),i=n.getShallow("symbol",!0),r=n.getShallow("symbolSize",!0),o=n.getShallow("symbolRotate",!0),s=n.getShallow("symbolOffset",!0),a=n.getShallow("symbolKeepAspect",!0);null!=i&&t.setItemVisual(e,"symbol",i),null!=r&&t.setItemVisual(e,"symbolSize",r),null!=o&&t.setItemVisual(e,"symbolRotate",o),null!=s&&t.setItemVisual(e,"symbolOffset",s),null!=a&&t.setItemVisual(e,"symbolKeepAspect",a)}:null}}}),GE(7e3,(function(t,e){t.eachRawSeries((function(n){if(!t.isSeriesFiltered(n)){var i=n.getData();i.hasItemVisual()&&i.each((function(t){var n=i.getItemVisual(t,"decal");n&&(i.ensureUniqueItemVisual(t,"style").decal=sA(n,e))}));var r=i.getVisual("decal");if(r)i.getVisual("style").decal=sA(r,e)}}))})),HE(sM),WE(900,(function(t){var e=gy();t.eachSeries((function(t){var n=t.get("stack");if(n){var i=e.get(n)||e.set(n,[]),r=t.getData(),o={stackResultDimension:r.getCalculationInfo("stackResultDimension"),stackedOverDimension:r.getCalculationInfo("stackedOverDimension"),stackedDimension:r.getCalculationInfo("stackedDimension"),stackedByDimension:r.getCalculationInfo("stackedByDimension"),isStackedByIndex:r.getCalculationInfo("isStackedByIndex"),data:r,seriesModel:t};if(!o.stackedDimension||!o.isStackedByIndex&&!o.stackedByDimension)return;i.length&&r.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}})),e.each(aM)})),XE("default",(function(t,e){zm(e=e||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new mw,i=new _S({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(i);var r,o=new AS({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),s=new _S({style:{fill:"none"},textContent:o,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});return n.add(s),e.showSpinner&&((r=new IT({shape:{startAngle:-tP/2,endAngle:-tP/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*tP/2}).start("circularInOut"),r.animateShape(!0).when(1e3,{startAngle:3*tP/2}).delay(300).start("circularInOut"),n.add(r)),n.resize=function(){var n=o.getBoundingRect().width,a=e.showSpinner?e.spinnerRadius:0,l=(t.getWidth()-2*a-(e.showSpinner&&n?10:0)-n)/2-(e.showSpinner&&n?0:5+n/2)+(e.showSpinner?0:n/2)+(n?0:a),u=t.getHeight()/2;e.showSpinner&&r.setShape({cx:l,cy:u}),s.setShape({x:l-a,y:u-a,width:2*a,height:2*a}),i.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n})),qE({type:"highlight",event:"highlight",update:"highlight"},vy),qE({type:"downplay",event:"downplay",update:"downplay"},vy),qE({type:"select",event:"select",update:"select"},vy),qE({type:"unselect",event:"unselect",update:"unselect"},vy),qE({type:"toggleSelect",event:"toggleSelect",update:"toggleSelect"},vy),VE("light",vP),VE("dark",bP);var QE=function(){function t(t,e,n,i,r,o){this._old=t,this._new=e,this._oldKeyGetter=n||JE,this._newKeyGetter=i||JE,this.context=r,this._diffModeMultiple="multiple"===o}return t.prototype.add=function(t){return this._add=t,this},t.prototype.update=function(t){return this._update=t,this},t.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},t.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},t.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},t.prototype.remove=function(t){return this._remove=t,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var t=this._old,e=this._new,n={},i=new Array(t.length),r=new Array(e.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(e,n,r,"_newKeyGetter");for(var o=0;o<t.length;o++){var s=i[o],a=n[s],l=ZE(a);if(l>1){var u=a.shift();1===a.length&&(n[s]=a[0]),this._update&&this._update(u,o)}else 1===l?(n[s]=null,this._update&&this._update(a,o)):this._remove&&this._remove(o)}this._performRestAdd(r,n)},t.prototype._executeMultiple=function(){var t=this._old,e=this._new,n={},i={},r=[],o=[];this._initIndexMap(t,n,r,"_oldKeyGetter"),this._initIndexMap(e,i,o,"_newKeyGetter");for(var s=0;s<r.length;s++){var a=r[s],l=n[a],u=i[a],c=ZE(l),h=ZE(u);if(c>1&&1===h)this._updateManyToOne&&this._updateManyToOne(u,l),i[a]=null;else if(1===c&&h>1)this._updateOneToMany&&this._updateOneToMany(u,l),i[a]=null;else if(1===c&&1===h)this._update&&this._update(u,l),i[a]=null;else if(c>1&&h>1)this._updateManyToMany&&this._updateManyToMany(u,l),i[a]=null;else if(c>1)for(var d=0;d<c;d++)this._remove&&this._remove(l[d]);else this._remove&&this._remove(l)}this._performRestAdd(o,i)},t.prototype._performRestAdd=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[i],o=ZE(r);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(r[s]);else 1===o&&this._add&&this._add(r);e[i]=null}},t.prototype._initIndexMap=function(t,e,n,i){for(var r=this._diffModeMultiple,o=0;o<t.length;o++){var s="_ec_"+this[i](t[o],o);if(r||(n[o]=s),e){var a=e[s],l=ZE(a);0===l?(e[s]=o,r&&n.push(s)):1===l?e[s]=[a,o]:a.push(o)}}},t}(),tO=function(){function t(t,e){this._encode=t,this._schema=e}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function eO(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}var nO=function(t){this.otherDims={},null!=t&&Fm(this,t)},iO=Yw(),rO={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},oO=function(){function t(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=aO(this.source)))},t.prototype.getSourceDimensionIndex=function(t){return sy(this._dimNameMap.get(t),-1)},t.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},t.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=wM(this.source),n=!lO(t),i="",r=[],o=0,s=0;o<t;o++){var a=void 0,l=void 0,u=void 0,c=this.dimensions[s];if(c&&c.storeDimIndex===o)a=e?c.name:null,l=c.type,u=c.ordinalMeta,s++;else{var h=this.getSourceDimension(o);h&&(a=e?h.name:null,l=h.type)}r.push({property:a,type:l,ordinalMeta:u}),!e||null==a||c&&c.isCalculationCoord||(i+=n?a.replace(/\`/g,"`1").replace(/\$/g,"`2"):a),i+="$",i+=rO[l]||"f",u&&(i+=u.uid),i+="$"}var d=this.source;return{dimensions:r,hash:[d.seriesLayoutBy,d.startIndex,i].join("$$")}},t.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,n=0;e<this._fullDimCount;e++){var i=void 0,r=this.dimensions[n];if(r&&r.storeDimIndex===e)r.isCalculationCoord||(i=r.name),n++;else{var o=this.getSourceDimension(e);o&&(i=o.name)}t.push(i)}return t},t.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function sO(t){for(var e=gy(),n=0;n<(t||[]).length;n++){var i=t[n],r=ey(i)?i.name:i;null!=r&&null==e.get(r)&&e.set(r,n)}return e}function aO(t){var e=iO(t);return e.dimNameMap||(e.dimNameMap=sO(t.dimensionsDefine))}function lO(t){return t>30}var uO,cO,hO,dO,pO,fO,gO,mO=ey,yO=jm,vO="undefined"==typeof Int32Array?Array:Int32Array,_O=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],wO=["_approximateExtent"],bO=function(){function t(t,e){var n;this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var i=!1;t instanceof oO?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var r={},o=[],s={},a=!1,l={},u=0;u<n.length;u++){var c=n[u],h=Jm(c)?new nO({name:c}):c instanceof nO?c:new nO(c),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};o.push(d),r[d]=h,null!=l[d]&&(a=!0),h.createInvertedIndices&&(s[d]=[]),0===p.itemName&&(this._nameDimIdx=u),0===p.itemId&&(this._idDimIdx=u),i&&(h.storeDimIndex=u)}if(this.dimensions=o,this._dimInfos=r,this._initGetDimensionInfo(a),this.hostModel=e,this._invertedIndicesMap=s,this._dimOmitted){var f=this._dimIdxToName=gy();Wm(o,(function(t){f.set(r[t].storeDimIndex,t)}))}}return t.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(null==e)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var n=this._dimIdxToName.get(e);if(null!=n)return n;var i=this._schema.getSourceDimension(e);return i?i.name:void 0},t.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(null!=e)return e;if(null==t)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},t.prototype._recognizeDimIndex=function(t){if("number"==typeof t||null!=t&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},t.prototype._getStoreDimIndex=function(t){return this.getDimensionIndex(t)},t.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},t.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(t){return e.hasOwnProperty(t)?e[t]:void 0}:function(t){return e[t]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(t,e){var n=this._dimSummary;if(null==e)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[e]:null},t.prototype.mapDimensionsAll=function(t){return(this._dimSummary.encode[t]||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(t,e,n){var i,r=this;if(t instanceof iD&&(i=t),!i){var o=this.dimensions,s=fM(t)||Hm(t)?new bM(t,o.length):t;i=new iD;var a=yO(o,(function(t){return{type:r._dimInfos[t].type,property:t}}));i.initData(s,a,n)}this._store=i,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,i.count()),this._dimSummary=function(t,e){var n={},i=n.encode={},r=gy(),o=[],s=[],a={};Wm(t.dimensions,(function(e){var n,l=t.getDimensionInfo(e),u=l.coordDim;if(u){var c=l.coordDimIndex;eO(i,u)[c]=e,l.isExtraCoord||(r.set(u,1),"ordinal"!==(n=l.type)&&"time"!==n&&(o[0]=e),eO(a,u)[c]=t.getDimensionIndex(l.name)),l.defaultTooltip&&s.push(e)}fk.each((function(t,e){var n=eO(i,e),r=l.otherDims[e];null!=r&&!1!==r&&(n[r]=l.name)}))}));var l=[],u={};r.each((function(t,e){var n=i[e];u[e]=n[0],l=l.concat(n)})),n.dataDimsOnCoord=l,n.dataDimIndicesOnCoord=jm(l,(function(e){return t.getDimensionInfo(e).storeDimIndex})),n.encodeFirstDimNotExtra=u;var c=i.label;c&&c.length&&(o=c.slice());var h=i.tooltip;return h&&h.length?s=h.slice():s.length||(s=o.slice()),i.defaultedLabel=o,i.defaultedTooltip=s,n.userOutput=new tO(a,e),n}(this,this._schema),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},t.prototype.appendValues=function(t,e){var n=this._store.appendValues(t,e.length),i=n.start,r=n.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var s=i;s<r;s++){var a=s-i;this._nameList[s]=e[a],o&&gO(this,s)}},t.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,n=0;n<e.length;n++){var i=this._dimInfos[e[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return null==this._idDimIdx&&"typedArray"!==t.getSource().sourceFormat&&!t.fillStorage},t.prototype._doInit=function(t,e){if(!(t>=e)){var n=this._store.getProvider();this._updateOrdinalMeta();var i=this._nameList,r=this._idList;if("original"===n.getSource().sourceFormat&&!n.pure)for(var o=[],s=t;s<e;s++){var a=n.getItem(s,o);if(!this.hasItemOption&&Bw(a)&&(this.hasItemOption=!0),a){var l=a.name;null==i[s]&&null!=l&&(i[s]=Ww(l,null));var u=a.id;null==r[s]&&null!=u&&(r[s]=Ww(u,null))}}if(this._shouldMakeIdFromName())for(s=t;s<e;s++)gO(this,s);uO(this)}},t.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},t.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},t.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},t.prototype.setCalculationInfo=function(t,e){mO(t)?Fm(this._calculationInfo,t):this._calculationInfo[t]=e},t.prototype.getName=function(t){var e=this.getRawIndex(t),n=this._nameList[e];return null==n&&null!=this._nameDimIdx&&(n=hO(this,this._nameDimIdx,e)),null==n&&(n=""),n},t.prototype._getCategory=function(t,e){var n=this._store.get(t,e),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},t.prototype.getId=function(t){return cO(this,this.getRawIndex(t))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(t,e){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,e)},t.prototype.getByRawIndex=function(t,e){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,e)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},t.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},t.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},t.prototype.getValues=function(t,e){var n=this,i=this._store;return Km(t)?i.getValues(yO(t,(function(t){return n._getStoreDimIndex(t)})),e):i.getValues(t)},t.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,n=0,i=e.length;n<i;n++)if(isNaN(this._store.get(e[n],t)))return!1;return!0},t.prototype.indexOfName=function(t){for(var e=0,n=this._store.count();e<n;e++)if(this.getName(e)===t)return e;return-1},t.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},t.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},t.prototype.rawIndexOf=function(t,e){var n=(t&&this._invertedIndicesMap[t])[e];return null==n||isNaN(n)?-1:n},t.prototype.indicesOfNearest=function(t,e,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,n)},t.prototype.each=function(t,e,n){"function"==typeof t&&(n=e,e=t,t=[]);var i=n||this,r=yO(dO(t),this._getStoreDimIndex,this);this._store.each(r,i?$m(e,i):e)},t.prototype.filterSelf=function(t,e,n){"function"==typeof t&&(n=e,e=t,t=[]);var i=n||this,r=yO(dO(t),this._getStoreDimIndex,this);return this._store=this._store.filter(r,i?$m(e,i):e),this},t.prototype.selectRange=function(t){var e=this,n={};return Wm(Ym(t),(function(i){var r=e._getStoreDimIndex(i);n[r]=t[i]})),this._store=this._store.selectRange(n),this},t.prototype.mapArray=function(t,e,n){"function"==typeof t&&(n=e,e=t,t=[]),n=n||this;var i=[];return this.each(t,(function(){i.push(e&&e.apply(this,arguments))}),n),i},t.prototype.map=function(t,e,n,i){var r=n||i||this,o=yO(dO(t),this._getStoreDimIndex,this),s=fO(this);return s._store=this._store.map(o,r?$m(e,r):e),s},t.prototype.modify=function(t,e,n,i){var r=n||i||this,o=yO(dO(t),this._getStoreDimIndex,this);this._store.modify(o,r?$m(e,r):e)},t.prototype.downSample=function(t,e,n,i){var r=fO(this);return r._store=this._store.downSample(this._getStoreDimIndex(t),e,n,i),r},t.prototype.lttbDownSample=function(t,e){var n=fO(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),n},t.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},t.prototype.getItemModel=function(t){var e=this.hostModel,n=this.getRawDataItem(t);return new EI(n,e,e&&e.ecModel)},t.prototype.diff=function(t){var e=this;return new QE(t?t.getStore().getIndices():[],this.getStore().getIndices(),(function(e){return cO(t,e)}),(function(t){return cO(e,t)}))},t.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},t.prototype.setVisual=function(t,e){this._visual=this._visual||{},mO(t)?Fm(this._visual,t):this._visual[t]=e},t.prototype.getItemVisual=function(t,e){var n=this._itemVisuals[t],i=n&&n[e];return null==i?this.getVisual(e):i},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(t,e){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var r=i[e];return null==r&&(Km(r=this.getVisual(e))?r=r.slice():mO(r)&&(r=Fm({},r)),i[e]=r),r},t.prototype.setItemVisual=function(t,e,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,mO(e)?Fm(i,e):i[e]=n},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(t,e){if(mO(t))for(var n in t)t.hasOwnProperty(n)&&this.setLayout(n,t[n]);else this._layout[t]=e},t.prototype.getLayout=function(t){return this._layout[t]},t.prototype.getItemLayout=function(t){return this._itemLayouts[t]},t.prototype.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?Fm(this._itemLayouts[t]||{},e):e},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(t,e){!function(t,e,n,i){if(i){var r=ES(i);r.dataIndex=n,r.dataType=e,r.seriesIndex=t,"group"===i.type&&i.traverse((function(i){var r=ES(i);r.seriesIndex=t,r.dataIndex=n,r.dataType=e}))}}(this.hostModel&&this.hostModel.seriesIndex,this.dataType,t,e),this._graphicEls[t]=e},t.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},t.prototype.eachItemGraphicEl=function(t,e){Wm(this._graphicEls,(function(n,i){n&&t&&t.call(e,n,i)}))},t.prototype.cloneShallow=function(e){return e||(e=new t(this._schema?this._schema:yO(this.dimensions,this._getDimInfo,this),this.hostModel)),pO(e,this),e._store=this._store,e},t.prototype.wrapMethod=function(t,e){var n=this[t];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=n.apply(this,arguments);return e.apply(this,[t].concat(ly(arguments)))})},t.internalField=(uO=function(t){var e=t._invertedIndicesMap;Wm(e,(function(n,i){var r=t._dimInfos[i],o=r.ordinalMeta,s=t._store;if(o){n=e[i]=new vO(o.categories.length);for(var a=0;a<n.length;a++)n[a]=-1;for(a=0;a<s.count();a++)n[s.get(r.storeDimIndex,a)]=a}}))},hO=function(t,e,n){return Ww(t._getCategory(e,n),null)},cO=function(t,e){var n=t._idList[e];return null==n&&null!=t._idDimIdx&&(n=hO(t,t._idDimIdx,e)),null==n&&(n="e\0\0"+e),n},dO=function(t){return Km(t)||(t=null!=t?[t]:[]),t},fO=function(e){var n=new t(e._schema?e._schema:yO(e.dimensions,e._getDimInfo,e),e.hostModel);return pO(n,e),n},pO=function(t,e){Wm(_O.concat(e.__wrappedMethods||[]),(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t.__wrappedMethods=e.__wrappedMethods,Wm(wO,(function(n){t[n]=Nm(e[n])})),t._calculationInfo=Fm({},e._calculationInfo)},void(gO=function(t,e){var n=t._nameList,i=t._idList,r=t._nameDimIdx,o=t._idDimIdx,s=n[e],a=i[e];if(null==s&&null!=r&&(n[e]=s=hO(t,r,e)),null==a&&null!=o&&(i[e]=a=hO(t,o,e)),null==a&&null!=s){var l=t._nameRepeatCount,u=l[s]=(l[s]||0)+1;a=s,u>1&&(a+="__ec__"+u),i[e]=a}})),t}();function xO(t,e){fM(t)||(t=mM(t));var n=(e=e||{}).coordDimensions||[],i=e.dimensionsDefine||t.dimensionsDefine||[],r=gy(),o=[],s=function(t,e,n,i){var r=Math.max(t.dimensionsDetectedCount||1,e.length,n.length,i||0);return Wm(e,(function(t){var e;ey(t)&&(e=t.dimsDef)&&(r=Math.max(r,e.length))})),r}(t,n,i,e.dimensionsCount),a=e.canOmitUnusedDimensions&&lO(s),l=i===t.dimensionsDefine,u=l?aO(t):sO(i),c=e.encodeDefine;!c&&e.encodeDefaulter&&(c=e.encodeDefaulter(t,s));for(var h=gy(c),d=new JM(s),p=0;p<d.length;p++)d[p]=-1;function f(t){var e=d[t];if(e<0){var n=i[t],r=ey(n)?n:{name:n},s=new nO,a=r.name;null!=a&&null!=u.get(a)&&(s.name=s.displayName=a),null!=r.type&&(s.type=r.type),null!=r.displayName&&(s.displayName=r.displayName);var l=o.length;return d[t]=l,s.storeDimIndex=t,o.push(s),s}return o[e]}if(!a)for(p=0;p<s;p++)f(p);h.each((function(t,e){var n=Nw(t).slice();if(1===n.length&&!Jm(n[0])&&n[0]<0)h.set(e,!1);else{var i=h.set(e,[]);Wm(n,(function(t,n){var r=Jm(t)?u.get(t):t;null!=r&&r<s&&(i[n]=r,m(f(r),e,n))}))}}));var g=0;function m(t,e,n){null!=fk.get(e)?t.otherDims[e]=n:(t.coordDim=e,t.coordDimIndex=n,r.set(e,!0))}Wm(n,(function(t){var e,n,i,r;if(Jm(t))e=t,r={};else{e=(r=t).name;var o=r.ordinalMeta;r.ordinalMeta=null,(r=Fm({},r)).ordinalMeta=o,n=r.dimsDef,i=r.otherDims,r.name=r.coordDim=r.coordDimIndex=r.dimsDef=r.otherDims=null}var a=h.get(e);if(!1!==a){if(!(a=Nw(a)).length)for(var u=0;u<(n&&n.length||1);u++){for(;g<s&&null!=f(g).coordDim;)g++;g<s&&a.push(g++)}Wm(a,(function(t,o){var s=f(t);if(l&&null!=r.type&&(s.type=r.type),m(zm(s,r),e,o),null==s.name&&n){var a=n[o];!ey(a)&&(a={name:a}),s.name=s.displayName=a.name,s.defaultTooltip=a.defaultTooltip}i&&zm(s.otherDims,i)}))}}));var y=e.generateCoord,v=e.generateCoordCount,_=null!=v;v=y?v||1:0;var w=y||"value";function b(t){null==t.name&&(t.name=t.coordDim)}if(a)Wm(o,(function(t){b(t)})),o.sort((function(t,e){return t.storeDimIndex-e.storeDimIndex}));else for(var x=0;x<s;x++){var S=f(x);null==S.coordDim&&(S.coordDim=SO(w,r,_),S.coordDimIndex=0,(!y||v<=0)&&(S.isExtraCoord=!0),v--),b(S),null!=S.type||bk(t,x)!==gk&&(!S.isExtraCoord||null==S.otherDims.itemName&&null==S.otherDims.seriesName)||(S.type="ordinal")}return function(t){for(var e=gy(),n=0;n<t.length;n++){var i=t[n],r=i.name,o=e.get(r)||0;o>0&&(i.name=r+(o-1)),o++,e.set(r,o)}}(o),new oO({source:t,dimensions:o,fullDimensionCount:s,dimensionOmitted:a})}function SO(t,e,n){var i=e.data;if(n||i.hasOwnProperty(t)){for(var r=0;i.hasOwnProperty(t+r);)r++;t+=r}return e.set(t,!0),t}function CO(t,e){return"category"===t.type?t.scale.getLabel(e):e.value}var TO=[],IO={registerPreprocessor:HE,registerProcessor:WE,registerPostInit:function(t){jE("afterinit",t)},registerPostUpdate:function(t){jE("afterupdate",t)},registerUpdateLifecycle:jE,registerAction:qE,registerCoordinateSystem:function(t,e){Fk.register(t,e)},registerLayout:function(t,e){$E(OE,t,e,1e3,"layout")},registerVisual:GE,registerTransform:KE,registerLoading:XE,registerMap:function(t,e,n){ZA(t,e,n)},PRIORITY:tE,ComponentModel:ck,ComponentView:ED,SeriesModel:PD,ChartView:HD,registerComponentModel:function(t){ck.registerClass(t)},registerComponentView:function(t){ED.registerClass(t)},registerSeriesModel:function(t){PD.registerClass(t)},registerChartView:function(t){HD.registerClass(t)},registerSubTypeDefaulter:function(t,e){ck.registerSubTypeDefaulter(t,e)},registerPainter:function(t,e){var n;n=e,vw[t]=n}};function kO(t){Km(t)?Wm(t,(function(t){kO(t)})):Um(TO,t)>=0||(TO.push(t),Zm(t)&&(t={install:t}),t.install(IO))}function MO(t,e,n,i,r,o,s,a){var l=r-t,u=o-e,c=n-t,h=i-e,d=Math.sqrt(c*c+h*h),p=(l*(c/=d)+u*(h/=d))/d;a&&(p=Math.min(Math.max(p,0),1)),p*=d;var f=s[0]=t+p*c,g=s[1]=e+p*h;return Math.sqrt((f-r)*(f-r)+(g-o)*(g-o))}zx.CMD;var DO=new B_,PO=new B_,AO=new B_,EO=new B_,OO=new B_,RO=[],NO=new B_;function LO(t,e){if(e<=180&&e>0){e=e/180*Math.PI,DO.fromArray(t[0]),PO.fromArray(t[1]),AO.fromArray(t[2]),B_.sub(EO,DO,PO),B_.sub(OO,AO,PO);var n=EO.len(),i=OO.len();if(!(n<.001||i<.001)){EO.scale(1/n),OO.scale(1/i);var r=EO.dot(OO);if(Math.cos(e)<r){var o=MO(PO.x,PO.y,AO.x,AO.y,DO.x,DO.y,RO,!1);NO.fromArray(RO),NO.scaleAndAdd(OO,o/Math.tan(Math.PI-e));var s=AO.x!==PO.x?(NO.x-PO.x)/(AO.x-PO.x):(NO.y-PO.y)/(AO.y-PO.y);if(isNaN(s))return;s<0?B_.copy(NO,PO):s>1&&B_.copy(NO,AO),NO.toArray(t[1])}}}}function FO(t,e,n){if(n<=180&&n>0){n=n/180*Math.PI,DO.fromArray(t[0]),PO.fromArray(t[1]),AO.fromArray(t[2]),B_.sub(EO,PO,DO),B_.sub(OO,AO,PO);var i=EO.len(),r=OO.len();if(!(i<.001||r<.001))if(EO.scale(1/i),OO.scale(1/r),EO.dot(e)<Math.cos(n)){var o=MO(PO.x,PO.y,AO.x,AO.y,DO.x,DO.y,RO,!1);NO.fromArray(RO);var s=Math.PI/2,a=s+Math.acos(OO.dot(e))-n;if(a>=s)B_.copy(NO,AO);else{NO.scaleAndAdd(OO,o/Math.tan(Math.PI/2-a));var l=AO.x!==PO.x?(NO.x-PO.x)/(AO.x-PO.x):(NO.y-PO.y)/(AO.y-PO.y);if(isNaN(l))return;l<0?B_.copy(NO,PO):l>1&&B_.copy(NO,AO)}NO.toArray(t[1])}}}function zO(t,e,n,i){var r="normal"===n,o=r?t:t.ensureState(n);o.ignore=e;var s=i.get("smooth");s&&!0===s&&(s=.3),o.shape=o.shape||{},s>0&&(o.shape.smooth=s);var a=i.getModel("lineStyle").getLineStyle();r?t.useStyle(a):o.style=a}function BO(t,e){var n=e.smooth,i=e.points;if(i)if(t.moveTo(i[0][0],i[0][1]),n>0&&i.length>=3){var r=My(i[0],i[1]),o=My(i[1],i[2]);if(!r||!o)return t.lineTo(i[1][0],i[1][1]),void t.lineTo(i[2][0],i[2][1]);var s=Math.min(r,o)*n,a=Py([],i[1],i[0],s/r),l=Py([],i[1],i[2],s/o),u=Py([],a,l,.5);t.bezierCurveTo(a[0],a[1],a[0],a[1],u[0],u[1]),t.bezierCurveTo(l[0],l[1],l[0],l[1],i[2][0],i[2][1])}else for(var c=1;c<i.length;c++)t.lineTo(i[c][0],i[c][1])}function UO(t,e,n,i){return function(t,e,n,i,r,o){var s=t.length;if(!(s<2)){t.sort((function(t,n){return t.rect[e]-n.rect[e]}));for(var a,l=0,u=!1,c=0,h=0;h<s;h++){var d=t[h],p=d.rect;(a=p[e]-l)<0&&(p[e]-=a,d.label[e]-=a,u=!0),c+=Math.max(-a,0),l=p[e]+p[n]}c>0&&o&&w(-c/s,0,s);var f,g,m=t[0],y=t[s-1];return v(),f<0&&b(-f,.8),g<0&&b(g,.8),v(),_(f,g,1),_(g,f,-1),v(),f<0&&x(-f),g<0&&x(g),u}function v(){f=m.rect[e]-i,g=r-y.rect[e]-y.rect[n]}function _(t,e,n){if(t<0){var i=Math.min(e,-t);if(i>0){w(i*n,0,s);var r=i+t;r<0&&b(-r*n,1)}else b(-t*n,1)}}function w(n,i,r){0!==n&&(u=!0);for(var o=i;o<r;o++){var s=t[o];s.rect[e]+=n,s.label[e]+=n}}function b(i,r){for(var o=[],a=0,l=1;l<s;l++){var u=t[l-1].rect,c=Math.max(t[l].rect[e]-u[e]-u[n],0);o.push(c),a+=c}if(a){var h=Math.min(Math.abs(i)/a,r);if(i>0)for(l=0;l<s-1;l++)w(o[l]*h,0,l+1);else for(l=s-1;l>0;l--)w(-o[l-1]*h,l,s)}}function x(t){var e=t<0?-1:1;t=Math.abs(t);for(var n=Math.ceil(t/(s-1)),i=0;i<s-1;i++)if(e>0?w(n,0,i+1):w(-n,s-i-1,s),(t-=n)<=0)return}}(t,"y","height",e,n,i)}function VO(){return!1}function HO(t,e,n){var i=Bm(),r=e.getWidth(),o=e.getHeight(),s=i.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=r+"px",s.height=o+"px",i.setAttribute("data-zr-dom-id",t)),i.width=r*n,i.height=o*n,i}var WO=function(t){function e(e,n,i){var r,o=t.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null,i=i||b_,"string"==typeof e?r=HO(e,n,i):ey(e)&&(e=(r=e).id),o.id=e,o.dom=r;var s=r.style;return s&&(r.onselectstart=VO,s.webkitUserSelect="none",s.userSelect="none",s.webkitTapHighlightColor="rgba(0,0,0,0)",s["-webkit-touch-callout"]="none",s.padding="0",s.margin="0",s.borderWidth="0"),o.domBack=null,o.ctxBack=null,o.painter=n,o.config=null,o.dpr=i,o}return wy(e,t),e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=HO("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,e,n,i){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var r,o=[],s=this.maxRepaintRectCount,a=!1,l=new $_(0,0,0,0);function u(t){if(t.isFinite()&&!t.isZero())if(0===o.length){(e=new $_(0,0,0,0)).copy(t),o.push(e)}else{for(var e,n=!1,i=1/0,r=0,u=0;u<o.length;++u){var c=o[u];if(c.intersect(t)){var h=new $_(0,0,0,0);h.copy(c),h.union(t),o[u]=h,n=!0;break}if(a){l.copy(t),l.union(c);var d=t.width*t.height,p=c.width*c.height,f=l.width*l.height-d-p;f<i&&(i=f,r=u)}}if(a&&(o[r].union(t),n=!0),!n)(e=new $_(0,0,0,0)).copy(t),o.push(e);a||(a=o.length>=s)}}for(var c=this.__startIndex;c<this.__endIndex;++c){if(p=t[c]){var h=p.shouldBePainted(n,i,!0,!0);(f=p.__isRendered&&(1&p.__dirty||!h)?p.getPrevPaintRect():null)&&u(f);var d=h&&(1&p.__dirty||!p.__isRendered)?p.getPaintRect():null;d&&u(d)}}for(c=this.__prevStartIndex;c<this.__prevEndIndex;++c){var p,f;h=(p=e[c]).shouldBePainted(n,i,!0,!0);if(p&&(!h||!p.__zr)&&p.__isRendered)(f=p.getPrevPaintRect())&&u(f)}do{r=!1;for(c=0;c<o.length;)if(o[c].isZero())o.splice(c,1);else{for(var g=c+1;g<o.length;)o[c].intersect(o[g])?(r=!0,o[c].union(o[g]),o.splice(g,1)):g++;c++}}while(r);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,e){var n=this.dpr,i=this.dom,r=i.style,o=this.domBack;r&&(r.width=t+"px",r.height=e+"px"),i.width=t*n,i.height=e*n,o&&(o.width=t*n,o.height=e*n,1!==n&&this.ctxBack.scale(n,n))},e.prototype.clear=function(t,e,n){var i=this.dom,r=this.ctx,o=i.width,s=i.height;e=e||this.clearColor;var a=this.motionBlur&&!t,l=this.lastFrameAlpha,u=this.dpr,c=this;a&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,o/u,s/u));var h=this.domBack;function d(t,n,i,o){if(r.clearRect(t,n,i,o),e&&"transparent"!==e){var s=void 0;null!=e.colorStops?(s=e.__canvasGradient||zP(r,e,{x:0,y:0,width:i,height:o}),e.__canvasGradient=s):function(t){return null!=t.image}(e)&&(s=GP(r,e,{dirty:function(){c.setUnpainted(),c.__painter.refresh()}})),r.save(),r.fillStyle=s||e,r.fillRect(t,n,i,o),r.restore()}a&&(r.save(),r.globalAlpha=l,r.drawImage(h,t,n,i,o),r.restore())}!n||a?d(0,0,o,s):n.length&&Wm(n,(function(t){d(t.x*u,t.y*u,t.width*u,t.height*u)}))},e}(Ly);function jO(t){return parseInt(t,10)}var qO=function(){function t(t,e,n,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var r=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=Fm({},n||{}),this.dpr=n.devicePixelRatio||b_,this._singleCanvas=r,this.root=t;var o=t.style;o&&(o.webkitTapHighlightColor="transparent",o.webkitUserSelect="none",o.userSelect="none",o["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var s=this._zlevelList;this._prevDisplayList=[];var a=this._layers;if(r){var l=t,u=l.width,c=l.height;null!=n.width&&(u=n.width),null!=n.height&&(c=n.height),this.dpr=n.devicePixelRatio||1,l.width=u*this.dpr,l.height=c*this.dpr,this._width=u,this._height=c;var h=new WO(l,this,this.dpr);h.__builtin__=!0,h.initContext(),a[314159]=h,h.zlevel=314159,s.push(314159),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var d=this._domRoot=function(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);t.appendChild(d)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,n,t,this._redrawId);for(var r=0;r<i.length;r++){var o=i[r],s=this._layers[o];if(!s.__builtin__&&s.refresh){var a=0===r?this._backgroundColor:null;s.refresh(a)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(t){var e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){for(var i,r={inHover:!0,viewWidth:this._width,viewHeight:this._height},o=0;o<e;o++){var s=t[o];s.__inHover&&(n||(n=this._hoverlayer=this.getLayer(1e5)),i||(i=n.ctx).save(),eA(i,s,r,o===e-1))}i&&i.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(1e5)},t.prototype.paintOne=function(t,e){tA(t,e)},t.prototype._paintList=function(t,e,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(t);var r=this._doPaintList(t,e,n),o=r.finished,s=r.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),o)this.eachLayer((function(t){t.afterBrush&&t.afterBrush()}));else{var a=this;vv((function(){a._paintList(t,e,n,i)}))}}},t.prototype._compositeManually=function(){var t=this.getLayer(314159).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer((function(i){i.virtual&&t.drawImage(i.dom,0,0,e,n)}))},t.prototype._doPaintList=function(t,e,n){for(var i=this,r=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var a=this._zlevelList[s],l=this._layers[a];l.__builtin__&&l!==this._hoverlayer&&(l.__dirty||n)&&r.push(l)}for(var u=!0,c=!1,h=function(s){var a,l=r[s],h=l.ctx,p=o&&l.createRepaintRects(t,e,d._width,d._height),f=n?l.__startIndex:l.__drawIndex,g=!n&&l.incremental&&Date.now,m=g&&Date.now(),y=l.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(l.__startIndex===l.__endIndex)l.clear(!1,y,p);else if(f===l.__startIndex){var v=t[f];v.incremental&&v.notClear&&!n||l.clear(!1,y,p)}-1===f&&(console.error("For some unknown reason. drawIndex is -1"),f=l.__startIndex);var _=function(e){var n={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(a=f;a<l.__endIndex;a++){var r=t[a];if(r.__inHover&&(c=!0),i._doPaintEl(r,l,o,e,n,a===l.__endIndex-1),g)if(Date.now()-m>15)break}n.prevElClipPaths&&h.restore()};if(p)if(0===p.length)a=l.__endIndex;else for(var w=d.dpr,b=0;b<p.length;++b){var x=p[b];h.save(),h.beginPath(),h.rect(x.x*w,x.y*w,x.width*w,x.height*w),h.clip(),_(x),h.restore()}else h.save(),_(),h.restore();l.__drawIndex=a,l.__drawIndex<l.__endIndex&&(u=!1)},d=this,p=0;p<r.length;p++)h(p);return wm.wxa&&Wm(this._layers,(function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()})),{finished:u,needsRefreshHover:c}},t.prototype._doPaintEl=function(t,e,n,i,r,o){var s=e.ctx;if(n){var a=t.getPaintRect();(!i||a&&a.intersect(i))&&(eA(s,t,r,o),t.setPrevPaintRect(a))}else eA(s,t,r,o)},t.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=314159);var n=this._layers[t];return n||((n=new WO("zr_"+t,this,this.dpr)).zlevel=t,n.__builtin__=!0,this._layerConfig[t]?Lm(n,this._layerConfig[t],!0):this._layerConfig[t-.01]&&Lm(n,this._layerConfig[t-.01],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},t.prototype.insertLayer=function(t,e){var n=this._layers,i=this._zlevelList,r=i.length,o=this._domRoot,s=null,a=-1;if(n[t])Rm("ZLevel "+t+" has been used already");else if(function(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}(e)){if(r>0&&t>i[0]){for(a=0;a<r-1&&!(i[a]<t&&i[a+1]>t);a++);s=n[i[a]]}if(i.splice(a+1,0,t),n[t]=e,!e.virtual)if(s){var l=s.dom;l.nextSibling?o.insertBefore(e.dom,l.nextSibling):o.appendChild(e.dom)}else o.firstChild?o.insertBefore(e.dom,o.firstChild):o.appendChild(e.dom);e.__painter=this}else Rm("Layer of zlevel "+t+" is not valid")},t.prototype.eachLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var r=n[i];t.call(e,this._layers[r],r)}},t.prototype.eachBuiltinLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var r=n[i],o=this._layers[r];o.__builtin__&&t.call(e,o,r)}},t.prototype.eachOtherLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var r=n[i],o=this._layers[r];o.__builtin__||t.call(e,o,r)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(t){function e(t){o&&(o.__endIndex!==t&&(o.__dirty=!0),o.__endIndex=t)}if(this.eachBuiltinLayer((function(t,e){t.__dirty=t.__used=!1})),this._singleCanvas)for(var n=1;n<t.length;n++){if((a=t[n]).zlevel!==t[n-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}}var i,r,o=null,s=0;for(r=0;r<t.length;r++){var a,l=(a=t[r]).zlevel,u=void 0;i!==l&&(i=l,s=0),a.incremental?((u=this.getLayer(l+.001,this._needsManuallyCompositing)).incremental=!0,s=1):u=this.getLayer(l+(s>0?.01:0),this._needsManuallyCompositing),u.__builtin__||Rm("ZLevel "+l+" has been used by unkown layer "+u.id),u!==o&&(u.__used=!0,u.__startIndex!==r&&(u.__dirty=!0),u.__startIndex=r,u.incremental?u.__drawIndex=-1:u.__drawIndex=r,e(r),o=u),1&a.__dirty&&!a.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=r))}e(r),this.eachBuiltinLayer((function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)}))},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(t){t.clear()},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t,Wm(this._layers,(function(t){t.setUnpainted()}))},t.prototype.configLayer=function(t,e){if(e){var n=this._layerConfig;n[t]?Lm(n[t],e,!0):n[t]=e;for(var i=0;i<this._zlevelList.length;i++){var r=this._zlevelList[i];if(r===t||r===t+.01)Lm(this._layers[r],n[t],!0)}}},t.prototype.delLayer=function(t){var e=this._layers,n=this._zlevelList,i=e[t];i&&(i.dom.parentNode.removeChild(i.dom),delete e[t],n.splice(Um(n,t),1))},t.prototype.resize=function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts;if(null!=t&&(i.width=t),null!=e&&(i.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||e!==this._height){for(var r in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(r)&&this._layers[r].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(314159).resize(t,e)}return this},t.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new WO("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var n=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=e.dom.width,r=e.dom.height;this.eachLayer((function(t){t.__builtin__?n.drawImage(t.dom,0,0,i,r):t.renderToCanvas&&(n.save(),t.renderToCanvas(n),n.restore())}))}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),a=0,l=s.length;a<l;a++){var u=s[a];eA(n,u,o,a===l-1)}return e.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype._getSize=function(t){var e=this._opts,n=["width","height"][t],i=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var s=this.root,a=document.defaultView.getComputedStyle(s);return(s[i]||jO(a[n])||jO(s.style[n]))-(jO(a[r])||0)-(jO(a[o])||0)|0},t.prototype.pathToImage=function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),i=n.getContext("2d"),r=t.getBoundingRect(),o=t.style,s=o.shadowBlur*e,a=o.shadowOffsetX*e,l=o.shadowOffsetY*e,u=t.hasStroke()?o.lineWidth:0,c=Math.max(u/2,-a+s),h=Math.max(u/2,a+s),d=Math.max(u/2,-l+s),p=Math.max(u/2,l+s),f=r.width+c+h,g=r.height+d+p;n.width=f*e,n.height=g*e,i.scale(e,e),i.clearRect(0,0,f,g),i.dpr=e;var m={x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation,originX:t.originX,originY:t.originY};t.x=c-r.x,t.y=d-r.y,t.rotation=0,t.scaleX=1,t.scaleY=1,t.updateTransform(),t&&eA(i,t,{inHover:!1,viewWidth:this._width,viewHeight:this._height},!0);var y=new hS({style:{x:0,y:0,image:n}});return Fm(t,m),y},t}();function GO(t){t.registerPainter("canvas",qO)}var YO=2*Math.PI,$O=Math.PI/180;function XO(t,e){return rk(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function KO(t,e){var n=XO(t,e),i=t.get("center"),r=t.get("radius");Km(r)||(r=[0,r]),Km(i)||(i=[i,i]);var o=Sw(n.width,e.getWidth()),s=Sw(n.height,e.getHeight()),a=Math.min(o,s);return{cx:Sw(i[0],o)+n.x,cy:Sw(i[1],s)+n.y,r0:Sw(r[0],a/2),r:Sw(r[1],a/2)}}function ZO(t,e,n){e.eachSeriesByType(t,(function(t){var e=t.getData(),i=e.mapDimension("value"),r=XO(t,n),o=KO(t,n),s=o.cx,a=o.cy,l=o.r,u=o.r0,c=-t.get("startAngle")*$O,h=t.get("minAngle")*$O,d=0;e.each(i,(function(t){!isNaN(t)&&d++}));var p=e.getSum(i),f=Math.PI/(p||d)*2,g=t.get("clockwise"),m=t.get("roseType"),y=t.get("stillShowZeroSum"),v=e.getDataExtent(i);v[0]=0;var _=YO,w=0,b=c,x=g?1:-1;if(e.setLayout({viewRect:r,r:l}),e.each(i,(function(t,n){var i;if(isNaN(t))e.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:g,cx:s,cy:a,r0:u,r:m?NaN:l});else{(i="area"!==m?0===p&&y?f:t*f:YO/d)<h?(i=h,_-=h):w+=t;var r=b+x*i;e.setItemLayout(n,{angle:i,startAngle:b,endAngle:r,clockwise:g,cx:s,cy:a,r0:u,r:m?xw(t,v,[u,l]):l}),b=r}})),_<YO&&d)if(_<=.001){var S=YO/d;e.each(i,(function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n);i.angle=S,i.startAngle=c+x*n*S,i.endAngle=c+x*(n+1)*S}}))}else f=_/w,b=c,e.each(i,(function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n),r=i.angle===h?h:t*f;i.startAngle=b,i.endAngle=b+x*r,b+=x*r}}))}))}var JO=Math.PI/180;function QO(t,e,n,i,r,o,s,a,l,u){if(!(t.length<2)){for(var c=t.length,h=0;h<c;h++)if("outer"===t[h].position&&"labelLine"===t[h].labelAlignTo){var d=t[h].label.x-u;t[h].linePoints[1][0]+=d,t[h].label.x=u}UO(t,l,l+s)&&function(t){for(var o={list:[],maxY:0},s={list:[],maxY:0},a=0;a<t.length;a++)if("none"===t[a].labelAlignTo){var l=t[a],u=l.label.y>n?s:o,c=Math.abs(l.label.y-n);if(c>u.maxY){var h=l.label.x-e-l.len2*r,d=i+l.len,f=Math.abs(h)<d?Math.sqrt(c*c/(1-h*h/d/d)):d;u.rB=f,u.maxY=c}u.list.push(l)}p(o),p(s)}(t)}function p(t){for(var o=t.rB,s=o*o,a=0;a<t.list.length;a++){var l=t.list[a],u=Math.abs(l.label.y-n),c=i+l.len,h=c*c,d=Math.sqrt((1-Math.abs(u*u/s))*h);l.label.x=e+(d+l.len2)*r}}}function tR(t){return"center"===t.position}function eR(t){var e,n,i=t.getData(),r=[],o=!1,s=(t.get("minShowLabelAngle")||0)*JO,a=i.getLayout("viewRect"),l=i.getLayout("r"),u=a.width,c=a.x,h=a.y,d=a.height;function p(t){t.ignore=!0}i.each((function(t){var a=i.getItemGraphicEl(t),h=a.shape,d=a.getTextContent(),f=a.getTextGuideLine(),g=i.getItemModel(t),m=g.getModel("label"),y=m.get("position")||g.get(["emphasis","label","position"]),v=m.get("distanceToLabelLine"),_=m.get("alignTo"),w=Sw(m.get("edgeDistance"),u),b=m.get("bleedMargin"),x=g.getModel("labelLine"),S=x.get("length");S=Sw(S,u);var C=x.get("length2");if(C=Sw(C,u),Math.abs(h.endAngle-h.startAngle)<s)return Wm(d.states,p),void(d.ignore=!0);if(function(t){if(!t.ignore)return!0;for(var e in t.states)if(!1===t.states[e].ignore)return!0;return!1}(d)){var T,I,k,M,D=(h.startAngle+h.endAngle)/2,P=Math.cos(D),A=Math.sin(D);e=h.cx,n=h.cy;var E,O="inside"===y||"inner"===y;if("center"===y)T=h.cx,I=h.cy,M="center";else{var R=(O?(h.r+h.r0)/2*P:h.r*P)+e,N=(O?(h.r+h.r0)/2*A:h.r*A)+n;if(T=R+3*P,I=N+3*A,!O){var L=R+P*(S+l-h.r),F=N+A*(S+l-h.r),z=L+(P<0?-1:1)*C;T="edge"===_?P<0?c+w:c+u-w:z+(P<0?-v:v),I=F,k=[[R,N],[L,F],[z,F]]}M=O?"center":"edge"===_?P>0?"right":"left":P>0?"left":"right"}var B=m.get("rotate");if("number"==typeof B)E=B*(Math.PI/180);else if("center"===y)E=0;else{var U=P<0?-D+Math.PI:-D;"radial"===B||!0===B?E=U:"tangential"===B&&"outside"!==y&&"outer"!==y?(E=U+Math.PI/2)>Math.PI/2&&(E-=Math.PI):E=0}if(o=!!E,d.x=T,d.y=I,d.rotation=E,d.setStyle({verticalAlign:"middle"}),O){d.setStyle({align:M});var V=d.states.select;V&&(V.x+=d.x,V.y+=d.y)}else{var H=d.getBoundingRect().clone();H.applyTransform(d.getComputedTransform());var W=(d.style.margin||0)+2.1;H.y-=W/2,H.height+=W,r.push({label:d,labelLine:f,position:y,len:S,len2:C,minTurnAngle:x.get("minTurnAngle"),maxSurfaceAngle:x.get("maxSurfaceAngle"),surfaceNormal:new B_(P,A),linePoints:k,textAlign:M,labelDistance:v,labelAlignTo:_,edgeDistance:w,bleedMargin:b,rect:H})}a.setTextConfig({inside:O})}})),!o&&t.get("avoidLabelOverlap")&&function(t,e,n,i,r,o,s,a){for(var l=[],u=[],c=Number.MAX_VALUE,h=-Number.MAX_VALUE,d=0;d<t.length;d++){var p=t[d].label;tR(t[d])||(p.x<e?(c=Math.min(c,p.x),l.push(t[d])):(h=Math.max(h,p.x),u.push(t[d])))}for(QO(u,e,n,i,1,0,o,0,a,h),QO(l,e,n,i,-1,0,o,0,a,c),d=0;d<t.length;d++){var f=t[d];if(p=f.label,!tR(f)){var g=f.linePoints;if(g){var m="edge"===f.labelAlignTo,y=f.rect.width,v=void 0;(v=m?p.x<e?g[2][0]-f.labelDistance-s-f.edgeDistance:s+r-f.edgeDistance-g[2][0]-f.labelDistance:p.x<e?p.x-s-f.bleedMargin:s+r-p.x-f.bleedMargin)<f.rect.width&&(f.label.style.width=v,"edge"===f.labelAlignTo&&(y=v));var _=g[1][0]-g[2][0];m?p.x<e?g[2][0]=s+f.edgeDistance+y+f.labelDistance:g[2][0]=s+r-f.edgeDistance-y-f.labelDistance:(p.x<e?g[2][0]=p.x+f.labelDistance:g[2][0]=p.x-f.labelDistance,g[1][0]=g[2][0]+_),g[1][1]=g[2][1]=p.y}}}}(r,e,n,l,u,d,c,h);for(var f=0;f<r.length;f++){var g=r[f],m=g.label,y=g.labelLine,v=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:g.textAlign}),v&&(Wm(m.states,p),m.ignore=!0);var _=m.states.select;_&&(_.x+=m.x,_.y+=m.y)}if(y){var w=g.linePoints;v||!w?(Wm(y.states,p),y.ignore=!0):(LO(w,g.minTurnAngle),FO(w,g.surfaceNormal,g.maxSurfaceAngle),y.setShape({points:w}),m.__hostTarget.textGuideLineConfig={anchor:new B_(w[0][0],w[0][1])})}}}function nR(t,e,n){var i=t.get("borderRadius");return null==i?n?{innerCornerRadius:0,cornerRadius:0}:null:(Km(i)||(i=[i,i]),{innerCornerRadius:iw(i[0],e.r0),cornerRadius:iw(i[1],e.r)})}var iR=function(t){function e(e,n,i){var r=t.call(this)||this;r.z2=2;var o=new AS;return r.setTextContent(o),r.updateData(e,n,i,!0),r}return gm(e,t),e.prototype.updateData=function(t,e,n,i){var r=this,o=t.hostModel,s=t.getItemModel(e),a=s.getModel("emphasis"),l=t.getItemLayout(e),u=Fm(nR(s.getModel("itemStyle"),l,!0),l);if(isNaN(u.startAngle))r.setShape(u);else{var c;if(i)r.setShape(u),"scale"===o.getShallow("animationType")?(r.shape.r=l.r0,VT(r,{shape:{r:l.r}},o,e)):null!=n?(r.setShape({startAngle:n,endAngle:n}),VT(r,{shape:{startAngle:l.startAngle,endAngle:l.endAngle}},o,e)):(r.shape.endAngle=l.startAngle,UT(r,{shape:{endAngle:l.endAngle}},o,e));else zT(c=r).oldStyle=c.style,UT(r,{shape:u},o,e);r.useStyle(t.getItemVisual(e,"style")),function(t,e,n,i){n=n||"itemStyle";for(var r=0;r<pC.length;r++){var o=pC[r],s=e.getModel([o,n]);t.ensureState(o).style=i?i(s):s[fC[n]]()}}(r,s);var h=(l.startAngle+l.endAngle)/2,d=o.get("selectedOffset"),p=Math.cos(h)*d,f=Math.sin(h)*d,g=s.getShallow("cursor");g&&r.attr("cursor",g),this._updateLabel(o,t,e),r.ensureState("emphasis").shape=mm({r:l.r+(a.get("scale")&&a.get("scaleSize")||0)},nR(a.getModel("itemStyle"),l)),Fm(r.ensureState("select"),{x:p,y:f,shape:nR(s.getModel(["select","itemStyle"]),l)}),Fm(r.ensureState("blur"),{shape:nR(s.getModel(["blur","itemStyle"]),l)});var m=r.getTextGuideLine(),y=r.getTextContent();m&&Fm(m.ensureState("select"),{x:p,y:f}),Fm(y.ensureState("select"),{x:p,y:f}),dC(this,a.get("focus"),a.get("blurScope"))}},e.prototype._updateLabel=function(t,e,n){var i=this,r=e.getItemModel(n),o=r.getModel("labelLine"),s=e.getItemVisual(n,"style"),a=s&&s.fill,l=s&&s.opacity;dI(i,function(t,e){e=e||"label";for(var n={normal:t.getModel(e)},i=0;i<LS.length;i++){var r=LS[i];n[r]=t.getModel([r,e])}return n}(r),{labelFetcher:e.hostModel,labelDataIndex:n,inheritColor:a,defaultOpacity:l,defaultText:t.getFormattedLabel(n,"normal")||e.getName(n)});var u=i.getTextContent();i.setTextConfig({position:null,rotation:null}),u.attr({z2:10});var c=t.get(["label","position"]);if("outside"!==c&&"outer"!==c)i.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new fT,this.setTextGuideLine(h)),function(t,e,n){var i=t.getTextGuideLine(),r=t.getTextContent();if(r){for(var o=e.normal,s=o.get("show"),a=r.ignore,l=0;l<FS.length;l++){var u=FS[l],c=e[u],h="normal"===u;if(c){var d=c.get("show");if((h?a:sy(r.states[u]&&r.states[u].ignore,a))||!sy(d,s)){var p=h?i:i&&i.states.normal;p&&(p.ignore=!0);continue}i||(i=new fT,t.setTextGuideLine(i),h||!a&&s||zO(i,!0,"normal",e.normal),t.stateProxy&&(i.stateProxy=t.stateProxy)),zO(i,!1,u,c)}}if(i){zm(i.style,n),i.style.fill=null;var f=o.get("showAbove");(t.textGuideLineConfig=t.textGuideLineConfig||{}).showAbove=f||!1,i.buildPath=BO}}else i&&t.removeTextGuideLine()}(this,function(t,e){e=e||"labelLine";for(var n={normal:t.getModel(e)},i=0;i<LS.length;i++){var r=LS[i];n[r]=t.getModel([r,e])}return n}(r),{stroke:a,opacity:ay(o.get(["lineStyle","opacity"]),l,1)})}},e}(iT),rR=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return gm(e,t),e.prototype.init=function(){var t=new mw;this._sectorGroup=t},e.prototype.render=function(t,e,n,i){var r,o=t.getData(),s=this._data,a=this.group;if(!s&&o.count()>0){for(var l=o.getItemLayout(0),u=1;isNaN(l&&l.startAngle)&&u<o.count();++u)l=o.getItemLayout(u);l&&(r=l.startAngle)}if(this._emptyCircleSector&&a.remove(this._emptyCircleSector),0===o.count()&&t.get("showEmptyCircle")){var c=new iT({shape:KO(t,n)});c.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=c,a.add(c)}o.diff(s).add((function(t){var e=new iR(o,t,r);o.setItemGraphicEl(t,e),a.add(e)})).update((function(t,e){var n=s.getItemGraphicEl(e);n.updateData(o,t,r),n.off("click"),a.add(n),o.setItemGraphicEl(t,n)})).remove((function(e){qT(s.getItemGraphicEl(e),t,e)})).execute(),eR(t),"expansion"!==t.get("animationTypeUpdate")&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,e){var n=e.getData().getItemLayout(0);if(n){var i=t[0]-n.cx,r=t[1]-n.cy,o=Math.sqrt(i*i+r*r);return o<=n.r&&o>=n.r0}},e.type="pie",e}(HD);var oR=function(){function t(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return t.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},t.prototype.containName=function(t){return this._getRawData().indexOfName(t)>=0},t.prototype.indexOfName=function(t){return this._getDataWithEncodedVisual().indexOfName(t)},t.prototype.getItemVisual=function(t,e){return this._getDataWithEncodedVisual().getItemVisual(t,e)},t}(),sR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gm(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new oR($m(this.getData,this),$m(this.getRawData,this)),this._defaultLabelLine(e)},e.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return function(t,e,n){e=Km(e)&&{coordDimensions:e}||Fm({encodeDefine:t.getEncode()},e);var i=t.getSource(),r=xO(i,e).dimensions,o=new bO(r,t);return o.initData(i,n),o}(this,{coordDimensions:["value"],encodeDefaulter:Xm(_k,this)})},e.prototype.getDataParams=function(e){var n=this.getData(),i=t.prototype.getDataParams.call(this,e),r=[];return n.each(n.mapDimension("value"),(function(t){r.push(t)})),i.percent=function(t,e,n){if(!t[e])return 0;var i=qm(t,(function(t,e){return t+(isNaN(e)?0:e)}),0);if(0===i)return 0;for(var r=Math.pow(10,n),o=jm(t,(function(t){return(isNaN(t)?0:t)/i*r*100})),s=100*r,a=jm(o,(function(t){return Math.floor(t)})),l=qm(a,(function(t,e){return t+e}),0),u=jm(o,(function(t,e){return t-a[e]}));l<s;){for(var c=Number.NEGATIVE_INFINITY,h=null,d=0,p=u.length;d<p;++d)u[d]>c&&(c=u[d],h=d);++a[h],u[h]=0,++l}return a[e]/r}(r,e,n.hostModel.get("percentPrecision")),i.$vars.push("percent"),i},e.prototype._defaultLabelLine=function(t){Lw(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={zlevel:0,z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(PD);function aR(t){t.registerChartView(rR),t.registerSeriesModel(sR),function(t,e){function n(e,n){var i=[];return e.eachComponent({mainType:"series",subType:t,query:n},(function(t){i.push(t.seriesIndex)})),i}Wm([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],(function(t){e(t[0],(function(e,i,r){e=Fm({},e),r.dispatchAction(Fm(e,{type:t[1],seriesIndex:n(i,e)}))}))}))}("pie",t.registerAction),t.registerLayout(Xm(ZO,"pie")),t.registerProcessor({seriesType:"pie",reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var i=t.getData();i.filterSelf((function(t){for(var e=i.getName(t),r=0;r<n.length;r++)if(!n[r].isSelected(e))return!1;return!0}))}}}),t.registerProcessor(function(t){return{seriesType:t,reset:function(t,e){var n=t.getData();n.filterSelf((function(t){var e=n.mapDimension("value"),i=n.get(e,t);return!("number"==typeof i&&!isNaN(i)&&i<0)}))}}}("pie"))}function lR(t,e,n){n=n||{};var i=t.coordinateSystem,r=e.axis,o={},s=r.getAxesOnZeroOf()[0],a=r.position,l=s?"onZero":a,u=r.dim,c=i.getRect(),h=[c.x,c.x+c.width,c.y,c.y+c.height],d={left:0,right:1,top:0,bottom:1,onZero:2},p=e.get("offset")||0,f="x"===u?[h[2]-p,h[3]+p]:[h[0]-p,h[1]+p];if(s){var g=s.toGlobalCoord(s.dataToCoord(0));f[d.onZero]=Math.max(Math.min(g,f[1]),f[0])}o.position=["y"===u?f[d[l]]:h[0],"x"===u?f[d[l]]:h[3]],o.rotation=Math.PI/2*("x"===u?0:1);o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,left:-1,right:1}[a],o.labelOffset=s?f[d[a]]-f[d.onZero]:0,e.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),oy(n.labelInside,e.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var m=e.get(["axisLabel","rotate"]);return o.labelRotate="top"===l?-m:m,o.z2=1,o}var uR=Math.PI,cR=function(){function t(t,e){this.group=new mw,this.opt=e,this.axisModel=t,zm(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new mw({x:e.position[0],y:e.position[1],rotation:e.rotation});n.updateTransform(),this._transformGroup=n}return t.prototype.hasBuilder=function(t){return!!hR[t]},t.prototype.add=function(t){hR[t](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(t,e,n){var i,r,o=Iw(e-t);return kw(o)?(r=n>0?"top":"bottom",i="center"):kw(o-uR)?(r=n>0?"bottom":"top",i="center"):(r="middle",i=o>0&&o<uR?n>0?"right":"left":n>0?"left":"right"),{rotation:o,textAlign:i,textVerticalAlign:r}},t.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},t.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},t}(),hR={axisLine:function(t,e,n,i){var r=e.get(["axisLine","show"]);if("auto"===r&&t.handleAutoShown&&(r=t.handleAutoShown("axisLine")),r){var o=e.axis.getExtent(),s=i.transform,a=[o[0],0],l=[o[1],0];s&&(Ay(a,a,s),Ay(l,l,s));var u=Fm({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),c=new vT({subPixelOptimize:!0,shape:{x1:a[0],y1:a[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});c.anid="line",n.add(c);var h=e.get(["axisLine","symbol"]);if(null!=h){var d=e.get(["axisLine","symbolSize"]);"string"==typeof h&&(h=[h,h]),"string"!=typeof d&&"number"!=typeof d||(d=[d,d]);var p=function(t,e){if(null!=t)return Km(t)||(t=[t,t]),[Sw(t[0],e[0])||0,Sw(sy(t[1],t[0]),e[1])||0]}(e.get(["axisLine","symbolOffset"])||0,d),f=d[0],g=d[1];Wm([{rotate:t.rotation+Math.PI/2,offset:p[0],r:0},{rotate:t.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((a[0]-l[0])*(a[0]-l[0])+(a[1]-l[1])*(a[1]-l[1]))}],(function(e,i){if("none"!==h[i]&&null!=h[i]){var r=FP(h[i],-f/2,-g/2,f,g,u.stroke,!0),o=e.r+e.offset;r.attr({rotation:e.rotate,x:a[0]+o*Math.cos(t.rotation),y:a[1]-o*Math.sin(t.rotation),silent:!0,z2:11}),n.add(r)}}))}}},axisTickLabel:function(t,e,n,i){var r=function(t,e,n,i){var r=n.axis,o=n.getModel("axisTick"),s=o.get("show");"auto"===s&&i.handleAutoShown&&(s=i.handleAutoShown("axisTick"));if(!s||r.scale.isBlank())return;for(var a=o.getModel("lineStyle"),l=i.tickDirection*o.get("length"),u=gR(r.getTicksCoords(),e.transform,l,zm(a.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),c=0;c<u.length;c++)t.add(u[c]);return u}(n,i,e,t),o=function(t,e,n,i){var r=n.axis;if(!oy(i.axisLabelShow,n.get(["axisLabel","show"]))||r.scale.isBlank())return;var o=n.getModel("axisLabel"),s=o.get("margin"),a=r.getViewLabels(),l=(oy(i.labelRotate,o.get("rotate"))||0)*uR/180,u=cR.innerTextLayout(i.rotation,l,i.labelDirection),c=n.getCategories&&n.getCategories(!0),h=[],d=cR.isLabelSilent(n),p=n.get("triggerEvent");return Wm(a,(function(a,l){var f="ordinal"===r.scale.type?r.scale.getRawOrdinalNumber(a.tickValue):a.tickValue,g=a.formattedLabel,m=a.rawLabel,y=o;if(c&&c[f]){var v=c[f];ey(v)&&v.textStyle&&(y=new EI(v.textStyle,o,n.ecModel))}var _=y.getTextColor()||n.get(["axisLine","lineStyle","color"]),w=r.dataToCoord(f),b=new AS({x:w,y:i.labelOffset+i.labelDirection*s,rotation:u.rotation,silent:d,z2:10,style:pI(y,{text:g,align:y.getShallow("align",!0)||u.textAlign,verticalAlign:y.getShallow("verticalAlign",!0)||y.getShallow("baseline",!0)||u.textVerticalAlign,fill:"function"==typeof _?_("category"===r.type?m:"value"===r.type?f+"":f,l):_})});if(b.anid="label_"+f,p){var x=cR.makeAxisEventDataBase(n);x.targetType="axisLabel",x.value=m,ES(b).eventData=x}e.add(b),b.updateTransform(),h.push(b),t.add(b),b.decomposeTransform()})),h}(n,i,e,t);!function(t,e,n){if(i=t.axis,"category"===i.type&&0===(r=i.getLabelModel(),null==(o=r.get("interval"))?"auto":o))return;var i,r,o;var s=t.get(["axisLabel","showMinLabel"]),a=t.get(["axisLabel","showMaxLabel"]);n=n||[];var l=(e=e||[])[0],u=e[1],c=e[e.length-1],h=e[e.length-2],d=n[0],p=n[1],f=n[n.length-1],g=n[n.length-2];!1===s?(dR(l),dR(d)):pR(l,u)&&(s?(dR(u),dR(p)):(dR(l),dR(d)));!1===a?(dR(c),dR(f)):pR(h,c)&&(a?(dR(h),dR(g)):(dR(c),dR(f)))}(e,o,r),function(t,e,n,i){var r=n.axis,o=n.getModel("minorTick");if(!o.get("show")||r.scale.isBlank())return;var s=r.getMinorTicksCoords();if(!s.length)return;for(var a=o.getModel("lineStyle"),l=i*o.get("length"),u=zm(a.getLineStyle(),zm(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),c=0;c<s.length;c++)for(var h=gR(s[c],e.transform,l,u,"minorticks_"+c),d=0;d<h.length;d++)t.add(h[d])}(n,i,e,t.tickDirection)},axisName:function(t,e,n,i){var r=oy(t.axisName,e.get("name"));if(r){var o,s,a=e.get("nameLocation"),l=t.nameDirection,u=e.getModel("nameTextStyle"),c=e.get("nameGap")||0,h=e.axis.getExtent(),d=h[0]>h[1]?-1:1,p=["start"===a?h[0]-d*c:"end"===a?h[1]+d*c:(h[0]+h[1])/2,fR(a)?t.labelOffset+l*c:0],f=e.get("nameRotate");null!=f&&(f=f*uR/180),fR(a)?o=cR.innerTextLayout(t.rotation,null!=f?f:t.rotation,l):(o=function(t,e,n,i){var r,o,s=Iw(n-t),a=i[0]>i[1],l="start"===e&&!a||"start"!==e&&a;kw(s-uR/2)?(o=l?"bottom":"top",r="center"):kw(s-1.5*uR)?(o=l?"top":"bottom",r="center"):(o="middle",r=s<1.5*uR&&s>uR/2?l?"left":"right":l?"right":"left");return{rotation:s,textAlign:r,textVerticalAlign:o}}(t.rotation,a,f||0,h),null!=(s=t.axisNameAvailableWidth)&&(s=Math.abs(s/Math.sin(o.rotation)),!isFinite(s)&&(s=null)));var g=u.getFont(),m=e.get("nameTruncate",!0)||{},y=m.ellipsis,v=oy(t.nameTruncateMaxWidth,m.maxWidth,s),_=new AS({x:p[0],y:p[1],rotation:o.rotation,silent:cR.isLabelSilent(e),style:pI(u,{text:r,font:g,overflow:"truncate",width:v,ellipsis:y,fill:u.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:u.get("align")||o.textAlign,verticalAlign:u.get("verticalAlign")||o.textVerticalAlign}),z2:1});if(lI({el:_,componentModel:e,itemName:r}),_.__fullText=r,_.anid="name",e.get("triggerEvent")){var w=cR.makeAxisEventDataBase(e);w.targetType="axisName",w.name=r,ES(_).eventData=w}i.add(_),_.updateTransform(),n.add(_),_.decomposeTransform()}}};function dR(t){t&&(t.ignore=!0)}function pR(t,e){var n=t&&t.getBoundingRect().clone(),i=e&&e.getBoundingRect().clone();if(n&&i){var r=x_([]);return T_(r,r,-t.rotation),n.applyTransform(S_([],r,t.getLocalTransform())),i.applyTransform(S_([],r,e.getLocalTransform())),n.intersect(i)}}function fR(t){return"middle"===t||"center"===t}function gR(t,e,n,i,r){for(var o=[],s=[],a=[],l=0;l<t.length;l++){var u=t[l].coord;s[0]=u,s[1]=0,a[0]=u,a[1]=n,e&&(Ay(s,s,e),Ay(a,a,e));var c=new vT({subPixelOptimize:!0,shape:{x1:s[0],y1:s[1],x2:a[0],y2:a[1]},style:i,z2:2,autoBatch:!0,silent:!0});c.anid=r+"_"+t[l].tickValue,o.push(c)}return o}var mR=cR;function yR(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(t,e,n){var i=e.getComponent("tooltip"),r=e.getComponent("axisPointer"),o=r.get("link",!0)||[],s=[];Wm(n.getCoordinateSystems(),(function(n){if(n.axisPointerEnabled){var a=xR(n.model),l=t.coordSysAxesInfo[a]={};t.coordSysMap[a]=n;var u=n.model.getModel("tooltip",i);if(Wm(n.getAxes(),Xm(p,!1,null)),n.getTooltipAxes&&i&&u.get("show")){var c="axis"===u.get("trigger"),h="cross"===u.get(["axisPointer","type"]),d=n.getTooltipAxes(u.get(["axisPointer","axis"]));(c||h)&&Wm(d.baseAxes,Xm(p,!h||"cross",c)),h&&Wm(d.otherAxes,Xm(p,"cross",!1))}}function p(i,a,c){var h=c.model.getModel("axisPointer",r),d=h.get("show");if(d&&("auto"!==d||i||bR(h))){null==a&&(a=h.get("triggerTooltip"));var p=(h=i?function(t,e,n,i,r,o){var s=e.getModel("axisPointer"),a={};Wm(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],(function(t){a[t]=Nm(s.get(t))})),a.snap="category"!==t.type&&!!o,"cross"===s.get("type")&&(a.type="line");var l=a.label||(a.label={});if(null==l.show&&(l.show=!1),"cross"===r){var u=s.get(["label","show"]);if(l.show=null==u||u,!o){var c=a.lineStyle=s.get("crossStyle");c&&zm(l,c.textStyle)}}return t.model.getModel("axisPointer",new EI(a,n,i))}(c,u,r,e,i,a):h).get("snap"),f=xR(c.model),g=a||p||"category"===c.type,m=t.axesInfo[f]={key:f,axis:c,coordSys:n,axisPointerModel:h,triggerTooltip:a,involveSeries:g,snap:p,useHandle:bR(h),seriesModels:[],linkGroup:null};l[f]=m,t.seriesInvolved=t.seriesInvolved||g;var y=function(t,e){for(var n=e.model,i=e.dim,r=0;r<t.length;r++){var o=t[r]||{};if(vR(o[i+"AxisId"],n.id)||vR(o[i+"AxisIndex"],n.componentIndex)||vR(o[i+"AxisName"],n.name))return r}}(o,c);if(null!=y){var v=s[y]||(s[y]={axesInfo:{}});v.axesInfo[f]=m,v.mapper=o[y].mapper,m.linkGroup=v}}}}))}(n,t,e),n.seriesInvolved&&function(t,e){e.eachSeries((function(e){var n=e.coordinateSystem,i=e.get(["tooltip","trigger"],!0),r=e.get(["tooltip","show"],!0);n&&"none"!==i&&!1!==i&&"item"!==i&&!1!==r&&!1!==e.get(["axisPointer","show"],!0)&&Wm(t.coordSysAxesInfo[xR(n.model)],(function(t){var i=t.axis;n.getAxis(i.dim)===i&&(t.seriesModels.push(e),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=e.getData().count())}))}))}(n,t),n}function vR(t,e){return"all"===t||Km(t)&&Um(t,e)>=0||t===e}function _R(t){var e=wR(t);if(e){var n=e.axisPointerModel,i=e.axis.scale,r=n.option,o=n.get("status"),s=n.get("value");null!=s&&(s=i.parse(s));var a=bR(n);null==o&&(r.status=a?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==s||s>l[1])&&(s=l[1]),s<l[0]&&(s=l[0]),r.value=s,a&&(r.status=e.axis.scale.isBlank()?"hide":"show")}}function wR(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[xR(t)]}function bR(t){return!!t.get(["handle","show"])}function xR(t){return t.type+"||"+t.id}var SR={},CR=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return gm(e,t),e.prototype.render=function(e,n,i,r){this.axisPointerClass&&_R(e),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,i,!0)},e.prototype.updateAxisPointer=function(t,e,n,i){this._doUpdateAxisPointerClass(t,n,!1)},e.prototype.remove=function(t,e){var n=this._axisPointer;n&&n.remove(e)},e.prototype.dispose=function(e,n){this._disposeAxisPointer(n),t.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,n,i){var r=e.getAxisPointerClass(this.axisPointerClass);if(r){var o=function(t){var e=wR(t);return e&&e.axisPointerModel}(t);o?(this._axisPointer||(this._axisPointer=new r)).render(t,o,n,i):this._disposeAxisPointer(n)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,e){SR[t]=e},e.getAxisPointerClass=function(t){return t&&SR[t]},e.type="axis",e}(ED),TR=Yw(),IR=Nm,kR=$m;function MR(t,e,n,i){DR(TR(n).lastProp,i)||(TR(n).lastProp=i,e?UT(n,i,t):(n.stopAnimation(),n.attr(i)))}function DR(t,e){if(ey(t)&&ey(e)){var n=!0;return Wm(e,(function(e,i){n=n&&DR(t[i],e)})),!!n}return t===e}function PR(t,e){t[e.get(["label","show"])?"show":"hide"]()}function AR(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function ER(t,e,n){var i=e.get("z"),r=e.get("zlevel");t&&t.traverse((function(t){"group"!==t.type&&(null!=i&&(t.z=i),null!=r&&(t.zlevel=r),t.silent=n)}))}function OR(t,e,n,i,r){var o=RR(n.get("value"),e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),s=n.getModel("label"),a=WI(s.get("padding")||0),l=s.getFont(),u=Q_(o,l),c=r.position,h=u.width+a[1]+a[3],d=u.height+a[0]+a[2],p=r.align;"right"===p&&(c[0]-=h),"center"===p&&(c[0]-=h/2);var f=r.verticalAlign;"bottom"===f&&(c[1]-=d),"middle"===f&&(c[1]-=d/2),function(t,e,n,i){var r=i.getWidth(),o=i.getHeight();t[0]=Math.min(t[0]+e,r)-e,t[1]=Math.min(t[1]+n,o)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}(c,h,d,i);var g=s.get("backgroundColor");g&&"auto"!==g||(g=e.get(["axisLine","lineStyle","color"])),t.label={x:c[0],y:c[1],style:pI(s,{text:o,font:l,fill:s.getTextColor(),padding:a,backgroundColor:g}),z2:10}}function RR(t,e,n,i,r){t=e.scale.parse(t);var o=e.scale.getLabel({value:t},{precision:r.precision}),s=r.formatter;if(s){var a={value:CO(e,{value:t}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};Wm(i,(function(t){var e=n.getSeriesByIndex(t.seriesIndex),i=t.dataIndexInside,r=e&&e.getDataParams(i);r&&a.seriesData.push(r)})),Jm(s)?o=s.replace("{value}",o):Zm(s)&&(o=s(a))}return o}function NR(t,e,n){var i=[1,0,0,1,0,0];return T_(i,i,n.rotation),C_(i,i,n.position),iI([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],i)}var LR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gm(e,t),e.prototype.makeElOption=function(t,e,n,i,r){var o=n.axis,s=o.grid,a=i.get("type"),l=FR(s,o).getOtherAxis(o).getGlobalExtent(),u=o.toGlobalCoord(o.dataToCoord(e,!0));if(a&&"none"!==a){var c=function(t){var e,n=t.get("type"),i=t.getModel(n+"Style");return"line"===n?(e=i.getLineStyle()).fill=null:"shadow"===n&&((e=i.getAreaStyle()).stroke=null),e}(i),h=zR[a](o,u,l);h.style=c,t.graphicKey=h.type,t.pointer=h}!function(t,e,n,i,r,o){var s=mR.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=r.get(["label","margin"]),OR(e,i,r,o,{position:NR(i.axis,t,n),align:s.textAlign,verticalAlign:s.textVerticalAlign})}(e,t,lR(s.model,n),n,i,r)},e.prototype.getHandleTransform=function(t,e,n){var i=lR(e.axis.grid.model,e,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var r=NR(e.axis,t,i);return{x:r[0],y:r[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,e,n,i){var r=n.axis,o=r.grid,s=r.getGlobalExtent(!0),a=FR(o,r).getOtherAxis(r).getGlobalExtent(),l="x"===r.dim?0:1,u=[t.x,t.y];u[l]+=e[l],u[l]=Math.min(s[1],u[l]),u[l]=Math.max(s[0],u[l]);var c=(a[1]+a[0])/2,h=[c,c];h[l]=u[l];return{x:u[0],y:u[1],rotation:t.rotation,cursorPoint:h,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}},e}(function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(t,e,n,i){var r=e.get("value"),o=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=n,i||this._lastValue!==r||this._lastStatus!==o){this._lastValue=r,this._lastStatus=o;var s=this._group,a=this._handle;if(!o||"hide"===o)return s&&s.hide(),void(a&&a.hide());s&&s.show(),a&&a.show();var l={};this.makeElOption(l,r,t,e,n);var u=l.graphicKey;u!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=u;var c=this._moveAnimation=this.determineAnimation(t,e);if(s){var h=Xm(MR,e,c);this.updatePointerEl(s,l,h),this.updateLabelEl(s,l,h,e)}else s=this._group=new mw,this.createPointerEl(s,l,t,e),this.createLabelEl(s,l,t,e),n.getZr().add(s);ER(s,e,!0),this._renderHandle(r)}},t.prototype.remove=function(t){this.clear(t)},t.prototype.dispose=function(t){this.clear(t)},t.prototype.determineAnimation=function(t,e){var n=e.get("animation"),i=t.axis,r="category"===i.type,o=e.get("snap");if(!o&&!r)return!1;if("auto"===n||null==n){var s=this.animationThreshold;if(r&&i.getBandWidth()>s)return!0;if(o){var a=wR(t).seriesDataCount,l=i.getExtent();return Math.abs(l[0]-l[1])/a>s}return!1}return!0===n},t.prototype.makeElOption=function(t,e,n,i,r){},t.prototype.createPointerEl=function(t,e,n,i){var r=e.pointer;if(r){var o=TR(t).pointerEl=new uI[r.type](IR(e.pointer));t.add(o)}},t.prototype.createLabelEl=function(t,e,n,i){if(e.label){var r=TR(t).labelEl=new AS(IR(e.label));t.add(r),PR(r,i)}},t.prototype.updatePointerEl=function(t,e,n){var i=TR(t).pointerEl;i&&e.pointer&&(i.setStyle(e.pointer.style),n(i,{shape:e.pointer.shape}))},t.prototype.updateLabelEl=function(t,e,n,i){var r=TR(t).labelEl;r&&(r.setStyle(e.label.style),n(r,{x:e.label.x,y:e.label.y}),PR(r,i))},t.prototype._renderHandle=function(t){if(!this._dragging&&this.updateHandleTransform){var e,n=this._axisPointerModel,i=this._api.getZr(),r=this._handle,o=n.getModel("handle"),s=n.get("status");if(!o.get("show")||!s||"hide"===s)return r&&i.remove(r),void(this._handle=null);this._handle||(e=!0,r=this._handle=oI(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){Ky(t.event)},onmousedown:kR(this._onHandleDragMove,this,0,0),drift:kR(this._onHandleDragMove,this),ondragend:kR(this._onHandleDragEnd,this)}),i.add(r)),ER(r,n,!1),r.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var a=o.get("size");Km(a)||(a=[a,a]),r.scaleX=a[0]/2,r.scaleY=a[1]/2,function(t,e,n,i){var r=t[e];if(r){var o=r["\0__throttleOriginMethod"]||r,s=r["\0__throttleType"];if(r[WD]!==n||s!==i){if(null==n||!i)return t[e]=o;(r=t[e]=jD(o,n,"debounce"===i))["\0__throttleOriginMethod"]=o,r["\0__throttleType"]=i,r[WD]=n}}}(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},t.prototype._moveHandleToValue=function(t,e){MR(this._axisPointerModel,!e&&this._moveAnimation,this._handle,AR(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(t,e){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(AR(n),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(AR(i)),TR(n).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),n=this._group,i=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),i&&e.remove(i),this._group=null,this._handle=null,this._payloadInfo=null)},t.prototype.doClear=function(){},t.prototype.buildLabel=function(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}},t}());function FR(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var zR={line:function(t,e,n){var i,r,o;return{type:"Line",subPixelOptimize:!0,shape:(i=[e,n[0]],r=[e,n[1]],o=BR(t),{x1:i[o=o||0],y1:i[1-o],x2:r[o],y2:r[1-o]})}},shadow:function(t,e,n){var i,r,o,s=Math.max(1,t.getBandWidth()),a=n[1]-n[0];return{type:"Rect",shape:(i=[e-s/2,n[0]],r=[s,a],o=BR(t),{x:i[o=o||0],y:i[1-o],width:r[o],height:r[1-o]})}}};function BR(t){return"x"===t.dim?0:1}var UR=LR,VR=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return gm(e,t),e.type="axisPointer",e.defaultOption={show:"auto",zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(ck),HR=Yw(),WR=Wm;function jR(t,e,n){if(!wm.node){var i=e.getZr();HR(i).records||(HR(i).records={}),function(t,e){if(HR(t).initialized)return;function n(n,i){t.on(n,(function(n){var r=function(t){var e={showTip:[],hideTip:[]},n=function(i){var r=e[i.type];r?r.push(i):(i.dispatchAction=n,t.dispatchAction(i))};return{dispatchAction:n,pendings:e}}(e);WR(HR(t).records,(function(t){t&&i(t,n,r.dispatchAction)})),function(t,e){var n,i=t.showTip.length,r=t.hideTip.length;i?n=t.showTip[i-1]:r&&(n=t.hideTip[r-1]);n&&(n.dispatchAction=null,e.dispatchAction(n))}(r.pendings,e)}))}HR(t).initialized=!0,n("click",Xm(GR,"click")),n("mousemove",Xm(GR,"mousemove")),n("globalout",qR)}(i,e),(HR(i).records[t]||(HR(i).records[t]={})).handler=n}}function qR(t,e,n){t.handler("leave",null,n)}function GR(t,e,n,i){e.handler(t,n,i)}function YR(t,e){if(!wm.node){var n=e.getZr();(HR(n).records||{})[t]&&(HR(n).records[t]=null)}}var $R=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return gm(e,t),e.prototype.render=function(t,e,n){var i=e.getComponent("tooltip"),r=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";jR("axisPointer",n,(function(t,e,n){"none"!==r&&("leave"===t||r.indexOf(t)>=0)&&n({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})}))},e.prototype.remove=function(t,e){YR("axisPointer",e)},e.prototype.dispose=function(t,e){YR("axisPointer",e)},e.type="axisPointer",e}(ED);function XR(t,e){var n,i=[],r=t.seriesIndex;if(null==r||!(n=e.getSeriesByIndex(r)))return{point:[]};var o=n.getData(),s=Gw(o,t);if(null==s||s<0||Km(s))return{point:[]};var a=o.getItemGraphicEl(s),l=n.coordinateSystem;if(n.getTooltipPosition)i=n.getTooltipPosition(s)||[];else if(l&&l.dataToPoint)if(t.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u).dim,h=u.dim,d="x"===c||"radius"===c?1:0,p=o.mapDimension(h),f=[];f[d]=o.get(p,s),f[1-d]=o.get(o.getCalculationInfo("stackResultDimension"),s),i=l.dataToPoint(f)||[]}else i=l.dataToPoint(o.getValues(jm(l.dimensions,(function(t){return o.mapDimension(t)})),s))||[];else if(a){var g=a.getBoundingRect().clone();g.applyTransform(a.transform),i=[g.x+g.width/2,g.y+g.height/2]}return{point:i,el:a}}var KR=Yw();function ZR(t,e,n){var i=t.currTrigger,r=[t.x,t.y],o=t,s=t.dispatchAction||$m(n.dispatchAction,n),a=e.getComponent("axisPointer").coordSysAxesInfo;if(a){nN(r)&&(r=XR({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},e).point);var l=nN(r),u=o.axesInfo,c=a.axesInfo,h="leave"===i||nN(r),d={},p={},f={list:[],map:{}},g={showPointer:Xm(QR,p),showTooltip:Xm(tN,f)};Wm(a.coordSysMap,(function(t,e){var n=l||t.containPoint(r);Wm(a.coordSysAxesInfo[e],(function(t,e){var i=t.axis,o=function(t,e){for(var n=0;n<(t||[]).length;n++){var i=t[n];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex)return i}}(u,t);if(!h&&n&&(!u||o)){var s=o&&o.value;null!=s||l||(s=i.pointToData(r)),null!=s&&JR(t,s,g,!1,d)}}))}));var m={};return Wm(c,(function(t,e){var n=t.linkGroup;n&&!p[e]&&Wm(n.axesInfo,(function(e,i){var r=p[i];if(e!==t&&r){var o=r.value;n.mapper&&(o=t.axis.scale.parse(n.mapper(o,eN(e),eN(t)))),m[t.key]=o}}))})),Wm(m,(function(t,e){JR(c[e],t,g,!0,d)})),function(t,e,n){var i=n.axesInfo=[];Wm(e,(function(e,n){var r=e.axisPointerModel.option,o=t[n];o?(!e.useHandle&&(r.status="show"),r.value=o.value,r.seriesDataIndices=(o.payloadBatch||[]).slice()):!e.useHandle&&(r.status="hide"),"show"===r.status&&i.push({axisDim:e.axis.dim,axisIndex:e.axis.model.componentIndex,value:r.value})}))}(p,c,d),function(t,e,n,i){if(nN(e)||!t.list.length)return void i({type:"hideTip"});var r=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:t.list})}(f,r,t,s),function(t,e,n){var i=n.getZr(),r="axisPointerLastHighlights",o=KR(i)[r]||{},s=KR(i)[r]={};Wm(t,(function(t,e){var n=t.axisPointerModel.option;"show"===n.status&&Wm(n.seriesDataIndices,(function(t){var e=t.seriesIndex+" | "+t.dataIndex;s[e]=t}))}));var a=[],l=[];Wm(o,(function(t,e){!s[e]&&l.push(t)})),Wm(s,(function(t,e){!o[e]&&a.push(t)})),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),a.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:a})}(c,0,n),d}}function JR(t,e,n,i,r){var o=t.axis;if(!o.scale.isBlank()&&o.containData(e))if(t.involveSeries){var s=function(t,e){var n=e.axis,i=n.dim,r=t,o=[],s=Number.MAX_VALUE,a=-1;return Wm(e.seriesModels,(function(e,l){var u,c,h=e.getData().mapDimensionsAll(i);if(e.getAxisTooltipData){var d=e.getAxisTooltipData(h,t,n);c=d.dataIndices,u=d.nestestValue}else{if(!(c=e.getData().indicesOfNearest(h[0],t,"category"===n.type?.5:null)).length)return;u=e.getData().get(h[0],c[0])}if(null!=u&&isFinite(u)){var p=t-u,f=Math.abs(p);f<=s&&((f<s||p>=0&&a<0)&&(s=f,a=p,r=u,o.length=0),Wm(c,(function(t){o.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})})))}})),{payloadBatch:o,snapToValue:r}}(e,t),a=s.payloadBatch,l=s.snapToValue;a[0]&&null==r.seriesIndex&&Fm(r,a[0]),!i&&t.snap&&o.containData(l)&&null!=l&&(e=l),n.showPointer(t,e,a),n.showTooltip(t,s,l)}else n.showPointer(t,e)}function QR(t,e,n,i){t[e.key]={value:n,payloadBatch:i}}function tN(t,e,n,i){var r=n.payloadBatch,o=e.axis,s=o.model,a=e.axisPointerModel;if(e.triggerTooltip&&r.length){var l=e.coordSys.model,u=xR(l),c=t.map[u];c||(c=t.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:i,valueLabelOpt:{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])},seriesDataIndices:r.slice()})}}function eN(t){var e=t.axis.model,n={},i=n.axisDim=t.axis.dim;return n.axisIndex=n[i+"AxisIndex"]=e.componentIndex,n.axisName=n[i+"AxisName"]=e.name,n.axisId=n[i+"AxisId"]=e.id,n}function nN(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}function iN(t){CR.registerAxisPointerClass("CartesianAxisPointer",UR),t.registerComponentModel(VR),t.registerComponentView($R),t.registerPreprocessor((function(t){if(t){(!t.axisPointer||0===t.axisPointer.length)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!Km(e)&&(t.axisPointer.link=[e])}})),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,(function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=yR(t,e)})),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},ZR)}var rN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return gm(e,t),e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(ck);function oN(t){var e=t.get("confine");return null!=e?!!e:"richText"===t.get("renderMode")}function sN(t){if(wm.domSupported)for(var e=document.documentElement.style,n=0,i=t.length;n<i;n++)if(t[n]in e)return t[n]}var aN=sN(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function lN(t,e){if(!t)return e;e=HI(e,!0);var n=t.indexOf(e);return(t=-1===n?e:"-"+t.slice(0,n)+"-"+e).toLowerCase()}var uN=lN(sN(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),cN=lN(aN,"transform"),hN="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(wm.transform3dSupported?"will-change:transform;":"");function dN(t,e,n){var i=t.toFixed(0)+"px",r=e.toFixed(0)+"px";if(!wm.transformSupported)return n?"top:"+r+";left:"+i+";":[["top",r],["left",i]];var o=wm.transform3dSupported,s="translate"+(o?"3d":"")+"("+i+","+r+(o?",0":"")+")";return n?"top:0;left:0;"+cN+":"+s+";":[["top",0],["left",0],[aN,s]]}function pN(t,e,n){var i=[],r=t.get("transitionDuration"),o=t.get("backgroundColor"),s=t.get("shadowBlur"),a=t.get("shadowColor"),l=t.get("shadowOffsetX"),u=t.get("shadowOffsetY"),c=t.getModel("textStyle"),h=yD(t,"html"),d=l+"px "+u+"px "+s+"px "+a;return i.push("box-shadow:"+d),e&&r&&i.push(function(t,e){var n="cubic-bezier(0.23,1,0.32,1)",i=" "+t/2+"s "+n,r="opacity"+i+",visibility"+i;return e||(i=" "+t+"s "+n,r+=wm.transformSupported?","+cN+i:",left"+i+",top"+i),uN+":"+r}(r,n)),o&&(wm.canvasSupported?i.push("background-color:"+o):(i.push("background-color:#"+function(t){var e=Lv(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}(o)),i.push("filter:alpha(opacity=70)"))),Wm(["width","color","radius"],(function(e){var n="border-"+e,r=HI(n),o=t.get(r);null!=o&&i.push(n+":"+o+("color"===e?"":"px"))})),i.push(function(t){var e=[],n=t.get("fontSize"),i=t.getTextColor();i&&e.push("color:"+i),e.push("font:"+t.getFont()),n&&e.push("line-height:"+Math.round(3*n/2)+"px");var r=t.get("textShadowColor"),o=t.get("textShadowBlur")||0,s=t.get("textShadowOffsetX")||0,a=t.get("textShadowOffsetY")||0;return r&&o&&e.push("text-shadow:"+s+"px "+a+"px "+o+"px "+r),Wm(["decoration","align"],(function(n){var i=t.get(n);i&&e.push("text-"+n+":"+i)})),e.join(";")}(c)),null!=h&&i.push("padding:"+WI(h).join("px ")+"px"),i.join(";")+";"}function fN(t,e,n,i,r){var o=e&&e.painter;if(n){var s=o&&o.getViewportRoot();s&&function(t,e,n,i,r){Vy(Uy,e,i,r,!0)&&Vy(t,n,Uy[0],Uy[1])}(t,s,document.body,i,r)}else{t[0]=i,t[1]=r;var a=o&&o.getViewportRootOffset();a&&(t[0]+=a.offsetLeft,t[1]+=a.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var gN=function(){function t(t,e,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,wm.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var r=this._zr=e.getZr(),o=this._appendToBody=n&&n.appendToBody;fN(this._styleCoord,r,o,e.getWidth()/2,e.getHeight()/2),o?document.body.appendChild(i):t.appendChild(i),this._container=t;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(t){if(t=t||window.event,!s._enterable){var e=r.handler;Xy(r.painter.getViewportRoot(),t,!0),e.dispatch("mousemove",t)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return t.prototype.update=function(t){var e,n,i,r=this._container,o=(n="position",(i=(e=r).currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e))?n?i[n]:i:null),s=r.style;"absolute"!==s.position&&"absolute"!==o&&(s.position="relative"),t.get("alwaysShowContent")&&this._moveIfResized(),this.el.className=t.get("className")||""},t.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,r=this._styleCoord;n.innerHTML?i.cssText=hN+pN(t,!this._firstShow,this._longHide)+dN(r[0],r[1],!0)+"border-color:"+ZI(e)+";"+(t.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(t,e,n,i,r){var o=this.el;if(null!=t){var s="";if(Jm(r)&&"item"===n.get("trigger")&&!oN(n)&&(s=function(t,e,n){if(!Jm(n)||"inside"===n)return"";var i=t.get("backgroundColor"),r=t.get("borderWidth");e=ZI(e);var o,s,a="left"===(o=n)?"right":"right"===o?"left":"top"===o?"bottom":"top",l=Math.max(1.5*Math.round(r),6),u="",c=cN+":";Um(["left","right"],a)>-1?(u+="top:50%",c+="translateY(-50%) rotate("+(s="left"===a?-225:-45)+"deg)"):(u+="left:50%",c+="translateX(-50%) rotate("+(s="top"===a?225:45)+"deg)");var h=s*Math.PI/180,d=l+r,p=d*Math.abs(Math.cos(h))+d*Math.abs(Math.sin(h)),f=e+" solid "+r+"px;";return'<div style="'+["position:absolute;width:"+l+"px;height:"+l+"px;",(u+=";"+a+":-"+Math.round(100*((p-Math.SQRT2*r)/2+Math.SQRT2*r-(p-d)/2))/100+"px")+";"+c+";","border-bottom:"+f,"border-right:"+f,"background-color:"+i+";"].join("")+'"></div>'}(n,i,r)),Jm(t))o.innerHTML=t+s;else if(t){o.innerHTML="",Km(t)||(t=[t]);for(var a=0;a<t.length;a++)ry(t[a])&&t[a].parentNode!==o&&o.appendChild(t[a]);if(s&&o.childNodes.length){var l=document.createElement("div");l.innerHTML=s,o.appendChild(l)}}}else o.innerHTML=""},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},t.prototype.moveTo=function(t,e){var n=this._styleCoord;if(fN(n,this._zr,this._appendToBody,t,e),null!=n[0]&&null!=n[1]){var i=this.el.style;Wm(dN(n[0],n[1]),(function(t){i[t[0]]=t[1]}))}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",wm.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout((function(){return t._longHide=!0}),500)},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout($m(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},t}();function mN(t){return Math.max(0,t)}function yN(t){var e=mN(t.shadowBlur||0),n=mN(t.shadowOffsetX||0),i=mN(t.shadowOffsetY||0);return{left:mN(e-n),right:mN(e+n),top:mN(e-i),bottom:mN(e+i)}}function vN(t,e,n,i){t[0]=n,t[1]=i,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var _N=function(){function t(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),vN(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return t.prototype.update=function(t){t.get("alwaysShowContent")&&this._moveIfResized()},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(t,e,n,i,r){ey(t)&&Rw(""),this.el&&this._zr.remove(this.el);var o=n.getModel("textStyle");this.el=new AS({style:{rich:e.richTextStyles,text:t,lineHeight:22,backgroundColor:n.get("backgroundColor"),borderRadius:n.get("borderRadius"),borderWidth:1,borderColor:i,shadowColor:n.get("shadowColor"),shadowBlur:n.get("shadowBlur"),shadowOffsetX:n.get("shadowOffsetX"),shadowOffsetY:n.get("shadowOffsetY"),textShadowColor:o.get("textShadowColor"),textShadowBlur:o.get("textShadowBlur")||0,textShadowOffsetX:o.get("textShadowOffsetX")||0,textShadowOffsetY:o.get("textShadowOffsetY")||0,fill:n.get(["textStyle","color"]),padding:yD(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),this._zr.add(this.el);var s=this;this.el.on("mouseover",(function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0})),this.el.on("mouseout",(function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1}))},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),n=yN(t.style);return[e.width+n.left+n.right,e.height+n.top+n.bottom]},t.prototype.moveTo=function(t,e){var n=this.el;if(n){var i=this._styleCoord;vN(i,this._zr,t,e),t=i[0],e=i[1];var r=n.style,o=mN(r.borderWidth||0),s=yN(r);n.x=t+o+s.left,n.y=e+o+s.top,n.markRedraw()}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout($m(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}(),wN=$m,bN=Wm,xN=Sw,SN=new _S({shape:{x:-1,y:-1,width:2,height:2}});function CN(t,e,n){var i,r=e.ecModel;n?(i=new EI(n,r,r),i=new EI(e.option,i,r)):i=e;for(var o=t.length-1;o>=0;o--){var s=t[o];s&&(s instanceof EI&&(s=s.get("tooltip",!0)),Jm(s)&&(s={formatter:s}),s&&(i=new EI(s,i,r)))}return i}function TN(t,e){return t.dispatchAction||$m(e.dispatchAction,e)}function IN(t){return"center"===t||"middle"===t}var kN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return gm(e,t),e.prototype.init=function(t,e){if(!wm.node){var n,i=t.getComponent("tooltip"),r=i.get("renderMode");this._renderMode="auto"===(n=r)?wm.domSupported?"html":"richText":n||"html",this._tooltipContent="richText"===this._renderMode?new _N(e):new gN(e.getDom(),e,{appendToBody:i.get("appendToBody",!0)})}},e.prototype.render=function(t,e,n){if(!wm.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n,this._alwaysShowContent=t.get("alwaysShowContent");var i=this._tooltipContent;i.update(t),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow()}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel.get("triggerOn");jR("itemTooltip",this._api,wN((function(e,n,i){"none"!==t&&(t.indexOf(e)>=0?this._tryShow(n,i):"leave"===e&&this._hide(i))}),this))},e.prototype._keepShow=function(){var t=this._tooltipModel,e=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout((function(){!n.isDisposed()&&i.manuallyShowTip(t,e,n,{x:i._lastX,y:i._lastY,dataByCoordSys:i._lastDataByCoordSys})}))}},e.prototype.manuallyShowTip=function(t,e,n,i){if(i.from!==this.uid&&!wm.node){var r=TN(i,n);this._ticket="";var o=i.dataByCoordSys,s=function(t,e,n){var i=Kw(t).queryOptionMap,r=i.keys()[0];if(!r||"series"===r)return;var o,s=Jw(e,r,i.get(r),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(!s)return;if(n.getViewOfComponentModel(s).group.traverse((function(e){var n=ES(e).tooltipConfig;if(n&&n.name===t.name)return o=e,!0})),o)return{componentMainType:r,componentIndex:s.componentIndex,el:o}}(i,e,n);if(s){var a=s.el.getBoundingRect().clone();a.applyTransform(s.el.transform),this._tryShow({offsetX:a.x+a.width/2,offsetY:a.y+a.height/2,target:s.el,position:i.position,positionDefault:"bottom"},r)}else if(i.tooltip&&null!=i.x&&null!=i.y){var l=SN;l.x=i.x,l.y=i.y,l.update(),ES(l).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:l},r)}else if(o)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:o,tooltipOption:i.tooltipOption},r);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,i))return;var u=XR(i,e),c=u.point[0],h=u.point[1];null!=c&&null!=h&&this._tryShow({offsetX:c,offsetY:h,target:u.el,position:i.position,positionDefault:"bottom"},r)}else null!=i.x&&null!=i.y&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},r))}},e.prototype.manuallyHideTip=function(t,e,n,i){var r=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&r.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(TN(i,n))},e.prototype._manuallyAxisShowTip=function(t,e,n,i){var r=i.seriesIndex,o=i.dataIndex,s=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=r&&null!=o&&null!=s){var a=e.getSeriesByIndex(r);if(a)if("axis"===CN([a.getData().getItemModel(o),a,(a.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:r,dataIndex:o,position:i.position}),!0}},e.prototype._tryShow=function(t,e){var n=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var i=t.dataByCoordSys;if(i&&i.length)this._showAxisTooltip(i,t);else if(n){var r,o;this._lastDataByCoordSys=null,TP(n,(function(t){return null!=ES(t).dataIndex?(r=t,!0):null!=ES(t).tooltipConfig?(o=t,!0):void 0}),!0),r?this._showSeriesItemTooltip(t,r,e):o?this._showComponentItemTooltip(t,o,e):this._hide(e)}else this._lastDataByCoordSys=null,this._hide(e)}},e.prototype._showOrMove=function(t,e){var n=t.get("showDelay");e=$m(e,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(e,n):e()},e.prototype._showAxisTooltip=function(t,e){var n=this._ecModel,i=this._tooltipModel,r=[e.offsetX,e.offsetY],o=CN([e.tooltipOption],i),s=this._renderMode,a=[],l=cD("section",{blocks:[],noHeader:!0}),u=[],c=new vD;bN(t,(function(t){bN(t.dataByAxis,(function(t){var e=n.getComponent(t.axisDim+"Axis",t.axisIndex),i=t.value;if(e&&null!=i){var r=RR(i,e.axis,n,t.seriesDataIndices,t.valueLabelOpt),o=cD("section",{header:r,noHeader:!hy(r),sortBlocks:!0,blocks:[]});l.blocks.push(o),Wm(t.seriesDataIndices,(function(l){var h=n.getSeriesByIndex(l.seriesIndex),d=l.dataIndexInside,p=h.getDataParams(d);if(!(p.dataIndex<0)){p.axisDim=t.axisDim,p.axisIndex=t.axisIndex,p.axisType=t.axisType,p.axisId=t.axisId,p.axisValue=CO(e.axis,{value:i}),p.axisValueLabel=r,p.marker=c.makeTooltipMarker("item",ZI(p.color),s);var f=NM(h.formatTooltip(d,!0,null));f.markupFragment&&o.blocks.push(f.markupFragment),f.markupText&&u.push(f.markupText),a.push(p)}}))}}))})),l.blocks.reverse(),u.reverse();var h=e.position,d=o.get("order"),p=pD(l,c,s,d,n.get("useUTC"),o.get("textStyle"));p&&u.unshift(p);var f="richText"===s?"\n\n":"<br/>",g=u.join(f);this._showOrMove(o,(function(){this._updateContentNotChangedOnAxis(t,a)?this._updatePosition(o,h,r[0],r[1],this._tooltipContent,a):this._showTooltipContent(o,g,a,Math.random()+"",r[0],r[1],h,null,c)}))},e.prototype._showSeriesItemTooltip=function(t,e,n){var i=this._ecModel,r=ES(e),o=r.seriesIndex,s=i.getSeriesByIndex(o),a=r.dataModel||s,l=r.dataIndex,u=r.dataType,c=a.getData(u),h=this._renderMode,d=t.positionDefault,p=CN([c.getItemModel(l),a,s&&(s.coordinateSystem||{}).model],this._tooltipModel,d?{position:d}:null),f=p.get("trigger");if(null==f||"item"===f){var g=a.getDataParams(l,u),m=new vD;g.marker=m.makeTooltipMarker("item",ZI(g.color),h);var y=NM(a.formatTooltip(l,!1,u)),v=p.get("order"),_=y.markupFragment?pD(y.markupFragment,m,h,v,i.get("useUTC"),p.get("textStyle")):y.markupText,w="item_"+a.name+"_"+l;this._showOrMove(p,(function(){this._showTooltipContent(p,_,g,w,t.offsetX,t.offsetY,t.position,t.target,m)})),n({type:"showTip",dataIndexInside:l,dataIndex:c.getRawIndex(l),seriesIndex:o,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,e,n){var i=ES(e),r=i.tooltipConfig.option||{};if(Jm(r)){r={content:r,formatter:r}}var o=[r],s=this._ecModel.getComponent(i.componentMainType,i.componentIndex);s&&o.push(s),o.push({formatter:r.content});var a=t.positionDefault,l=CN(o,this._tooltipModel,a?{position:a}:null),u=l.get("content"),c=Math.random()+"",h=new vD;this._showOrMove(l,(function(){var n=Nm(l.get("formatterParams")||{});this._showTooltipContent(l,u,n,c,t.offsetX,t.offsetY,t.position,e,h)})),n({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,e,n,i,r,o,s,a,l){if(this._ticket="",t.get("showContent")&&t.get("show")){var u=this._tooltipContent,c=t.get("formatter");s=s||t.get("position");var h=e,d=this._getNearestPoint([r,o],n,t.get("trigger"),t.get("borderColor")).color;if(c)if(Jm(c)){var p=t.ecModel.get("useUTC"),f=Km(n)?n[0]:n;h=c,f&&f.axisType&&f.axisType.indexOf("time")>=0&&(h=UI(f.axisValue,h,p)),h=KI(h,n,!0)}else if(Zm(c)){var g=wN((function(e,i){e===this._ticket&&(u.setContent(i,l,t,d,s),this._updatePosition(t,s,r,o,u,n,a))}),this);this._ticket=i,h=c(n,i,g)}else h=c;u.setContent(h,l,t,d,s),u.show(t,d),this._updatePosition(t,s,r,o,u,n,a)}},e.prototype._getNearestPoint=function(t,e,n,i){return"axis"===n||Km(e)?{color:i||("html"===this._renderMode?"#fff":"none")}:Km(e)?void 0:{color:i||e.color||e.borderColor}},e.prototype._updatePosition=function(t,e,n,i,r,o,s){var a=this._api.getWidth(),l=this._api.getHeight();e=e||t.get("position");var u=r.getSize(),c=t.get("align"),h=t.get("verticalAlign"),d=s&&s.getBoundingRect().clone();if(s&&d.applyTransform(s.transform),Zm(e)&&(e=e([n,i],o,r.el,d,{viewSize:[a,l],contentSize:u.slice()})),Km(e))n=xN(e[0],a),i=xN(e[1],l);else if(ey(e)){var p=e;p.width=u[0],p.height=u[1];var f=rk(p,{width:a,height:l});n=f.x,i=f.y,c=null,h=null}else if(Jm(e)&&s){var g=function(t,e,n,i){var r=n[0],o=n[1],s=Math.ceil(Math.SQRT2*i)+8,a=0,l=0,u=e.width,c=e.height;switch(t){case"inside":a=e.x+u/2-r/2,l=e.y+c/2-o/2;break;case"top":a=e.x+u/2-r/2,l=e.y-o-s;break;case"bottom":a=e.x+u/2-r/2,l=e.y+c+s;break;case"left":a=e.x-r-s,l=e.y+c/2-o/2;break;case"right":a=e.x+u+s,l=e.y+c/2-o/2}return[a,l]}(e,d,u,t.get("borderWidth"));n=g[0],i=g[1]}else{g=function(t,e,n,i,r,o,s){var a=n.getSize(),l=a[0],u=a[1];null!=o&&(t+l+o+2>i?t-=l+o:t+=o);null!=s&&(e+u+s>r?e-=u+s:e+=s);return[t,e]}(n,i,r,a,l,c?null:20,h?null:20);n=g[0],i=g[1]}if(c&&(n-=IN(c)?u[0]/2:"right"===c?u[0]:0),h&&(i-=IN(h)?u[1]/2:"bottom"===h?u[1]:0),oN(t)){g=function(t,e,n,i,r){var o=n.getSize(),s=o[0],a=o[1];return t=Math.min(t+s,i)-s,e=Math.min(e+a,r)-a,t=Math.max(t,0),e=Math.max(e,0),[t,e]}(n,i,r,a,l);n=g[0],i=g[1]}r.moveTo(n,i)},e.prototype._updateContentNotChangedOnAxis=function(t,e){var n=this._lastDataByCoordSys,i=this._cbParamsList,r=!!n&&n.length===t.length;return r&&bN(n,(function(n,o){var s=n.dataByAxis||[],a=(t[o]||{}).dataByAxis||[];(r=r&&s.length===a.length)&&bN(s,(function(t,n){var o=a[n]||{},s=t.seriesDataIndices||[],l=o.seriesDataIndices||[];(r=r&&t.value===o.value&&t.axisType===o.axisType&&t.axisId===o.axisId&&s.length===l.length)&&bN(s,(function(t,e){var n=l[e];r=r&&t.seriesIndex===n.seriesIndex&&t.dataIndex===n.dataIndex})),i&&Wm(t.seriesDataIndices,(function(t){var n=t.seriesIndex,o=e[n],s=i[n];o&&s&&s.data!==o.data&&(r=!1)}))}))})),this._lastDataByCoordSys=t,this._cbParamsList=e,!!r},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,e){wm.node||(this._tooltipContent.dispose(),YR("itemTooltip",e))},e.type="tooltip",e}(ED);function MN(t){kO(iN),t.registerComponentModel(rN),t.registerComponentView(kN),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},(function(){})),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},(function(){}))}var DN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return gm(e,t),e.type="title",e.defaultOption={zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(ck),PN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return gm(e,t),e.prototype.render=function(t,e,n){if(this.group.removeAll(),t.get("show")){var i=this.group,r=t.getModel("textStyle"),o=t.getModel("subtextStyle"),s=t.get("textAlign"),a=sy(t.get("textBaseline"),t.get("textVerticalAlign")),l=new AS({style:pI(r,{text:t.get("text"),fill:r.getTextColor()},{disableBox:!0}),z2:10}),u=l.getBoundingRect(),c=t.get("subtext"),h=new AS({style:pI(o,{text:c,fill:o.getTextColor(),y:u.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),d=t.get("link"),p=t.get("sublink"),f=t.get("triggerEvent",!0);l.silent=!d&&!f,h.silent=!p&&!f,d&&l.on("click",(function(){JI(d,"_"+t.get("target"))})),p&&h.on("click",(function(){JI(p,"_"+t.get("subtarget"))})),ES(l).eventData=ES(h).eventData=f?{componentType:"title",componentIndex:t.componentIndex}:null,i.add(l),c&&i.add(h);var g=i.getBoundingRect(),m=t.getBoxLayoutParams();m.width=g.width,m.height=g.height;var y=rk(m,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));s||("middle"===(s=t.get("left")||t.get("right"))&&(s="center"),"right"===s?y.x+=y.width:"center"===s&&(y.x+=y.width/2)),a||("center"===(a=t.get("top")||t.get("bottom"))&&(a="middle"),"bottom"===a?y.y+=y.height:"middle"===a&&(y.y+=y.height/2),a=a||"top"),i.x=y.x,i.y=y.y,i.markRedraw();var v={align:s,verticalAlign:a};l.setStyle(v),h.setStyle(v),g=i.getBoundingRect();var _=y.margin,w=t.getItemStyle(["color","opacity"]);w.fill=t.get("backgroundColor");var b=new _S({shape:{x:g.x-_[3],y:g.y-_[0],width:g.width+_[1]+_[3],height:g.height+_[0]+_[2],r:t.get("borderRadius")},style:w,subPixelOptimize:!0,silent:!0});i.add(b)}},e.type="title",e}(ED);function AN(t){t.registerComponentModel(DN),t.registerComponentView(PN)}var EN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return gm(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),this._updateSelector(e)},e.prototype._updateSelector=function(t){var e=t.selector,n=this.ecModel;!0===e&&(e=t.selector=["all","inverse"]),Km(e)&&Wm(e,(function(t,i){Jm(t)&&(t={type:t}),e[i]=Lm(t,function(t,e){return"all"===e?{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])}:"inverse"===e?{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(n,t.type))}))},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,n=0;n<t.length;n++){var i=t[n].get("name");if(this.isSelected(i)){this.select(i),e=!0;break}}!e&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var e=[],n=[];t.eachRawSeries((function(i){var r,o=i.name;if(n.push(o),i.legendVisualProvider){var s=i.legendVisualProvider.getAllNames();t.isSeriesFiltered(i)||(n=n.concat(s)),s.length?e=e.concat(s):r=!0}else r=!0;r&&jw(i)&&e.push(i.name)})),this._availableNames=n;var i=jm(this.get("data")||e,(function(t){return"string"!=typeof t&&"number"!=typeof t||(t={name:t}),new EI(t,this,this.ecModel)}),this);this._data=i},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var e=this.option.selected;"single"===this.get("selectedMode")&&Wm(this._data,(function(t){e[t.get("name")]=!1}));e[t]=!0},e.prototype.unSelect=function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,e=this.option.selected;Wm(t,(function(t){e[t.get("name",!0)]=!0}))},e.prototype.inverseSelect=function(){var t=this._data,e=this.option.selected;Wm(t,(function(t){var n=t.get("name",!0);e.hasOwnProperty(n)||(e[n]=!0),e[n]=!e[n]}))},e.prototype.isSelected=function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&Um(this._availableNames,t)>=0},e.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",decal:"inherit",shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit",shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(ck),ON=Xm,RN=Wm,NN=mw;function LN(t,e,n,i){BN(t,e,n,i),n.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),zN(t,e,n,i)}function FN(t){for(var e,n=t.getZr().storage.getDisplayList(),i=0,r=n.length;i<r&&!(e=n[i].states.emphasis);)i++;return e&&e.hoverLayer}function zN(t,e,n,i){FN(n)||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:i})}function BN(t,e,n,i){FN(n)||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:i})}var UN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!1,n}return gm(e,t),e.prototype.init=function(){this.group.add(this._contentGroup=new NN),this.group.add(this._selectorGroup=new NN),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,e,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var r=t.get("align"),o=t.get("orient");r&&"auto"!==r||(r="right"===t.get("left")&&"vertical"===o?"right":"left");var s=t.get("selector",!0),a=t.get("selectorPosition",!0);!s||a&&"auto"!==a||(a="horizontal"===o?"end":"start"),this.renderInner(r,t,e,n,s,o,a);var l=t.getBoxLayoutParams(),u={width:n.getWidth(),height:n.getHeight()},c=t.get("padding"),h=rk(l,u,c),d=this.layoutInner(t,r,h,i,s,a),p=rk(zm({width:d.width,height:d.height},l),u,c);this.group.x=p.x-d.x,this.group.y=p.y-d.y,this.group.markRedraw(),this.group.add(this._backgroundEl=function(t,e){var n=WI(e.get("padding")),i=e.getItemStyle(["color","opacity"]);return i.fill=e.get("backgroundColor"),new _S({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1})}(d,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,e,n,i,r,o,s){var a=this.getContentGroup(),l=gy(),u=e.get("selectedMode"),c=[];n.eachRawSeries((function(t){!t.get("legendHoverLink")&&c.push(t.id)})),RN(e.getData(),(function(r,o){var s=r.get("name");if(!this.newlineDisabled&&(""===s||"\n"===s)){var h=new NN;return h.newline=!0,void a.add(h)}var d=n.getSeriesByName(s)[0];if(!l.get(s))if(d){var p=d.getData(),f=p.getVisual("legendLineStyle")||{},g=p.getVisual("legendIcon"),m=p.getVisual("style");this._createItem(d,s,o,r,e,t,f,m,g,u).on("click",ON(LN,s,null,i,c)).on("mouseover",ON(zN,d.name,null,i,c)).on("mouseout",ON(BN,d.name,null,i,c)),l.set(s,!0)}else n.eachRawSeries((function(n){if(!l.get(s)&&n.legendVisualProvider){var a=n.legendVisualProvider;if(!a.containName(s))return;var h=a.indexOfName(s),d=a.getItemVisual(h,"style"),p=a.getItemVisual(h,"legendIcon"),f=Lv(d.fill);f&&0===f[3]&&(f[3]=.2,d.fill=zv(f,"rgba")),this._createItem(n,s,o,r,e,t,{},d,p,u).on("click",ON(LN,null,s,i,c)).on("mouseover",ON(zN,null,s,i,c)).on("mouseout",ON(BN,null,s,i,c)),l.set(s,!0)}}),this)}),this),r&&this._createSelector(r,e,i,o,s)},e.prototype._createSelector=function(t,e,n,i,r){var o=this.getSelectorGroup();RN(t,(function(t){var i=t.type,r=new AS({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===i?"legendAllSelect":"legendInverseSelect"})}});o.add(r),dI(r,{normal:e.getModel("selectorLabel"),emphasis:e.getModel(["emphasis","selectorLabel"])},{defaultText:t.title}),dC(r)}))},e.prototype._createItem=function(t,e,n,i,r,o,s,a,l,u){var c=t.visualDrawType,h=r.get("itemWidth"),d=r.get("itemHeight"),p=r.isSelected(e),f=i.get("symbolRotate"),g=i.get("icon"),m=function(t,e,n,i,r,o,s){for(var a=e.getModel("itemStyle"),l=MI.concat([["decal"]]),u={},c=0;c<l.length;++c){var h=l[c][l[c].length-1],d=l[c][0];if("inherit"===(m=a.getShallow(h)))switch(d){case"fill":u.fill=r[o];break;case"stroke":u.stroke=r[0===t.lastIndexOf("empty",0)?"fill":"stroke"];break;case"opacity":u.opacity=("fill"===o?r:i).opacity;break;default:u[d]=r[d]}else"auto"===m&&"lineWidth"===d?u.lineWidth=r.lineWidth>0?2:0:u[d]=m}var p=e.getModel("lineStyle"),f=TI.concat([["inactiveColor"],["inactiveWidth"]]),g={};for(c=0;c<f.length;++c){var m;h=f[c][1],d=f[c][0];"inherit"===(m=p.getShallow(h))?g[d]=i[d]:"auto"===m&&"lineWidth"===d?g.lineWidth=i.lineWidth>0?2:0:g[d]=m}if("auto"===u.fill&&(u.fill=r.fill),"auto"===u.stroke&&(u.stroke=r.fill),"auto"===g.stroke&&(g.stroke=r.fill),!s){var y=e.get("inactiveBorderWidth"),v=u[t.indexOf("empty")>-1?"fill":"stroke"];u.lineWidth="auto"===y?r.lineWidth>0&&v?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),g.stroke=n.get("inactiveColor"),g.lineWidth=n.get("inactiveWidth")}return{itemStyle:u,lineStyle:g}}(l=g||l||"roundRect",i,r.getModel("lineStyle"),s,a,c,p),y=new NN,v=i.getModel("textStyle");if("function"!=typeof t.getLegendIcon||g&&"inherit"!==g){var _="inherit"===g&&t.getData().getVisual("symbol")?"inherit"===f?t.getData().getVisual("symbolRotate"):f:0;y.add(function(t){var e=t.icon||"roundRect",n=FP(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);n.setStyle(t.itemStyle),n.rotation=(t.iconRotate||0)*Math.PI/180,n.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2);return n}({itemWidth:h,itemHeight:d,icon:l,iconRotate:_,itemStyle:m.itemStyle,lineStyle:m.lineStyle}))}else y.add(t.getLegendIcon({itemWidth:h,itemHeight:d,icon:l,iconRotate:f,itemStyle:m.itemStyle,lineStyle:m.lineStyle}));var w="left"===o?h+5:-5,b=o,x=r.get("formatter"),S=e;"string"==typeof x&&x?S=x.replace("{name}",null!=e?e:""):"function"==typeof x&&(S=x(e));var C=i.get("inactiveColor");y.add(new AS({style:pI(v,{text:S,x:w,y:d/2,fill:p?v.getTextColor():C,align:b,verticalAlign:"middle"})}));var T=new _S({shape:y.getBoundingRect(),invisible:!0}),I=i.getModel("tooltip");return I.get("show")&&lI({el:T,componentModel:r,itemName:e,itemTooltipOption:I.option}),y.add(T),y.eachChild((function(t){t.silent=!0})),T.silent=!u,this.getContentGroup().add(y),dC(y),y.__legendDataIndex=n,y},e.prototype.layoutInner=function(t,e,n,i,r,o){var s=this.getContentGroup(),a=this.getSelectorGroup();ik(t.get("orient"),s,t.get("itemGap"),n.width,n.height);var l=s.getBoundingRect(),u=[-l.x,-l.y];if(a.markRedraw(),s.markRedraw(),r){ik("horizontal",a,t.get("selectorItemGap",!0));var c=a.getBoundingRect(),h=[-c.x,-c.y],d=t.get("selectorButtonGap",!0),p=t.getOrient().index,f=0===p?"width":"height",g=0===p?"height":"width",m=0===p?"y":"x";"end"===o?h[p]+=l[f]+d:u[p]+=c[f]+d,h[1-p]+=l[g]/2-c[g]/2,a.x=h[0],a.y=h[1],s.x=u[0],s.y=u[1];var y={x:0,y:0};return y[f]=l[f]+d+c[f],y[g]=Math.max(l[g],c[g]),y[m]=Math.min(0,c[m]+h[1-p]),y}return s.x=u[0],s.y=u[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(ED);function VN(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries((function(t){for(var n=0;n<e.length;n++)if(!e[n].isSelected(t.name))return!1;return!0}))}function HN(t,e,n){var i,r={},o="toggleSelected"===t;return n.eachComponent("legend",(function(n){o&&null!=i?n[i?"select":"unSelect"](e.name):"allSelect"===t||"inverseSelect"===t?n[t]():(n[t](e.name),i=n.isSelected(e.name)),Wm(n.getData(),(function(t){var e=t.get("name");if("\n"!==e&&""!==e){var i=n.isSelected(e);r.hasOwnProperty(e)?r[e]=r[e]&&i:r[e]=i}}))})),"allSelect"===t||"inverseSelect"===t?{selected:r}:{name:e.name,selected:r}}function WN(t){t.registerComponentModel(EN),t.registerComponentView(UN),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,VN),t.registerSubTypeDefaulter("legend",(function(){return"plain"})),function(t){t.registerAction("legendToggleSelect","legendselectchanged",Xm(HN,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",Xm(HN,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",Xm(HN,"inverseSelect")),t.registerAction("legendSelect","legendselected",Xm(HN,"select")),t.registerAction("legendUnSelect","legendunselected",Xm(HN,"unSelect"))}(t)}function jN(t,e,n){var i=[1,1];i[t.getOrient().index]=0,sk(e,n,{type:"box",ignoreSize:!!i})}var qN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}var n,i;return gm(e,t),e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(e,n,i){var r=ak(e);t.prototype.init.call(this,e,n,i),jN(this,e,r)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),jN(this,this.option,e)},e.type="legend.scroll",e.defaultOption=(n=EN.defaultOption,i={scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},Lm(Lm({},n,!0),i,!0)),e}(EN),GN=mw,YN=["width","height"],$N=["x","y"],XN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!0,n._currentIndex=0,n}return gm(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new GN),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new GN)},e.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(e,n,i,r,o,s,a){var l=this;t.prototype.renderInner.call(this,e,n,i,r,o,s,a);var u=this._controllerGroup,c=n.get("pageIconSize",!0),h=Km(c)?c:[c,c];p("pagePrev",0);var d=n.getModel("pageTextStyle");function p(t,e){var i=t+"DataIndex",o=oI(n.get("pageIcons",!0)[n.getOrient().name][e],{onclick:$m(l._pageGo,l,i,n,r)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});o.name=t,u.add(o)}u.add(new AS({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1)},e.prototype.layoutInner=function(t,e,n,i,r,o){var s=this.getSelectorGroup(),a=t.getOrient().index,l=YN[a],u=$N[a],c=YN[1-a],h=$N[1-a];r&&ik("horizontal",s,t.get("selectorItemGap",!0));var d=t.get("selectorButtonGap",!0),p=s.getBoundingRect(),f=[-p.x,-p.y],g=Nm(n);r&&(g[l]=n[l]-p[l]-d);var m=this._layoutContentAndController(t,i,g,a,l,c,h,u);if(r){if("end"===o)f[a]+=m[l]+d;else{var y=p[l]+d;f[a]-=y,m[u]-=y}m[l]+=p[l]+d,f[1-a]+=m[h]+m[c]/2-p[c]/2,m[c]=Math.max(m[c],p[c]),m[h]=Math.min(m[h],p[h]+f[1-a]),s.x=f[0],s.y=f[1],s.markRedraw()}return m},e.prototype._layoutContentAndController=function(t,e,n,i,r,o,s,a){var l=this.getContentGroup(),u=this._containerGroup,c=this._controllerGroup;ik(t.get("orient"),l,t.get("itemGap"),i?n.width:null,i?null:n.height),ik("horizontal",c,t.get("pageButtonItemGap",!0));var h=l.getBoundingRect(),d=c.getBoundingRect(),p=this._showController=h[r]>n[r],f=[-h.x,-h.y];e||(f[i]=l[a]);var g=[0,0],m=[-d.x,-d.y],y=sy(t.get("pageButtonGap",!0),t.get("itemGap",!0));p&&("end"===t.get("pageButtonPosition",!0)?m[i]+=n[r]-d[r]:g[i]+=d[r]+y);m[1-i]+=h[o]/2-d[o]/2,l.setPosition(f),u.setPosition(g),c.setPosition(m);var v={x:0,y:0};if(v[r]=p?n[r]:h[r],v[o]=Math.max(h[o],d[o]),v[s]=Math.min(0,d[s]+m[1-i]),u.__rectSize=n[r],p){var _={x:0,y:0};_[r]=Math.max(n[r]-d[r]-y,0),_[o]=v[o],u.setClipPath(new _S({shape:_})),u.__rectSize=_[r]}else c.eachChild((function(t){t.attr({invisible:!0,silent:!0})}));var w=this._getPageInfo(t);return null!=w.pageIndex&&UT(l,{x:w.contentPosition[0],y:w.contentPosition[1]},p?t:null),this._updatePageInfoView(t,w),v},e.prototype._pageGo=function(t,e,n){var i=this._getPageInfo(e)[t];null!=i&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:e.id})},e.prototype._updatePageInfoView=function(t,e){var n=this._controllerGroup;Wm(["pagePrev","pageNext"],(function(i){var r=null!=e[i+"DataIndex"],o=n.childOfName(i);o&&(o.setStyle("fill",r?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),o.cursor=r?"pointer":"default")}));var i=n.childOfName("pageText"),r=t.get("pageFormatter"),o=e.pageIndex,s=null!=o?o+1:0,a=e.pageCount;i&&r&&i.setStyle("text",Jm(r)?r.replace("{current}",null==s?"":s+"").replace("{total}",null==a?"":a+""):r({current:s,total:a}))},e.prototype._getPageInfo=function(t){var e=t.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,r=t.getOrient().index,o=YN[r],s=$N[r],a=this._findTargetItemIndex(e),l=n.children(),u=l[a],c=l.length,h=c?1:0,d={contentPosition:[n.x,n.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!u)return d;var p=v(u);d.contentPosition[r]=-p.s;for(var f=a+1,g=p,m=p,y=null;f<=c;++f)(!(y=v(l[f]))&&m.e>g.s+i||y&&!_(y,g.s))&&(g=m.i>g.i?m:y)&&(null==d.pageNextDataIndex&&(d.pageNextDataIndex=g.i),++d.pageCount),m=y;for(f=a-1,g=p,m=p,y=null;f>=-1;--f)(y=v(l[f]))&&_(m,y.s)||!(g.i<m.i)||(m=g,null==d.pagePrevDataIndex&&(d.pagePrevDataIndex=g.i),++d.pageCount,++d.pageIndex),g=y;return d;function v(t){if(t){var e=t.getBoundingRect(),n=e[s]+t[s];return{s:n,e:n+e[o],i:t.__legendDataIndex}}}function _(t,e){return t.e>=e&&t.s<=e+i}},e.prototype._findTargetItemIndex=function(t){return this._showController?(this.getContentGroup().eachChild((function(i,r){var o=i.__legendDataIndex;null==n&&null!=o&&(n=r),o===t&&(e=r)})),null!=e?e:n):0;var e,n},e.type="legend.scroll",e}(UN);function KN(t){kO(WN),t.registerComponentModel(qN),t.registerComponentView(XN),function(t){t.registerAction("legendScroll","legendscroll",(function(t,e){var n=t.scrollDataIndex;null!=n&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},(function(t){t.setScrollDataIndex(n)}))}))}(t)}function ZN(t){kO(WN),kO(KN)}var JN=null;var QN=null;function tL(t,e){void 0===e&&(e={});var n=document.createElement(t);return Object.keys(e).forEach((function(t){n[t]=e[t]})),n}function eL(t,e,n){return(window.getComputedStyle(t,n||null)||{display:"none"})[e]}function nL(t){if(!document.documentElement.contains(t))return{detached:!0,rendered:!1};for(var e=t;e!==document;){if("none"===eL(e,"display"))return{detached:!1,rendered:!1};e=e.parentNode}return{detached:!1,rendered:!0}}var iL=0,rL=null;function oL(t,e){var n,i;if(t.__resize_mutation_handler__||(t.__resize_mutation_handler__=sL.bind(t)),!t.__resize_listeners__)if(t.__resize_listeners__=[],window.ResizeObserver){var r=t.offsetWidth,o=t.offsetHeight,s=new ResizeObserver((function(){(t.__resize_observer_triggered__||(t.__resize_observer_triggered__=!0,t.offsetWidth!==r||t.offsetHeight!==o))&&lL(t)})),a=nL(t),l=a.detached,u=a.rendered;t.__resize_observer_triggered__=!1===l&&!1===u,t.__resize_observer__=s,s.observe(t)}else if(t.attachEvent&&t.addEventListener)t.__resize_legacy_resize_handler__=function(){lL(t)},t.attachEvent("onresize",t.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",t.__resize_mutation_handler__);else if(iL||(n='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',(i=document.createElement("style")).styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n)),(document.querySelector("head")||document.body).appendChild(i),rL=i),function(t){var e=eL(t,"position");e&&"static"!==e||(t.style.position="relative");t.__resize_old_position__=e,t.__resize_last__={};var n=tL("div",{className:"resize-triggers"}),i=tL("div",{className:"resize-expand-trigger"}),r=tL("div"),o=tL("div",{className:"resize-contract-trigger"});i.appendChild(r),n.appendChild(i),n.appendChild(o),t.appendChild(n),t.__resize_triggers__={triggers:n,expand:i,expandChild:r,contract:o},uL(t),t.addEventListener("scroll",aL,!0),t.__resize_last__={width:t.offsetWidth,height:t.offsetHeight}}(t),t.__resize_rendered__=nL(t).rendered,window.MutationObserver){var c=new MutationObserver(t.__resize_mutation_handler__);c.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),t.__resize_mutation_observer__=c}t.__resize_listeners__.push(e),iL++}function sL(){var t=nL(this),e=t.rendered,n=t.detached;e!==this.__resize_rendered__&&(!n&&this.__resize_triggers__&&(uL(this),this.addEventListener("scroll",aL,!0)),this.__resize_rendered__=e,lL(this))}function aL(){var t,e,n=this;uL(this),this.__resize_raf__&&(t=this.__resize_raf__,QN||(QN=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),QN(t)),this.__resize_raf__=(e=function(){var t,e,i,r,o,s,a=(e=(t=n).__resize_last__,i=e.width,r=e.height,o=t.offsetWidth,s=t.offsetHeight,o!==i||s!==r?{width:o,height:s}:null);a&&(n.__resize_last__=a,lL(n))},JN||(JN=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),JN(e))}function lL(t){t&&t.__resize_listeners__&&t.__resize_listeners__.forEach((function(e){e.call(t,t)}))}function uL(t){var e=t.__resize_triggers__,n=e.expand,i=e.expandChild,r=e.contract,o=r.scrollWidth,s=r.scrollHeight,a=n.offsetWidth,l=n.offsetHeight,u=n.scrollWidth,c=n.scrollHeight;r.scrollLeft=o,r.scrollTop=s,i.style.width=a+1+"px",i.style.height=l+1+"px",n.scrollLeft=u,n.scrollTop=c}var cL=function(){return(cL=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},hL=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];var dL={autoresize:Boolean},pL={loading:Boolean,loadingOptions:Object},fL=[],gL=[];!function(t,e){if(t&&"undefined"!=typeof document){var n,i=!0===e.prepend?"prepend":"append",r=!0===e.singleTag,o="string"==typeof e.container?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(r){var s=fL.indexOf(o);-1===s&&(s=fL.push(o)-1,gL[s]={}),n=gL[s]&&gL[s][i]?gL[s][i]:gL[s][i]=a()}else n=a();65279===t.charCodeAt(0)&&(t=t.substring(1)),n.styleSheet?n.styleSheet.cssText+=t:n.appendChild(document.createTextNode(t))}function a(){var t=document.createElement("style");if(t.setAttribute("type","text/css"),e.attributes)for(var n=Object.keys(e.attributes),r=0;r<n.length;r++)t.setAttribute(n[r],e.attributes[n[r]]);var s="prepend"===i?"afterbegin":"beforeend";return o.insertAdjacentElement(s,t),t}}("x-vue-echarts{display:block;width:100%;height:100%}",{});var mL=/^on[^a-z]/,yL=function(t){return mL.test(t)},vL="ecTheme",_L=Fe({name:"echarts",props:cL(cL({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},dL),pL),inheritAttrs:!1,setup:function(t,e){var n=e.attrs,i=e.listeners,r=fe(),o=fe(),s=fe(),a=Le("ecTheme",null),l=Le("ecInitOptions",null),u=Le("ecUpdateOptions",null),c=function(t){const e=b(t)?new Array(t.length):{};for(const n in t)e[n]=be(t,n);return e}(t),h=c.autoresize,d=c.manualUpdate,p=c.loading,f=c.loadingOptions,g=Se((function(){return s.value||t.option||Object.create(null)})),m=Se((function(){return t.theme||ye(a)||{}})),y=Se((function(){return t.initOptions||ye(l)||{}})),v=Se((function(){return t.updateOptions||ye(u)||{}})),_=Se((function(){return function(t){var e={};for(var n in t)yL(n)||(e[n]=t[n]);return e}(n)}));function w(e){if(!o.value&&r.value){var s=o.value=UE(r.value,m.value,y.value);t.group&&(s.group=t.group);var a=i;a||(a={},Object.keys(n).filter((function(t){return 0===t.indexOf("on")&&t.length>2})).forEach((function(t){var e=t.charAt(2).toLowerCase()+t.slice(3);a[e]=n[t]}))),Object.keys(a).forEach((function(t){var e=a[t];e&&(0===t.indexOf("zr:")?s.getZr().on(t.slice(3).toLowerCase(),e):s.on(t.toLowerCase(),e))})),h.value?Wi((function(){!function(){if(s&&!s.isDisposed())try{s.resize()}catch(t){if("Cannot read property 'get' of undefined"===t.message)return;throw t}}(),l()})):l()}function l(){s.setOption(e||g.value,v.value)}}function x(){o.value&&(o.value.dispose(),o.value=void 0)}var S=null;Qi(d,(function(e){"function"==typeof S&&(S(),S=null),e||(S=Qi((function(){return t.option}),(function(t){t&&(o.value?o.value.setOption(t,v.value):w())}),{deep:!0}))}),{immediate:!0}),Qi([m,y],(function(){x(),w()}),{deep:!0}),Zi((function(){t.group&&o.value&&(o.value.group=t.group)}));var C,T,I,k=(C=o,T=w,I=Object.create(null),hL.forEach((function(t){var e;I[t]=(e=t,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(C.value||T(),!C.value)throw new Error("ECharts is not initialized yet.");return C.value[e].apply(C.value,t)})})),I);return function(t,e,n){var i=Le("ecLoadingOptions",{}),r=Se((function(){return cL(cL({},ye(i)),null==n?void 0:n.value)}));Zi((function(){var n=t.value;n&&(e.value?n.showLoading(r.value):n.hideLoading())}))}(o,p,f),function(t,e,n){var i=null;Qi([n,t,e],(function(t,e,n){var r=t[0],o=t[1],s=t[2];r&&o&&s&&(i=jD((function(){o.resize()}),100),oL(r,i)),n((function(){i&&r&&function(t,e){var n=t.__resize_listeners__;if(n){if(e&&n.splice(n.indexOf(e),1),!n.length||!e){if(t.detachEvent&&t.removeEventListener)return t.detachEvent("onresize",t.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",t.__resize_mutation_handler__);t.__resize_observer__?(t.__resize_observer__.unobserve(t),t.__resize_observer__.disconnect(),t.__resize_observer__=null):(t.__resize_mutation_observer__&&(t.__resize_mutation_observer__.disconnect(),t.__resize_mutation_observer__=null),t.removeEventListener("scroll",aL),t.removeChild(t.__resize_triggers__.triggers),t.__resize_triggers__=null),t.__resize_listeners__=null}!--iL&&rL&&rL.parentNode.removeChild(rL)}}(r,i)}))}))}(o,h,r),Ye((function(){t.option&&w()})),Ze(x),cL({chart:o,root:r,setOption:function(e,n){t.manualUpdate&&(s.value=e),o.value?o.value.setOption(e,n||{}):w(e)},nonEventAttrs:_},k)},render:function(){var t=cL({},this.nonEventAttrs);return t.ref="root",t.class=t.class?["echarts"].concat(t.class):"echarts",rr("x-vue-echarts",t)}});export{Xe as A,um as B,rm as C,im as D,Pe as E,Un as F,Rl as G,kn as H,Ir as I,Mr as J,om as K,kO as L,vL as M,Zn as N,GO as O,aR as P,AN as Q,MN as R,ZN as S,as as T,_L as U,co as V,Ar as W,Fn as a,ri as b,Kn as c,pm as d,ju as e,Ge as f,oh as g,ii as h,xa as i,li as j,si as k,_u as l,Gl as m,ee as n,Gn as o,Ne as p,di as q,pe as r,Vl as s,l as t,us as u,ye as v,a as w,ai as x,Le as y,cs as z};
